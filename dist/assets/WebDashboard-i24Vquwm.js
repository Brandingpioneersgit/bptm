import{j as e}from"./manager-dashboard-BSBEKJka.js";import{r as d}from"./react-vendor-z5qVsTvS.js";import{B as p,C as r,c as i,a as o,b as x,d as n}from"./input-U88YC0jj.js";import{T as G,a as O,b as N,c as v}from"./tabs-BUQ1ER9N.js";import{v as V,i as q,h as J,J as K,r as _,c as T,D as E,E as R,n as ee,j as F,l as se,x as te,g as le,K as ae,L as ce}from"./auth-out34swX.js";import"./shared-ui-DksRfdM8.js";import"./clients-Dg_kG3rU.js";import"./supabase-vendor-D6KV1zBy.js";import"./employees-C0R0oL0z.js";import"./forms-F81hZsoD.js";const ge=({userRole:a="employee"})=>{const[j,M]=d.useState([]),[W,B]=d.useState([]),[m,I]=d.useState({ytdAvgScore:0,lastMonthScore:0,activeProjects:0,avgNPS:0}),[g,L]=d.useState("all"),[h,A]=d.useState("all"),[b,U]=d.useState("all"),[$,k]=d.useState(!0);d.useEffect(()=>{const s=[{id:1,title:"E-commerce Website Redesign",client:"TechCorp",clientType:"Large",platform:"Shopify",totalPages:15,pagesApproved:12,status:"active",stage:"Development",startDate:"2024-01-01",estimatedCompletion:"2024-02-15",delayFlag:!1},{id:2,title:"Corporate Portfolio Site",client:"StartupXYZ",clientType:"SMB",platform:"WordPress",totalPages:8,pagesApproved:8,status:"completed",stage:"UAT",startDate:"2023-12-01",estimatedCompletion:"2024-01-20",delayFlag:!1},{id:3,title:"Custom Web Application",client:"FinanceInc",clientType:"Large",platform:"Custom",totalPages:25,pagesApproved:18,status:"active",stage:"QA",startDate:"2023-11-15",estimatedCompletion:"2024-01-30",delayFlag:!0}],t=[{id:1,month:"2024-01",projectId:1,projectTitle:"E-commerce Website Redesign",client:"TechCorp",platform:"Shopify",pagesApproved:12,pagesPlanned:15,homepageDesignScore:8.5,serviceDesignScore:8,pagespeedScore:85,meetings:3,nps:8.5,mentorScore:8,monthScore:82.5,status:"approved",deliveryScore:28,designScore:16.5,technicalScore:12,relationshipScore:13.5,businessScore:8,hygieneScore:4.5},{id:2,month:"2024-01",projectId:2,projectTitle:"Corporate Portfolio Site",client:"StartupXYZ",platform:"WordPress",pagesApproved:8,pagesPlanned:8,homepageDesignScore:9,serviceDesignScore:8.5,pagespeedScore:92,meetings:2,nps:9,mentorScore:8.5,monthScore:88,status:"approved",deliveryScore:35,designScore:17.5,technicalScore:15,relationshipScore:14.5,businessScore:6,hygieneScore:5},{id:3,month:"2023-12",projectId:1,projectTitle:"E-commerce Website Redesign",client:"TechCorp",platform:"Shopify",pagesApproved:8,pagesPlanned:15,homepageDesignScore:8,serviceDesignScore:7.5,pagespeedScore:78,meetings:4,nps:8,mentorScore:7.5,monthScore:75.5,status:"approved",deliveryScore:20,designScore:15.5,technicalScore:9,relationshipScore:13,businessScore:10,hygieneScore:4}];M(s),B(t);const l=t.filter(c=>c.status==="approved"),u=l.filter(c=>c.month>="2024-01"),C=l.filter(c=>c.month==="2024-01"),z=u.length>0?u.reduce((c,f)=>c+f.monthScore,0)/u.length:0,X=C.length>0?C.reduce((c,f)=>c+f.monthScore,0)/C.length:0,Y=s.filter(c=>c.status==="active").length,Z=l.length>0?l.reduce((c,f)=>c+f.nps,0)/l.length:0;I({ytdAvgScore:z,lastMonthScore:X,activeProjects:Y,avgNPS:Z}),k(!1)},[]);const D=s=>{const t={active:{color:"bg-blue-100 text-blue-800",text:"Active"},completed:{color:"bg-green-100 text-green-800",text:"Completed"},"on-hold":{color:"bg-yellow-100 text-yellow-800",text:"On Hold"},cancelled:{color:"bg-red-100 text-red-800",text:"Cancelled"}},l=t[s]||t.active;return e.jsx(n,{className:l.color,children:l.text})},H=s=>{const t={Design:{color:"bg-purple-100 text-purple-800",icon:ce},Development:{color:"bg-blue-100 text-blue-800",icon:ae},QA:{color:"bg-orange-100 text-orange-800",icon:F},UAT:{color:"bg-green-100 text-green-800",icon:le}},l=t[s]||t.Design,u=l.icon;return e.jsxs(n,{className:l.color,children:[e.jsx(u,{className:"w-3 h-3 mr-1"}),s]})},S=s=>s>=85?e.jsx(n,{className:"bg-green-100 text-green-800",children:"Excellent"}):s>=75?e.jsx(n,{className:"bg-blue-100 text-blue-800",children:"Good"}):s>=65?e.jsx(n,{className:"bg-yellow-100 text-yellow-800",children:"Fair"}):e.jsx(n,{className:"bg-red-100 text-red-800",children:"Needs Improvement"}),y=s=>s.toFixed(1),P=(s,t)=>t>0?Math.round(s/t*100):0,Q=j.filter(s=>!(g!=="all"&&s.client!==g||h!=="all"&&s.platform!==h||b!=="all"&&s.stage!==b)),w=W.filter(s=>{const t=j.find(l=>l.id===s.projectId);return!(!t||g!=="all"&&t.client!==g||h!=="all"&&t.platform!==h)});return $?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-lg",children:"Loading Web dashboard..."})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Web Development Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Project delivery and performance tracking"})]}),a==="employee"&&e.jsxs(p,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Add Monthly Data"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(r,{children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"YTD Avg Score"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y(m.ytdAvgScore)}),e.jsx("div",{className:"mt-1",children:S(m.ytdAvgScore)})]}),e.jsx(q,{className:"w-8 h-8 text-blue-600"})]})})}),e.jsx(r,{children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Last Month Score"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y(m.lastMonthScore)}),e.jsx("div",{className:"mt-1",children:S(m.lastMonthScore)})]}),e.jsx(J,{className:"w-8 h-8 text-green-600"})]})})}),e.jsx(r,{children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Projects"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.activeProjects})]}),e.jsx(K,{className:"w-8 h-8 text-purple-600"})]})})}),e.jsx(r,{children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg NPS (90d)"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y(m.avgNPS)})]}),e.jsx(_,{className:"w-8 h-8 text-orange-600"})]})})})]}),e.jsxs(G,{defaultValue:"performance",className:"space-y-4",children:[e.jsxs(O,{children:[e.jsx(N,{value:"performance",children:"Performance Table"}),(a==="admin"||a==="tl"||a==="pm")&&e.jsxs(e.Fragment,{children:[e.jsx(N,{value:"portfolio",children:"Portfolio View"}),e.jsx(N,{value:"team",children:"Team Overview"}),e.jsx(N,{value:"analytics",children:"Analytics"})]})]}),e.jsxs(v,{value:"performance",className:"space-y-4",children:[e.jsx(r,{children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Filters:"})]}),e.jsxs("select",{value:g,onChange:s=>L(s.target.value),className:"border rounded px-3 py-1 text-sm",children:[e.jsx("option",{value:"all",children:"All Clients"}),e.jsx("option",{value:"TechCorp",children:"TechCorp"}),e.jsx("option",{value:"StartupXYZ",children:"StartupXYZ"}),e.jsx("option",{value:"FinanceInc",children:"FinanceInc"})]}),e.jsxs("select",{value:h,onChange:s=>A(s.target.value),className:"border rounded px-3 py-1 text-sm",children:[e.jsx("option",{value:"all",children:"All Platforms"}),e.jsx("option",{value:"WordPress",children:"WordPress"}),e.jsx("option",{value:"Shopify",children:"Shopify"}),e.jsx("option",{value:"Custom",children:"Custom"})]}),(a==="admin"||a==="tl"||a==="pm")&&e.jsxs(p,{variant:"outline",size:"sm",children:[e.jsx(E,{className:"w-4 h-4 mr-1"})," Export"]})]})})}),e.jsxs(r,{children:[e.jsx(o,{children:e.jsx(x,{children:"Monthly Performance Entries"})}),e.jsx(i,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Month"}),e.jsx("th",{className:"text-left p-2",children:"Client/Project"}),e.jsx("th",{className:"text-left p-2",children:"Platform"}),e.jsx("th",{className:"text-left p-2",children:"Pages Approved/Planned"}),e.jsx("th",{className:"text-left p-2",children:"Design Quality"}),e.jsx("th",{className:"text-left p-2",children:"PSI (Home)"}),e.jsx("th",{className:"text-left p-2",children:"Meetings"}),e.jsx("th",{className:"text-left p-2",children:"NPS"}),e.jsx("th",{className:"text-left p-2",children:"Mentor"}),e.jsx("th",{className:"text-left p-2",children:"Month Score"}),e.jsx("th",{className:"text-left p-2",children:"Status"}),e.jsx("th",{className:"text-left p-2",children:"Actions"})]})}),e.jsx("tbody",{children:w.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"p-2 font-medium",children:s.month}),e.jsxs("td",{className:"p-2",children:[e.jsx("div",{className:"font-medium text-blue-600",children:s.client}),e.jsx("div",{className:"text-xs text-gray-500",children:s.projectTitle})]}),e.jsx("td",{className:"p-2",children:e.jsx(n,{variant:"outline",children:s.platform})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"font-medium",children:[s.pagesApproved,"/",s.pagesPlanned]}),e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${P(s.pagesApproved,s.pagesPlanned)}%`}})}),e.jsxs("span",{className:"text-xs text-gray-500",children:[P(s.pagesApproved,s.pagesPlanned),"%"]})]})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-medium",children:[s.homepageDesignScore?s.homepageDesignScore.toFixed(1):"N/A"," /",s.serviceDesignScore?s.serviceDesignScore.toFixed(1):"N/A"]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Home / Service"})]})}),e.jsx("td",{className:"p-2",children:e.jsx("span",{className:`font-medium ${s.pagespeedScore>=90?"text-green-600":s.pagespeedScore>=70?"text-yellow-600":"text-red-600"}`,children:s.pagespeedScore})}),e.jsx("td",{className:"p-2 text-center",children:s.meetings}),e.jsx("td",{className:"p-2",children:e.jsx("span",{className:"font-medium text-purple-600",children:s.nps.toFixed(1)})}),e.jsx("td",{className:"p-2",children:e.jsx("span",{className:"font-medium text-orange-600",children:s.mentorScore.toFixed(1)})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-bold text-lg",children:s.monthScore.toFixed(1)}),S(s.monthScore)]})}),e.jsx("td",{className:"p-2",children:D(s.status)}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(p,{variant:"outline",size:"sm",children:e.jsx(R,{className:"w-3 h-3"})}),s.status==="draft"&&e.jsx(p,{variant:"outline",size:"sm",children:e.jsx(ee,{className:"w-3 h-3"})}),(a==="admin"||a==="tl"||a==="pm")&&s.status==="submitted"&&e.jsx(p,{variant:"outline",size:"sm",children:e.jsx(F,{className:"w-3 h-3"})})]})})]},s.id))})]})})})]}),w.length>0&&e.jsxs(r,{children:[e.jsx(o,{children:e.jsx(x,{children:"Score Breakdown (Latest Entry)"})}),e.jsx(i,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:(()=>{const s=w[0];return[{label:"Delivery & Milestones",score:s.deliveryScore,max:35,color:"blue"},{label:"Design & UX Quality",score:s.designScore,max:20,color:"purple"},{label:"Technical Health",score:s.technicalScore,max:15,color:"green"},{label:"Client Relationship",score:s.relationshipScore,max:15,color:"orange"},{label:"Business Impact",score:s.businessScore,max:10,color:"red"},{label:"Process Hygiene",score:s.hygieneScore,max:5,color:"gray"}].map((t,l)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold text-${t.color}-600`,children:t.score.toFixed(1)}),e.jsxs("div",{className:"text-xs text-gray-500",children:["/ ",t.max]}),e.jsx("div",{className:"text-xs font-medium mt-1",children:t.label}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:e.jsx("div",{className:`bg-${t.color}-600 h-2 rounded-full`,style:{width:`${t.score/t.max*100}%`}})})]},l))})()})})]})]}),(a==="admin"||a==="tl"||a==="pm")&&e.jsxs(e.Fragment,{children:[e.jsxs(v,{value:"portfolio",className:"space-y-4",children:[e.jsx(r,{children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Portfolio Filters:"})]}),e.jsxs("select",{value:b,onChange:s=>U(s.target.value),className:"border rounded px-3 py-1 text-sm",children:[e.jsx("option",{value:"all",children:"All Stages"}),e.jsx("option",{value:"Design",children:"Design"}),e.jsx("option",{value:"Development",children:"Development"}),e.jsx("option",{value:"QA",children:"QA"}),e.jsx("option",{value:"UAT",children:"UAT"})]}),e.jsxs("select",{value:h,onChange:s=>A(s.target.value),className:"border rounded px-3 py-1 text-sm",children:[e.jsx("option",{value:"all",children:"All Platforms"}),e.jsx("option",{value:"WordPress",children:"WordPress"}),e.jsx("option",{value:"Shopify",children:"Shopify"}),e.jsx("option",{value:"Custom",children:"Custom"})]}),e.jsxs(p,{variant:"outline",size:"sm",children:[e.jsx(E,{className:"w-4 h-4 mr-1"})," Export Portfolio"]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Q.map(s=>e.jsxs(r,{className:`${s.delayFlag?"border-red-200":""}`,children:[e.jsxs(o,{className:"pb-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(x,{className:"text-lg",children:s.title}),s.delayFlag&&e.jsx(se,{className:"w-5 h-5 text-red-500"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{variant:"outline",children:s.client}),e.jsx(n,{variant:"outline",children:s.clientType})]})]}),e.jsx(i,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Platform:"}),e.jsx(n,{variant:"outline",children:s.platform})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Stage:"}),H(s.stage)]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Progress:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:[s.pagesApproved,"/",s.totalPages]}),e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${P(s.pagesApproved,s.totalPages)}%`}})})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Status:"}),D(s.status)]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Est. Completion:"}),e.jsx("span",{className:"text-sm",children:s.estimatedCompletion})]})]})})]},s.id))})]}),e.jsx(v,{value:"team",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(r,{children:[e.jsx(o,{children:e.jsx(x,{children:"Team Performance"})}),e.jsx(i,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Mike Chen"}),e.jsx("div",{className:"text-sm text-gray-600",children:"3 Active Projects"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-green-600",children:"85.2"}),e.jsx(n,{className:"bg-green-100 text-green-800",children:"Excellent"})]})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Lisa Wong"}),e.jsx("div",{className:"text-sm text-gray-600",children:"2 Active Projects"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-blue-600",children:"78.5"}),e.jsx(n,{className:"bg-blue-100 text-blue-800",children:"Good"})]})]})]})})]}),e.jsxs(r,{children:[e.jsx(o,{children:e.jsx(x,{children:"Project Distribution"})}),e.jsx(i,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Active Projects"}),e.jsx("span",{className:"text-blue-600 font-semibold",children:j.filter(s=>s.status==="active").length})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Completed This Month"}),e.jsx("span",{className:"text-green-600 font-semibold",children:j.filter(s=>s.status==="completed").length})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Delayed Projects"}),e.jsx("span",{className:"text-red-600 font-semibold",children:j.filter(s=>s.delayFlag).length})]})]})})]})]})}),e.jsx(v,{value:"analytics",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(r,{children:[e.jsx(o,{children:e.jsx(x,{children:"Performance Trends"})}),e.jsx(i,{children:e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(te,{className:"w-12 h-12 mx-auto mb-2"}),e.jsx("p",{children:"Performance trend charts will be displayed here"})]})})})]}),e.jsxs(r,{children:[e.jsx(o,{children:e.jsx(x,{children:"Platform Distribution"})}),e.jsx(i,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded",children:[e.jsx("span",{className:"font-medium text-sm",children:"WordPress"}),e.jsx("span",{className:"text-blue-600 font-semibold",children:"45%"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded",children:[e.jsx("span",{className:"font-medium text-sm",children:"Shopify"}),e.jsx("span",{className:"text-green-600 font-semibold",children:"30%"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-purple-50 rounded",children:[e.jsx("span",{className:"font-medium text-sm",children:"Custom"}),e.jsx("span",{className:"text-purple-600 font-semibold",children:"25%"})]})]})})]})]})})]})]})]})};export{ge as default};
