import{j as e,o as Ne,b as we,u as Re,d as Fe,f as Oe,p as Ie,q as ee,t as ae,w as X,r as me,s as $e,v as Ke,x as We,y as qe,z as Be,m as oe,B as He,E as Ue,G as ze,H as Ge,D as Ve,R as Ye}from"./manager-dashboard-BSBEKJka.js";import{r as l}from"./react-vendor-z5qVsTvS.js";import{P as xe,u as ke,S as ge,b as ce,T as je,M as Je,a as Qe,N as fe}from"./shared-ui-DksRfdM8.js";const Ce=({options:j=[],value:r="",onChange:s,onInputChange:i,placeholder:c="Type to search...",disabled:C=!1,searchable:t=!0,creatable:F=!1,isLoading:O=!1,className:v="",error:I=null,warning:q=null,label:A=null,required:T=!1,onCreateNew:L=null})=>{const[g,b]=l.useState(!1),[x,p]=l.useState(""),[D,W]=l.useState(-1),B=l.useRef(null),a=l.useRef(null),P=l.useRef(null),d=!!I,f=!!q&&!d,o=t&&x?j.filter(m=>(typeof m=="string"?m:m.label||m.value||"").toLowerCase().includes(x.toLowerCase())):j,E=F&&x&&!o.some(m=>(typeof m=="string"?m:m.label||m.value||"").toLowerCase()===x.toLowerCase())?[...o,{isCreateOption:!0,label:`Create "${x}"`,value:x}]:o,ue=l.useCallback(m=>{const $=m.target.value;p($),W(-1),i&&i($),g||b(!0)},[i,g]),U=l.useCallback(m=>{if(!C){if(m.isCreateOption)L&&L(m.value),p(m.value),s&&s(m.value);else{const $=typeof m=="string"?m:m.value,z=typeof m=="string"?m:m.label||m.value;p(z),s&&s($)}b(!1),W(-1)}},[C,s,L]),te=l.useCallback(m=>{var $;if(!C)switch(m.key){case"ArrowDown":m.preventDefault(),g?W(z=>z<E.length-1?z+1:0):b(!0);break;case"ArrowUp":m.preventDefault(),g&&W(z=>z>0?z-1:E.length-1);break;case"Enter":m.preventDefault(),g&&D>=0&&E[D]?U(E[D]):g&&E.length===1&&U(E[0]);break;case"Escape":b(!1),W(-1),($=a.current)==null||$.blur();break;case"Tab":b(!1),W(-1);break}},[C,g,D,E,U]),Z=l.useCallback(()=>{!C&&t&&b(!0)},[C,t]);return l.useEffect(()=>{const m=$=>{B.current&&!B.current.contains($.target)&&(b(!1),W(-1))};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]),l.useEffect(()=>{r!==x&&p(r||"")},[r]),l.useEffect(()=>{if(D>=0&&P.current){const m=P.current.children[D];m&&m.scrollIntoView({block:"nearest",behavior:"smooth"})}},[D]),e.jsxs("div",{className:`relative ${v}`,ref:B,children:[A&&e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[A,T&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"}),d&&e.jsxs("span",{className:"ml-2 flex items-center gap-1 text-red-600 text-xs font-medium",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:"!"}),"Required"]}),f&&e.jsxs("span",{className:"ml-2 flex items-center gap-1 text-amber-600 text-xs font-medium",children:[e.jsx("div",{className:"w-3 h-3 bg-amber-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:"⚠"}),"Warning"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:a,type:"text",value:x,onChange:ue,onKeyDown:te,onFocus:Z,placeholder:c,disabled:C||O,className:`w-full border rounded-xl p-3 focus:ring-2 transition-all duration-200 ${d?"border-red-300 focus:ring-red-500 focus:border-red-500 bg-red-50":f?"border-amber-300 focus:ring-amber-500 focus:border-amber-500 bg-amber-50":C||O?"bg-gray-100 text-gray-500 cursor-not-allowed border-gray-300":"border-gray-300 hover:border-gray-400 bg-white focus:ring-blue-500 focus:border-blue-500"}`,autoComplete:"off"}),O&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"})}),g&&!C&&!O&&E.length>0&&e.jsx("ul",{ref:P,className:"absolute z-50 w-full bg-white border border-gray-300 rounded-xl mt-1 max-h-60 overflow-y-auto shadow-lg",role:"listbox",children:E.map((m,$)=>{const z=$===D,G=m.isCreateOption,se=typeof m=="string"?m:m.label||m.value;return e.jsxs("li",{onClick:()=>U(m),className:`p-3 cursor-pointer transition-all duration-150 ${z?"bg-blue-100 text-blue-900":"text-gray-900 hover:bg-blue-50"} ${G?"border-t border-gray-200 bg-green-50 hover:bg-green-100 text-green-800 font-medium":""}`,role:"option","aria-selected":z,children:[G&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-600",children:"+"}),e.jsx("span",{children:se})]}),!G&&se]},G?`create-${m.value}`:typeof m=="string"?m:m.value||$)})}),g&&!C&&!O&&E.length===0&&x&&e.jsx("div",{className:"absolute z-50 w-full bg-white border border-gray-300 rounded-xl mt-1 p-3 text-gray-500 text-center shadow-lg",children:"No options found"})]}),d&&e.jsx("div",{className:"mt-2 p-2 bg-red-100 border border-red-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-700 flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mt-2 flex-shrink-0"}),I]})}),f&&e.jsx("div",{className:"mt-2 p-2 bg-amber-100 border border-amber-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-700 flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full mt-2 flex-shrink-0"}),q]})})]})},Xe=({value:j="",onChange:r,onEmployeeSelect:s,placeholder:i="Select or type employee name...",allowCreate:c=!0,disabled:C=!1,className:t="",label:F="Employee",required:O=!1})=>{const{employees:v,loading:I,getEmployeeOptions:q,findEmployeeByIdentity:A,addEmployee:T}=Ne(),[L,g]=l.useState(""),[b,x]=l.useState(null),[p,D]=l.useState(!1),W=q(),B=W.filter(f=>f.label.toLowerCase().includes(L.toLowerCase())||f.name.toLowerCase().includes(L.toLowerCase())),a=l.useCallback(f=>{if(!f){x(null),s&&s(null),r&&r("");return}const[o,u]=f.split("|"),E=A(o,u);E&&(x(E),g(E.name),s&&s(E),r&&r(E.name))},[A,s,r]),P=l.useCallback(f=>{g(f),r&&r(f);const o=v.find(u=>u.name.toLowerCase()===f.toLowerCase());o?(x(o),s&&s(o)):(x(null),s&&s(null))},[v,r,s]),d=l.useCallback(async f=>{if(!c||!f.trim())return null;D(!0);try{const o=await T({name:f.trim(),department:"Unassigned",role:"Employee",status:"Active"});return o&&(x(o),g(o.name),s&&s(o),r&&r(o.name)),o}catch(o){return console.error("Error creating employee:",o),null}finally{D(!1)}},[c,T,s,r]);return l.useEffect(()=>{j!==L&&g(j||"")},[j]),l.useEffect(()=>{if(L&&!b){const f=v.find(o=>o.name.toLowerCase()===L.toLowerCase());f&&(x(f),s&&s(f))}},[L,b,v,s]),e.jsxs("div",{className:`space-y-2 ${t}`,children:[F&&e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[F,O&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ce,{options:B,value:b?b.name:"",onChange:f=>{if(typeof f=="string"&&!W.find(o=>o.value===f))c&&d(f);else{const o=W.find(u=>u.value===f||u.label===f);o&&a(o.value)}},onInputChange:P,placeholder:i,disabled:C||I,searchable:!0,creatable:c,isLoading:I||p,className:"w-full",onCreateNew:c?d:void 0}),b&&e.jsx("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:b.name}),e.jsxs("p",{className:"text-xs text-blue-700",children:[b.department," • ",b.phone]}),b.role&&b.role.length>0&&e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Roles: ",Array.isArray(b.role)?b.role.join(", "):b.role]})]}),e.jsx("div",{className:"text-xs text-blue-500",children:"Auto-populated"})]})}),L&&!b&&c&&e.jsx("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded-md",children:e.jsxs("p",{className:"text-xs text-yellow-700",children:['💡 New employee "',L,'" will be created when form is submitted']})})]})]})},ct=({value:j="",onChange:r,onClientSelect:s,placeholder:i="Select or type client name...",allowCreate:c=!0,disabled:C=!1,className:t="",label:F="Client",required:O=!1,team:v=null})=>{const{clients:I,loading:q,addClient:A}=we(),T=()=>I.filter(u=>u.status==="Active").map(u=>({value:u.name,label:u.name,name:u.name,id:u.id,services:u.services||[],team:u.team,client_type:u.client_type})),L=o=>{if(!o||!o.trim())return null;const u=o.trim().toLowerCase();return I.find(E=>E.name.toLowerCase().trim()===u)},[g,b]=l.useState(""),[x,p]=l.useState(null),[D,W]=l.useState(!1),B=T().filter(o=>{if(!v)return!0;const u=L(o.name);return u&&u.team===v}),a=B.filter(o=>o.label.toLowerCase().includes(g.toLowerCase())||o.name.toLowerCase().includes(g.toLowerCase())),P=l.useCallback(o=>{if(!o){p(null),s&&s(null),r&&r("");return}const u=L(o);u&&(p(u),b(u.name),s&&s(u),r&&r(u.name))},[L,s,r]),d=l.useCallback(o=>{b(o),r&&r(o);const u=I.find(E=>E.name.toLowerCase()===o.toLowerCase());u?(p(u),s&&s(u)):(p(null),s&&s(null))},[I,r,s]),f=l.useCallback(async o=>{if(!c||!o.trim())return null;W(!0);try{const u=await A({name:o.trim(),status:"Active",team:v||"General",client_type:"Standard"});return u&&(p(u),b(u.name),s&&s(u),r&&r(u.name)),u}catch(u){return console.error("Error creating client:",u),null}finally{W(!1)}},[c,A,s,r,v]);return l.useEffect(()=>{j!==g&&b(j||"")},[j]),l.useEffect(()=>{if(g&&!x){const o=I.find(u=>u.name.toLowerCase()===g.toLowerCase());o&&(p(o),s&&s(o))}},[g,x,I,s]),e.jsxs("div",{className:`space-y-2 ${t}`,children:[F&&e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[F,O&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ce,{options:a,value:x?x.name:g,onChange:o=>{typeof o=="string"&&!B.find(u=>u.value===o)?c&&f(o):P(o)},onInputChange:d,placeholder:i,disabled:C||q,searchable:!0,creatable:c,isLoading:q||D,className:"w-full",onCreateNew:c?f:void 0}),x&&e.jsx("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-md",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-900",children:x.name}),e.jsxs("p",{className:"text-xs text-green-700",children:[x.team," • ",x.status]}),x.services&&x.services.length>0&&e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Services: ",Array.isArray(x.services)?x.services.join(", "):x.services]}),x.scope_of_work&&e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Scope: ",x.scope_of_work]})]}),e.jsx("div",{className:"text-xs text-green-500",children:"Auto-populated"})]})}),g&&!x&&c&&e.jsx("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded-md",children:e.jsxs("p",{className:"text-xs text-yellow-700",children:['💡 New client "',g,'" will be created when form is submitted']})})]})]})};function Ze({currentTasks:j=0,previousTasks:r=0,targetTasks:s=50,monthKey:i="",previousMonthKey:c="",department:C="",employeeName:t="",onTargetUpdate:F=null}){const[O,v]=l.useState(s),[I,q]=l.useState(!1),A=s>0?j/s*100:0,T=r>0?(j-r)/r*100:0,L=A>=80,g=A<50,x={HR:{min:25,recommended:35,high:45},Sales:{min:40,recommended:55,high:70},Accounts:{min:30,recommended:40,high:50},Operations:{min:35,recommended:50,high:65},Web:{min:20,recommended:30,high:40},Marketing:{min:25,recommended:35,high:45}}[C]||{min:25,recommended:40,high:55},D=A>=100?{type:"excellent",message:"🎉 Outstanding performance! You've exceeded your target.",color:"text-green-600"}:A>=80?{type:"good",message:"✅ Great progress! You're on track to meet your target.",color:"text-green-600"}:A>=50?{type:"moderate",message:"⚠️ Moderate progress. Consider reviewing your task management strategy.",color:"text-yellow-600"}:{type:"needs_attention",message:"🚨 Below target. Let's focus on improving task completion.",color:"text-red-600"},B=r?T>20?{icon:"🚀",message:"Significant improvement",color:"text-green-600"}:T>5?{icon:"📈",message:"Steady growth",color:"text-green-600"}:T>-5?{icon:"➡️",message:"Consistent performance",color:"text-gray-600"}:T>-20?{icon:"📉",message:"Slight decline",color:"text-yellow-600"}:{icon:"⚠️",message:"Needs attention",color:"text-red-600"}:null,a=()=>{F&&O!==s&&F(O),q(!1)};return e.jsxs("div",{className:"bg-white border rounded-xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium text-gray-900 flex items-center gap-2",children:"📊 Task Progress Analytics"}),e.jsx("button",{onClick:()=>q(!I),className:"text-xs text-blue-600 hover:text-blue-800 px-2 py-1 rounded border border-blue-200 hover:border-blue-300 transition-colors",children:"⚙️ Adjust Target"})]}),e.jsx(xe,{current:j,target:s,label:"Monthly Task Completion",unit:" tasks",color:"blue",previousValue:r,showTrend:!!r,monthComparison:c}),I&&e.jsxs("div",{className:"bg-gray-50 border rounded-lg p-4 space-y-3",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-800",children:"Set Monthly Target"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[e.jsxs("button",{onClick:()=>v(x.min),className:`p-2 rounded border ${O===x.min?"bg-blue-100 border-blue-300":"bg-white border-gray-200"}`,children:["Min: ",x.min]}),e.jsxs("button",{onClick:()=>v(x.recommended),className:`p-2 rounded border ${O===x.recommended?"bg-blue-100 border-blue-300":"bg-white border-gray-200"}`,children:["Recommended: ",x.recommended]}),e.jsxs("button",{onClick:()=>v(x.high),className:`p-2 rounded border ${O===x.high?"bg-blue-100 border-blue-300":"bg-white border-gray-200"}`,children:["High: ",x.high]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:O,onChange:P=>v(Number(P.target.value)),className:"flex-1 border rounded px-2 py-1 text-sm",min:"1",max:"200"}),e.jsx("button",{onClick:a,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors",children:"Update"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[A.toFixed(1),"%"]}),e.jsx("div",{className:"text-xs text-gray-600",children:"Completion Rate"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:`text-2xl font-bold ${T>0?"text-green-600":T<0?"text-red-600":"text-gray-600"}`,children:[T>0?"+":"",T.toFixed(1),"%"]}),e.jsx("div",{className:"text-xs text-gray-600",children:"Month Growth"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:s-j}),e.jsx("div",{className:"text-xs text-gray-600",children:"Tasks Remaining"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${L?"text-green-600":g?"text-red-600":"text-yellow-600"}`,children:L?"✅":g?"🚨":"⚠️"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Status"})]})]}),e.jsx("div",{className:`p-3 rounded-lg border ${D.type==="excellent"||D.type==="good"?"bg-green-50 border-green-200":D.type==="moderate"?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200"}`,children:e.jsx("p",{className:`text-sm ${D.color}`,children:D.message})}),B&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:B.icon}),e.jsx("span",{className:`text-sm font-medium ${B.color}`,children:B.message})]}),c&&e.jsxs("span",{className:"text-xs text-gray-500",children:["vs ",c,": ",r," tasks"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Quick tips:"}),e.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:"📝 Break large tasks into smaller ones"}),e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:"⏰ Use time blocking"}),e.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded",children:"🎯 Set daily goals"})]})]})}const et=({employeeId:j=null,isManager:r=!1,showProgress:s=!0,showRecommendations:i=!0,compact:c=!1})=>{const{user:C,role:t}=Re(),{notify:F}=ke(),{employees:O}=we(),[v,I]=l.useState({currentCourses:[],completedCourses:[],recommendations:[],skills:[],certifications:[],learningPath:null}),[q,A]=l.useState(j||(C==null?void 0:C.id)),[T,L]=l.useState("current"),[g,b]=l.useState(!1),x=[{id:"technical",name:"Technical Skills",icon:"💻",color:"blue"},{id:"soft-skills",name:"Soft Skills",icon:"🤝",color:"green"},{id:"leadership",name:"Leadership",icon:"👑",color:"purple"},{id:"marketing",name:"Marketing",icon:"📈",color:"orange"},{id:"design",name:"Design",icon:"🎨",color:"pink"},{id:"business",name:"Business",icon:"💼",color:"indigo"}];l.useEffect(()=>{p()},[q]);const p=()=>{b(!0),setTimeout(()=>{I({currentCourses:[{id:1,title:"Advanced React Development",provider:"Tech Academy",category:"technical",progress:65,duration:"8 weeks",deadline:"2024-03-15",instructor:"John Smith",rating:4.8,thumbnail:"💻",description:"Master advanced React concepts including hooks, context, and performance optimization."},{id:2,title:"Digital Marketing Fundamentals",provider:"Marketing Pro",category:"marketing",progress:30,duration:"6 weeks",deadline:"2024-04-01",instructor:"Sarah Johnson",rating:4.6,thumbnail:"📈",description:"Learn the basics of digital marketing including SEO, social media, and analytics."},{id:3,title:"Team Leadership Skills",provider:"Leadership Institute",category:"leadership",progress:80,duration:"4 weeks",deadline:"2024-02-28",instructor:"Mike Wilson",rating:4.9,thumbnail:"👑",description:"Develop essential leadership skills for managing and motivating teams."}],completedCourses:[{id:4,title:"JavaScript ES6+ Mastery",provider:"Code Academy",category:"technical",completedDate:"2024-01-15",grade:"A+",certificate:!0,rating:4.7,thumbnail:"⚡",skills:["JavaScript","ES6","Async/Await","Modules"]},{id:5,title:"Project Management Basics",provider:"PM Institute",category:"business",completedDate:"2023-12-20",grade:"A",certificate:!0,rating:4.5,thumbnail:"📋",skills:["Project Planning","Risk Management","Team Coordination"]}],recommendations:[{id:6,title:"Advanced SEO Strategies",provider:"SEO Masters",category:"marketing",duration:"5 weeks",rating:4.8,price:"$199",thumbnail:"🔍",reason:"Based on your role as SEO Specialist",skills:["Technical SEO","Content Strategy","Analytics"]},{id:7,title:"UI/UX Design Principles",provider:"Design School",category:"design",duration:"6 weeks",rating:4.9,price:"$249",thumbnail:"🎨",reason:"Recommended for your career growth",skills:["User Research","Wireframing","Prototyping"]}],skills:[{name:"JavaScript",level:85,category:"technical"},{name:"React",level:75,category:"technical"},{name:"SEO",level:90,category:"marketing"},{name:"Team Leadership",level:60,category:"leadership"},{name:"Project Management",level:70,category:"business"}],certifications:[{id:1,name:"Google Analytics Certified",issuer:"Google",date:"2024-01-10",expires:"2025-01-10",verified:!0,thumbnail:"📊"},{id:2,name:"React Developer Certification",issuer:"Meta",date:"2023-11-15",expires:"2025-11-15",verified:!0,thumbnail:"⚛️"}],learningPath:{title:"Full-Stack Developer Path",progress:45,totalCourses:12,completedCourses:5,estimatedCompletion:"6 months",nextMilestone:"Backend Development Fundamentals"}}),b(!1)},500)},D=a=>a>=80?"bg-green-500":a>=60?"bg-blue-500":a>=40?"bg-yellow-500":"bg-red-500",W=a=>a>=80?"bg-green-100 text-green-800":a>=60?"bg-blue-100 text-blue-800":a>=40?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",B=a=>{F({title:"Enrollment Successful",message:"You have been enrolled in the course",type:"success"})};return O.find(a=>a.id===q),c?e.jsxs("div",{className:"card-brand p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-brand-text mb-4 flex items-center space-x-2",children:[e.jsx("span",{children:"📚"}),e.jsx("span",{children:"Learning Progress"})]}),e.jsx("div",{className:"space-y-3",children:v.currentCourses.slice(0,3).map(a=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:a.thumbnail}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-brand-text",children:a.title}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:e.jsx("div",{className:`h-2 rounded-full ${D(a.progress)}`,style:{width:`${a.progress}%`}})})]}),e.jsxs("span",{className:"text-sm text-brand-text-secondary",children:[a.progress,"%"]})]},a.id))})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"card-brand p-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-brand-text flex items-center space-x-2",children:[e.jsx("span",{children:"📚"}),e.jsx("span",{children:"Learning & Development"})]}),e.jsx("p",{className:"text-brand-text-secondary mt-1",children:"Track progress and discover new learning opportunities"})]}),r&&e.jsxs("select",{value:q,onChange:a=>A(a.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Employee"}),O.map(a=>e.jsxs("option",{value:a.id,children:[a.name," - ",a.role]},a.id))]})]})}),v.learningPath&&e.jsxs("div",{className:"card-brand p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-brand-text mb-4 flex items-center space-x-2",children:[e.jsx("span",{children:"🛤️"}),e.jsx("span",{children:"Learning Path"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h4",{className:"font-medium text-brand-text",children:v.learningPath.title}),e.jsxs("span",{className:"text-sm text-brand-text-secondary",children:[v.learningPath.completedCourses,"/",v.learningPath.totalCourses," courses"]})]}),e.jsx("div",{className:"w-full bg-white rounded-full h-3 mb-3",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 h-3 rounded-full transition-all duration-300",style:{width:`${v.learningPath.progress}%`}})}),e.jsxs("div",{className:"flex justify-between text-sm text-brand-text-secondary",children:[e.jsxs("span",{children:["Next: ",v.learningPath.nextMilestone]}),e.jsxs("span",{children:["Est. completion: ",v.learningPath.estimatedCompletion]})]})]})]}),e.jsxs("div",{className:"card-brand p-6",children:[e.jsx("div",{className:"flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg",children:[{id:"current",label:"Current Courses",icon:"📖"},{id:"completed",label:"Completed",icon:"✅"},{id:"recommendations",label:"Recommendations",icon:"💡"},{id:"skills",label:"Skills",icon:"🎯"},{id:"certifications",label:"Certifications",icon:"🏆"}].map(a=>e.jsxs("button",{onClick:()=>L(a.id),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-colors ${T===a.id?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx("span",{className:"mr-2",children:a.icon}),a.label]},a.id))}),g?e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((a,P)=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]},P))}):e.jsxs("div",{children:[T==="current"&&e.jsx("div",{className:"space-y-4",children:v.currentCourses.map(a=>e.jsx("div",{className:"bg-slate-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("span",{className:"text-3xl",children:a.thumbnail}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-brand-text",children:a.title}),e.jsxs("p",{className:"text-sm text-brand-text-secondary",children:[a.provider," • ",a.instructor]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm text-brand-text-secondary",children:["Due: ",new Date(a.deadline).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm",children:[e.jsx("span",{children:"⭐"}),e.jsx("span",{children:a.rating})]})]})]}),e.jsx("p",{className:"text-sm text-brand-text-secondary mb-3",children:a.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 mr-4",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[a.progress,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${D(a.progress)}`,style:{width:`${a.progress}%`}})})]}),e.jsx("button",{className:"btn-brand-primary px-4 py-2 text-sm",children:"Continue"})]})]})]})},a.id))}),T==="completed"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.completedCourses.map(a=>e.jsx("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"text-2xl",children:a.thumbnail}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-brand-text",children:a.title}),e.jsxs("p",{className:"text-sm text-brand-text-secondary mb-2",children:[a.provider," • Completed ",new Date(a.completedDate).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:["Grade: ",a.grade]}),a.certificate&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:"📜 Certified"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm",children:[e.jsx("span",{children:"⭐"}),e.jsx("span",{children:a.rating})]})]}),a.skills&&e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:a.skills.map(P=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:P},P))})})]})]})},a.id))}),T==="recommendations"&&i&&e.jsx("div",{className:"space-y-4",children:v.recommendations.map(a=>e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("span",{className:"text-3xl",children:a.thumbnail}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-brand-text",children:a.title}),e.jsxs("p",{className:"text-sm text-brand-text-secondary",children:[a.provider," • ",a.duration]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:a.price}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm",children:[e.jsx("span",{children:"⭐"}),e.jsx("span",{children:a.rating})]})]})]}),e.jsxs("p",{className:"text-sm text-blue-700 mb-2",children:["💡 ",a.reason]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:a.skills.map(P=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:P},P))}),e.jsx("button",{onClick:()=>B(a.id),className:"btn-brand-primary px-4 py-2 text-sm",children:"Enroll Now"})]})]})},a.id))}),T==="skills"&&e.jsx("div",{className:"space-y-4",children:x.map(a=>{const P=v.skills.filter(d=>d.category===a.id);return P.length===0?null:e.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-medium text-brand-text mb-3 flex items-center space-x-2",children:[e.jsx("span",{children:a.icon}),e.jsx("span",{children:a.name})]}),e.jsx("div",{className:"space-y-3",children:P.map(d=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-brand-text",children:d.name}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${D(d.level)}`,style:{width:`${d.level}%`}})}),e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${W(d.level)}`,children:[d.level,"%"]})]})]},d.name))})]},a.id)})}),T==="certifications"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.certifications.map(a=>e.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"text-2xl",children:a.thumbnail}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-brand-text",children:a.name}),e.jsxs("p",{className:"text-sm text-brand-text-secondary mb-2",children:["Issued by ",a.issuer]}),e.jsxs("div",{className:"text-xs text-brand-text-secondary space-y-1",children:[e.jsxs("div",{children:["Issued: ",new Date(a.date).toLocaleDateString()]}),e.jsxs("div",{children:["Expires: ",new Date(a.expires).toLocaleDateString()]})]}),a.verified&&e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"✅ Verified"})})]})]})},a.id))})]})]})]})};async function tt(j){return console.log("No Supabase client available"),!1}const st=j=>{try{const r=new URL(j);return r.protocol==="http:"||r.protocol==="https:"}catch{return!1}};class at{constructor(){this.updateQueue=new Map,this.saveTimeouts=new Map,this.isProcessing=!1,this.batchSize=5,this.debounceDelays={immediate:100,fast:300,normal:800,slow:1500}}scheduleUpdate(r,s,i="normal",c){this.saveTimeouts.has(r)&&clearTimeout(this.saveTimeouts.get(r)),this.updateQueue.set(r,{value:s,priority:i,callback:c,timestamp:Date.now()});const C=this.debounceDelays[i]||this.debounceDelays.normal,t=setTimeout(()=>{this.processUpdate(r)},C);this.saveTimeouts.set(r,t)}processUpdate(r){const s=this.updateQueue.get(r);if(s)try{s.callback&&s.callback(s.value),this.updateQueue.delete(r),this.saveTimeouts.delete(r)}catch(i){console.error(`Failed to process update for ${r}:`,i),setTimeout(()=>{this.scheduleUpdate(r,s.value,"slow",s.callback)},2e3)}}flushAll(){for(const[r]of this.updateQueue)this.saveTimeouts.has(r)&&clearTimeout(this.saveTimeouts.get(r)),this.processUpdate(r)}clear(){for(const r of this.saveTimeouts.values())clearTimeout(r);this.updateQueue.clear(),this.saveTimeouts.clear()}}class rt{constructor(){this.storage=this.initStorage(),this.retryAttempts=3,this.retryDelay=1e3}initStorage(){try{if(typeof window<"u"&&window.localStorage){const s="__test__";return localStorage.setItem(s,"test"),localStorage.removeItem(s),localStorage}}catch{console.warn("localStorage not available, using memory storage")}const r=new Map;return{getItem:s=>r.get(s)||null,setItem:(s,i)=>r.set(s,i),removeItem:s=>r.delete(s)}}async save(r,s,i=1){try{const c={...s,timestamp:Date.now(),version:"3.0"};return this.storage.setItem(r,JSON.stringify(c)),!0}catch(c){return console.error(`Save attempt ${i} failed for ${r}:`,c),i<this.retryAttempts?(await new Promise(C=>setTimeout(C,this.retryDelay*i)),this.save(r,s,i+1)):!1}}load(r){try{const s=this.storage.getItem(r);if(!s)return null;const i=JSON.parse(s),c=24*60*60*1e3;return Date.now()-i.timestamp>c?(this.storage.removeItem(r),null):i}catch(s){return console.error(`Failed to load ${r}:`,s),null}}clear(r){try{this.storage.removeItem(r)}catch(s){console.error(`Failed to clear ${r}:`,s)}}}class nt{constructor(r){this.supabase=r,this.clientsTableChecked=!1,this.isCreatingTable=!1}async handleClientsError(r){if((r==null?void 0:r.code)==="PGRST205"&&!this.clientsTableChecked&&!this.isCreatingTable){this.isCreatingTable=!0;try{console.log("🔧 Checking clients table...");const s=await tt();return this.clientsTableChecked=!0,Array.isArray(s)?(console.log("📋 Clients table not found, returning empty array"),s):(console.log("✅ Clients table is available"),!0)}catch(s){return console.error("❌ Failed to check clients table:",s),[]}finally{this.isCreatingTable=!1}}return!1}async fetchClientsWithRetry(r=2){for(let s=1;s<=r;s++)try{const{data:i,error:c}=await this.supabase.from("clients").select("*").order("name");if(c){if(c.code==="PGRST205"&&s===1){const C=await this.handleClientsError(c);if(Array.isArray(C))return C;continue}throw c}return i||[]}catch(i){if(console.error(`Clients fetch attempt ${s} failed:`,i),s===r)return[];await new Promise(c=>setTimeout(c,1e3*s))}return[]}}function ve({currentUser:j=null,isManagerEdit:r=!1,onBack:s=null,existingSubmission:i=null}){const c=Fe(),{getOrCreateEmployee:C}=Ne(),[t,F]=l.useState({employee:{name:"",phone:"",department:"Web",role:[]},monthKey:"",meta:{attendance:{wfo:0,wfh:0},tasks:{count:0,aiTableLink:"",aiTableScreenshot:""}},clients:[],learning:[],aiUsageNotes:"",feedback:{company:"",hr:"",management:""},isDraft:!0}),[O,v]=l.useState([]),[I,q]=l.useState(!0),[A,T]=l.useState(!1),[L,g]=l.useState({}),[b,x]=l.useState(null),[p,D]=l.useState(1),[W,B]=l.useState({}),[a,P]=l.useState(null),[d,f]=l.useState(null),[o,u]=l.useState({kpiScore:0,learningScore:0,relationshipScore:0,overall:0}),[E,ue]=l.useState(!1),U=[{id:1,title:"Profile & Month",icon:"👤",description:"Basic information and reporting period"},{id:2,title:"Attendance & Tasks",icon:"📅",description:"Work attendance and task completion"},{id:3,title:"KPI & Clients",icon:"📊",description:"Department metrics, client work and achievements"},{id:4,title:"Learning & AI",icon:"🎓",description:"Learning activities and AI usage"},{id:5,title:"Feedback & Review",icon:"💬",description:"Company feedback and final review"}],{notify:te}=ke(),{openModal:Z,closeModal:m}=Oe(),$=l.useRef(new at),z=l.useRef(new rt),G=l.useRef(null),se=l.useRef(!0),ne=l.useRef(null);l.useEffect(()=>{c&&te&&Z&&(ne.current=Ie(c,te,Z))},[c,te,Z]),l.useEffect(()=>{c&&!G.current&&(G.current=new nt(c))},[c]);const he=l.useCallback(async(n,h)=>{if(!c||!n||!h){f(null);return}try{const y=ee(h),{data:w,error:M}=await c.from("submissions").select("tasks_completed, meta").eq("employee_name",n).eq("month_key",y).single();if(M&&M.code!=="PGRST116"){console.warn("Error fetching previous submission:",M),f(null);return}f(w?{tasks_completed:w.tasks_completed||0,meta:w.meta||{tasks:{count:0}}}:null)}catch(y){console.warn("Failed to fetch previous submission:",y),f(null)}},[c]);l.useEffect(()=>{t.employee.name&&t.monthKey?he(t.employee.name,t.monthKey):f(null)},[t.employee.name,t.monthKey,he]),l.useEffect(()=>{const h=setTimeout(()=>{const y=He(t.employee,t.clients,{monthKey:t.monthKey}),w=Ue(t.learning),M=ze(t.clients),k=Ge({kpiScore:y,learningScore:w,relationshipScore:M});u({kpiScore:y,learningScore:w,relationshipScore:M,overall:k})},500);return()=>clearTimeout(h)},[t.employee,t.clients,t.learning,t.monthKey]);const de=l.useMemo(()=>(j==null?void 0:j.phone)||"unknown",[j]),le=l.useMemo(()=>ee(ae()),[]),re=l.useMemo(()=>`employee_form_${de}_${le}`,[de,le]),Se=l.useCallback(()=>{var n,h,y,w,M,k,_,R,V,K;if(p<U.length){const S=[];if(p===1)(n=t.employee.name)!=null&&n.trim()||S.push("Employee name is required"),(h=t.employee.phone)!=null&&h.trim()||S.push("Phone number is required"),t.employee.department||S.push("Department is required"),(!t.employee.role||t.employee.role.length===0)&&S.push("At least one role is required"),t.monthKey||S.push("Month selection is required");else if(p===2){const Y=((w=(y=t.meta)==null?void 0:y.attendance)==null?void 0:w.wfo)||0,N=((k=(M=t.meta)==null?void 0:M.attendance)==null?void 0:k.wfh)||0,J=((R=(_=t.meta)==null?void 0:_.tasks)==null?void 0:R.count)||0,Q=X(t.monthKey),ie=me(t.monthKey);(Y<0||Y>Q)&&S.push(`Work from office days must be between 0 and ${Q} working days (${ie} total days)`),(N<0||N>Q)&&S.push(`Work from home days must be between 0 and ${Q} working days (${ie} total days)`),Y+N>Q&&S.push(`Total attendance days cannot exceed ${Q} working days (${ie} total days)`),J<0&&S.push("Task count cannot be negative");const pe=(K=(V=t.meta)==null?void 0:V.tasks)==null?void 0:K.proof;if(pe&&pe.trim())try{new URL(pe)}catch{S.push("AI Table Link must be a valid URL")}}if(S.length>0){Z("Please Fix Required Fields",`Please correct the following issues before proceeding:

${S.join(`
`)}`,m,null,"OK","");return}D(Y=>Y+1)}},[p,U.length,t,Z,m]),Te=l.useCallback(()=>{p>1&&D(n=>n-1)},[p]),De=l.useCallback(n=>{n>=1&&n<=U.length&&D(n)},[U.length]);l.useEffect(()=>{let n=!1;const h=async()=>{var y,w,M,k;try{if(q(!0),i&&!n?(F(R=>{var V,K,S,Y;return{...R,employee:{name:i.employee_name||((V=i.employee)==null?void 0:V.name)||"",phone:i.employee_phone||((K=i.employee)==null?void 0:K.phone)||"",department:i.department||((S=i.employee)==null?void 0:S.department)||"Web",role:i.roles||((Y=i.employee)==null?void 0:Y.role)||[]},monthKey:i.month_key||i.monthKey||le,meta:{attendance:{wfo:i.attendance_wfo||0,wfh:i.attendance_wfh||0},tasks:{count:i.tasks_completed||0,aiTableLink:i.ai_table_link||"",aiTableScreenshot:i.ai_table_screenshot||""}},clients:i.clients||[],learning:i.learning_activities||[],aiUsageNotes:i.ai_usage_notes||"",feedback:{company:i.feedback_company||"",hr:i.feedback_hr||"",management:i.feedback_management||""},isDraft:!1}}),P({name:i.employee_name||((y=i.employee)==null?void 0:y.name)||"",phone:i.employee_phone||((w=i.employee)==null?void 0:w.phone)||"",department:i.department||((M=i.employee)==null?void 0:M.department)||"Web",role:i.roles||((k=i.employee)==null?void 0:k.role)||[]})):j&&!n?F(R=>({...R,employee:{name:j.name||"",phone:j.phone||"",department:j.department||"Web",role:j.role||[]},monthKey:le})):n||F(R=>({...R,monthKey:le})),G.current){const R=await G.current.fetchClientsWithRetry();n||v(R)}else v([]);const _=z.current.load(re);!n&&_&&(F(_),x(new Date(_.timestamp)))}catch(_){console.error("Form initialization error:",_),n||g({init:"Failed to initialize form"})}finally{n||q(!1)}};if(c&&G.current)h();else if(c&&!G.current){const y=setTimeout(()=>{G.current&&!n&&h()},100);return()=>{clearTimeout(y),n=!0}}else c===null&&h();return()=>{n=!0}},[re,c]),l.useEffect(()=>()=>{se.current=!1,$.current.flushAll(),$.current.clear()},[]);const be=l.useCallback(async n=>{if(se.current)try{T(!0),await z.current.save(re,n)&&se.current?(x(new Date),g(y=>({...y,save:null}))):se.current&&g(y=>({...y,save:"Auto-save failed"}))}catch(h){console.error("Auto-save error:",h),se.current&&g(y=>({...y,save:"Auto-save error"}))}finally{se.current&&T(!1)}},[re]),H=l.useCallback((n,h,y="normal")=>{var w;if(n==="meta"&&((w=h==null?void 0:h.attendance)==null?void 0:w.wfo)!==void 0&&(console.log("🚨 updateFormData called for WFO:",{field:n,value:h,wfoValue:h.attendance.wfo,wfoType:typeof h.attendance.wfo,wfoNumeric:Number(h.attendance.wfo)}),h.attendance.wfo==="3"&&Number(h.attendance.wfo)===30)){console.error("🚨🚨🚨 MULTIPLICATION BUG in updateFormData!"),console.error('WFO value "3" converts to 30!'),console.trace("Stack trace for multiplication bug");debugger}F(M=>{var _,R,V;const k={...M};return n==="meta"?(k.meta={attendance:{wfo:0,wfh:0,...(_=M.meta)==null?void 0:_.attendance},tasks:{count:0,aiTableLink:"",aiTableScreenshot:"",...(R=M.meta)==null?void 0:R.tasks},...h},((V=h==null?void 0:h.attendance)==null?void 0:V.wfo)!==void 0&&console.log("🚨 updateFormData final state WFO:",{originalWfo:h.attendance.wfo,finalWfo:k.meta.attendance.wfo,finalType:typeof k.meta.attendance.wfo,finalNumeric:Number(k.meta.attendance.wfo)})):k[n]=h,$.current.scheduleUpdate(`autosave_${n}`,k,y,be),k})},[be]);l.useCallback((n,h="normal")=>y=>{const w=y.target.value;H(n,w,h)},[H]);const Ee=l.useCallback(async n=>{var h,y;n&&n.preventDefault();try{T(!0),$.current.flushAll();const w={};if((h=t.employee.name)!=null&&h.trim()||(w.employeeName="Employee name is required"),(y=t.employee.phone)!=null&&y.trim()||(w.employeePhone="Phone number is required"),t.employee.department||(w.department="Department is required"),(!t.employee.role||t.employee.role.length===0)&&(w.role="At least one role is required"),Object.keys(w).length>0){g(w),te("Please fill in all required fields","error");return}const M=new Date().toISOString();let k={...o},_=null;try{_=$e(t.monthKey,M);const K=Math.max(0,o.overall-(_.penalty||0));k={...o,overall:K}}catch(K){console.warn("Discipline penalty calculation failed:",K)}const R={employee_name:t.employee.name,employee_phone:t.employee.phone,department:t.employee.department,role:t.employee.role,month_key:t.monthKey,attendance_wfo:t.meta.attendance.wfo,attendance_wfh:t.meta.attendance.wfh,tasks_completed:t.meta.tasks.count,ai_table_link:t.meta.tasks.aiTableLink,clients:t.clients,learning_activities:t.learning,ai_usage_notes:t.aiUsageNotes,feedback_company:t.feedback.company,feedback_hr:t.feedback.hr,feedback_management:t.feedback.management,user_phone:de,submitted_at:M,scores:k,discipline:_,kpi_score:k.kpiScore,learning_score:k.learningScore,relationship_score:k.relationshipScore,overall_score:k.overall};if(c){await Ke(c);const K={name:t.employee.name,phone:t.employee.phone,department:t.employee.department,role:t.employee.role};try{await We(c,K)}catch(S){console.warn("Failed to save employee data:",S)}if(ne.current){const S={required:["employee_name","employee_phone","department","role","month_key"],custom:[N=>N.employee_phone&&!/^[\d\s\-\+\(\)]+$/.test(N.employee_phone)?"Please enter a valid phone number":!0]};if(!(await ne.current.form.submitForm(R,{tableName:"submissions",operation:i?"update":"insert",validationRules:S,showSuccessModal:!1,onError:N=>{console.error("Enhanced error handler caught:",N),g({submit:"Failed to submit form"})}})).success)throw new Error("Form submission failed")}else if(i){const{error:S}=await c.from("submissions").update(R).eq("id",i.id);if(S)throw new Error(`Database update error: ${S.message}`)}else{const{error:S}=await c.from("submissions").insert([R]);if(S)throw new Error(`Database error: ${S.message}`)}}else try{await C({name:t.employee.name,phone:t.employee.phone,department:t.employee.department,role:t.employee.role})}catch(K){console.warn("Failed to save employee data locally:",K)}z.current.clear(re),x(null);try{await qe(Be).handleSubmission(R,{operation:i?"update":"create",employeeData:{name:t.employee.name,phone:t.employee.phone,department:t.employee.department}})}catch(K){console.warn("Data sync failed:",K)}te(i?"Tactical meeting form updated successfully!":"Tactical meeting form submitted successfully!","success"),Z({title:"🎯 Performance Scores",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-center",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Your ",oe(t.monthKey)," Performance Report"]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[k.kpiScore.toFixed(1),"/10"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"KPI Performance"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[k.learningScore.toFixed(1),"/10"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Learning & Development"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[k.relationshipScore.toFixed(1),"/10"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Client Relationships"})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-orange-600",children:[k.overall.toFixed(1),"/10"]}),e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Overall Score"})]})]}),_&&_.penalty>0&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Late Submission Penalty:"})," -",_.penalty," points",e.jsx("br",{}),e.jsxs("span",{className:"text-xs",children:["Submitted ",_.daysLate," day(s) after deadline"]})]})}),k.overall>=8&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:"🎉"}),e.jsx("div",{className:"text-green-600 font-semibold",children:"Outstanding Performance!"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Keep up the excellent work!"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"What's Next?"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:"• Your scores will be reviewed by management"}),e.jsx("li",{children:"• Feedback will be provided during your tactical meeting"}),e.jsx("li",{children:"• These scores contribute to your performance appraisal"}),e.jsx("li",{children:"• You can view detailed analytics in your employee dashboard"})]})]})]}),actions:[{label:"View Dashboard",onClick:()=>{m(),s&&s()},variant:"primary"},{label:"Close",onClick:m,variant:"secondary"}]})}catch(w){console.error("Submit error:",w),ne.current?await ne.current.database.handleError(w,"form submission",{formData:submissionData}):(g({submit:"Failed to submit form"}),te("Failed to submit form. Please try again.","error"))}finally{T(!1)}},[t,de,re,c,te,s]),Le=()=>{switch(p){case 1:return ye();case 2:return Pe();case 3:return Me();case 4:return _e();case 5:return Ae();default:return ye()}},ye=()=>e.jsx(ge,{title:"Profile & Month Selection",icon:"👤",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(ce,{errors:[],warnings:[],stepTitle:"Profile & Month Selection"}),e.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 via-indigo-50 to-blue-100 border border-blue-200 rounded-xl",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-3",children:"📋 Employee Performance Data Collection Form"}),e.jsxs("div",{className:"text-sm text-blue-700 space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Purpose:"})," Collect monthly performance data for employee evaluation and development tracking."]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-3",children:[e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("strong",{children:"🔹 Required Steps:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[e.jsx("li",{children:"Select employee and reporting period"}),e.jsx("li",{children:"Record attendance and task completion"}),e.jsx("li",{children:"Document KPI achievements and client work"}),e.jsx("li",{children:"Log learning activities with evidence"}),e.jsx("li",{children:"Provide comparative feedback ratings"})]})]}),e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("strong",{children:"🔹 Important Notes:"})}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[e.jsx("li",{children:"All fields marked with * are mandatory"}),e.jsx("li",{children:"Data should reflect the selected month period"}),e.jsx("li",{children:"Save drafts frequently to prevent data loss"}),e.jsx("li",{children:"Review all sections before final submission"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(Xe,{value:t.employee.name,onChange:n=>{a||H("employee",{...t.employee,name:n})},onEmployeeSelect:n=>{P(n),n?(H("employee",{name:n.name,phone:n.phone||t.employee.phone,department:n.department||t.employee.department,role:n.role||t.employee.role}),he(n.name,t.monthKey)):(H("employee",{...t.employee,name:t.employee.name}),f(null))},placeholder:"Select or type employee name...",required:!0}),e.jsx(je,{label:"Phone Number",value:t.employee.phone,onChange:n=>H("employee",{...t.employee,phone:n}),placeholder:"Enter your phone number",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsx("select",{value:t.employee.department,onChange:n=>H("employee",{...t.employee,department:n.target.value,role:[]}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:Ve.map(n=>e.jsx("option",{value:n,children:n},n))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Employee Roles *",e.jsx("span",{className:"text-sm font-normal text-gray-500 block mt-1",children:"Select all applicable roles for this employee (multiple selections allowed)"})]}),e.jsx(Je,{options:Ye[t.employee.department]||[],value:t.employee.role,onChange:n=>H("employee",{...t.employee,role:n}),placeholder:"Select one or more roles...",required:!0,allowCustom:!0,customPlaceholder:"Enter custom role..."}),e.jsx("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded-md",children:e.jsxs("p",{className:"text-xs text-blue-700",children:[e.jsx("strong",{children:"📋 Role Selection Tips:"}),e.jsx("br",{}),"• Select primary role first, then additional responsibilities",e.jsx("br",{}),"• Multiple roles help track cross-functional contributions",e.jsx("br",{}),"• Contact HR if your role is not listed"]})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Data Collection Period *",e.jsx("span",{className:"text-sm font-normal text-gray-500 block mt-1",children:"Select the month you are reporting data FOR (typically previous month)"})]}),e.jsxs("select",{value:t.monthKey,onChange:n=>H("monthKey",n.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsxs("option",{value:ee(ae()),children:[oe(ee(ae()))," (Recommended - Previous Month)"]}),e.jsxs("option",{value:ae(),children:[oe(ae())," (Current Month - In Progress)"]})]}),e.jsx("div",{className:"mt-2 p-3 bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-xl",children:e.jsxs("p",{className:"text-xs text-amber-700",children:[e.jsx("strong",{children:"💡 Data Collection Guide:"}),e.jsx("br",{}),"• ",e.jsx("strong",{children:"Previous Month:"})," Complete retrospective analysis with full data",e.jsx("br",{}),"• ",e.jsx("strong",{children:"Current Month:"})," Ongoing tracking (data may be incomplete)"]})})]})]})]})}),Pe=()=>{var n,h,y,w,M,k,_,R,V,K,S,Y;return e.jsx(ge,{title:"Attendance & Task Management",icon:"📅",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(ce,{errors:[],warnings:[],stepTitle:"Attendance & Tasks"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(xe,{current:Number(t.meta.attendance.wfo||0)+Number(t.meta.attendance.wfh||0),target:X(t.monthKey),label:"Monthly Attendance Progress (Working Days)",unit:" days",color:"blue",previousValue:d?Number(((h=(n=d.meta)==null?void 0:n.attendance)==null?void 0:h.wfo)||0)+Number(((w=(y=d.meta)==null?void 0:y.attendance)==null?void 0:w.wfh)||0):null,showTrend:!!d,monthComparison:d?ee:null}),e.jsx(xe,{current:t.meta.tasks.count||0,target:Math.max((d==null?void 0:d.tasks_completed)||((k=(M=d==null?void 0:d.meta)==null?void 0:M.tasks)==null?void 0:k.count)||50,30),label:"Task Completion Progress",unit:" tasks",color:"green",previousValue:(d==null?void 0:d.tasks_completed)||((R=(_=d==null?void 0:d.meta)==null?void 0:_.tasks)==null?void 0:R.count)||null,showTrend:!!d,monthComparison:d?ee:null})]}),e.jsx(Ze,{currentTasks:t.meta.tasks.count||0,previousTasks:(d==null?void 0:d.tasks_completed)||((K=(V=d==null?void 0:d.meta)==null?void 0:V.tasks)==null?void 0:K.count)||0,targetTasks:Math.max((d==null?void 0:d.tasks_completed)||((Y=(S=d==null?void 0:d.meta)==null?void 0:S.tasks)==null?void 0:Y.count)||50,30),monthKey:ae,previousMonthKey:ee,department:t.department,employeeName:t.employeeName,onTargetUpdate:N=>{console.log("Target updated to:",N)}}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(fe,{label:"Work From Office Days",value:t.meta.attendance.wfo,onChange:N=>{if(console.log("🚨 NewEmployeeForm WFO onChange received:",{value:N,type:typeof N,numericValue:Number(N)}),N==="3"&&Number(N)===30){console.error("🚨🚨🚨 MULTIPLICATION BUG in NewEmployeeForm onChange!"),console.error('Received value "3" but Number(value) is 30!'),console.trace("Stack trace for multiplication bug");debugger}const J=Number(N),Q=X(t.monthKey),ie=me(t.monthKey);console.log("🚨 NewEmployeeForm WFO processing:",{originalValue:N,numValue:J,maxWorkingDays:Q,totalDays:ie,willUpdate:N===""||J>=0&&J<=Q}),(N===""||J>=0&&J<=Q)&&(console.log("🚨 NewEmployeeForm calling updateFormData with:",{wfo:N}),H("meta",{...t.meta,attendance:{...t.meta.attendance,wfo:N}}))},min:0,max:X(t.monthKey),validateOnChange:!0,error:t.meta.attendance.wfo&&(Number(t.meta.attendance.wfo)<0||Number(t.meta.attendance.wfo)>X(t.monthKey))?`Must be between 0 and ${X(t.monthKey)} working days (${me(t.monthKey)} total days)`:null}),e.jsx(fe,{label:"Work From Home Days",value:t.meta.attendance.wfh,onChange:N=>{const J=Number(N),Q=X(t.monthKey);(N===""||J>=0&&J<=Q)&&H("meta",{...t.meta,attendance:{...t.meta.attendance,wfh:N}})},min:0,max:X(t.monthKey),validateOnChange:!0,error:t.meta.attendance.wfh&&(Number(t.meta.attendance.wfh)<0||Number(t.meta.attendance.wfh)>X(t.monthKey))?`Must be between 0 and ${X(t.monthKey)} working days (${me(t.monthKey)} total days)`:null,warning:Number(t.meta.attendance.wfo||0)+Number(t.meta.attendance.wfh||0)>X(t.monthKey)?"Total WFO + WFH days exceed working days":null}),e.jsx(fe,{label:"Total Tasks Completed",value:t.meta.tasks.count,onChange:N=>{const J=Number(N);(N===""||J>=0)&&H("meta",{...t.meta,tasks:{...t.meta.tasks,count:N}})},min:0,validateOnChange:!0,error:t.meta.tasks.count&&Number(t.meta.tasks.count)<0?"Must be 0 or greater":null,warning:t.meta.tasks.count&&Number(t.meta.tasks.count)===0?"Consider entering completed tasks for better tracking":null}),e.jsx(je,{label:"AI Table Link (Optional)",value:t.meta.tasks.aiTableLink,onChange:N=>H("meta",{...t.meta,tasks:{...t.meta.tasks,aiTableLink:N}}),placeholder:"https://...",validateOnChange:!0,error:t.meta.tasks.aiTableLink&&t.meta.tasks.aiTableLink.trim()&&!st(t.meta.tasks.aiTableLink)?"Please enter a valid URL (e.g., https://example.com)":null})]})]})})},Me=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(ce,{errors:[],warnings:[],stepTitle:"KPI & Clients"}),e.jsx(DeptClientsBlock,{currentSubmission:t,previousSubmission:d,comparisonSubmission:d,setModel:F,monthPrev:ee,monthThis:ae,monthComparison:ee,openModal:Z,closeModal:m})]}),_e=()=>{const n=(t.learning||[]).reduce((h,y)=>h+(y.durationMins||0),0)/60;return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ce,{errors:[],warnings:[],stepTitle:"Learning & Development"}),e.jsx(xe,{current:n,target:6,label:"Learning Hours Progress",unit:"h",color:"green",previousValue:d?(d.learning||[]).reduce((h,y)=>h+(y.durationMins||0),0)/60:null,showTrend:!!d,monthComparison:d?ee:null}),e.jsx(et,{model:t,setModel:F,openModal:Z}),e.jsxs("div",{className:"bg-white border rounded-xl p-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 flex items-center gap-2 mb-4",children:"🤖 AI Usage (Optional)"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Describe how you used AI tools to improve your work efficiency this month."}),e.jsx("textarea",{className:"w-full border border-gray-300 rounded-xl p-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",rows:4,placeholder:"List ways you used AI to work faster/better this month. Include links or examples.",value:t.aiUsageNotes,onChange:h=>H("aiUsageNotes",h.target.value)})]})]})},Ae=()=>e.jsx(ge,{title:"Feedback & Self-Assessment",icon:"💬",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(ce,{errors:[],warnings:[],stepTitle:"Feedback & Self-Assessment"}),e.jsxs("div",{className:"bg-white border rounded-xl p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Provide comprehensive feedback covering all aspects of your work experience and self-assessment."}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsx("h5",{className:"font-medium text-blue-900 mb-3 flex items-center gap-2",children:"📋 Feedback Guidelines & Self-Assessment Scoring"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"font-medium text-blue-800 mb-2",children:"📝 What to Include:"}),e.jsxs("ul",{className:"space-y-1 text-blue-700",children:[e.jsx("li",{children:"• Company culture and work environment"}),e.jsx("li",{children:"• HR policies and communication"}),e.jsx("li",{children:"• Management support and guidance"}),e.jsx("li",{children:"• Challenges and obstacles faced"}),e.jsx("li",{children:"• Suggestions for improvement"}),e.jsx("li",{children:"• Personal achievements and growth"})]})]}),e.jsxs("div",{children:[e.jsx("h6",{className:"font-medium text-blue-800 mb-2",children:"⭐ Self-Assessment Scale (1-10):"}),e.jsxs("ul",{className:"space-y-1 text-blue-700",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"9-10:"})," Exceptional performance, exceeded expectations"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"7-8:"})," Strong performance, met most goals"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"5-6:"})," Satisfactory performance, room for improvement"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"3-4:"})," Below expectations, needs significant improvement"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"1-2:"})," Poor performance, requires immediate attention"]})]})]})]})]}),e.jsx(Qe,{label:"Comprehensive Feedback & Self-Assessment",value:t.feedback.comprehensive||t.feedback.company||"",onChange:n=>H("feedback",{...t.feedback,comprehensive:n,company:n,hr:n,management:n}),placeholder:"Please provide detailed feedback covering:\\n\\n1. COMPANY FEEDBACK: What's working well? What could be improved in company culture, processes, or policies?\\n\\n2. HR & MANAGEMENT: Thoughts on HR support, management guidance, and communication?\\n\\n3. CHALLENGES: Any obstacles or challenges hindering your work or growth?\\n\\n4. SELF-ASSESSMENT: Rate your overall performance this month (1-10) and explain your reasoning. Include specific achievements, areas where you excelled, and areas for improvement.\\n\\n5. SUGGESTIONS: Any recommendations for improving the work environment or processes?",rows:12})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Form Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Employee:"}),e.jsx("p",{className:"text-gray-600",children:t.employee.name||"Not set"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Department:"}),e.jsx("p",{className:"text-gray-600",children:t.employee.department})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Month:"}),e.jsx("p",{className:"text-gray-600",children:oe(t.monthKey)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Clients:"}),e.jsxs("p",{className:"text-gray-600",children:[t.clients.length," projects"]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 flex items-center gap-2",children:"📊 Performance Preview"}),e.jsx("button",{type:"button",onClick:()=>ue(!E),className:"text-sm text-blue-600 hover:text-blue-800 transition-colors duration-200 font-medium",children:E?"Hide Scores":"Show Scores"})]}),E&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border border-blue-100 shadow-sm",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[o.kpiScore.toFixed(1),"/10"]}),e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"KPI Score"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border border-emerald-100 shadow-sm",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[o.learningScore.toFixed(1),"/10"]}),e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Learning"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border border-purple-100 shadow-sm",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[o.relationshipScore.toFixed(1),"/10"]}),e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Client Relations"})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border border-orange-100 shadow-sm",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[o.overall.toFixed(1),"/10"]}),e.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Overall"})]})]}),!E&&e.jsxs("div",{className:"text-center text-gray-600",children:[e.jsx("p",{className:"text-sm",children:"Your performance scores will be calculated and displayed after submission."}),e.jsx("p",{className:"text-xs mt-1",children:'Click "Show Scores" above for a preview based on current data.'})]}),E&&o.overall>=8&&e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:"🎉"}),e.jsx("div",{className:"text-green-600 font-semibold",children:"Excellent performance preview!"})]})]})]})});return I?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading tactical meeting form..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6 lg:py-8",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl sm:rounded-2xl shadow-xl border border-white/20 overflow-hidden",children:[e.jsx("div",{className:"bg-blue-600 px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:e.jsxs("div",{className:"flex flex-col space-y-4 lg:flex-row lg:items-center lg:justify-between lg:space-y-0 gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"p-2 sm:p-3 bg-white/20 rounded-lg sm:rounded-xl backdrop-blur-sm self-start",children:e.jsx("svg",{className:"w-6 h-6 sm:w-8 sm:h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-white leading-tight",children:"Employee Tactical Meeting Form"}),e.jsx("p",{className:"text-blue-100 text-xs sm:text-sm mt-1 leading-relaxed",children:"Complete your monthly performance review and goal tracking"})]}),i&&e.jsx("div",{className:"px-3 py-2 bg-amber-400/20 text-amber-100 text-xs sm:text-sm font-medium rounded-full border border-amber-300/30 backdrop-blur-sm self-start sm:self-center",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.828-2.828z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Editing "}),oe(i.month_key||i.monthKey)]})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4",children:[A&&e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 px-3 sm:px-4 py-2 bg-white/20 rounded-lg sm:rounded-xl backdrop-blur-sm",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 sm:h-5 sm:w-5 border-2 border-white/30 border-t-white"}),e.jsx("span",{className:"text-white font-medium text-xs sm:text-sm",children:"Saving..."})]}),b&&e.jsxs("div",{className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-white/20 rounded-lg sm:rounded-xl backdrop-blur-sm",children:[e.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsxs("span",{className:"text-white text-xs sm:text-sm font-medium",children:[e.jsx("span",{className:"hidden sm:inline",children:"Saved "}),b.toLocaleTimeString()]})]}),L.save&&e.jsxs("div",{className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-white/20 rounded-lg sm:rounded-xl backdrop-blur-sm",children:[e.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-white text-xs sm:text-sm font-medium",children:L.save})]})]})]})}),e.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-4 sm:py-6 bg-white/50 backdrop-blur-sm border-b border-gray-200/50",children:e.jsx("div",{className:"flex flex-col space-y-3 sm:space-y-4 lg:flex-row lg:items-center lg:justify-between lg:space-y-0 gap-3 sm:gap-6",children:U.map((n,h)=>e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 flex-1 min-w-0",children:[e.jsxs("button",{type:"button",onClick:()=>De(n.id),className:`relative flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-lg sm:rounded-xl text-xs sm:text-sm font-bold transition-all duration-300 transform active:scale-95 sm:hover:scale-105 touch-manipulation ${p===n.id||p>n.id?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-600 hover:bg-gray-50 shadow-md border border-gray-200"}`,children:[p>n.id?e.jsx("svg",{className:"w-4 h-4 sm:w-6 sm:h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):n.id,p===n.id&&e.jsx("div",{className:"absolute -inset-1 bg-blue-600 rounded-lg sm:rounded-xl blur opacity-30 animate-pulse"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`text-xs sm:text-sm font-semibold transition-colors truncate ${p===n.id?"text-blue-700":p>n.id?"text-emerald-700":"text-gray-700"}`,children:n.title}),e.jsx("div",{className:"text-xs text-gray-500 mt-1 hidden sm:block leading-relaxed",children:n.description}),p===n.id&&e.jsx("div",{className:"mt-1 sm:mt-2 h-0.5 sm:h-1 bg-blue-600 rounded-full animate-pulse"})]})]}),h<U.length-1&&e.jsxs("div",{className:"hidden lg:flex items-center mx-4",children:[e.jsx("div",{className:`h-0.5 w-16 transition-all duration-500 ${p>n.id?"bg-blue-600":"bg-gray-200"}`,children:p>n.id&&e.jsx("div",{className:"h-full bg-blue-600 rounded-full animate-pulse"})}),e.jsx("svg",{className:`w-4 h-4 ml-2 transition-colors ${p>n.id?"text-emerald-600":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]},n.id))})}),e.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:e.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:Le()})})})}),e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-t border-gray-200/50 px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto flex flex-col space-y-3 sm:space-y-0 sm:flex-row justify-between items-center gap-4",children:[e.jsxs("button",{type:"button",onClick:Te,disabled:p===1,className:"w-full sm:w-auto group flex items-center justify-center gap-3 px-6 py-3 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg sm:rounded-xl hover:bg-gray-50 hover:border-gray-400 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-sm hover:shadow-md touch-manipulation",children:[e.jsx("svg",{className:"w-4 h-4 transition-transform group-hover:-translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),e.jsx("span",{className:"hidden sm:inline",children:"Previous Step"}),e.jsx("span",{className:"sm:hidden",children:"Previous"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-500 order-first sm:order-none",children:[e.jsxs("span",{children:["Step ",p," of ",U.length]}),e.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-600 transition-all duration-500 ease-out",style:{width:`${p/U.length*100}%`}})})]}),e.jsx("div",{className:"w-full sm:w-auto flex gap-3",children:p<U.length?e.jsxs("button",{type:"button",onClick:Se,className:"flex-1 sm:flex-none group flex items-center justify-center gap-3 px-6 sm:px-8 py-3 text-sm font-medium text-white bg-gradient-to-r from-blue-600 via-blue-700 to-indigo-700 border border-transparent rounded-lg sm:rounded-xl hover:from-blue-700 hover:via-blue-800 hover:to-indigo-800 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 touch-manipulation",children:[e.jsx("span",{className:"hidden sm:inline",children:"Continue"}),e.jsx("span",{className:"sm:hidden",children:"Next"}),e.jsx("svg",{className:"w-4 h-4 transition-transform group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}):e.jsx("button",{type:"button",onClick:Ee,disabled:A,className:"flex-1 sm:flex-none group flex items-center justify-center gap-3 px-6 sm:px-8 py-3 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg sm:rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:transform-none touch-manipulation",children:A?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white/30 border-t-white"}),e.jsx("span",{className:"hidden sm:inline",children:"Submitting..."}),e.jsx("span",{className:"sm:hidden",children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Submit Report"}),e.jsx("span",{className:"sm:hidden",children:"Submit"})]})})})]})})]})})})}const dt=Object.freeze(Object.defineProperty({__proto__:null,NewEmployeeForm:ve,default:ve},Symbol.toStringTag,{value:"Module"}));export{ct as C,Xe as E,dt as N};
