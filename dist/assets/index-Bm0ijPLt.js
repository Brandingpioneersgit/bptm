var Ov=Object.defineProperty;var Tv=(e,t,r)=>t in e?Ov(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Kn=(e,t,r)=>Tv(e,typeof t!="symbol"?t+"":t,r);import{j as a,N as Mv,O as Dv,P as Iv,Q as Rv,U as $v,W as Lv,X as Fv,L as Pe,Y as Eo,Z as Ol,_ as Bv,$ as Co,u as kt,a as at,S as Te,x as $f,t as Tl,m as Jr,p as Lf,a0 as Sr,a1 as Ff,a2 as Bf,a3 as zf,a4 as Ks,a5 as Ml,a6 as Uf,a7 as Oo,a8 as na,a9 as zv,aa as Sd,ab as qs,ac as Uv,ad as Wf,ae as Wv,af as Kv,ag as jn,ah as qv,ai as vn,aj as Kf,ak as Gv,al as Hv,am as Vv,an as Yv,ao as qf,ap as Gf,aq as _d,ar as Hf,as as To,at as Mo,au as Xv,av as Zv,aw as Jv,ax as Qv,ay as Pd,az as ey,aA as ty,aB as Ad,aC as Ia,aD as ry,aE as ny,aF as ay,s as re,k as sy,aG as iy,v as Vf,aH as oy,aI as ly,aJ as cy,aK as dy,b as uy,l as kd,aL as Ed,aM as my,aN as Cd,T as we,D as fy,M as qi,R as hy,e as un,aO as py,aP as gy,aQ as xy,aR as te,C as vy,aS as yy,aT as qn}from"./manager-dashboard-BkEir6jh.js";import{b as Yf,r as p,R as mt,d as lr,a as by}from"./react-vendor-z5qVsTvS.js";import{U as jy,u as Bt}from"./auth-vNnhMft6.js";import{A as Xf,u as wy,F as Gi,D as Ny,L as Sy}from"./agency-dashboard-C2XGnqnO.js";import{u as _y,a as Py,E as Od}from"./forms-GwN-MS0g.js";import{n as Hi,Q as Ay}from"./intern-dashboard-y3kAFmdK.js";import{m as $e,k as Zf,F as ky,n as de,o as et,p as tt,q as ue,P as Td,M as Md,V as Ey,r as Cy,s as Yt,j as Oy,e as Ty,t as My,l as Dd,T as Id,a as Dy,h as Iy,u as Ry,v as $y,D as Jf,g as as,x as Ly,C as Fy,A as By,E as zy,R as Rd,y as Uy}from"./employee-dashboard--UUznbXa.js";import"./supabase-vendor-DJqG3OLk.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Do={},$d=Yf;Do.createRoot=$d.createRoot,Do.hydrateRoot=$d.hydrateRoot;const Wy=p.createContext(),Ky=({children:e})=>{const[t,r]=p.useState(()=>{const d=localStorage.getItem("theme");return d||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});p.useEffect(()=>{const d=window.document.documentElement;d.classList.remove("light","dark"),d.classList.add(t),localStorage.setItem("theme",t)},[t]),p.useEffect(()=>{const d=window.matchMedia("(prefers-color-scheme: dark)"),u=c=>{localStorage.getItem("theme")||r(c.matches?"dark":"light")};return d.addEventListener("change",u),()=>d.removeEventListener("change",u)},[]);const l={theme:t,toggleTheme:()=>{r(d=>d==="light"?"dark":"light")},setLightTheme:()=>r("light"),setDarkTheme:()=>r("dark"),setSystemTheme:()=>{localStorage.removeItem("theme");const d=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";r(d)},isDark:t==="dark",isLight:t==="light"};return a.jsx(Wy.Provider,{value:l,children:e})},Br={log:(...e)=>{},warn:(...e)=>{console.warn(...e)},error:(...e)=>{console.error(...e)},debug:(...e)=>{},info:(...e)=>{},force:(...e)=>{console.log(...e)},group:(e,t)=>{},table:e=>{}};class qy extends p.Component{constructor(r){super(r);Kn(this,"handleRetry",()=>{this.setState({hasError:!1,errorId:null}),window.location.reload()});Kn(this,"handleReportIssue",()=>{const r=this.state.errorId,n=encodeURIComponent(`Application Error Report - ID: ${r}`),s=encodeURIComponent(`An error occurred in the application.

Error ID: ${r}
Time: ${new Date().toISOString()}
Page: ${window.location.href}

Please describe what you were doing when this error occurred:

`);window.location.href=`mailto:support@brandingpioneers.com?subject=${n}&body=${s}`});this.state={hasError:!1,errorId:null,isProduction:!0}}static getDerivedStateFromError(r){return{hasError:!0,errorId:Date.now().toString(36)+Math.random().toString(36).substr(2)}}componentDidCatch(r,n){const s={error:r.toString(),stack:r.stack,componentStack:n.componentStack,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href,errorId:this.state.errorId};console.group("🚨 Global Error Handler"),Br.error("Error:",r),Br.error("Error Info:",n),Br.error("Error Details:",s),console.groupEnd();try{const i=JSON.parse(localStorage.getItem("app_errors")||"[]");i.push(s),i.length>5&&i.splice(0,i.length-5),localStorage.setItem("app_errors",JSON.stringify(i))}catch(i){Br.warn("Failed to save error to localStorage:",i)}window.reportError&&window.reportError(s)}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:a.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:a.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:a.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Something went wrong"}),a.jsx("p",{className:"text-sm text-gray-600 mb-6",children:this.state.isProduction?"We're sorry, but something unexpected happened. Our team has been notified and is working to fix this issue.":"An error occurred while loading the application. Please try refreshing the page."}),this.state.errorId&&a.jsxs("p",{className:"text-xs text-gray-400 mb-6",children:["Error ID: ",this.state.errorId]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:this.handleRetry,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Refresh Page"}),a.jsx("button",{onClick:this.handleReportIssue,className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Report Issue"}),a.jsx("button",{onClick:()=>window.location.assign("/"),className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Go to Home"})]}),!this.state.isProduction&&a.jsx("div",{className:"mt-6 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:a.jsxs("p",{className:"text-xs text-yellow-800",children:[a.jsx("strong",{children:"Development Mode:"})," Check the browser console for detailed error information."]})})]})})})}):this.props.children}}const Gy=({children:e})=>(mt.useEffect(()=>{const t=n=>{Br.error("Unhandled promise rejection:",n.reason),Br.warn("An operation failed. Please try again.")},r=n=>{Br.error("Global JavaScript error:",n.error),n.preventDefault()};return window.addEventListener("unhandledrejection",t),window.addEventListener("error",r),()=>{window.removeEventListener("unhandledrejection",t),window.removeEventListener("error",r)}},[]),a.jsx(qy,{children:e}));function Hy({children:e}){return a.jsx(Mv,{children:a.jsx(Dv,{children:a.jsx(Iv,{children:a.jsx(jy,{children:a.jsx(Rv,{children:a.jsx($v,{children:a.jsx(Lv,{children:a.jsx(Fv,{children:a.jsx(Ky,{children:a.jsx(Gy,{children:e})})})})})})})})})})}const Vy=()=>{const{authState:e}=Bt(),{user:t,isLoading:r}=e,[n,s]=p.useState(!1);p.useEffect(()=>{!r&&!t&&!n&&s(!0)},[r,t,n]),p.useMemo(()=>!!t,[t]),p.useMemo(()=>!t&&n,[t,n]),p.useMemo(()=>!t&&!n,[t,n]);const i=p.useCallback(()=>{console.log("Navigate to profile")},[]);return r?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:a.jsxs("div",{className:"text-center space-y-8 p-10 bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 max-w-md mx-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shadow-lg",children:a.jsx(Pe,{size:"lg",className:"text-white"})}),a.jsx("div",{className:"absolute inset-0 w-20 h-20 mx-auto bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full animate-ping opacity-20"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Loading Application"}),a.jsx("p",{className:"text-slate-600 font-medium",children:"Please wait while we prepare your workspace..."}),a.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full mx-auto animate-pulse"})]})]})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100",children:a.jsx(Xf,{userType:t==null?void 0:t.role,currentUser:t,onNavigateToProfile:i})})},Yy=mt.memo(Vy);function Xy({onLoginSuccess:e,onCancel:t}){const{login:r,authState:n}=Bt(),{isLoading:s,loginError:i}=n,[o,l]=p.useState({firstName:"",phone:"",rememberMe:!1}),[d,u]=p.useState(!1);p.useEffect(()=>{if(i){const f=setTimeout(()=>{},5e3);return()=>clearTimeout(f)}},[i]);const c=f=>{const{name:h,value:g,type:x,checked:b}=f.target;l(y=>({...y,[h]:x==="checkbox"?b:g}))},m=async f=>{if(f.preventDefault(),!(!o.firstName||!o.phone)){u(!0);try{console.log("🔐 Submitting login form:",{firstName:o.firstName,phone:o.phone}),localStorage.setItem("bptm_remember_firstName",o.firstName),localStorage.setItem("bptm_remember_phone",o.phone);const h=await r({firstName:o.firstName,phone:o.phone});console.log("🔐 Login result:",{success:h==null?void 0:h.success}),h&&h.success&&(console.log("✅ Login successful, redirecting to dashboard"),e&&e(h.user),!e&&h.dashboardRoute&&(window.location.href=h.dashboardRoute))}catch(h){console.error("❌ Login submission error:",h)}finally{u(!1)}}};return p.useEffect(()=>{const f=localStorage.getItem("bptm_remember_firstName"),h=localStorage.getItem("bptm_remember_phone");f&&h&&l(g=>({...g,firstName:f,phone:h,rememberMe:!0}))},[]),s?a.jsx(Eo,{show:!0,children:a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:a.jsx(Pe,{size:"lg",showText:!0,text:"Authenticating..."})})})}):a.jsx(Eo,{show:!0,children:a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 px-4",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-blue-100 mb-4",children:a.jsx("span",{className:"text-2xl font-bold text-blue-600",children:"🏢"})}),a.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),a.jsx("p",{className:"text-gray-600",children:"Sign in to your BPTM account"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 space-y-6",children:[i&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("span",{className:"text-red-500 text-xl mr-3",children:"⚠️"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-red-800 font-medium",children:"Authentication Error"}),a.jsx("p",{className:"text-red-700 text-sm mt-1",children:i})]})]})}),a.jsxs("form",{onSubmit:m,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),a.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,value:o.firstName,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your first name (e.g., John, Sarah, David)",disabled:d})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),a.jsx("input",{id:"phone",name:"phone",type:"tel",required:!0,value:o.phone,onChange:c,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter phone number (with or without +91 prefix)",disabled:d,inputMode:"numeric",autoComplete:"tel",pattern:"^(\\+91[-\\s]?)?[6-9][0-9]{9}$",title:"Enter 10 digits starting with 6-9, optionally prefixed with +91-, +91 , or +91 (e.g., 9876543210, +91-9876543210, or +91 9876543210)",onInput:f=>f.target.setCustomValidity(""),onInvalid:f=>f.target.setCustomValidity("Please enter 10 digits starting with 6-9, optionally prefixed with +91-, +91 , or +91 (e.g., 9876543210, +91-9876543210, or +91 9876543210)")})]}),a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{name:"rememberMe",type:"checkbox",checked:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:!0}),a.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Credentials autosaved for easier testing"})]})}),a.jsx("button",{type:"submit",disabled:d||!o.firstName||!o.phone,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?a.jsx(Pe,{size:"sm",color:"white"}):"Sign In"})]})]}),a.jsxs("div",{className:"text-center text-sm text-gray-600",children:[a.jsx("p",{children:"Need help? Contact your system administrator"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"BPTM Employee Performance Management System"})]})]})})})}const Zy=()=>{const{setupPassword:e,user:t,getDashboardPath:r}=Bt(),n=Ol(),[s,i]=p.useState({newPassword:"",confirmPassword:""}),[o,l]=p.useState(""),[d,u]=p.useState(!1),[c,m]=p.useState(!1),f=w=>{const{name:S,value:v}=w.target;i(N=>({...N,[S]:v})),o&&l("")},h=w=>w.length<8?"Password must be at least 8 characters long":/(?=.*[a-z])/.test(w)?/(?=.*[A-Z])/.test(w)?/(?=.*\d)/.test(w)?null:"Password must contain at least one number":"Password must contain at least one uppercase letter":"Password must contain at least one lowercase letter",g=async w=>{if(w.preventDefault(),l(""),!s.newPassword||!s.confirmPassword){l("Please fill in both password fields");return}if(s.newPassword!==s.confirmPassword){l("Passwords do not match");return}const S=h(s.newPassword);if(S){l(S);return}u(!0);const v=await e(s.newPassword);u(!1),v.success?n(r()):l(v.error)},b=(w=>{let S=0;return w.length>=8&&S++,/(?=.*[a-z])/.test(w)&&S++,/(?=.*[A-Z])/.test(w)&&S++,/(?=.*\d)/.test(w)&&S++,/(?=.*[!@#$%^&*])/.test(w)&&S++,S})(s.newPassword),y=["bg-red-500","bg-orange-500","bg-yellow-500","bg-blue-500","bg-green-500"],j=["Very Weak","Weak","Fair","Good","Strong"];return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Set Up Your Password"}),a.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Welcome, ",t==null?void 0:t.full_name,"! Please create a secure password for your account."]})]}),a.jsxs("form",{className:"mt-8 space-y-6 bg-white p-8 rounded-xl shadow-lg",onSubmit:g,children:[o&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:o}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"newPassword",name:"newPassword",type:c?"text":"password",required:!0,className:"appearance-none relative block w-full px-3 py-3 pr-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm transition-colors",placeholder:"Enter your new password",value:s.newPassword,onChange:f}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>m(!c),children:c?a.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):a.jsxs("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),s.newPassword&&a.jsxs("div",{className:"mt-2",children:[a.jsx("div",{className:"flex space-x-1 mb-1",children:[...Array(5)].map((w,S)=>a.jsx("div",{className:`h-2 w-full rounded ${S<b?y[b-1]:"bg-gray-200"}`},S))}),a.jsxs("p",{className:"text-xs text-gray-600",children:["Password strength: ",j[b-1]||"Very Weak"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),a.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:c?"text":"password",required:!0,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm transition-colors",placeholder:"Confirm your new password",value:s.confirmPassword,onChange:f}),s.confirmPassword&&s.newPassword!==s.confirmPassword&&a.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Passwords do not match"})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Password Requirements:"}),a.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[a.jsxs("li",{className:`flex items-center ${s.newPassword.length>=8?"text-green-600":""}`,children:[a.jsx("span",{className:"mr-2",children:s.newPassword.length>=8?"✓":"•"}),"At least 8 characters long"]}),a.jsxs("li",{className:`flex items-center ${/(?=.*[a-z])/.test(s.newPassword)?"text-green-600":""}`,children:[a.jsx("span",{className:"mr-2",children:/(?=.*[a-z])/.test(s.newPassword)?"✓":"•"}),"One lowercase letter"]}),a.jsxs("li",{className:`flex items-center ${/(?=.*[A-Z])/.test(s.newPassword)?"text-green-600":""}`,children:[a.jsx("span",{className:"mr-2",children:/(?=.*[A-Z])/.test(s.newPassword)?"✓":"•"}),"One uppercase letter"]}),a.jsxs("li",{className:`flex items-center ${/(?=.*\d)/.test(s.newPassword)?"text-green-600":""}`,children:[a.jsx("span",{className:"mr-2",children:/(?=.*\d)/.test(s.newPassword)?"✓":"•"}),"One number"]})]})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:d||b<3,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?a.jsxs("div",{className:"flex items-center",children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Setting up password..."]}):"Set Password & Continue"})})]})]})})},Ze=({children:e,requiredRole:t=null,requiredRoles:r=[],allowedRoles:n=[],redirectTo:s="/login",fallback:i=null})=>{const{authState:o}=Bt(),{user:l,isLoggedIn:d,isLoading:u}=o,c=Bv();return u?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):!d||!l?a.jsx(Co,{to:s,state:{from:c},replace:!0}):l.needs_password_setup&&c.pathname!=="/setup-password"?a.jsx(Co,{to:"/setup-password",replace:!0}):t&&l.role!==t?(console.log("🔒 Access denied - required role not matched:",{userRole:l.role,requiredRole:t}),i||a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:a.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 15.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Access Denied"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"You don't have permission to access this page."}),a.jsx("div",{className:"mt-6",children:a.jsx("button",{onClick:()=>window.history.back(),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Go Back"})})]})})):r.length>0&&!r.includes(l.role)&&(console.log("🔒 Access denied - user role not in required roles list:",{userRole:l.role,requiredRoles:r}),i)?i:n.length>0&&!n.includes(l.role)?(console.log("🔒 Access denied - user role not in allowed roles list:",{userRole:l.role,allowedRoles:n}),i||a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:a.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 15.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Access Denied"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"You don't have permission to access this page."}),a.jsxs("p",{className:"mt-1 text-xs text-gray-400",children:["Required roles: ",r.join(", ")]}),a.jsx("div",{className:"mt-6",children:a.jsx("button",{onClick:()=>window.history.back(),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Go Back"})})]})})):e},Jy=({count:e})=>a.jsxs("div",{className:"relative inline-flex items-center",children:[a.jsx("svg",{className:"w-8 h-8 text-yellow-500",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 7V9C15 10.1 15.9 11 17 11V12.5C17 13.6 16.1 14.5 15 14.5V16C17.2 16 19 14.2 19 12V11C20.1 11 21 10.1 21 9ZM9 11V12.5C9 13.6 8.1 14.5 7 14.5V16C9.2 16 11 14.2 11 12V11C12.1 11 13 10.1 13 9V7L7 7V9C7 10.1 7.9 11 9 11Z"})}),e>0&&a.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold",children:e})]}),Qy=({value:e,onChange:t,error:r})=>{const[n,s]=p.useState(null),[i,o]=p.useState(!1),[l,d]=p.useState(""),u=async c=>{if(!c){s(null),d("");return}o(!0),d("");try{new URL(c);const m=new Image;m.onload=()=>{s(c),d(""),o(!1)},m.onerror=()=>{s(null),d("Invalid image URL or image cannot be loaded"),o(!1)},m.src=c}catch{s(null),d("Invalid URL format"),o(!1)}};return p.useEffect(()=>{const c=setTimeout(()=>{u(e)},500);return()=>clearTimeout(c)},[e]),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Image URL *"}),a.jsx("input",{type:"url",value:e||"",onChange:c=>t(c.target.value),placeholder:"https://drive.google.com/... or any public image URL",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${r||l?"border-red-500":"border-gray-300"}`}),(r||l)&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:r||l})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[i&&a.jsxs("div",{className:"flex items-center space-x-2 text-blue-600",children:[a.jsx(Pe,{size:"sm"}),a.jsx("span",{className:"text-sm",children:"Validating image..."})]}),n&&!i&&a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("img",{src:n,alt:"Profile preview",className:"w-16 h-16 rounded-full object-cover border-2 border-green-500"}),a.jsx("span",{className:"text-green-600 text-sm font-medium",children:"✓ Valid image"})]})]}),a.jsx("div",{className:"text-xs text-gray-500",children:"💡 Tip: For Google Drive images, make sure the link is public and use the direct image URL"})]})},Vi=({testimonials:e=[]})=>{const t=Math.floor(e.length/2);return a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Testimonial URLs Added: ",e.length]}),t>0&&a.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:t},(r,n)=>a.jsx(Jy,{count:n+1},n))})]}),e.length>0&&e.length%2===1&&a.jsxs("div",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded",children:[2-e.length%2," more needed for next badge"]})]})},Ld=({items:e=[],onChange:t,placeholder:r,label:n,maxItems:s=10})=>{const i=()=>{e.length<s&&t([...e,""])},o=d=>{t(e.filter((u,c)=>c!==d))},l=(d,u)=>{const c=[...e];c[d]=u,t(c)};return a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:n}),e.map((d,u)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"url",value:d,onChange:c=>l(u,c.target.value),placeholder:r,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("button",{type:"button",onClick:()=>o(u),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:"✕"})]},u)),e.length<s&&a.jsxs("button",{type:"button",onClick:i,className:"w-full px-4 py-2 border-2 border-dashed border-gray-300 text-gray-600 rounded-lg hover:border-blue-500 hover:text-blue-600 transition-colors",children:["+ Add ",n]})]})},eb=({employee:e,onUpdate:t,isEditing:r=!1})=>{var b,y;const n=kt(),{notify:s}=at(),[i,o]=p.useState(!1),[l,d]=p.useState([]),[u,c]=p.useState([]),[m,f]=p.useState({name:"",email:"",phone:"",department:"",designation:"",hire_date:"",profile_image_url:"",current_projects:[],current_clients:[],key_skills:[],tools_assigned:[],testimonials:[],...e});p.useEffect(()=>{(async()=>{try{const{data:w,error:S}=await n.from("clients").select("id, name, company_name").eq("status","active");if(S)throw S;d(w||[]);const{data:v,error:N}=await n.from("tools").select("id, name, category").eq("status","active");if(N)throw N;c(v||[])}catch(w){console.error("Error fetching dropdown data:",w),s("Failed to load clients and tools data","error")}})()},[n,s]);const h=async()=>{o(!0);try{const{error:j}=await n.from("employees").upsert({...m,updated_at:new Date().toISOString()});if(j)throw j;s("Profile updated successfully!","success"),t&&t(m)}catch(j){console.error("Error saving profile:",j),s("Failed to save profile","error")}finally{o(!1)}},g=(j,w)=>{f(S=>({...S,[j]:w}))},x=Math.floor((((b=m.testimonials)==null?void 0:b.length)||0)/2);return r?a.jsx(Te,{title:"✏️ Edit Profile",className:"bg-white",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),a.jsx("input",{type:"text",value:m.name||"",onChange:j=>g("name",j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),a.jsx("input",{type:"email",value:m.email||"",onChange:j=>g("email",j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone *"}),a.jsx("input",{type:"tel",value:m.phone||"",onChange:j=>g("phone",j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department *"}),a.jsxs("select",{value:m.department||"",onChange:j=>g("department",j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[a.jsx("option",{value:"",children:"Select Department"}),a.jsx("option",{value:"Web",children:"Web"}),a.jsx("option",{value:"Marketing",children:"Marketing"}),a.jsx("option",{value:"Operations",children:"Operations"}),a.jsx("option",{value:"HR",children:"HR"}),a.jsx("option",{value:"Sales",children:"Sales"}),a.jsx("option",{value:"Accounts",children:"Accounts"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Designation *"}),a.jsx("input",{type:"text",value:m.designation||"",onChange:j=>g("designation",j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Senior Developer, Marketing Executive",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Joining Date"}),a.jsx("input",{type:"date",value:m.hire_date||"",onChange:j=>g("hire_date",j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsx(Qy,{value:m.profile_image_url,onChange:j=>g("profile_image_url",j)}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Clients"}),a.jsx("select",{multiple:!0,value:m.current_clients||[],onChange:j=>{const w=Array.from(j.target.selectedOptions,S=>S.value);g("current_clients",w)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 h-32",children:l.map(j=>a.jsxs("option",{value:j.id,children:[j.name," ",j.company_name&&`(${j.company_name})`]},j.id))}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hold Ctrl/Cmd to select multiple clients"})]}),a.jsx(Ld,{items:m.key_skills||[],onChange:j=>g("key_skills",j),placeholder:"e.g., React, SEO, Content Writing",label:"Key Skills",maxItems:10}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tools Assigned"}),a.jsx("select",{multiple:!0,value:m.tools_assigned||[],onChange:j=>{const w=Array.from(j.target.selectedOptions,S=>S.value);g("tools_assigned",w)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 h-32",children:u.map(j=>a.jsxs("option",{value:j.id,children:[j.name," ",j.category&&`(${j.category})`]},j.id))}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hold Ctrl/Cmd to select multiple tools"})]}),a.jsxs("div",{children:[a.jsx(Ld,{items:m.testimonials||[],onChange:j=>g("testimonials",j),placeholder:"https://youtube.com/watch?v=... (BrandingPioneers channel)",label:"Video Testimonials",maxItems:20}),a.jsx(Vi,{testimonials:m.testimonials||[]}),a.jsx("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:a.jsxs("p",{className:"text-sm text-blue-700",children:["💡 ",a.jsx("strong",{children:"Testimonial Badge Logic:"})," You earn 1 trophy badge for every 2 testimonials uploaded. Testimonials must be uploaded to the BrandingPioneers YouTube channel."]})})]}),a.jsx("div",{className:"flex justify-end space-x-3",children:a.jsxs("button",{type:"button",onClick:h,disabled:i,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[i&&a.jsx(Pe,{size:"sm"}),a.jsx("span",{children:i?"Saving...":"Save Profile"})]})})]})}):a.jsx(Te,{title:"👤 Employee Profile",className:"bg-white",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"text-center space-y-4",children:[m.profile_image_url?a.jsx("img",{src:m.profile_image_url,alt:m.name,className:"w-32 h-32 rounded-full mx-auto object-cover border-4 border-blue-500 shadow-lg"}):a.jsx("div",{className:"w-32 h-32 rounded-full mx-auto bg-gray-200 flex items-center justify-center text-gray-500 text-4xl",children:"👤"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:m.name}),a.jsx("p",{className:"text-gray-600",children:m.designation}),a.jsx("p",{className:"text-sm text-gray-500",children:m.department})]}),x>0&&a.jsx("div",{className:"flex justify-center",children:a.jsx(Vi,{testimonials:m.testimonials||[]})})]})}),a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),a.jsx("p",{className:"text-gray-900",children:m.email})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),a.jsx("p",{className:"text-gray-900",children:m.phone})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Joining Date"}),a.jsx("p",{className:"text-gray-900",children:m.hire_date?new Date(m.hire_date).toLocaleDateString():"N/A"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Current Clients"}),a.jsx("div",{className:"space-y-1",children:(m.current_clients||[]).map((j,w)=>{const S=l.find(v=>v.id===j);return a.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm mr-2 mb-1",children:(S==null?void 0:S.name)||j},w)})})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Key Skills & Tools"}),a.jsx("div",{className:"space-y-1",children:(m.key_skills||[]).map((j,w)=>a.jsx("span",{className:"inline-block bg-green-100 text-green-800 px-2 py-1 rounded text-sm mr-2 mb-1",children:j},w))})]})]}),(((y=m.testimonials)==null?void 0:y.length)||0)>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Video Testimonials"}),a.jsx(Vi,{testimonials:m.testimonials||[]}),a.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[m.testimonials.length," testimonial",m.testimonials.length!==1?"s":""," uploaded"]})]})]})]})})},tb=({month:e,status:t,isSelected:r,onClick:n})=>{const s=()=>{switch(t){case"completed":return"bg-green-500";case"partial":return"bg-yellow-500";case"empty":return"bg-gray-300";default:return"bg-gray-300"}},i=()=>{switch(t){case"completed":return"✓";case"partial":return"◐";case"empty":return"○";default:return"○"}};return a.jsxs("button",{onClick:()=>n(e),className:`relative p-3 rounded-lg border-2 transition-all duration-200 hover:scale-105 ${r?"border-blue-500 bg-blue-50 shadow-lg":"border-gray-200 hover:border-blue-300"}`,children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`w-4 h-4 rounded-full mx-auto mb-2 ${s()} flex items-center justify-center text-white text-xs font-bold`,children:i()}),a.jsx("div",{className:"text-sm font-medium text-gray-900",children:Jr(e).split(" ")[0]}),a.jsx("div",{className:"text-xs text-gray-500",children:Jr(e).split(" ")[1]})]}),a.jsx("div",{className:`absolute -top-1 -right-1 w-3 h-3 rounded-full ${s()}`})]})},rb=({role:e,formData:t,onChange:r,clients:n=[]})=>{const s=()=>a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Operation Manager - Client Updates & Management"}),n.map((d,u)=>{var c,m,f,h;return a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:d.name}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client Updates"}),a.jsx("textarea",{value:((c=t.clientUpdates)==null?void 0:c[d.id])||"",onChange:g=>r("clientUpdates",{...t.clientUpdates,[d.id]:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Weekly updates, progress, issues..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Escalations"}),a.jsx("input",{type:"number",value:((m=t.escalations)==null?void 0:m[d.id])||0,onChange:g=>r("escalations",{...t.escalations,[d.id]:parseInt(g.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Appreciation Count"}),a.jsx("input",{type:"number",value:((f=t.appreciations)==null?void 0:f[d.id])||0,onChange:g=>r("appreciations",{...t.appreciations,[d.id]:parseInt(g.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]})]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Happiness Score (1-10)"}),a.jsx("input",{type:"number",value:((h=t.happinessScore)==null?void 0:h[d.id])||5,onChange:g=>r("happinessScore",{...t.happinessScore,[d.id]:parseInt(g.target.value)||5}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"10"})]})]},d.id||u)})]}),i=()=>a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Accountant - Payment & Compliance Tracking"}),n.map((d,u)=>{var c,m,f,h,g,x,b,y,j,w,S;return a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:d.name}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Status"}),a.jsxs("select",{value:((c=t.paymentStatus)==null?void 0:c[d.id])||"pending",onChange:v=>{var A;const N=v.target.value,_=((A=t.paymentProofUrl)==null?void 0:A[d.id])||"";if((N==="completed"||N==="partial")&&!_.trim()){alert(`Payment proof URL is required when marking payment as ${N}. Please add a proof URL first.`);return}if((N==="completed"||N==="partial")&&_&&!Lf(_)){alert("Payment proof must be a valid Google Drive URL.");return}r("paymentStatus",{...t.paymentStatus,[d.id]:N})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"partial",children:"Partial"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"overdue",children:"Overdue"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Date"}),a.jsx("input",{type:"date",value:((m=t.paymentDate)==null?void 0:m[d.id])||"",onChange:v=>r("paymentDate",{...t.paymentDate,[d.id]:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Compliance Status"}),a.jsxs("select",{value:((f=t.complianceStatus)==null?void 0:f[d.id])||"compliant",onChange:v=>r("complianceStatus",{...t.complianceStatus,[d.id]:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"compliant",children:"Compliant"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"non-compliant",children:"Non-Compliant"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Expense (₹)"}),a.jsx("input",{type:"number",value:((h=t.monthlyExpense)==null?void 0:h[d.id])||0,onChange:v=>r("monthlyExpense",{...t.monthlyExpense,[d.id]:parseFloat(v.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]})]}),a.jsxs("div",{className:"mt-3",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Payment Proof URL",(((g=t.paymentStatus)==null?void 0:g[d.id])==="completed"||((x=t.paymentStatus)==null?void 0:x[d.id])==="partial")&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"url",value:((b=t.paymentProofUrl)==null?void 0:b[d.id])||"",onChange:v=>{const N=v.target.value;r("paymentProofUrl",{...t.paymentProofUrl,[d.id]:N})},placeholder:"https://drive.google.com/...",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${((y=t.paymentStatus)==null?void 0:y[d.id])==="completed"||((j=t.paymentStatus)==null?void 0:j[d.id])==="partial"?"border-red-300":"border-gray-300"}`}),(((w=t.paymentStatus)==null?void 0:w[d.id])==="completed"||((S=t.paymentStatus)==null?void 0:S[d.id])==="partial")&&a.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Required: Google Drive URL for payment proof"})]})]},d.id||u)})]}),o=()=>a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Sales - CRM Pipeline Management"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"Lead Generation"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Leads"}),a.jsx("input",{type:"number",value:t.newLeads||0,onChange:d=>r("newLeads",parseInt(d.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lead Source"}),a.jsxs("select",{value:t.leadSource||"",onChange:d=>r("leadSource",d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select Source"}),a.jsx("option",{value:"website",children:"Website"}),a.jsx("option",{value:"referral",children:"Referral"}),a.jsx("option",{value:"social-media",children:"Social Media"}),a.jsx("option",{value:"cold-calling",children:"Cold Calling"}),a.jsx("option",{value:"email-campaign",children:"Email Campaign"}),a.jsx("option",{value:"networking",children:"Networking"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"Conversion Tracking"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Conversions"}),a.jsx("input",{type:"number",value:t.conversions||0,onChange:d=>r("conversions",parseInt(d.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Next Action"}),a.jsx("textarea",{value:t.nextAction||"",onChange:d=>r("nextAction",d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Follow-up actions, meetings scheduled..."})]})]})]})]})]}),l=()=>a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"HR - Employee Management & Hiring"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"Employee Management"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Onboarding Completed"}),a.jsx("input",{type:"number",value:t.onboardingCompleted||0,onChange:d=>r("onboardingCompleted",parseInt(d.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Compliance Issues"}),a.jsx("input",{type:"number",value:t.complianceIssues||0,onChange:d=>r("complianceIssues",parseInt(d.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]})]})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"Hiring Pipeline"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Candidates"}),a.jsx("input",{type:"number",value:t.newCandidates||0,onChange:d=>r("newCandidates",parseInt(d.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Interviews Conducted"}),a.jsx("input",{type:"number",value:t.interviewsConducted||0,onChange:d=>r("interviewsConducted",parseInt(d.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]})]})]})]})]});switch(e){case"Operations Head":case"Operation Manager":return s();case"Accountant":return i();case"Sales":return o();case"HR":return l();default:return a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx("p",{children:"No specific accountability form for this role."}),a.jsx("p",{className:"text-sm",children:"Please contact your manager for role-specific requirements."})]})}},nb=({role:e,formData:t,onChange:r,projects:n=[]})=>a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h4",{className:"font-medium text-gray-900",children:[e," - Project-based Accountability"]}),n.map((i,o)=>{var l,d,u,c,m;return a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:i.name}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Target"}),a.jsx("input",{type:"number",value:((l=t.projectTargets)==null?void 0:l[i.id])||0,onChange:f=>r("projectTargets",{...t.projectTargets,[i.id]:parseInt(f.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Completed"}),a.jsx("input",{type:"number",value:((d=t.projectCompleted)==null?void 0:d[i.id])||0,onChange:f=>r("projectCompleted",{...t.projectCompleted,[i.id]:parseInt(f.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Score"}),a.jsxs("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-center font-medium",children:[((u=t.projectTargets)==null?void 0:u[i.id])>0?Math.round((((c=t.projectCompleted)==null?void 0:c[i.id])||0)/t.projectTargets[i.id]*10):0,"/10"]})]})]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Progress Notes"}),a.jsx("textarea",{value:((m=t.projectNotes)==null?void 0:m[i.id])||"",onChange:f=>r("projectNotes",{...t.projectNotes,[i.id]:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Progress updates, challenges, achievements..."})]})]},i.id||o)}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h5",{className:"font-medium text-blue-800 mb-2",children:"Overall Accountability Score"}),a.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[n.length>0?Math.round(n.reduce((i,o)=>{var u,c;const l=((u=t.projectTargets)==null?void 0:u[o.id])||0,d=((c=t.projectCompleted)==null?void 0:c[o.id])||0;return i+(l>0?d/l*10:0)},0)/n.length):0,"/10"]}),a.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Average score across all assigned projects"})]})]}),ab=({employee:e,onSubmit:t})=>{var Z,se,G,H;const r=kt(),{notify:n}=at(),s=wy(),[i,o]=p.useState(!1),[l,d]=p.useState($f(Tl())),[u,c]=p.useState({}),[m,f]=p.useState({}),[h,g]=p.useState([]),[x,b]=p.useState([]),[y,j]=p.useState({}),[w,S]=p.useState(!1),[v,N]=p.useState(null),[_,A]=p.useState(!0),[k,C]=p.useState(!1),T=_y({name:e==null?void 0:e.name,phone:e==null?void 0:e.phone,monthKey:l,model:m,onRestore:J=>{J&&Object.keys(J).length>0&&(f(J),S(!1),N(new Date),s.showInfo(Gi.DRAFT_LOAD_SUCCESS))}}),O=p.useRef(null),F=p.useRef(m);p.useEffect(()=>{F.current=m},[m]);const P=p.useMemo(()=>{const J=new Date().getFullYear();return Array.from({length:12},(Q,ce)=>{const E=ce+1;return`${J}-${E.toString().padStart(2,"0")}`})},[]);p.useEffect(()=>{(async()=>{if(e!=null&&e.id)try{const{data:Q,error:ce}=await r.from("submissions").select("month_key, id").eq("employee_name",e.name).in("month_key",P);if(ce)throw ce;const E={};P.forEach(z=>{const L=Q==null?void 0:Q.find(V=>V.month_key===z);E[z]=L?"completed":"empty"}),c(E)}catch(Q){console.error("Error fetching month statuses:",Q)}})()},[e,P,r]),p.useEffect(()=>{const J=async()=>{try{const{data:Q,error:ce}=await r.from("clients").select("*").eq("status","active");if(ce)throw ce;g(Q||[]),b([{id:"web-dev",name:"Web Development"},{id:"seo",name:"SEO Optimization"},{id:"content",name:"Content Creation"},{id:"ads",name:"Ad Campaigns"},{id:"social",name:"Social Media"}]);const{data:E,error:z}=await r.from("employee_targets").select("*").eq("employee_id",e==null?void 0:e.id);if(!z&&E){const L={};E.forEach(V=>{L[V.metric]=V.value}),j(L)}}catch(Q){console.error("Error fetching data:",Q)}};e!=null&&e.id&&J()},[e,r]),p.useEffect(()=>{(async()=>{if(!(!(e!=null&&e.name)||!l))try{const{data:Q,error:ce}=await r.from("submissions").select("*").eq("employee_name",e.name).eq("month_key",l).single();if(ce&&ce.code!=="PGRST116")throw ce;f(Q||{})}catch(Q){console.error("Error loading form data:",Q),f({})}})()},[e,l,r]);const $=p.useCallback(async()=>{if(!(!_||!(e!=null&&e.name)||!(e!=null&&e.phone)||!l||!Object.keys(F.current).some(Q=>{const ce=F.current[Q];return ce&&(typeof ce=="string"?ce.trim():!0)})))try{C(!0);const Q={...F.current,employee_name:e.name,employee_phone:e.phone,department:e.department,role:e.role,month_key:l,lastSaved:new Date().toISOString(),isDraft:!0};T.saveDraft(Q,{forceImmediate:w})&&(N(new Date),S(!1),s.showInfo(Gi.DRAFT_SAVE_SUCCESS,{duration:2e3}))}catch(Q){console.error("Auto-save failed:",Q),s.showError(Gi.DRAFT_SAVE_ERROR)}finally{C(!1)}},[_,e,l,w,T]);p.useEffect(()=>(w&&(O.current&&clearTimeout(O.current),O.current=setTimeout(()=>{$()},2e3)),()=>{O.current&&clearTimeout(O.current)}),[w,$]);const D=(J,Q)=>{f(ce=>({...ce,[J]:Q})),S(!0)},B=async()=>{o(!0);try{const J=[];if(m.paymentStatus&&m.paymentProofUrl&&Object.keys(m.paymentStatus).forEach(E=>{const z=m.paymentStatus[E],L=m.paymentProofUrl[E]||"",V=h.find(R=>R.id===E),ee=(V==null?void 0:V.name)||`Client ${E}`;(z==="completed"||z==="partial")&&(L.trim()?Lf(L)||J.push(`${ee}: Payment proof must be a valid Google Drive URL`):J.push(`${ee}: Payment proof URL is required for ${z} status`))}),J.length>0){s.showFormError(null,`Payment validation failed:
${J.join(`
`)}`);return}const Q={...m,employee_name:e.name,employee_phone:e.phone,department:e.department,role:e.role,month_key:l,updated_at:new Date().toISOString(),isDraft:!1},{error:ce}=await r.from("submissions").upsert(Q);if(ce)throw ce;try{T.deleteDraft({name:e.name,phone:e.phone,monthKey:l})}catch(E){console.warn("Failed to clear draft:",E)}s.showFormSuccess("Monthly form saved successfully!"),c(E=>({...E,[l]:"completed"})),S(!1),N(new Date),t&&t(Q)}catch(J){console.error("Error saving form:",J),s.showFormError(J,"Failed to save monthly form. Please try again.")}finally{o(!1)}},I=["Operations Head","Operation Manager","Accountant","Sales","HR"].includes((Z=e==null?void 0:e.role)==null?void 0:Z[0]),X=["Web Developer","SEO","Marketing","Ads","Social Media","Graphic Designer"].includes((se=e==null?void 0:e.role)==null?void 0:se[0]);return a.jsx(Te,{title:"📅 Monthly Form & Accountability Workflow",className:"bg-white",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Month"}),a.jsx("div",{className:"grid grid-cols-6 md:grid-cols-12 gap-2",children:P.map(J=>a.jsx(tb,{month:J,status:u[J]||"empty",isSelected:l===J,onClick:d},J))}),a.jsxs("div",{className:"mt-4 flex items-center space-x-6 text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),a.jsx("span",{children:"Completed"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),a.jsx("span",{children:"Partial"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 bg-gray-300 rounded-full"}),a.jsx("span",{children:"Empty"})]})]})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("h4",{className:"font-medium text-blue-800",children:["📋 ",Jr(l)," Accountability Form"]}),a.jsxs("div",{className:"flex items-center space-x-3 text-xs",children:[k&&a.jsxs("div",{className:"flex items-center space-x-1 text-blue-600",children:[a.jsx(Pe,{size:"xs"}),a.jsx("span",{children:"Saving..."})]}),w&&!k&&a.jsxs("div",{className:"flex items-center space-x-1 text-orange-600",children:[a.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"}),a.jsx("span",{children:"Unsaved changes"})]}),v&&!w&&!k&&a.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),a.jsxs("span",{children:["Saved ",v.toLocaleTimeString()]})]}),a.jsx("button",{onClick:()=>A(!_),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${_?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:_?"Auto-save enabled":"Auto-save disabled",children:_?"🔄 Auto-save ON":"⏸️ Auto-save OFF"})]})]}),a.jsxs("p",{className:"text-sm text-blue-700",children:["Complete your monthly accountability data for ",Jr(l),".",u[l]==="completed"&&" (Previously submitted - you can update)",w&&" Your changes are being auto-saved."]})]}),I&&a.jsx(rb,{role:(G=e==null?void 0:e.role)==null?void 0:G[0],formData:m,onChange:D,clients:h}),X&&a.jsx(nb,{role:(H=e==null?void 0:e.role)==null?void 0:H[0],formData:m,onChange:D,projects:x}),!I&&!X&&a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx("p",{children:"No specific accountability form configured for your role."}),a.jsx("p",{className:"text-sm",children:"Please contact your manager for role-specific requirements."})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("button",{type:"button",onClick:$,disabled:k||!w,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 text-sm",children:[k&&a.jsx(Pe,{size:"xs"}),a.jsx("span",{children:k?"Saving Draft...":"Save Draft"})]}),Object.keys(m).length>0&&a.jsx("span",{className:"text-xs text-gray-500",children:w?"Draft has unsaved changes":"Draft saved"})]}),a.jsx("div",{className:"flex space-x-3",children:a.jsxs("button",{type:"button",onClick:B,disabled:i||k,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[i&&a.jsx(Pe,{size:"sm"}),a.jsx("span",{children:i?"Submitting...":"Submit Monthly Form"})]})})]}),a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[a.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"ℹ️ How it works"}),a.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Month Selection:"})," Choose any month to view/edit your accountability data"]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Visual Status:"})," Green = completed, Yellow = partial, Gray = empty"]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Role-based Forms:"})," Different accountability metrics based on your role"]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Auto-save & Drafts:"})," Your changes are automatically saved as drafts every 2 seconds"]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Progress Tracking:"})," See real-time indicators for unsaved changes and save status"]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Draft Recovery:"})," Resume your work from where you left off, even after browser refresh"]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Final Submission:"})," Use 'Submit Monthly Form' to finalize and clear drafts"]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"DB-driven Scoring:"})," Scores are calculated automatically based on targets vs achievements"]})]})]})]})})};function Qf(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=Qf(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function fe(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=Qf(e))&&(n&&(n+=" "),n+=t);return n}var Gs={},eh={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(eh);var Dl={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(Dl);var Il={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(Il);var Hs={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],s=r.length;if(s===0)return n;let i=0,o="",l="",d=!1;for(r.charCodeAt(0)===46&&(n.push(""),i++);i<s;){const u=r[i];l?u==="\\"&&i+1<s?(i++,o+=r[i]):u===l?l="":o+=u:d?u==='"'||u==="'"?l=u:u==="]"?(d=!1,n.push(o),o=""):o+=u:u==="["?(d=!0,o&&(n.push(o),o="")):u==="."?o&&(n.push(o),o=""):o+=u,i++}return o&&n.push(o),n}e.toPath=t})(Hs);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eh,r=Dl,n=Il,s=Hs;function i(l,d,u){if(l==null)return u;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return u;const c=l[d];return c===void 0?r.isDeepKey(d)?i(l,s.toPath(d),u):u:c}case"number":case"symbol":{typeof d=="number"&&(d=n.toKey(d));const c=l[d];return c===void 0?u:c}default:{if(Array.isArray(d))return o(l,d,u);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return u;const c=l[d];return c===void 0?u:c}}}function o(l,d,u){if(d.length===0)return u;let c=l;for(let m=0;m<d.length;m++){if(c==null||t.isUnsafeProperty(d[m]))return u;c=c[d[m]]}return c===void 0?u:c}e.get=i})(Gs);var sb=Gs.get;const Qr=lr(sb);var th={exports:{}},ge={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rl=Symbol.for("react.transitional.element"),$l=Symbol.for("react.portal"),Vs=Symbol.for("react.fragment"),Ys=Symbol.for("react.strict_mode"),Xs=Symbol.for("react.profiler"),Zs=Symbol.for("react.consumer"),Js=Symbol.for("react.context"),Qs=Symbol.for("react.forward_ref"),ei=Symbol.for("react.suspense"),ti=Symbol.for("react.suspense_list"),ri=Symbol.for("react.memo"),ni=Symbol.for("react.lazy"),ib=Symbol.for("react.view_transition"),ob=Symbol.for("react.client.reference");function Et(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Rl:switch(e=e.type,e){case Vs:case Xs:case Ys:case ei:case ti:case ib:return e;default:switch(e=e&&e.$$typeof,e){case Js:case Qs:case ni:case ri:return e;case Zs:return e;default:return t}}case $l:return t}}}ge.ContextConsumer=Zs;ge.ContextProvider=Js;ge.Element=Rl;ge.ForwardRef=Qs;ge.Fragment=Vs;ge.Lazy=ni;ge.Memo=ri;ge.Portal=$l;ge.Profiler=Xs;ge.StrictMode=Ys;ge.Suspense=ei;ge.SuspenseList=ti;ge.isContextConsumer=function(e){return Et(e)===Zs};ge.isContextProvider=function(e){return Et(e)===Js};ge.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Rl};ge.isForwardRef=function(e){return Et(e)===Qs};ge.isFragment=function(e){return Et(e)===Vs};ge.isLazy=function(e){return Et(e)===ni};ge.isMemo=function(e){return Et(e)===ri};ge.isPortal=function(e){return Et(e)===$l};ge.isProfiler=function(e){return Et(e)===Xs};ge.isStrictMode=function(e){return Et(e)===Ys};ge.isSuspense=function(e){return Et(e)===ei};ge.isSuspenseList=function(e){return Et(e)===ti};ge.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Vs||e===Xs||e===Ys||e===ei||e===ti||typeof e=="object"&&e!==null&&(e.$$typeof===ni||e.$$typeof===ri||e.$$typeof===Js||e.$$typeof===Zs||e.$$typeof===Qs||e.$$typeof===ob||e.getModuleId!==void 0)};ge.typeOf=Et;th.exports=ge;var lb=th.exports,rt=e=>e===0?0:e>0?1:-1,ht=e=>typeof e=="number"&&e!=+e,zr=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,q=e=>(typeof e=="number"||e instanceof Number)&&!ht(e),Kt=e=>q(e)||typeof e=="string",cb=0,oa=e=>{var t=++cb;return"".concat(e||"").concat(t)},Lt=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!q(t)&&typeof t!="string")return n;var i;if(zr(t)){if(r==null)return n;var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return ht(i)&&(i=n),s&&r!=null&&i>r&&(i=r),i},rh=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function Dt(e,t,r){return q(e)&&q(t)?e+r*(t-e):t}function nh(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Qr(n,t))===r)}var be=e=>e===null||typeof e>"u",va=e=>be(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),db=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Ll(e){if(typeof e!="string")return!1;var t=db;return t.includes(e)}var ub=["viewBox","children"],Fd=["points","pathLength"],Yi={svg:ub,polygon:Fd,polyline:Fd},Fl=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(p.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{Ll(s)&&(n[s]=i=>r[s](r,i))}),n},mb=(e,t,r)=>n=>(e(t,r,n),null),Bl=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var i=e[s];Ll(s)&&typeof i=="function"&&(n||(n={}),n[s]=mb(i,t,r))}),n},fb=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function ah(e){if(typeof e!="string")return!1;var t=fb;return t.includes(e)}function on(e){var t=Object.entries(e).filter(r=>{var[n]=r;return ah(n)});return Object.fromEntries(t)}var Bd=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",zd=null,Xi=null,sh=e=>{if(e===zd&&Array.isArray(Xi))return Xi;var t=[];return p.Children.forEach(e,r=>{be(r)||(lb.isFragment(r)?t=t.concat(sh(r.props.children)):t.push(r))}),Xi=t,zd=e,t};function zl(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>Bd(s)):n=[Bd(t)],sh(e).forEach(s=>{var i=Qr(s,"type.displayName")||Qr(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}var ih=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,hb=(e,t,r,n)=>{var s;if(typeof t=="symbol"||typeof t=="number")return!0;var i=(s=n&&(Yi==null?void 0:Yi[n]))!==null&&s!==void 0?s:[],o=t.startsWith("data-"),l=typeof e!="function"&&(!!n&&i.includes(t)||ah(t)),d=!!r&&Ll(t);return o||l||d},_e=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(p.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var s={};return Object.keys(n).forEach(i=>{var o;hb((o=n)===null||o===void 0?void 0:o[i],i,t,r)&&(s[i]=n[i])}),s},pb=["children","width","height","viewBox","className","style","title","desc"];function Io(){return Io=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Io.apply(null,arguments)}function gb(e,t){if(e==null)return{};var r,n,s=xb(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function xb(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var oh=p.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:i,className:o,style:l,title:d,desc:u}=e,c=gb(e,pb),m=i||{width:n,height:s,x:0,y:0},f=fe("recharts-surface",o);return p.createElement("svg",Io({},_e(c,!0,"svg"),{className:f,width:n,height:s,style:l,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),ref:t}),p.createElement("title",null,d),p.createElement("desc",null,u),r)}),vb=["children","className"];function Ro(){return Ro=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ro.apply(null,arguments)}function yb(e,t){if(e==null)return{};var r,n,s=bb(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function bb(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ft=p.forwardRef((e,t)=>{var{children:r,className:n}=e,s=yb(e,vb),i=fe("recharts-layer",n);return p.createElement("g",Ro({className:i},_e(s,!0),{ref:t}),r)}),jb=p.createContext(null);function xe(e){return function(){return e}}const lh=Math.cos,ss=Math.sin,zt=Math.sqrt,is=Math.PI,ai=2*is,$o=Math.PI,Lo=2*$o,Rr=1e-6,wb=Lo-Rr;function ch(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Nb(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return ch;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class Sb{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?ch:Nb(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,d=n-t,u=s-r,c=o-t,m=l-r,f=c*c+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(f>Rr)if(!(Math.abs(m*d-u*c)>Rr)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let h=n-o,g=s-l,x=d*d+u*u,b=h*h+g*g,y=Math.sqrt(x),j=Math.sqrt(f),w=i*Math.tan(($o-Math.acos((x+f-b)/(2*y*j)))/2),S=w/j,v=w/y;Math.abs(S-1)>Rr&&this._append`L${t+S*c},${r+S*m}`,this._append`A${i},${i},0,0,${+(m*h>c*g)},${this._x1=t+v*d},${this._y1=r+v*u}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),d=n*Math.sin(s),u=t+l,c=r+d,m=1^o,f=o?s-i:i-s;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>Rr||Math.abs(this._y1-c)>Rr)&&this._append`L${u},${c}`,n&&(f<0&&(f=f%Lo+Lo),f>wb?this._append`A${n},${n},0,1,${m},${t-l},${r-d}A${n},${n},0,1,${m},${this._x1=u},${this._y1=c}`:f>Rr&&this._append`A${n},${n},0,${+(f>=$o)},${m},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function Ul(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Sb(t)}function Wl(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function dh(e){this._context=e}dh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function si(e){return new dh(e)}function uh(e){return e[0]}function mh(e){return e[1]}function fh(e,t){var r=xe(!0),n=null,s=si,i=null,o=Ul(l);e=typeof e=="function"?e:e===void 0?uh:xe(e),t=typeof t=="function"?t:t===void 0?mh:xe(t);function l(d){var u,c=(d=Wl(d)).length,m,f=!1,h;for(n==null&&(i=s(h=o())),u=0;u<=c;++u)!(u<c&&r(m=d[u],u,d))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(m,u,d),+t(m,u,d));if(h)return i=null,h+""||null}return l.x=function(d){return arguments.length?(e=typeof d=="function"?d:xe(+d),l):e},l.y=function(d){return arguments.length?(t=typeof d=="function"?d:xe(+d),l):t},l.defined=function(d){return arguments.length?(r=typeof d=="function"?d:xe(!!d),l):r},l.curve=function(d){return arguments.length?(s=d,n!=null&&(i=s(n)),l):s},l.context=function(d){return arguments.length?(d==null?n=i=null:i=s(n=d),l):n},l}function Ra(e,t,r){var n=null,s=xe(!0),i=null,o=si,l=null,d=Ul(u);e=typeof e=="function"?e:e===void 0?uh:xe(+e),t=typeof t=="function"?t:xe(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?mh:xe(+r);function u(m){var f,h,g,x=(m=Wl(m)).length,b,y=!1,j,w=new Array(x),S=new Array(x);for(i==null&&(l=o(j=d())),f=0;f<=x;++f){if(!(f<x&&s(b=m[f],f,m))===y)if(y=!y)h=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=f-1;g>=h;--g)l.point(w[g],S[g]);l.lineEnd(),l.areaEnd()}y&&(w[f]=+e(b,f,m),S[f]=+t(b,f,m),l.point(n?+n(b,f,m):w[f],r?+r(b,f,m):S[f]))}if(j)return l=null,j+""||null}function c(){return fh().defined(s).curve(o).context(i)}return u.x=function(m){return arguments.length?(e=typeof m=="function"?m:xe(+m),n=null,u):e},u.x0=function(m){return arguments.length?(e=typeof m=="function"?m:xe(+m),u):e},u.x1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:xe(+m),u):n},u.y=function(m){return arguments.length?(t=typeof m=="function"?m:xe(+m),r=null,u):t},u.y0=function(m){return arguments.length?(t=typeof m=="function"?m:xe(+m),u):t},u.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:xe(+m),u):r},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(r)},u.lineX1=function(){return c().x(n).y(t)},u.defined=function(m){return arguments.length?(s=typeof m=="function"?m:xe(!!m),u):s},u.curve=function(m){return arguments.length?(o=m,i!=null&&(l=o(i)),u):o},u.context=function(m){return arguments.length?(m==null?i=l=null:l=o(i=m),u):i},u}class hh{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function _b(e){return new hh(e,!0)}function Pb(e){return new hh(e,!1)}const Kl={draw(e,t){const r=zt(t/is);e.moveTo(r,0),e.arc(0,0,r,0,ai)}},Ab={draw(e,t){const r=zt(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},ph=zt(1/3),kb=ph*2,Eb={draw(e,t){const r=zt(t/kb),n=r*ph;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},Cb={draw(e,t){const r=zt(t),n=-r/2;e.rect(n,n,r,r)}},Ob=.8908130915292852,gh=ss(is/10)/ss(7*is/10),Tb=ss(ai/10)*gh,Mb=-lh(ai/10)*gh,Db={draw(e,t){const r=zt(t*Ob),n=Tb*r,s=Mb*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=ai*i/5,l=lh(o),d=ss(o);e.lineTo(d*r,-l*r),e.lineTo(l*n-d*s,d*n+l*s)}e.closePath()}},Zi=zt(3),Ib={draw(e,t){const r=-zt(t/(Zi*3));e.moveTo(0,r*2),e.lineTo(-Zi*r,-r),e.lineTo(Zi*r,-r),e.closePath()}},jt=-.5,wt=zt(3)/2,Fo=1/zt(12),Rb=(Fo/2+1)*3,$b={draw(e,t){const r=zt(t/Rb),n=r/2,s=r*Fo,i=n,o=r*Fo+r,l=-i,d=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(l,d),e.lineTo(jt*n-wt*s,wt*n+jt*s),e.lineTo(jt*i-wt*o,wt*i+jt*o),e.lineTo(jt*l-wt*d,wt*l+jt*d),e.lineTo(jt*n+wt*s,jt*s-wt*n),e.lineTo(jt*i+wt*o,jt*o-wt*i),e.lineTo(jt*l+wt*d,jt*d-wt*l),e.closePath()}};function Lb(e,t){let r=null,n=Ul(s);e=typeof e=="function"?e:xe(e||Kl),t=typeof t=="function"?t:xe(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:xe(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:xe(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function os(){}function ls(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function xh(e){this._context=e}xh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ls(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ls(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Fb(e){return new xh(e)}function vh(e){this._context=e}vh.prototype={areaStart:os,areaEnd:os,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ls(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Bb(e){return new vh(e)}function yh(e){this._context=e}yh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:ls(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function zb(e){return new yh(e)}function bh(e){this._context=e}bh.prototype={areaStart:os,areaEnd:os,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Ub(e){return new bh(e)}function Ud(e){return e<0?-1:1}function Wd(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),l=(i*s+o*n)/(n+s);return(Ud(i)+Ud(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function Kd(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Ji(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,s+l*t,i-l,o-l*r,i,o)}function cs(e){this._context=e}cs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ji(this,this._t0,Kd(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ji(this,Kd(this,r=Wd(this,e,t)),r);break;default:Ji(this,this._t0,r=Wd(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function jh(e){this._context=new wh(e)}(jh.prototype=Object.create(cs.prototype)).point=function(e,t){cs.prototype.point.call(this,t,e)};function wh(e){this._context=e}wh.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function Wb(e){return new cs(e)}function Kb(e){return new jh(e)}function Nh(e){this._context=e}Nh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=qd(e),s=qd(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function qd(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function qb(e){return new Nh(e)}function ii(e,t){this._context=e,this._t=t}ii.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Gb(e){return new ii(e,.5)}function Hb(e){return new ii(e,0)}function Vb(e){return new ii(e,1)}function Sn(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Bo(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Yb(e,t){return e[t]}function Xb(e){const t=[];return t.key=e,t}function Zb(){var e=xe([]),t=Bo,r=Sn,n=Yb;function s(i){var o=Array.from(e.apply(this,arguments),Xb),l,d=o.length,u=-1,c;for(const m of i)for(l=0,++u;l<d;++l)(o[l][u]=[0,+n(m,o[l].key,u,i)]).data=m;for(l=0,c=Wl(t(o));l<d;++l)o[c[l]].index=l;return r(o,c),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:xe(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:xe(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?Bo:typeof i=="function"?i:xe(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??Sn,s):r},s}function Jb(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}Sn(e,t)}}function Qb(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}Sn(e,t)}}function ej(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var l=0,d=0,u=0;l<o;++l){for(var c=e[t[l]],m=c[n][1]||0,f=c[n-1][1]||0,h=(m-f)/2,g=0;g<l;++g){var x=e[t[g]],b=x[n][1]||0,y=x[n-1][1]||0;h+=b-y}d+=m,u+=h*m}s[n-1][1]+=s[n-1][0]=r,d&&(r-=u/d)}s[n-1][1]+=s[n-1][0]=r,Sn(e,t)}}var tj=["type","size","sizeType"];function zo(){return zo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zo.apply(null,arguments)}function Gd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Hd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gd(Object(r),!0).forEach(function(n){rj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gd(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rj(e,t,r){return(t=nj(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nj(e){var t=aj(e,"string");return typeof t=="symbol"?t:t+""}function aj(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sj(e,t){if(e==null)return{};var r,n,s=ij(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ij(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Sh={symbolCircle:Kl,symbolCross:Ab,symbolDiamond:Eb,symbolSquare:Cb,symbolStar:Db,symbolTriangle:Ib,symbolWye:$b},oj=Math.PI/180,lj=e=>{var t="symbol".concat(va(e));return Sh[t]||Kl},cj=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*oj;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},dj=(e,t)=>{Sh["symbol".concat(va(e))]=t},_h=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=sj(e,tj),i=Hd(Hd({},s),{},{type:t,size:r,sizeType:n}),o=()=>{var m=lj(t),f=Lb().type(m).size(cj(r,n,t));return f()},{className:l,cx:d,cy:u}=i,c=_e(i,!0);return d===+d&&u===+u&&r===+r?p.createElement("path",zo({},c,{className:fe("recharts-symbols",l),transform:"translate(".concat(d,", ").concat(u,")"),d:o()})):null};_h.registerSymbol=dj;var Ph={},Ah={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let i=0;i<r.length;i++){const o=r[i],l=n(o);s.has(l)||s.set(l,o)}return Array.from(s.values())}e.uniqBy=t})(Ah);var ql={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(ql);var kh={},oi={},Eh={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(Eh);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Eh;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(oi);var Ch={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Ch);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oi,r=Ch;function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(kh);var Oh={},Th={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Gs;function r(n){return function(s){return t.get(s,n)}}e.property=r})(Th);var Mh={},Qi={},eo={},Gl={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(Gl);var Hl={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(Hl);var li={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(li);var Vd;function uj(){return Vd||(Vd=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Vl(),r=Gl,n=Hl,s=li;function i(m,f,h){return typeof h!="function"?t.isMatch(m,f):o(m,f,function g(x,b,y,j,w,S){const v=h(x,b,y,j,w,S);return v!==void 0?!!v:o(x,b,g,S)},new Map)}function o(m,f,h,g){if(f===m)return!0;switch(typeof f){case"object":return l(m,f,h,g);case"function":return Object.keys(f).length>0?o(m,{...f},h,g):s.eq(m,f);default:return r.isObject(m)?typeof f=="string"?f==="":!0:s.eq(m,f)}}function l(m,f,h,g){if(f==null)return!0;if(Array.isArray(f))return u(m,f,h,g);if(f instanceof Map)return d(m,f,h,g);if(f instanceof Set)return c(m,f,h,g);const x=Object.keys(f);if(m==null)return x.length===0;if(x.length===0)return!0;if(g&&g.has(f))return g.get(f)===m;g&&g.set(f,m);try{for(let b=0;b<x.length;b++){const y=x[b];if(!n.isPrimitive(m)&&!(y in m)||f[y]===void 0&&m[y]!==void 0||f[y]===null&&m[y]!==null||!h(m[y],f[y],y,m,f,g))return!1}return!0}finally{g&&g.delete(f)}}function d(m,f,h,g){if(f.size===0)return!0;if(!(m instanceof Map))return!1;for(const[x,b]of f.entries()){const y=m.get(x);if(h(y,b,x,m,f,g)===!1)return!1}return!0}function u(m,f,h,g){if(f.length===0)return!0;if(!Array.isArray(m))return!1;const x=new Set;for(let b=0;b<f.length;b++){const y=f[b];let j=!1;for(let w=0;w<m.length;w++){if(x.has(w))continue;const S=m[w];let v=!1;if(h(S,y,b,m,f,g)&&(v=!0),v){x.add(w),j=!0;break}}if(!j)return!1}return!0}function c(m,f,h,g){return f.size===0?!0:m instanceof Set?u([...m],[...f],h,g):!1}e.isMatchWith=i,e.isSetMatch=c}(eo)),eo}var Yd;function Vl(){return Yd||(Yd=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uj();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r}(Qi)),Qi}var Dh={},Yl={},Xl={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(Xl);var ci={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(ci);var di={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",d="[object Map]",u="[object Set]",c="[object Array]",m="[object Function]",f="[object ArrayBuffer]",h="[object Object]",g="[object Error]",x="[object DataView]",b="[object Uint8Array]",y="[object Uint8ClampedArray]",j="[object Uint16Array]",w="[object Uint32Array]",S="[object BigUint64Array]",v="[object Int8Array]",N="[object Int16Array]",_="[object Int32Array]",A="[object BigInt64Array]",k="[object Float32Array]",C="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=f,e.arrayTag=c,e.bigInt64ArrayTag=A,e.bigUint64ArrayTag=S,e.booleanTag=s,e.dataViewTag=x,e.dateTag=l,e.errorTag=g,e.float32ArrayTag=k,e.float64ArrayTag=C,e.functionTag=m,e.int16ArrayTag=N,e.int32ArrayTag=_,e.int8ArrayTag=v,e.mapTag=d,e.numberTag=n,e.objectTag=h,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=j,e.uint32ArrayTag=w,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=y})(di);var Ih={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(Ih);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xl,r=ci,n=di,s=Hl,i=Ih;function o(c,m){return l(c,void 0,c,new Map,m)}function l(c,m,f,h=new Map,g=void 0){const x=g==null?void 0:g(c,m,f,h);if(x!==void 0)return x;if(s.isPrimitive(c))return c;if(h.has(c))return h.get(c);if(Array.isArray(c)){const b=new Array(c.length);h.set(c,b);for(let y=0;y<c.length;y++)b[y]=l(c[y],y,f,h,g);return Object.hasOwn(c,"index")&&(b.index=c.index),Object.hasOwn(c,"input")&&(b.input=c.input),b}if(c instanceof Date)return new Date(c.getTime());if(c instanceof RegExp){const b=new RegExp(c.source,c.flags);return b.lastIndex=c.lastIndex,b}if(c instanceof Map){const b=new Map;h.set(c,b);for(const[y,j]of c)b.set(y,l(j,y,f,h,g));return b}if(c instanceof Set){const b=new Set;h.set(c,b);for(const y of c)b.add(l(y,void 0,f,h,g));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(c))return c.subarray();if(i.isTypedArray(c)){const b=new(Object.getPrototypeOf(c)).constructor(c.length);h.set(c,b);for(let y=0;y<c.length;y++)b[y]=l(c[y],y,f,h,g);return b}if(c instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&c instanceof SharedArrayBuffer)return c.slice(0);if(c instanceof DataView){const b=new DataView(c.buffer.slice(0),c.byteOffset,c.byteLength);return h.set(c,b),d(b,c,f,h,g),b}if(typeof File<"u"&&c instanceof File){const b=new File([c],c.name,{type:c.type});return h.set(c,b),d(b,c,f,h,g),b}if(c instanceof Blob){const b=new Blob([c],{type:c.type});return h.set(c,b),d(b,c,f,h,g),b}if(c instanceof Error){const b=new c.constructor;return h.set(c,b),b.message=c.message,b.name=c.name,b.stack=c.stack,b.cause=c.cause,d(b,c,f,h,g),b}if(typeof c=="object"&&u(c)){const b=Object.create(Object.getPrototypeOf(c));return h.set(c,b),d(b,c,f,h,g),b}return c}function d(c,m,f=c,h,g){const x=[...Object.keys(m),...t.getSymbols(m)];for(let b=0;b<x.length;b++){const y=x[b],j=Object.getOwnPropertyDescriptor(c,y);(j==null||j.writable)&&(c[y]=l(m[y],y,f,h,g))}}function u(c){switch(r.getTag(c)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=d})(Yl);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yl;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(Dh);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Vl(),r=Dh;function n(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=n})(Mh);var Rh={},$h={},Lh={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yl,r=di;function n(s,i){return t.cloneDeepWith(s,(o,l,d,u)=>{const c=i==null?void 0:i(o,l,d,u);if(c!==void 0)return c;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const m=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(m,s),m}case r.argumentsTag:{const m={};return t.copyProperties(m,s),m.length=s.length,m[Symbol.iterator]=s[Symbol.iterator],m}default:return}})}e.cloneDeepWith=n})(Lh);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lh;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})($h);var Fh={},Zl={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(Zl);var Bh={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ci;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(Bh);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dl,r=Zl,n=Bh,s=Hs;function i(o,l){let d;if(Array.isArray(l)?d=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?d=s.toPath(l):d=[l],d.length===0)return!1;let u=o;for(let c=0;c<d.length;c++){const m=d[c];if((u==null||!Object.hasOwn(u,m))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(m)&&m<u.length))return!1;u=u[m]}return!0}e.has=i})(Fh);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Vl(),r=Il,n=$h,s=Gs,i=Fh;function o(l,d){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return d=n.cloneDeep(d),function(u){const c=s.get(u,l);return c===void 0?i.has(u,l):d===void 0?c===void 0:t.isMatch(c,d)}}e.matchesProperty=o})(Rh);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ql,r=Th,n=Mh,s=Rh;function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?s.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i})(Oh);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ah,r=ql,n=kh,s=Oh;function i(o,l=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),s.iteratee(l)):[]}e.uniqBy=i})(Ph);var mj=Ph.uniqBy;const Xd=lr(mj);function fj(e,t,r){return t===!0?Xd(e,r):typeof t=="function"?Xd(e,t):e}var zh={exports:{}},Uh={},Wh={exports:{}},Kh={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _n=p;function hj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pj=typeof Object.is=="function"?Object.is:hj,gj=_n.useState,xj=_n.useEffect,vj=_n.useLayoutEffect,yj=_n.useDebugValue;function bj(e,t){var r=t(),n=gj({inst:{value:r,getSnapshot:t}}),s=n[0].inst,i=n[1];return vj(function(){s.value=r,s.getSnapshot=t,to(s)&&i({inst:s})},[e,r,t]),xj(function(){return to(s)&&i({inst:s}),e(function(){to(s)&&i({inst:s})})},[e]),yj(r),r}function to(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!pj(e,r)}catch{return!0}}function jj(e,t){return t()}var wj=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?jj:bj;Kh.useSyncExternalStore=_n.useSyncExternalStore!==void 0?_n.useSyncExternalStore:wj;Wh.exports=Kh;var Nj=Wh.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ui=p,Sj=Nj;function _j(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pj=typeof Object.is=="function"?Object.is:_j,Aj=Sj.useSyncExternalStore,kj=ui.useRef,Ej=ui.useEffect,Cj=ui.useMemo,Oj=ui.useDebugValue;Uh.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var i=kj(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Cj(function(){function d(h){if(!u){if(u=!0,c=h,h=n(h),s!==void 0&&o.hasValue){var g=o.value;if(s(g,h))return m=g}return m=h}if(g=m,Pj(c,h))return g;var x=n(h);return s!==void 0&&s(g,x)?(c=h,g):(c=h,m=x)}var u=!1,c,m,f=r===void 0?null:r;return[function(){return d(t())},f===null?void 0:function(){return d(f())}]},[t,r,n,s]);var l=Aj(e,i[0],i[1]);return Ej(function(){o.hasValue=!0,o.value=l},[l]),Oj(l),l};zh.exports=Uh;var Tj=zh.exports,Jl=p.createContext(null),Mj=e=>e,Be=()=>{var e=p.useContext(Jl);return e?e.store.dispatch:Mj},rs=()=>{},Dj=()=>rs,Ij=(e,t)=>e===t;function Y(e){var t=p.useContext(Jl);return Tj.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Dj,t?t.store.getState:rs,t?t.store.getState:rs,t?e:rs,Ij)}function Rj(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function $j(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Lj(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var Zd=e=>Array.isArray(e)?e:[e];function Fj(e){const t=Array.isArray(e[0])?e[0]:e;return Lj(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Bj(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var zj=class{constructor(e){this.value=e}deref(){return this.value}},Uj=typeof WeakRef<"u"?WeakRef:zj,Wj=0,Jd=1;function $a(){return{s:Wj,v:void 0,o:null,p:null}}function qh(e,t={}){let r=$a();const{resultEqualityCheck:n}=t;let s,i=0;function o(){var m;let l=r;const{length:d}=arguments;for(let f=0,h=d;f<h;f++){const g=arguments[f];if(typeof g=="function"||typeof g=="object"&&g!==null){let x=l.o;x===null&&(l.o=x=new WeakMap);const b=x.get(g);b===void 0?(l=$a(),x.set(g,l)):l=b}else{let x=l.p;x===null&&(l.p=x=new Map);const b=x.get(g);b===void 0?(l=$a(),x.set(g,l)):l=b}}const u=l;let c;if(l.s===Jd)c=l.v;else if(c=e.apply(null,arguments),i++,n){const f=((m=s==null?void 0:s.deref)==null?void 0:m.call(s))??s;f!=null&&n(f,c)&&(c=f,i!==0&&i--),s=typeof c=="object"&&c!==null||typeof c=="function"?new Uj(c):c}return u.s=Jd,u.v=c,c}return o.clearCache=()=>{r=$a(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function Kj(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let i=0,o=0,l,d={},u=s.pop();typeof u=="object"&&(d=u,u=s.pop()),Rj(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const c={...r,...d},{memoize:m,memoizeOptions:f=[],argsMemoize:h=qh,argsMemoizeOptions:g=[]}=c,x=Zd(f),b=Zd(g),y=Fj(s),j=m(function(){return i++,u.apply(null,arguments)},...x),w=h(function(){o++;const v=Bj(y,arguments);return l=j.apply(null,v),l},...b);return Object.assign(w,{resultFunc:u,memoizedResultFunc:j,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:m,argsMemoize:h})};return Object.assign(n,{withTypes:()=>n}),n}var M=Kj(qh),qj=Object.assign((e,t=M)=>{$j(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((o,l,d)=>(o[r[d]]=l,o),{}))},{withTypes:()=>qj}),Gh={},Hh={},Vh={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,i)=>{if(n!==s){const o=t(n),l=t(s);if(o===l&&o===0){if(n<s)return i==="desc"?1:-1;if(n>s)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=r})(Vh);var Yh={},Ql={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(Ql);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ql,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=s})(Yh);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Vh,r=Yh,n=Hs;function s(i,o,l,d){if(i==null)return[];l=d?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(h=>String(h));const u=(h,g)=>{let x=h;for(let b=0;b<g.length&&x!=null;++b)x=x[g[b]];return x},c=(h,g)=>g==null||h==null?g:typeof h=="object"&&"key"in h?Object.hasOwn(g,h.key)?g[h.key]:u(g,h.path):typeof h=="function"?h(g):Array.isArray(h)?u(g,h):typeof g=="object"?g[h]:g,m=o.map(h=>(Array.isArray(h)&&h.length===1&&(h=h[0]),h==null||typeof h=="function"||Array.isArray(h)||r.isKey(h)?h:{key:h,path:n.toPath(h)}));return i.map(h=>({original:h,criteria:m.map(g=>c(g,h))})).slice().sort((h,g)=>{for(let x=0;x<m.length;x++){const b=t.compareValues(h.criteria[x],g.criteria[x],l[x]);if(b!==0)return b}return 0}).map(h=>h.original)}e.orderBy=s})(Hh);var Xh={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],i=Math.floor(n),o=(l,d)=>{for(let u=0;u<l.length;u++){const c=l[u];Array.isArray(c)&&d<i?o(c,d+1):s.push(c)}};return o(r,0),s}e.flatten=t})(Xh);var ec={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zl,r=oi,n=Gl,s=li;function i(o,l,d){return n.isObject(d)&&(typeof l=="number"&&r.isArrayLike(d)&&t.isIndex(l)&&l<d.length||typeof l=="string"&&l in d)?s.eq(d[l],o):!1}e.isIterateeCall=i})(ec);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Hh,r=Xh,n=ec;function s(i,...o){const l=o.length;return l>1&&n.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=s})(Gh);var Gj=Gh.sortBy;const mi=lr(Gj);var Zh=e=>e.legend.settings,Hj=e=>e.legend.size,Vj=e=>e.legend.payload;M([Vj,Zh],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?mi(n,r):n});var La=1;function Yj(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=p.useState({height:0,left:0,top:0,width:0}),n=p.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>La||Math.abs(o.left-t.left)>La||Math.abs(o.top-t.top)>La||Math.abs(o.width-t.width)>La)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Ke(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Xj=typeof Symbol=="function"&&Symbol.observable||"@@observable",Qd=Xj,ro=()=>Math.random().toString(36).substring(7).split("").join("."),Zj={INIT:`@@redux/INIT${ro()}`,REPLACE:`@@redux/REPLACE${ro()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ro()}`},ds=Zj;function tc(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Jh(e,t,r){if(typeof e!="function")throw new Error(Ke(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ke(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ke(1));return r(Jh)(e,t)}let n=e,s=t,i=new Map,o=i,l=0,d=!1;function u(){o===i&&(o=new Map,i.forEach((b,y)=>{o.set(y,b)}))}function c(){if(d)throw new Error(Ke(3));return s}function m(b){if(typeof b!="function")throw new Error(Ke(4));if(d)throw new Error(Ke(5));let y=!0;u();const j=l++;return o.set(j,b),function(){if(y){if(d)throw new Error(Ke(6));y=!1,u(),o.delete(j),i=null}}}function f(b){if(!tc(b))throw new Error(Ke(7));if(typeof b.type>"u")throw new Error(Ke(8));if(typeof b.type!="string")throw new Error(Ke(17));if(d)throw new Error(Ke(9));try{d=!0,s=n(s,b)}finally{d=!1}return(i=o).forEach(j=>{j()}),b}function h(b){if(typeof b!="function")throw new Error(Ke(10));n=b,f({type:ds.REPLACE})}function g(){const b=m;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Ke(11));function j(){const S=y;S.next&&S.next(c())}return j(),{unsubscribe:b(j)}},[Qd](){return this}}}return f({type:ds.INIT}),{dispatch:f,subscribe:m,getState:c,replaceReducer:h,[Qd]:g}}function Jj(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:ds.INIT})>"u")throw new Error(Ke(12));if(typeof r(void 0,{type:ds.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ke(13))})}function Qh(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let s;try{Jj(r)}catch(i){s=i}return function(o={},l){if(s)throw s;let d=!1;const u={};for(let c=0;c<n.length;c++){const m=n[c],f=r[m],h=o[m],g=f(h,l);if(typeof g>"u")throw l&&l.type,new Error(Ke(14));u[m]=g,d=d||g!==h}return d=d||n.length!==Object.keys(o).length,d?u:o}}function us(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function Qj(...e){return t=>(r,n)=>{const s=t(r,n);let i=()=>{throw new Error(Ke(15))};const o={getState:s.getState,dispatch:(d,...u)=>i(d,...u)},l=e.map(d=>d(o));return i=us(...l)(s.dispatch),{...s,dispatch:i}}}function ep(e){return tc(e)&&"type"in e&&typeof e.type=="string"}var tp=Symbol.for("immer-nothing"),eu=Symbol.for("immer-draftable"),pt=Symbol.for("immer-state");function Rt(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Pn=Object.getPrototypeOf;function en(e){return!!e&&!!e[pt]}function ar(e){var t;return e?rp(e)||Array.isArray(e)||!!e[eu]||!!((t=e.constructor)!=null&&t[eu])||hi(e)||pi(e):!1}var ew=Object.prototype.constructor.toString();function rp(e){if(!e||typeof e!="object")return!1;const t=Pn(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===ew}function ms(e,t){fi(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function fi(e){const t=e[pt];return t?t.type_:Array.isArray(e)?1:hi(e)?2:pi(e)?3:0}function Uo(e,t){return fi(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function np(e,t,r){const n=fi(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function tw(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function hi(e){return e instanceof Map}function pi(e){return e instanceof Set}function $r(e){return e.copy_||e.base_}function Wo(e,t){if(hi(e))return new Map(e);if(pi(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=rp(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[pt];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const o=s[i],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(Pn(e),n)}else{const n=Pn(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function rc(e,t=!1){return gi(e)||en(e)||!ar(e)||(fi(e)>1&&(e.set=e.add=e.clear=e.delete=rw),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>rc(n,!0))),e}function rw(){Rt(2)}function gi(e){return Object.isFrozen(e)}var nw={};function tn(e){const t=nw[e];return t||Rt(0,e),t}var la;function ap(){return la}function aw(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function tu(e,t){t&&(tn("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ko(e){qo(e),e.drafts_.forEach(sw),e.drafts_=null}function qo(e){e===la&&(la=e.parent_)}function ru(e){return la=aw(la,e)}function sw(e){const t=e[pt];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function nu(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[pt].modified_&&(Ko(t),Rt(4)),ar(e)&&(e=fs(t,e),t.parent_||hs(t,e)),t.patches_&&tn("Patches").generateReplacementPatches_(r[pt].base_,e,t.patches_,t.inversePatches_)):e=fs(t,r,[]),Ko(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==tp?e:void 0}function fs(e,t,r){if(gi(t))return t;const n=t[pt];if(!n)return ms(t,(s,i)=>au(e,n,t,s,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return hs(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let i=s,o=!1;n.type_===3&&(i=new Set(s),s.clear(),o=!0),ms(i,(l,d)=>au(e,n,s,l,d,r,o)),hs(e,s,!1),r&&e.patches_&&tn("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function au(e,t,r,n,s,i,o){if(en(s)){const l=i&&t&&t.type_!==3&&!Uo(t.assigned_,n)?i.concat(n):void 0,d=fs(e,s,l);if(np(r,n,d),en(d))e.canAutoFreeze_=!1;else return}else o&&r.add(s);if(ar(s)&&!gi(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;fs(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&hs(e,s)}}function hs(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&rc(t,r)}function iw(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:ap(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=nc;r&&(s=[n],i=ca);const{revoke:o,proxy:l}=Proxy.revocable(s,i);return n.draft_=l,n.revoke_=o,l}var nc={get(e,t){if(t===pt)return e;const r=$r(e);if(!Uo(r,t))return ow(e,r,t);const n=r[t];return e.finalized_||!ar(n)?n:n===no(e.base_,t)?(ao(e),e.copy_[t]=Ho(n,e)):n},has(e,t){return t in $r(e)},ownKeys(e){return Reflect.ownKeys($r(e))},set(e,t,r){const n=sp($r(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=no($r(e),t),i=s==null?void 0:s[pt];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(tw(r,s)&&(r!==void 0||Uo(e.base_,t)))return!0;ao(e),Go(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return no(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,ao(e),Go(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=$r(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Rt(11)},getPrototypeOf(e){return Pn(e.base_)},setPrototypeOf(){Rt(12)}},ca={};ms(nc,(e,t)=>{ca[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ca.deleteProperty=function(e,t){return ca.set.call(this,e,t,void 0)};ca.set=function(e,t,r){return nc.set.call(this,e[0],t,r,e[0])};function no(e,t){const r=e[pt];return(r?$r(r):e)[t]}function ow(e,t,r){var s;const n=sp(t,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function sp(e,t){if(!(t in e))return;let r=Pn(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Pn(r)}}function Go(e){e.modified_||(e.modified_=!0,e.parent_&&Go(e.parent_))}function ao(e){e.copy_||(e.copy_=Wo(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var lw=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(d=i,...u){return o.produce(d,c=>r.call(this,c,...u))}}typeof r!="function"&&Rt(6),n!==void 0&&typeof n!="function"&&Rt(7);let s;if(ar(t)){const i=ru(this),o=Ho(t,void 0);let l=!0;try{s=r(o),l=!1}finally{l?Ko(i):qo(i)}return tu(i,n),nu(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===tp&&(s=void 0),this.autoFreeze_&&rc(s,!0),n){const i=[],o=[];tn("Patches").generateReplacementPatches_(t,s,i,o),n(i,o)}return s}else Rt(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,d=>t(d,...l));let n,s;return[this.produce(t,r,(o,l)=>{n=o,s=l}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ar(e)||Rt(8),en(e)&&(e=rr(e));const t=ru(this),r=Ho(e,void 0);return r[pt].isManual_=!0,qo(t),r}finishDraft(e,t){const r=e&&e[pt];(!r||!r.isManual_)&&Rt(9);const{scope_:n}=r;return tu(n,t),nu(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=tn("Patches").applyPatches_;return en(e)?n(e,t):this.produce(e,s=>n(s,t))}};function Ho(e,t){const r=hi(e)?tn("MapSet").proxyMap_(e,t):pi(e)?tn("MapSet").proxySet_(e,t):iw(e,t);return(t?t.scope_:ap()).drafts_.push(r),r}function rr(e){return en(e)||Rt(10,e),ip(e)}function ip(e){if(!ar(e)||gi(e))return e;const t=e[pt];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Wo(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Wo(e,!0);return ms(r,(n,s)=>{np(r,n,ip(s))}),t&&(t.finalized_=!1),r}var gt=new lw,op=gt.produce;gt.produceWithPatches.bind(gt);gt.setAutoFreeze.bind(gt);gt.setUseStrictShallowCopy.bind(gt);gt.applyPatches.bind(gt);gt.createDraft.bind(gt);gt.finishDraft.bind(gt);function lp(e){return({dispatch:r,getState:n})=>s=>i=>typeof i=="function"?i(r,n,e):s(i)}var cw=lp(),dw=lp,uw=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?us:us.apply(null,arguments)};function Pt(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(ft(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>ep(n)&&n.type===e,r}var cp=class ta extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,ta.prototype)}static get[Symbol.species](){return ta}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new ta(...t[0].concat(this)):new ta(...t.concat(this))}};function su(e){return ar(e)?op(e,()=>{}):e}function Fa(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function mw(e){return typeof e=="boolean"}var fw=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let o=new cp;return r&&(mw(r)?o.push(cw):o.push(dw(r.extraArgument))),o},hw="RTK_autoBatch",iu=e=>t=>{setTimeout(t,e)},pw=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,i=!1,o=!1;const l=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:iu(10):e.type==="callback"?e.queueNotification:iu(e.timeout),u=()=>{o=!1,i&&(i=!1,l.forEach(c=>c()))};return Object.assign({},n,{subscribe(c){const m=()=>s&&c(),f=n.subscribe(m);return l.add(c),()=>{f(),l.delete(c)}},dispatch(c){var m;try{return s=!((m=c==null?void 0:c.meta)!=null&&m[hw]),i=!s,i&&(o||(o=!0,d(u))),n.dispatch(c)}finally{s=!0}}})},gw=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new cp(e);return n&&s.push(pw(typeof n=="object"?n:void 0)),s};function xw(e){const t=fw(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let l;if(typeof r=="function")l=r;else if(tc(r))l=Qh(r);else throw new Error(ft(1));let d;typeof n=="function"?d=n(t):d=t();let u=us;s&&(u=uw({trace:!1,...typeof s=="object"&&s}));const c=Qj(...d),m=gw(c);let f=typeof o=="function"?o(m):m();const h=u(...f);return Jh(l,i,h)}function dp(e){const t={},r=[];let n;const s={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(ft(28));if(l in t)throw new Error(ft(29));return t[l]=o,s},addMatcher(i,o){return r.push({matcher:i,reducer:o}),s},addDefaultCase(i){return n=i,s}};return e(s),[t,r,n]}function vw(e){return typeof e=="function"}function yw(e,t){let[r,n,s]=dp(t),i;if(vw(e))i=()=>su(e());else{const l=su(e);i=()=>l}function o(l=i(),d){let u=[r[d.type],...n.filter(({matcher:c})=>c(d)).map(({reducer:c})=>c)];return u.filter(c=>!!c).length===0&&(u=[s]),u.reduce((c,m)=>{if(m)if(en(c)){const h=m(c,d);return h===void 0?c:h}else{if(ar(c))return op(c,f=>m(f,d));{const f=m(c,d);if(f===void 0){if(c===null)return c;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return c},l)}return o.getInitialState=i,o}var bw="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",jw=(e=21)=>{let t="",r=e;for(;r--;)t+=bw[Math.random()*64|0];return t},ww=Symbol.for("rtk-slice-createasyncthunk");function Nw(e,t){return`${e}/${t}`}function Sw({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[ww];return function(s){const{name:i,reducerPath:o=i}=s;if(!i)throw new Error(ft(11));const l=(typeof s.reducers=="function"?s.reducers(Pw()):s.reducers)||{},d=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(S,v){const N=typeof S=="string"?S:S.type;if(!N)throw new Error(ft(12));if(N in u.sliceCaseReducersByType)throw new Error(ft(13));return u.sliceCaseReducersByType[N]=v,c},addMatcher(S,v){return u.sliceMatchers.push({matcher:S,reducer:v}),c},exposeAction(S,v){return u.actionCreators[S]=v,c},exposeCaseReducer(S,v){return u.sliceCaseReducersByName[S]=v,c}};d.forEach(S=>{const v=l[S],N={reducerName:S,type:Nw(i,S),createNotation:typeof s.reducers=="function"};kw(v)?Cw(N,v,c,t):Aw(N,v,c)});function m(){const[S={},v=[],N=void 0]=typeof s.extraReducers=="function"?dp(s.extraReducers):[s.extraReducers],_={...S,...u.sliceCaseReducersByType};return yw(s.initialState,A=>{for(let k in _)A.addCase(k,_[k]);for(let k of u.sliceMatchers)A.addMatcher(k.matcher,k.reducer);for(let k of v)A.addMatcher(k.matcher,k.reducer);N&&A.addDefaultCase(N)})}const f=S=>S,h=new Map,g=new WeakMap;let x;function b(S,v){return x||(x=m()),x(S,v)}function y(){return x||(x=m()),x.getInitialState()}function j(S,v=!1){function N(A){let k=A[S];return typeof k>"u"&&v&&(k=Fa(g,N,y)),k}function _(A=f){const k=Fa(h,v,()=>new WeakMap);return Fa(k,A,()=>{const C={};for(const[T,O]of Object.entries(s.selectors??{}))C[T]=_w(O,A,()=>Fa(g,A,y),v);return C})}return{reducerPath:S,getSelectors:_,get selectors(){return _(N)},selectSlice:N}}const w={name:i,reducer:b,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:y,...j(o),injectInto(S,{reducerPath:v,...N}={}){const _=v??o;return S.inject({reducerPath:_,reducer:b},N),{...w,...j(_,!0)}}};return w}}function _w(e,t,r,n){function s(i,...o){let l=t(i);return typeof l>"u"&&n&&(l=r()),e(l,...o)}return s.unwrapped=e,s}var vt=Sw();function Pw(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Aw({type:e,reducerName:t,createNotation:r},n,s){let i,o;if("reducer"in n){if(r&&!Ew(n))throw new Error(ft(17));i=n.reducer,o=n.prepare}else i=n;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?Pt(e,o):Pt(e))}function kw(e){return e._reducerDefinitionType==="asyncThunk"}function Ew(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Cw({type:e,reducerName:t},r,n,s){if(!s)throw new Error(ft(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:d,settled:u,options:c}=r,m=s(e,i,c);n.exposeAction(t,m),o&&n.addCase(m.fulfilled,o),l&&n.addCase(m.pending,l),d&&n.addCase(m.rejected,d),u&&n.addMatcher(m.settled,u),n.exposeCaseReducer(t,{fulfilled:o||Ba,pending:l||Ba,rejected:d||Ba,settled:u||Ba})}function Ba(){}var Ow="task",up="listener",mp="completed",ac="cancelled",Tw=`task-${ac}`,Mw=`task-${mp}`,Vo=`${up}-${ac}`,Dw=`${up}-${mp}`,xi=class{constructor(e){Kn(this,"name","TaskAbortError");Kn(this,"message");this.code=e,this.message=`${Ow} ${ac} (reason: ${e})`}},sc=(e,t)=>{if(typeof e!="function")throw new TypeError(ft(32))},ps=()=>{},fp=(e,t=ps)=>(e.catch(t),e),hp=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Vr=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Yr=e=>{if(e.aborted){const{reason:t}=e;throw new xi(t)}};function pp(e,t){let r=ps;return new Promise((n,s)=>{const i=()=>s(new xi(e.reason));if(e.aborted){i();return}r=hp(e,i),t.finally(()=>r()).then(n,s)}).finally(()=>{r=ps})}var Iw=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof xi?"cancelled":"rejected",error:r}}finally{t==null||t()}},gs=e=>t=>fp(pp(e,t).then(r=>(Yr(e),r))),gp=e=>{const t=gs(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:wn}=Object,ou={},vi="listenerMiddleware",Rw=(e,t)=>{const r=n=>hp(e,()=>Vr(n,e.reason));return(n,s)=>{sc(n);const i=new AbortController;r(i);const o=Iw(async()=>{Yr(e),Yr(i.signal);const l=await n({pause:gs(i.signal),delay:gp(i.signal),signal:i.signal});return Yr(i.signal),l},()=>Vr(i,Mw));return s!=null&&s.autoJoin&&t.push(o.catch(ps)),{result:gs(e)(o),cancel(){Vr(i,Tw)}}}},$w=(e,t)=>{const r=async(n,s)=>{Yr(t);let i=()=>{};const l=[new Promise((d,u)=>{let c=e({predicate:n,effect:(m,f)=>{f.unsubscribe(),d([m,f.getState(),f.getOriginalState()])}});i=()=>{c(),u()}})];s!=null&&l.push(new Promise(d=>setTimeout(d,s,null)));try{const d=await pp(t,Promise.race(l));return Yr(t),d}finally{i()}};return(n,s)=>fp(r(n,s))},xp=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:i}=e;if(t)s=Pt(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(ft(21));return sc(i),{predicate:s,type:t,effect:i}},vp=wn(e=>{const{type:t,predicate:r,effect:n}=xp(e);return{id:jw(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(ft(22))}}},{withTypes:()=>vp}),lu=(e,t)=>{const{type:r,effect:n,predicate:s}=xp(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===n)},Yo=e=>{e.pending.forEach(t=>{Vr(t,Vo)})},Lw=e=>()=>{e.forEach(Yo),e.clear()},cu=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},yp=wn(Pt(`${vi}/add`),{withTypes:()=>yp}),Fw=Pt(`${vi}/removeAll`),bp=wn(Pt(`${vi}/remove`),{withTypes:()=>bp}),Bw=(...e)=>{console.error(`${vi}/error`,...e)},ya=(e={})=>{const t=new Map,{extra:r,onError:n=Bw}=e;sc(n);const s=c=>(c.unsubscribe=()=>t.delete(c.id),t.set(c.id,c),m=>{c.unsubscribe(),m!=null&&m.cancelActive&&Yo(c)}),i=c=>{const m=lu(t,c)??vp(c);return s(m)};wn(i,{withTypes:()=>i});const o=c=>{const m=lu(t,c);return m&&(m.unsubscribe(),c.cancelActive&&Yo(m)),!!m};wn(o,{withTypes:()=>o});const l=async(c,m,f,h)=>{const g=new AbortController,x=$w(i,g.signal),b=[];try{c.pending.add(g),await Promise.resolve(c.effect(m,wn({},f,{getOriginalState:h,condition:(y,j)=>x(y,j).then(Boolean),take:x,delay:gp(g.signal),pause:gs(g.signal),extra:r,signal:g.signal,fork:Rw(g.signal,b),unsubscribe:c.unsubscribe,subscribe:()=>{t.set(c.id,c)},cancelActiveListeners:()=>{c.pending.forEach((y,j,w)=>{y!==g&&(Vr(y,Vo),w.delete(y))})},cancel:()=>{Vr(g,Vo),c.pending.delete(g)},throwIfCancelled:()=>{Yr(g.signal)}})))}catch(y){y instanceof xi||cu(n,y,{raisedBy:"effect"})}finally{await Promise.all(b),Vr(g,Dw),c.pending.delete(g)}},d=Lw(t);return{middleware:c=>m=>f=>{if(!ep(f))return m(f);if(yp.match(f))return i(f.payload);if(Fw.match(f)){d();return}if(bp.match(f))return o(f.payload);let h=c.getState();const g=()=>{if(h===ou)throw new Error(ft(23));return h};let x;try{if(x=m(f),t.size>0){const b=c.getState(),y=Array.from(t.values());for(const j of y){let w=!1;try{w=j.predicate(f,b,h)}catch(S){w=!1,cu(n,S,{raisedBy:"predicate"})}w&&l(j,f,c,g)}}}finally{h=ou}return x},startListening:i,stopListening:o,clearListeners:d}};function ft(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var zw={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},jp=vt({name:"chartLayout",initialState:zw,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:Uw,setLayout:Ww,setChartSize:Kw,setScale:qw}=jp.actions,Gw=jp.reducer;function du(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function uu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?du(Object(r),!0).forEach(function(n){Hw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):du(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hw(e,t,r){return(t=Vw(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vw(e){var t=Yw(e,"string");return typeof t=="symbol"?t:t+""}function Yw(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xs=Math.PI/180,Xw=e=>e*180/Math.PI,Ge=(e,t,r,n)=>({x:e+Math.cos(-xs*n)*r,y:t+Math.sin(-xs*n)*r}),Zw=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Jw=(e,t)=>{var{x:r,y:n}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(n-i)**2)},Qw=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:i}=t,o=Jw({x:r,y:n},{x:s,y:i});if(o<=0)return{radius:o,angle:0};var l=(r-s)/o,d=Math.acos(l);return n>i&&(d=2*Math.PI-d),{radius:o,angle:Xw(d),angleInRadian:d}},eN=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(n,s);return{startAngle:t-i*360,endAngle:r-i*360}},tN=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return e+o*360},rN=(e,t)=>{var{x:r,y:n}=e,{radius:s,angle:i}=Qw({x:r,y:n},t),{innerRadius:o,outerRadius:l}=t;if(s<o||s>l||s===0)return null;var{startAngle:d,endAngle:u}=eN(t),c=i,m;if(d<=u){for(;c>u;)c-=360;for(;c<d;)c+=360;m=c>=d&&c<=u}else{for(;c>d;)c-=360;for(;c<u;)c+=360;m=c>=u&&c<=d}return m?uu(uu({},t),{},{radius:s,angle:tN(c,t)}):null};function wp(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function mu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function St(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mu(Object(r),!0).forEach(function(n){nN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mu(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nN(e,t,r){return(t=aN(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aN(e){var t=sN(e,"string");return typeof t=="symbol"?t:t+""}function sN(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fe(e,t,r){return be(e)||be(t)?r:Kt(t)?Qr(e,t,r):typeof t=="function"?t(e):r}var iN=(e,t,r,n,s)=>{var i,o=-1,l=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(l<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var d=0;d<l;d++){var u=d>0?r[d-1].coordinate:r[l-1].coordinate,c=r[d].coordinate,m=d>=l-1?r[0].coordinate:r[d+1].coordinate,f=void 0;if(rt(c-u)!==rt(m-c)){var h=[];if(rt(m-c)===rt(s[1]-s[0])){f=m;var g=c+s[1]-s[0];h[0]=Math.min(g,(g+u)/2),h[1]=Math.max(g,(g+u)/2)}else{f=u;var x=m+s[1]-s[0];h[0]=Math.min(c,(x+c)/2),h[1]=Math.max(c,(x+c)/2)}var b=[Math.min(c,(f+c)/2),Math.max(c,(f+c)/2)];if(e>b[0]&&e<=b[1]||e>=h[0]&&e<=h[1]){({index:o}=r[d]);break}}else{var y=Math.min(u,m),j=Math.max(u,m);if(e>(y+c)/2&&e<=(j+c)/2){({index:o}=r[d]);break}}}else if(t){for(var w=0;w<l;w++)if(w===0&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w>0&&w<l-1&&e>(t[w].coordinate+t[w-1].coordinate)/2&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w===l-1&&e>(t[w].coordinate+t[w-1].coordinate)/2){({index:o}=t[w]);break}}return o},oN=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&q(e[i]))return St(St({},e),{},{[i]:e[i]+(n||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&q(e[o]))return St(St({},e),{},{[o]:e[o]+(s||0)})}return e},Ar=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Np=(e,t,r,n)=>{if(n)return e.map(l=>l.coordinate);var s,i,o=e.map(l=>(l.coordinate===t&&(s=!0),l.coordinate===r&&(i=!0),l.coordinate));return s||o.push(t),i||o.push(r),o},Sp=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:i,scale:o,realScaleType:l,isCategorical:d,categoricalDomain:u,tickCount:c,ticks:m,niceTicks:f,axisType:h}=e;if(!o)return null;var g=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,x=s==="category"&&o.bandwidth?o.bandwidth()/g:0;if(x=h==="angleAxis"&&i&&i.length>=2?rt(i[0]-i[1])*2*x:x,m||f){var b=(m||f||[]).map((y,j)=>{var w=n?n.indexOf(y):y;return{coordinate:o(w)+x,value:y,offset:x,index:j}});return b.filter(y=>!ht(y.coordinate))}return d&&u?u.map((y,j)=>({coordinate:o(y)+x,value:y,index:j,offset:x})):o.ticks&&c!=null?o.ticks(c).map((y,j)=>({coordinate:o(y)+x,value:y,offset:x,index:j})):o.domain().map((y,j)=>({coordinate:o(y)+x,value:n?n[y]:y,index:j,offset:x}))},fu=1e-4,lN=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-fu,i=Math.max(n[0],n[1])+fu,o=e(t[0]),l=e(t[r-1]);(o<s||o>i||l<s||l>i)&&e.domain([t[0],t[r-1]])}},cN=(e,t)=>{if(!t||t.length!==2||!q(t[0])||!q(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!q(e[0])||e[0]<r)&&(s[0]=r),(!q(e[1])||e[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s},dN=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0,o=0;o<t;++o){var l=ht(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1]):(e[o][r][0]=i,e[o][r][1]=i+l,i=e[o][r][1])}},uN=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0;i<t;++i){var o=ht(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},mN={sign:dN,expand:Jb,none:Sn,silhouette:Qb,wiggle:ej,positive:uN},fN=(e,t,r)=>{var n=mN[r],s=Zb().keys(t).value((i,o)=>+Fe(i,o,0)).order(Bo).offset(n);return s(e)};function hN(e){return e==null?void 0:String(e)}function hu(e){var{axis:t,ticks:r,bandSize:n,entry:s,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!be(s[t.dataKey])){var l=nh(r,"value",s[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var d=Fe(s,be(o)?t.dataKey:o);return be(d)?null:t.scale(d)}var pu=e=>{var{axis:t,ticks:r,offset:n,bandSize:s,entry:i,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+n:null;var l=Fe(i,t.dataKey,t.scale.domain()[o]);return be(l)?null:t.scale(l)-s/2+n},pN=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]},gN=e=>{var t=e.flat(2).filter(q);return[Math.min(...t),Math.max(...t)]},xN=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],vN=(e,t,r)=>{if(e!=null)return xN(Object.keys(e).reduce((n,s)=>{var i=e[s],{stackedData:o}=i,l=o.reduce((d,u)=>{var c=wp(u,t,r),m=gN(c);return[Math.min(d[0],m[0]),Math.max(d[1],m[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},gu=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,xu=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,da=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=mi(t,c=>c.coordinate),i=1/0,o=1,l=s.length;o<l;o++){var d=s[o],u=s[o-1];i=Math.min((d.coordinate||0)-(u.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function vu(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:i}=e;return St(St({},t),{},{dataKey:r,payload:n,value:s,name:i})}function yi(e,t){if(e)return String(e);if(typeof t=="string")return t}function yN(e,t,r,n,s){if(r==="horizontal"||r==="vertical"){var i=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return i?{x:e,y:t}:null}return n?rN({x:e,y:t},n):null}var bN=(e,t,r,n)=>{var s=t.find(u=>u&&u.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:s.coordinate};if(e==="centric"){var i=s.coordinate,{radius:o}=n;return St(St(St({},n),Ge(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var l=s.coordinate,{angle:d}=n;return St(St(St({},n),Ge(n.cx,n.cy,l,d)),{},{angle:d,radius:l})}return{x:0,y:0}},jN=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,cr=e=>e.layout.width,dr=e=>e.layout.height,wN=e=>e.layout.scale,_p=e=>e.layout.margin,ic=M(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),oc=M(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),NN="data-recharts-item-index",SN="data-recharts-item-data-key",bi=60;function yu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yu(Object(r),!0).forEach(function(n){_N(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yu(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _N(e,t,r){return(t=PN(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PN(e){var t=AN(e,"string");return typeof t=="symbol"?t:t+""}function AN(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kN=e=>e.brush.height,ze=M([cr,dr,_p,kN,ic,oc,Zh,Hj],(e,t,r,n,s,i,o,l)=>{var d=i.reduce((g,x)=>{var{orientation:b}=x;if(!x.mirror&&!x.hide){var y=typeof x.width=="number"?x.width:bi;return gr(gr({},g),{},{[b]:g[b]+y})}return g},{left:r.left||0,right:r.right||0}),u=s.reduce((g,x)=>{var{orientation:b}=x;return!x.mirror&&!x.hide?gr(gr({},g),{},{[b]:Qr(g,"".concat(b))+x.height}):g},{top:r.top||0,bottom:r.bottom||0}),c=gr(gr({},u),d),m=c.bottom;c.bottom+=n,c=oN(c,o,l);var f=e-c.left-c.right,h=t-c.top-c.bottom;return gr(gr({brushBottom:m},c),{},{width:Math.max(f,0),height:Math.max(h,0)})}),EN=M(ze,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Pp=M(cr,dr,(e,t)=>({x:0,y:0,width:e,height:t})),CN=p.createContext(null),st=()=>p.useContext(CN)!=null,ji=e=>e.brush,wi=M([ji,ze,_p],(e,t,r)=>({height:e.height,x:q(e.x)?e.x:t.left,y:q(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:q(e.width)?e.width:t.width})),lc=()=>{var e,t=st(),r=Y(EN),n=Y(wi),s=(e=Y(ji))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},ON={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Ap=()=>{var e;return(e=Y(ze))!==null&&e!==void 0?e:ON},kp=()=>Y(cr),Ep=()=>Y(dr),le=e=>e.layout.layoutType,Ni=()=>Y(le),TN={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Cp=vt({name:"legend",initialState:TN,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=rr(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:K5,setLegendSettings:q5,addLegendPayload:MN,removeLegendPayload:DN}=Cp.actions,IN=Cp.reducer;function Xo(){return Xo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xo.apply(null,arguments)}function bu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function so(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bu(Object(r),!0).forEach(function(n){RN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bu(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RN(e,t,r){return(t=$N(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $N(e){var t=LN(e,"string");return typeof t=="symbol"?t:t+""}function LN(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FN(e){return Array.isArray(e)&&Kt(e[0])&&Kt(e[1])?e.join(" ~ "):e}var BN=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:i,formatter:o,itemSorter:l,wrapperClassName:d,labelClassName:u,label:c,labelFormatter:m,accessibilityLayer:f=!1}=e,h=()=>{if(i&&i.length){var v={padding:0,margin:0},N=(l?mi(i,l):i).map((_,A)=>{if(_.type==="none")return null;var k=_.formatter||o||FN,{value:C,name:T}=_,O=C,F=T;if(k){var P=k(C,T,_,A,i);if(Array.isArray(P))[O,F]=P;else if(P!=null)O=P;else return null}var $=so({display:"block",paddingTop:4,paddingBottom:4,color:_.color||"#000"},n);return p.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(A),style:$},Kt(F)?p.createElement("span",{className:"recharts-tooltip-item-name"},F):null,Kt(F)?p.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,p.createElement("span",{className:"recharts-tooltip-item-value"},O),p.createElement("span",{className:"recharts-tooltip-item-unit"},_.unit||""))});return p.createElement("ul",{className:"recharts-tooltip-item-list",style:v},N)}return null},g=so({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),x=so({margin:0},s),b=!be(c),y=b?c:"",j=fe("recharts-default-tooltip",d),w=fe("recharts-tooltip-label",u);b&&m&&i!==void 0&&i!==null&&(y=m(c,i));var S=f?{role:"status","aria-live":"assertive"}:{};return p.createElement("div",Xo({className:j,style:g},S),p.createElement("p",{className:w,style:x},p.isValidElement(y)?y:"".concat(y)),h())},Gn="recharts-tooltip-wrapper",zN={visibility:"hidden"};function UN(e){var{coordinate:t,translateX:r,translateY:n}=e;return fe(Gn,{["".concat(Gn,"-right")]:q(r)&&t&&q(t.x)&&r>=t.x,["".concat(Gn,"-left")]:q(r)&&t&&q(t.x)&&r<t.x,["".concat(Gn,"-bottom")]:q(n)&&t&&q(t.y)&&n>=t.y,["".concat(Gn,"-top")]:q(n)&&t&&q(t.y)&&n<t.y})}function ju(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:l,viewBox:d,viewBoxDimension:u}=e;if(i&&q(i[n]))return i[n];var c=r[n]-l-(s>0?s:0),m=r[n]+s;if(t[n])return o[n]?c:m;var f=d[n];if(f==null)return 0;if(o[n]){var h=c,g=f;return h<g?Math.max(m,f):Math.max(c,f)}if(u==null)return 0;var x=m+l,b=f+u;return x>b?Math.max(c,f):Math.max(m,f)}function WN(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function KN(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:d}=e,u,c,m;return o.height>0&&o.width>0&&r?(c=ju({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:d,viewBoxDimension:d.width}),m=ju({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:d,viewBoxDimension:d.height}),u=WN({translateX:c,translateY:m,useTranslate3d:l})):u=zN,{cssProperties:u,cssClasses:UN({translateX:c,translateY:m,coordinate:r})}}function wu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function za(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wu(Object(r),!0).forEach(function(n){Zo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wu(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zo(e,t,r){return(t=qN(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qN(e){var t=GN(e,"string");return typeof t=="symbol"?t:t+""}function GN(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class HN extends p.PureComponent{constructor(){super(...arguments),Zo(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Zo(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:i,coordinate:o,hasPayload:l,isAnimationActive:d,offset:u,position:c,reverseDirection:m,useTranslate3d:f,viewBox:h,wrapperStyle:g,lastBoundingBox:x,innerRef:b,hasPortalFromProps:y}=this.props,{cssClasses:j,cssProperties:w}=KN({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:c,reverseDirection:m,tooltipBox:{height:x.height,width:x.width},useTranslate3d:f,viewBox:h}),S=y?{}:za(za({transition:d&&t?"transform ".concat(n,"ms ").concat(s):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),v=za(za({},S),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},g);return p.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:j,style:v,ref:b},i)}}var VN=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Tn={isSsr:VN()},Op=()=>Y(e=>e.rootProps.accessibilityLayer);function xt(e){return Number.isFinite(e)}function vs(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Jo(){return Jo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jo.apply(null,arguments)}function Nu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Su(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nu(Object(r),!0).forEach(function(n){YN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nu(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YN(e,t,r){return(t=XN(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XN(e){var t=ZN(e,"string");return typeof t=="symbol"?t:t+""}function ZN(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _u={curveBasisClosed:Bb,curveBasisOpen:zb,curveBasis:Fb,curveBumpX:_b,curveBumpY:Pb,curveLinearClosed:Ub,curveLinear:si,curveMonotoneX:Wb,curveMonotoneY:Kb,curveNatural:qb,curveStep:Gb,curveStepAfter:Vb,curveStepBefore:Hb},Ua=e=>xt(e.x)&&xt(e.y),Hn=e=>e.x,Vn=e=>e.y,JN=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(va(e));return(r==="curveMonotone"||r==="curveBump")&&t?_u["".concat(r).concat(t==="vertical"?"Y":"X")]:_u[r]||si},QN=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:i=!1}=e,o=JN(t,s),l=i?r.filter(Ua):r,d;if(Array.isArray(n)){var u=i?n.filter(m=>Ua(m)):n,c=l.map((m,f)=>Su(Su({},m),{},{base:u[f]}));return s==="vertical"?d=Ra().y(Vn).x1(Hn).x0(m=>m.base.x):d=Ra().x(Hn).y1(Vn).y0(m=>m.base.y),d.defined(Ua).curve(o),d(c)}return s==="vertical"&&q(n)?d=Ra().y(Vn).x1(Hn).x0(n):q(n)?d=Ra().x(Hn).y1(Vn).y0(n):d=fh().x(Hn).y(Vn),d.defined(Ua).curve(o),d(l)},Tp=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?QN(e):n;return p.createElement("path",Jo({},on(e),Fl(e),{className:fe("recharts-curve",t),d:i===null?void 0:i,ref:s}))},e1=["x","y","top","left","width","height","className"];function Qo(){return Qo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qo.apply(null,arguments)}function Pu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function t1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pu(Object(r),!0).forEach(function(n){r1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pu(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function r1(e,t,r){return(t=n1(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n1(e){var t=a1(e,"string");return typeof t=="symbol"?t:t+""}function a1(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function s1(e,t){if(e==null)return{};var r,n,s=i1(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function i1(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var o1=(e,t,r,n,s,i)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),l1=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:i=0,height:o=0,className:l}=e,d=s1(e,e1),u=t1({x:t,y:r,top:n,left:s,width:i,height:o},d);return!q(t)||!q(r)||!q(i)||!q(o)||!q(n)||!q(s)?null:p.createElement("path",Qo({},_e(u,!0),{className:fe("recharts-cross",l),d:o1(t,r,i,o,n,s)}))};function c1(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function Au(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function d1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Au(Object(r),!0).forEach(function(n){u1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Au(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function u1(e,t,r){return(t=m1(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m1(e){var t=f1(e,"string");return typeof t=="symbol"?t:t+""}function f1(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gt(e,t){var r=d1({},e),n=t,s=Object.keys(t),i=s.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return i}var Mp={},Dp={},Ip={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t})(Ip);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ip,r=Xl,n=ci,s=di,i=li;function o(u,c,m){return l(u,c,void 0,void 0,void 0,void 0,m)}function l(u,c,m,f,h,g,x){const b=x(u,c,m,f,h,g);if(b!==void 0)return b;if(typeof u==typeof c)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===c;case"number":return u===c||Object.is(u,c);case"function":return u===c;case"object":return d(u,c,g,x)}return d(u,c,g,x)}function d(u,c,m,f){if(Object.is(u,c))return!0;let h=n.getTag(u),g=n.getTag(c);if(h===s.argumentsTag&&(h=s.objectTag),g===s.argumentsTag&&(g=s.objectTag),h!==g)return!1;switch(h){case s.stringTag:return u.toString()===c.toString();case s.numberTag:{const y=u.valueOf(),j=c.valueOf();return i.eq(y,j)}case s.booleanTag:case s.dateTag:case s.symbolTag:return Object.is(u.valueOf(),c.valueOf());case s.regexpTag:return u.source===c.source&&u.flags===c.flags;case s.functionTag:return u===c}m=m??new Map;const x=m.get(u),b=m.get(c);if(x!=null&&b!=null)return x===c;m.set(u,c),m.set(c,u);try{switch(h){case s.mapTag:{if(u.size!==c.size)return!1;for(const[y,j]of u.entries())if(!c.has(y)||!l(j,c.get(y),y,u,c,m,f))return!1;return!0}case s.setTag:{if(u.size!==c.size)return!1;const y=Array.from(u.values()),j=Array.from(c.values());for(let w=0;w<y.length;w++){const S=y[w],v=j.findIndex(N=>l(S,N,void 0,u,c,m,f));if(v===-1)return!1;j.splice(v,1)}return!0}case s.arrayTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:case s.bigUint64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.bigInt64ArrayTag:case s.float32ArrayTag:case s.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(c)||u.length!==c.length)return!1;for(let y=0;y<u.length;y++)if(!l(u[y],c[y],y,u,c,m,f))return!1;return!0}case s.arrayBufferTag:return u.byteLength!==c.byteLength?!1:d(new Uint8Array(u),new Uint8Array(c),m,f);case s.dataViewTag:return u.byteLength!==c.byteLength||u.byteOffset!==c.byteOffset?!1:d(new Uint8Array(u),new Uint8Array(c),m,f);case s.errorTag:return u.name===c.name&&u.message===c.message;case s.objectTag:{if(!(d(u.constructor,c.constructor,m,f)||t.isPlainObject(u)&&t.isPlainObject(c)))return!1;const j=[...Object.keys(u),...r.getSymbols(u)],w=[...Object.keys(c),...r.getSymbols(c)];if(j.length!==w.length)return!1;for(let S=0;S<j.length;S++){const v=j[S],N=u[v];if(!Object.hasOwn(c,v))return!1;const _=c[v];if(!l(N,_,v,u,c,m,f))return!1}return!0}default:return!1}}finally{m.delete(u),m.delete(c)}}e.isEqualWith=o})(Dp);var Rp={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t})(Rp);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dp,r=Rp;function n(s,i){return t.isEqualWith(s,i,r.noop)}e.isEqual=n})(Mp);var h1=Mp.isEqual;const p1=lr(h1);var ys=1e-4,$p=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Lp=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),ku=(e,t)=>r=>{var n=$p(e,t);return Lp(n,r)},g1=(e,t)=>r=>{var n=$p(e,t),s=[...n.map((i,o)=>i*o).slice(1),0];return Lp(s,r)},Eu=function(){for(var t,r,n,s,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[t,n,r,s]=[0,0,1,1];break;case"ease":[t,n,r,s]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,s]=[.42,0,1,1];break;case"ease-out":[t,n,r,s]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,s]=[0,0,.58,1];break;default:{var d=o[0].split("(");d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4&&([t,n,r,s]=d[1].split(")")[0].split(",").map(g=>parseFloat(g)))}}else o.length===4&&([t,n,r,s]=o);var u=ku(t,r),c=ku(n,s),m=g1(t,r),f=g=>g>1?1:g<0?0:g,h=g=>{for(var x=g>1?1:g,b=x,y=0;y<8;++y){var j=u(b)-x,w=m(b);if(Math.abs(j-x)<ys||w<ys)return c(b);b=f(b-j/w)}return c(b)};return h.isStepper=!1,h},x1=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,i=(o,l,d)=>{var u=-(o-l)*r,c=d*n,m=d+(u-c)*s/1e3,f=d*s/1e3+o;return Math.abs(f-l)<ys&&Math.abs(m)<ys?[l,0]:[f,m]};return i.isStepper=!0,i.dt=s,i},Fp=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Eu(e);case"spring":return x1();default:if(e.split("(")[0]==="cubic-bezier")return Eu(e)}return typeof e=="function"?e:null};function Cu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ou(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Cu(Object(r),!0).forEach(function(n){v1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cu(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function v1(e,t,r){return(t=y1(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y1(e){var t=b1(e,"string");return typeof t=="symbol"?t:t+""}function b1(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var j1=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),w1=(e,t,r)=>e.map(n=>"".concat(j1(n)," ").concat(t,"ms ").concat(r)).join(","),N1=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),ua=(e,t)=>Object.keys(t).reduce((r,n)=>Ou(Ou({},r),{},{[n]:e(n,t[n])}),{});function Tu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tu(Object(r),!0).forEach(function(n){S1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tu(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S1(e,t,r){return(t=_1(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _1(e){var t=P1(e,"string");return typeof t=="symbol"?t:t+""}function P1(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bs=(e,t,r)=>e+(t-e)*r,el=e=>{var{from:t,to:r}=e;return t!==r},Bp=(e,t,r)=>{var n=ua((s,i)=>{if(el(i)){var[o,l]=e(i.from,i.to,i.velocity);return qe(qe({},i),{},{from:o,velocity:l})}return i},t);return r<1?ua((s,i)=>el(i)?qe(qe({},i),{},{velocity:bs(i.velocity,n[s].velocity,r),from:bs(i.from,n[s].from,r)}):i,t):Bp(e,n,r-1)};function A1(e,t,r,n,s,i){var o,l=n.reduce((f,h)=>qe(qe({},f),{},{[h]:{from:e[h],velocity:0,to:t[h]}}),{}),d=()=>ua((f,h)=>h.from,l),u=()=>!Object.values(l).filter(el).length,c=null,m=f=>{o||(o=f);var h=f-o,g=h/r.dt;l=Bp(r,l,g),s(qe(qe(qe({},e),t),d())),o=f,u()||(c=i.setTimeout(m))};return()=>(c=i.setTimeout(m),()=>{c()})}function k1(e,t,r,n,s,i,o){var l=null,d=s.reduce((m,f)=>qe(qe({},m),{},{[f]:[e[f],t[f]]}),{}),u,c=m=>{u||(u=m);var f=(m-u)/n,h=ua((x,b)=>bs(...b,r(f)),d);if(i(qe(qe(qe({},e),t),h)),f<1)l=o.setTimeout(c);else{var g=ua((x,b)=>bs(...b,r(1)),d);i(qe(qe(qe({},e),t),g))}};return()=>(l=o.setTimeout(c),()=>{l()})}const zp=(e,t,r,n,s,i)=>{var o=N1(e,t);return r.isStepper===!0?A1(e,t,r,o,s,i):k1(e,t,r,n,o,s,i)};function E1(e){var t,r=()=>null,n=!1,s=null,i=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[d,...u]=l;if(typeof d=="number"){s=e.setTimeout(i.bind(null,u),d);return}i(d),s=e.setTimeout(i.bind(null,u));return}typeof o=="string"&&(t=o,r(t)),typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,s&&(s(),s=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}class C1{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,i=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{cancelAnimationFrame(s)}}}function O1(){return E1(new C1)}var T1=p.createContext(O1);function Up(e,t){var r=p.useContext(T1);return p.useMemo(()=>t??r(e),[e,t,r])}var M1=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function tl(){return tl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tl.apply(null,arguments)}function D1(e,t){if(e==null)return{};var r,n,s=I1(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function I1(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Mu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mu(Object(r),!0).forEach(function(n){Ur(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mu(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ur(e,t,r){return(t=R1(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R1(e){var t=$1(e,"string");return typeof t=="symbol"?t:t+""}function $1(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class cc extends p.PureComponent{constructor(t,r){super(t,r),Ur(this,"mounted",!1),Ur(this,"manager",void 0),Ur(this,"stopJSAnimation",null),Ur(this,"unSubscribe",null);var{isActive:n,attributeName:s,from:i,to:o,children:l,duration:d,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||d<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:o});return}if(i){if(typeof l=="function"){this.state={style:i};return}this.state={style:s?{[s]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:s,shouldReAnimate:i,to:o,from:l}=this.props,{style:d}=this.state;if(n){if(!r){var u={style:s?{[s]:o}:o};this.state&&d&&(s&&d[s]!==o||!s&&d!==o)&&this.setState(u);return}if(!(p1(t.to,o)&&t.canBegin&&t.isActive)){var c=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=c||i?l:t.to;if(this.state&&d){var f={style:s?{[s]:m}:m};(s&&d[s]!==m||!s&&d!==m)&&this.setState(f)}this.runAnimation(xr(xr({},this.props),{},{from:m,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:s,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:d}=t,u=zp(r,n,Fp(i),s,this.changeStyle,this.manager.getTimeoutController()),c=()=>{this.stopJSAnimation=u()};this.manager.start([d,o,c,s,l])}runAnimation(t){var{begin:r,duration:n,attributeName:s,to:i,easing:o,onAnimationStart:l,onAnimationEnd:d,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof u=="function"||o==="spring"){this.runJSAnimation(t);return}var c=s?{[s]:i}:i,m=w1(Object.keys(c),n,o);this.manager.start([l,r,xr(xr({},c),{},{transition:m}),n,d])}render(){var t=this.props,{children:r,begin:n,duration:s,attributeName:i,easing:o,isActive:l,from:d,to:u,canBegin:c,onAnimationEnd:m,shouldReAnimate:f,onAnimationReStart:h,animationManager:g}=t,x=D1(t,M1),b=p.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!l||b===0||s<=0)return r;var j=w=>{var{style:S={},className:v}=w.props,N=p.cloneElement(w,xr(xr({},x),{},{style:xr(xr({},S),y),className:v}));return N};return b===1?j(p.Children.only(r)):p.createElement("div",null,p.Children.map(r,w=>j(w)))}}Ur(cc,"displayName","Animate");Ur(cc,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function js(e){var t,r=Up((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return p.createElement(cc,tl({},e,{animationManager:r}))}function ws(){return ws=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ws.apply(null,arguments)}var Du=(e,t,r,n,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,d=n>=0&&r>=0||n<0&&r<0?1:0,u;if(i>0&&s instanceof Array){for(var c=[0,0,0,0],m=0,f=4;m<f;m++)c[m]=s[m]>i?i:s[m];u="M".concat(e,",").concat(t+o*c[0]),c[0]>0&&(u+="A ".concat(c[0],",").concat(c[0],",0,0,").concat(d,",").concat(e+l*c[0],",").concat(t)),u+="L ".concat(e+r-l*c[1],",").concat(t),c[1]>0&&(u+="A ".concat(c[1],",").concat(c[1],",0,0,").concat(d,`,
        `).concat(e+r,",").concat(t+o*c[1])),u+="L ".concat(e+r,",").concat(t+n-o*c[2]),c[2]>0&&(u+="A ".concat(c[2],",").concat(c[2],",0,0,").concat(d,`,
        `).concat(e+r-l*c[2],",").concat(t+n)),u+="L ".concat(e+l*c[3],",").concat(t+n),c[3]>0&&(u+="A ".concat(c[3],",").concat(c[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+n-o*c[3])),u+="Z"}else if(i>0&&s===+s&&s>0){var h=Math.min(i,s);u="M ".concat(e,",").concat(t+o*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(d,",").concat(e+l*h,",").concat(t,`
            L `).concat(e+r-l*h,",").concat(t,`
            A `).concat(h,",").concat(h,",0,0,").concat(d,",").concat(e+r,",").concat(t+o*h,`
            L `).concat(e+r,",").concat(t+n-o*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(d,",").concat(e+r-l*h,",").concat(t+n,`
            L `).concat(e+l*h,",").concat(t+n,`
            A `).concat(h,",").concat(h,",0,0,").concat(d,",").concat(e,",").concat(t+n-o*h," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},L1={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Wp=e=>{var t=Gt(e,L1),r=p.useRef(null),[n,s]=p.useState(-1);p.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&s(y)}catch{}},[]);var{x:i,y:o,width:l,height:d,radius:u,className:c}=t,{animationEasing:m,animationDuration:f,animationBegin:h,isAnimationActive:g,isUpdateAnimationActive:x}=t;if(i!==+i||o!==+o||l!==+l||d!==+d||l===0||d===0)return null;var b=fe("recharts-rectangle",c);return x?p.createElement(js,{canBegin:n>0,from:{width:l,height:d,x:i,y:o},to:{width:l,height:d,x:i,y:o},duration:f,animationEasing:m,isActive:x},y=>{var{width:j,height:w,x:S,y:v}=y;return p.createElement(js,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:h,duration:f,isActive:g,easing:m},p.createElement("path",ws({},_e(t,!0),{className:b,d:Du(S,v,j,w,u),ref:r})))}):p.createElement("path",ws({},_e(t,!0),{className:b,d:Du(i,o,l,d,u)}))};function Kp(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:i}=e,o=Ge(t,r,n,s),l=Ge(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function rl(){return rl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rl.apply(null,arguments)}var F1=(e,t)=>{var r=rt(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Wa=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:d}=e,u=l*(o?1:-1)+n,c=Math.asin(l/u)/xs,m=d?s:s+i*c,f=Ge(t,r,u,m),h=Ge(t,r,n,m),g=d?s-i*c:s,x=Ge(t,r,u*Math.cos(c*xs),g);return{center:f,circleTangency:h,lineTangency:x,theta:c}},qp=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:i,endAngle:o}=e,l=F1(i,o),d=i+l,u=Ge(t,r,s,i),c=Ge(t,r,s,d),m="M ".concat(u.x,",").concat(u.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>d),`,
    `).concat(c.x,",").concat(c.y,`
  `);if(n>0){var f=Ge(t,r,n,i),h=Ge(t,r,n,d);m+="L ".concat(h.x,",").concat(h.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=d),`,
            `).concat(f.x,",").concat(f.y," Z")}else m+="L ".concat(t,",").concat(r," Z");return m},B1=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:d,endAngle:u}=e,c=rt(u-d),{circleTangency:m,lineTangency:f,theta:h}=Wa({cx:t,cy:r,radius:s,angle:d,sign:c,cornerRadius:i,cornerIsExternal:l}),{circleTangency:g,lineTangency:x,theta:b}=Wa({cx:t,cy:r,radius:s,angle:u,sign:-c,cornerRadius:i,cornerIsExternal:l}),y=l?Math.abs(d-u):Math.abs(d-u)-h-b;if(y<0)return o?"M ".concat(f.x,",").concat(f.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):qp({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:d,endAngle:u});var j="M ".concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(c<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(y>180),",").concat(+(c<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(c<0),",").concat(x.x,",").concat(x.y,`
  `);if(n>0){var{circleTangency:w,lineTangency:S,theta:v}=Wa({cx:t,cy:r,radius:n,angle:d,sign:c,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:N,lineTangency:_,theta:A}=Wa({cx:t,cy:r,radius:n,angle:u,sign:-c,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),k=l?Math.abs(d-u):Math.abs(d-u)-v-A;if(k<0&&i===0)return"".concat(j,"L").concat(t,",").concat(r,"Z");j+="L".concat(_.x,",").concat(_.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(c<0),",").concat(N.x,",").concat(N.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(k>180),",").concat(+(c>0),",").concat(w.x,",").concat(w.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(c<0),",").concat(S.x,",").concat(S.y,"Z")}else j+="L".concat(t,",").concat(r,"Z");return j},z1={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Gp=e=>{var t=Gt(e,z1),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:d,startAngle:u,endAngle:c,className:m}=t;if(i<s||u===c)return null;var f=fe("recharts-sector",m),h=i-s,g=Lt(o,h,0,!0),x;return g>0&&Math.abs(u-c)<360?x=B1({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(g,h/2),forceCornerRadius:l,cornerIsExternal:d,startAngle:u,endAngle:c}):x=qp({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:u,endAngle:c}),p.createElement("path",rl({},_e(t,!0),{className:f,d:x}))};function U1(e,t,r){var n,s,i,o;if(e==="horizontal")n=t.x,i=n,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:d,innerRadius:u,outerRadius:c,angle:m}=t,f=Ge(l,d,u,m),h=Ge(l,d,c,m);n=f.x,s=f.y,i=h.x,o=h.y}else return Kp(t);return[{x:n,y:s},{x:i,y:o}]}var Hp={},Vp={},Yp={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ql;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(Yp);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yp;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(Vp);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ec,r=Vp;function n(s,i,o){o&&typeof o!="number"&&t.isIterateeCall(s,i,o)&&(i=o=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),o=o===void 0?s<i?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((i-s)/(o||1)),0),d=new Array(l);for(let u=0;u<l;u++)d[u]=s,s+=o;return d}e.range=n})(Hp);var W1=Hp.range;const Xp=lr(W1);function wr(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function K1(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function dc(e){let t,r,n;e.length!==2?(t=wr,r=(l,d)=>wr(e(l),d),n=(l,d)=>e(l)-d):(t=e===wr||e===K1?e:q1,r=e,n=e);function s(l,d,u=0,c=l.length){if(u<c){if(t(d,d)!==0)return c;do{const m=u+c>>>1;r(l[m],d)<0?u=m+1:c=m}while(u<c)}return u}function i(l,d,u=0,c=l.length){if(u<c){if(t(d,d)!==0)return c;do{const m=u+c>>>1;r(l[m],d)<=0?u=m+1:c=m}while(u<c)}return u}function o(l,d,u=0,c=l.length){const m=s(l,d,u,c-1);return m>u&&n(l[m-1],d)>-n(l[m],d)?m-1:m}return{left:s,center:o,right:i}}function q1(){return 0}function Zp(e){return e===null?NaN:+e}function*G1(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const H1=dc(wr),ba=H1.right;dc(Zp).center;class Iu extends Map{constructor(t,r=X1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(Ru(this,t))}has(t){return super.has(Ru(this,t))}set(t,r){return super.set(V1(this,t),r)}delete(t){return super.delete(Y1(this,t))}}function Ru({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function V1({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Y1({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function X1(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Z1(e=wr){if(e===wr)return Jp;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function Jp(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const J1=Math.sqrt(50),Q1=Math.sqrt(10),eS=Math.sqrt(2);function Ns(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=J1?10:i>=Q1?5:i>=eS?2:1;let l,d,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(e*u),d=Math.round(t*u),l/u<e&&++l,d/u>t&&--d,u=-u):(u=Math.pow(10,s)*o,l=Math.round(e/u),d=Math.round(t/u),l*u<e&&++l,d*u>t&&--d),d<l&&.5<=r&&r<2?Ns(e,t,r*2):[l,d,u]}function nl(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?Ns(t,e,r):Ns(e,t,r);if(!(i>=s))return[];const l=i-s+1,d=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)d[u]=(i-u)/-o;else for(let u=0;u<l;++u)d[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)d[u]=(s+u)/-o;else for(let u=0;u<l;++u)d[u]=(s+u)*o;return d}function al(e,t,r){return t=+t,e=+e,r=+r,Ns(e,t,r)[2]}function sl(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?al(t,e,r):al(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function $u(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Lu(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Qp(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?Jp:Z1(s);n>r;){if(n-r>600){const d=n-r+1,u=t-r+1,c=Math.log(d),m=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*m*(d-m)/d)*(u-d/2<0?-1:1),h=Math.max(r,Math.floor(t-u*m/d+f)),g=Math.min(n,Math.floor(t+(d-u)*m/d+f));Qp(e,t,h,g,s)}const i=e[t];let o=r,l=n;for(Yn(e,r,t),s(e[n],i)>0&&Yn(e,r,n);o<l;){for(Yn(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?Yn(e,r,l):(++l,Yn(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function Yn(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function tS(e,t,r){if(e=Float64Array.from(G1(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Lu(e);if(t>=1)return $u(e);var n,s=(n-1)*t,i=Math.floor(s),o=$u(Qp(e,i).subarray(0,i+1)),l=Lu(e.subarray(i+1));return o+(l-o)*(s-i)}}function rS(e,t,r=Zp){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function nS(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function Ct(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ur(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const il=Symbol("implicit");function uc(){var e=new Iu,t=[],r=[],n=il;function s(i){let o=e.get(i);if(o===void 0){if(n!==il)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Iu;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return uc(t,r).unknown(n)},Ct.apply(s,arguments),s}function mc(){var e=uc().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,l=!1,d=0,u=0,c=.5;delete e.unknown;function m(){var f=t().length,h=s<n,g=h?s:n,x=h?n:s;i=(x-g)/Math.max(1,f-d+u*2),l&&(i=Math.floor(i)),g+=(x-g-i*(f-d))*c,o=i*(1-d),l&&(g=Math.round(g),o=Math.round(o));var b=nS(f).map(function(y){return g+i*y});return r(h?b.reverse():b)}return e.domain=function(f){return arguments.length?(t(f),m()):t()},e.range=function(f){return arguments.length?([n,s]=f,n=+n,s=+s,m()):[n,s]},e.rangeRound=function(f){return[n,s]=f,n=+n,s=+s,l=!0,m()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(l=!!f,m()):l},e.padding=function(f){return arguments.length?(d=Math.min(1,u=+f),m()):d},e.paddingInner=function(f){return arguments.length?(d=Math.min(1,f),m()):d},e.paddingOuter=function(f){return arguments.length?(u=+f,m()):u},e.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),m()):c},e.copy=function(){return mc(t(),[n,s]).round(l).paddingInner(d).paddingOuter(u).align(c)},Ct.apply(m(),arguments)}function eg(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return eg(t())},e}function aS(){return eg(mc.apply(null,arguments).paddingInner(1))}function fc(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function tg(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function ja(){}var ma=.7,Ss=1/ma,Nn="\\s*([+-]?\\d+)\\s*",fa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sS=/^#([0-9a-f]{3,8})$/,iS=new RegExp(`^rgb\\(${Nn},${Nn},${Nn}\\)$`),oS=new RegExp(`^rgb\\(${Wt},${Wt},${Wt}\\)$`),lS=new RegExp(`^rgba\\(${Nn},${Nn},${Nn},${fa}\\)$`),cS=new RegExp(`^rgba\\(${Wt},${Wt},${Wt},${fa}\\)$`),dS=new RegExp(`^hsl\\(${fa},${Wt},${Wt}\\)$`),uS=new RegExp(`^hsla\\(${fa},${Wt},${Wt},${fa}\\)$`),Fu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fc(ja,ha,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Bu,formatHex:Bu,formatHex8:mS,formatHsl:fS,formatRgb:zu,toString:zu});function Bu(){return this.rgb().formatHex()}function mS(){return this.rgb().formatHex8()}function fS(){return rg(this).formatHsl()}function zu(){return this.rgb().formatRgb()}function ha(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=sS.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Uu(t):r===3?new nt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Ka(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Ka(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=iS.exec(e))?new nt(t[1],t[2],t[3],1):(t=oS.exec(e))?new nt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=lS.exec(e))?Ka(t[1],t[2],t[3],t[4]):(t=cS.exec(e))?Ka(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=dS.exec(e))?qu(t[1],t[2]/100,t[3]/100,1):(t=uS.exec(e))?qu(t[1],t[2]/100,t[3]/100,t[4]):Fu.hasOwnProperty(e)?Uu(Fu[e]):e==="transparent"?new nt(NaN,NaN,NaN,0):null}function Uu(e){return new nt(e>>16&255,e>>8&255,e&255,1)}function Ka(e,t,r,n){return n<=0&&(e=t=r=NaN),new nt(e,t,r,n)}function hS(e){return e instanceof ja||(e=ha(e)),e?(e=e.rgb(),new nt(e.r,e.g,e.b,e.opacity)):new nt}function ol(e,t,r,n){return arguments.length===1?hS(e):new nt(e,t,r,n??1)}function nt(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}fc(nt,ol,tg(ja,{brighter(e){return e=e==null?Ss:Math.pow(Ss,e),new nt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ma:Math.pow(ma,e),new nt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new nt(Xr(this.r),Xr(this.g),Xr(this.b),_s(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Wu,formatHex:Wu,formatHex8:pS,formatRgb:Ku,toString:Ku}));function Wu(){return`#${Wr(this.r)}${Wr(this.g)}${Wr(this.b)}`}function pS(){return`#${Wr(this.r)}${Wr(this.g)}${Wr(this.b)}${Wr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ku(){const e=_s(this.opacity);return`${e===1?"rgb(":"rgba("}${Xr(this.r)}, ${Xr(this.g)}, ${Xr(this.b)}${e===1?")":`, ${e})`}`}function _s(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Xr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Wr(e){return e=Xr(e),(e<16?"0":"")+e.toString(16)}function qu(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new $t(e,t,r,n)}function rg(e){if(e instanceof $t)return new $t(e.h,e.s,e.l,e.opacity);if(e instanceof ja||(e=ha(e)),!e)return new $t;if(e instanceof $t)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-s,d=(i+s)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=d<.5?i+s:2-i-s,o*=60):l=d>0&&d<1?0:o,new $t(o,l,d,e.opacity)}function gS(e,t,r,n){return arguments.length===1?rg(e):new $t(e,t,r,n??1)}function $t(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}fc($t,gS,tg(ja,{brighter(e){return e=e==null?Ss:Math.pow(Ss,e),new $t(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ma:Math.pow(ma,e),new $t(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new nt(io(e>=240?e-240:e+120,s,n),io(e,s,n),io(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new $t(Gu(this.h),qa(this.s),qa(this.l),_s(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=_s(this.opacity);return`${e===1?"hsl(":"hsla("}${Gu(this.h)}, ${qa(this.s)*100}%, ${qa(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Gu(e){return e=(e||0)%360,e<0?e+360:e}function qa(e){return Math.max(0,Math.min(1,e||0))}function io(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const hc=e=>()=>e;function xS(e,t){return function(r){return e+r*t}}function vS(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function yS(e){return(e=+e)==1?ng:function(t,r){return r-t?vS(t,r,e):hc(isNaN(t)?r:t)}}function ng(e,t){var r=t-e;return r?xS(e,r):hc(isNaN(e)?t:e)}const Hu=function e(t){var r=yS(t);function n(s,i){var o=r((s=ol(s)).r,(i=ol(i)).r),l=r(s.g,i.g),d=r(s.b,i.b),u=ng(s.opacity,i.opacity);return function(c){return s.r=o(c),s.g=l(c),s.b=d(c),s.opacity=u(c),s+""}}return n.gamma=e,n}(1);function bS(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function jS(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function wS(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=Mn(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=s[o](l);return i}}function NS(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Ps(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function SS(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Mn(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var ll=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oo=new RegExp(ll.source,"g");function _S(e){return function(){return e}}function PS(e){return function(t){return e(t)+""}}function AS(e,t){var r=ll.lastIndex=oo.lastIndex=0,n,s,i,o=-1,l=[],d=[];for(e=e+"",t=t+"";(n=ll.exec(e))&&(s=oo.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,d.push({i:o,x:Ps(n,s)})),r=oo.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?d[0]?PS(d[0].x):_S(t):(t=d.length,function(u){for(var c=0,m;c<t;++c)l[(m=d[c]).i]=m.x(u);return l.join("")})}function Mn(e,t){var r=typeof t,n;return t==null||r==="boolean"?hc(t):(r==="number"?Ps:r==="string"?(n=ha(t))?(t=n,Hu):AS:t instanceof ha?Hu:t instanceof Date?NS:jS(t)?bS:Array.isArray(t)?wS:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?SS:Ps)(e,t)}function pc(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function kS(e,t){t===void 0&&(t=e,e=Mn);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function ES(e){return function(){return e}}function As(e){return+e}var Vu=[0,1];function Je(e){return e}function cl(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:ES(isNaN(t)?NaN:.5)}function CS(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function OS(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=cl(s,n),i=r(o,i)):(n=cl(n,s),i=r(i,o)),function(l){return i(n(l))}}function TS(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=cl(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var d=ba(e,l,1,n)-1;return i[d](s[d](l))}}function wa(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Si(){var e=Vu,t=Vu,r=Mn,n,s,i,o=Je,l,d,u;function c(){var f=Math.min(e.length,t.length);return o!==Je&&(o=CS(e[0],e[f-1])),l=f>2?TS:OS,d=u=null,m}function m(f){return f==null||isNaN(f=+f)?i:(d||(d=l(e.map(n),t,r)))(n(o(f)))}return m.invert=function(f){return o(s((u||(u=l(t,e.map(n),Ps)))(f)))},m.domain=function(f){return arguments.length?(e=Array.from(f,As),c()):e.slice()},m.range=function(f){return arguments.length?(t=Array.from(f),c()):t.slice()},m.rangeRound=function(f){return t=Array.from(f),r=pc,c()},m.clamp=function(f){return arguments.length?(o=f?!0:Je,c()):o!==Je},m.interpolate=function(f){return arguments.length?(r=f,c()):r},m.unknown=function(f){return arguments.length?(i=f,m):i},function(f,h){return n=f,s=h,c()}}function gc(){return Si()(Je,Je)}function MS(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ks(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function An(e){return e=ks(Math.abs(e)),e?e[1]:NaN}function DS(e,t){return function(r,n){for(var s=r.length,i=[],o=0,l=e[0],d=0;s>0&&l>0&&(d+l+1>n&&(l=Math.max(1,n-d)),i.push(r.substring(s-=l,s+l)),!((d+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function IS(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var RS=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function pa(e){if(!(t=RS.exec(e)))throw new Error("invalid format: "+e);var t;return new xc({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}pa.prototype=xc.prototype;function xc(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}xc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function $S(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var ag;function LS(e,t){var r=ks(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(ag=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+ks(e,Math.max(0,t+i-1))[0]}function Yu(e,t){var r=ks(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const Xu={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:MS,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Yu(e*100,t),r:Yu,s:LS,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Zu(e){return e}var Ju=Array.prototype.map,Qu=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function FS(e){var t=e.grouping===void 0||e.thousands===void 0?Zu:DS(Ju.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?Zu:IS(Ju.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function u(m){m=pa(m);var f=m.fill,h=m.align,g=m.sign,x=m.symbol,b=m.zero,y=m.width,j=m.comma,w=m.precision,S=m.trim,v=m.type;v==="n"?(j=!0,v="g"):Xu[v]||(w===void 0&&(w=12),S=!0,v="g"),(b||f==="0"&&h==="=")&&(b=!0,f="0",h="=");var N=x==="$"?r:x==="#"&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",_=x==="$"?n:/[%p]/.test(v)?o:"",A=Xu[v],k=/[defgprs%]/.test(v);w=w===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function C(T){var O=N,F=_,P,$,D;if(v==="c")F=A(T)+F,T="";else{T=+T;var B=T<0||1/T<0;if(T=isNaN(T)?d:A(Math.abs(T),w),S&&(T=$S(T)),B&&+T==0&&g!=="+"&&(B=!1),O=(B?g==="("?g:l:g==="-"||g==="("?"":g)+O,F=(v==="s"?Qu[8+ag/3]:"")+F+(B&&g==="("?")":""),k){for(P=-1,$=T.length;++P<$;)if(D=T.charCodeAt(P),48>D||D>57){F=(D===46?s+T.slice(P+1):T.slice(P))+F,T=T.slice(0,P);break}}}j&&!b&&(T=t(T,1/0));var I=O.length+T.length+F.length,X=I<y?new Array(y-I+1).join(f):"";switch(j&&b&&(T=t(X+T,X.length?y-F.length:1/0),X=""),h){case"<":T=O+T+F+X;break;case"=":T=O+X+T+F;break;case"^":T=X.slice(0,I=X.length>>1)+O+T+F+X.slice(I);break;default:T=X+O+T+F;break}return i(T)}return C.toString=function(){return m+""},C}function c(m,f){var h=u((m=pa(m),m.type="f",m)),g=Math.max(-8,Math.min(8,Math.floor(An(f)/3)))*3,x=Math.pow(10,-g),b=Qu[8+g/3];return function(y){return h(x*y)+b}}return{format:u,formatPrefix:c}}var Ga,vc,sg;BS({thousands:",",grouping:[3],currency:["$",""]});function BS(e){return Ga=FS(e),vc=Ga.format,sg=Ga.formatPrefix,Ga}function zS(e){return Math.max(0,-An(Math.abs(e)))}function US(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(An(t)/3)))*3-An(Math.abs(e)))}function WS(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,An(t)-An(e))+1}function ig(e,t,r,n){var s=sl(e,t,r),i;switch(n=pa(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=US(s,o))&&(n.precision=i),sg(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=WS(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=zS(s))&&(n.precision=i-(n.type==="%")*2);break}}return vc(n)}function kr(e){var t=e.domain;return e.ticks=function(r){var n=t();return nl(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return ig(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],l=n[i],d,u,c=10;for(l<o&&(u=o,o=l,l=u,u=s,s=i,i=u);c-- >0;){if(u=al(o,l,r),u===d)return n[s]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;d=u}return e},e}function og(){var e=gc();return e.copy=function(){return wa(e,og())},Ct.apply(e,arguments),kr(e)}function lg(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,As),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return lg(e).unknown(t)},e=arguments.length?Array.from(e,As):[0,1],kr(r)}function cg(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function em(e){return Math.log(e)}function tm(e){return Math.exp(e)}function KS(e){return-Math.log(-e)}function qS(e){return-Math.exp(-e)}function GS(e){return isFinite(e)?+("1e"+e):e<0?0:e}function HS(e){return e===10?GS:e===Math.E?Math.exp:t=>Math.pow(e,t)}function VS(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function rm(e){return(t,r)=>-e(-t,r)}function yc(e){const t=e(em,tm),r=t.domain;let n=10,s,i;function o(){return s=VS(n),i=HS(n),r()[0]<0?(s=rm(s),i=rm(i),e(KS,qS)):e(em,tm),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const d=r();let u=d[0],c=d[d.length-1];const m=c<u;m&&([u,c]=[c,u]);let f=s(u),h=s(c),g,x;const b=l==null?10:+l;let y=[];if(!(n%1)&&h-f<b){if(f=Math.floor(f),h=Math.ceil(h),u>0){for(;f<=h;++f)for(g=1;g<n;++g)if(x=f<0?g/i(-f):g*i(f),!(x<u)){if(x>c)break;y.push(x)}}else for(;f<=h;++f)for(g=n-1;g>=1;--g)if(x=f>0?g/i(-f):g*i(f),!(x<u)){if(x>c)break;y.push(x)}y.length*2<b&&(y=nl(u,c,b))}else y=nl(f,h,Math.min(h-f,b)).map(i);return m?y.reverse():y},t.tickFormat=(l,d)=>{if(l==null&&(l=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=pa(d)).precision==null&&(d.trim=!0),d=vc(d)),l===1/0)return d;const u=Math.max(1,n*l/t.ticks().length);return c=>{let m=c/i(Math.round(s(c)));return m*n<n-.5&&(m*=n),m<=u?d(c):""}},t.nice=()=>r(cg(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function dg(){const e=yc(Si()).domain([1,10]);return e.copy=()=>wa(e,dg()).base(e.base()),Ct.apply(e,arguments),e}function nm(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function am(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function bc(e){var t=1,r=e(nm(t),am(t));return r.constant=function(n){return arguments.length?e(nm(t=+n),am(t)):t},kr(r)}function ug(){var e=bc(Si());return e.copy=function(){return wa(e,ug()).constant(e.constant())},Ct.apply(e,arguments)}function sm(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function YS(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function XS(e){return e<0?-e*e:e*e}function jc(e){var t=e(Je,Je),r=1;function n(){return r===1?e(Je,Je):r===.5?e(YS,XS):e(sm(r),sm(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},kr(t)}function wc(){var e=jc(Si());return e.copy=function(){return wa(e,wc()).exponent(e.exponent())},Ct.apply(e,arguments),e}function ZS(){return wc.apply(null,arguments).exponent(.5)}function im(e){return Math.sign(e)*e*e}function JS(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function mg(){var e=gc(),t=[0,1],r=!1,n;function s(i){var o=JS(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(im(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,As)).map(im)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return mg(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Ct.apply(s,arguments),kr(s)}function fg(){var e=[],t=[],r=[],n;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=rS(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[ba(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(wr),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return fg().domain(e).range(t).unknown(n)},Ct.apply(i,arguments)}function hg(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(d){return d!=null&&d<=d?s[ba(n,d,0,r)]:i}function l(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*t-(d-r)*e)/(r+1);return o}return o.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,l()):[e,t]},o.range=function(d){return arguments.length?(r=(s=Array.from(d)).length-1,l()):s.slice()},o.invertExtent=function(d){var u=s.indexOf(d);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(d){return arguments.length&&(i=d),o},o.thresholds=function(){return n.slice()},o.copy=function(){return hg().domain([e,t]).range(s).unknown(i)},Ct.apply(kr(o),arguments)}function pg(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[ba(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return pg().domain(e).range(t).unknown(r)},Ct.apply(s,arguments)}const lo=new Date,co=new Date;function Me(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const d=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return d;let u;do d.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return d},s.filter=i=>Me(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(lo.setTime(+i),co.setTime(+o),e(lo),e(co),Math.floor(r(lo,co))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const Es=Me(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Es.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Me(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Es);Es.range;const Jt=1e3,_t=Jt*60,Qt=_t*60,sr=Qt*24,Nc=sr*7,om=sr*30,uo=sr*365,Kr=Me(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Jt)},(e,t)=>(t-e)/Jt,e=>e.getUTCSeconds());Kr.range;const Sc=Me(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Jt)},(e,t)=>{e.setTime(+e+t*_t)},(e,t)=>(t-e)/_t,e=>e.getMinutes());Sc.range;const _c=Me(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*_t)},(e,t)=>(t-e)/_t,e=>e.getUTCMinutes());_c.range;const Pc=Me(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Jt-e.getMinutes()*_t)},(e,t)=>{e.setTime(+e+t*Qt)},(e,t)=>(t-e)/Qt,e=>e.getHours());Pc.range;const Ac=Me(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Qt)},(e,t)=>(t-e)/Qt,e=>e.getUTCHours());Ac.range;const Na=Me(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*_t)/sr,e=>e.getDate()-1);Na.range;const _i=Me(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/sr,e=>e.getUTCDate()-1);_i.range;const gg=Me(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/sr,e=>Math.floor(e/sr));gg.range;function ln(e){return Me(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*_t)/Nc)}const Pi=ln(0),Cs=ln(1),QS=ln(2),e2=ln(3),kn=ln(4),t2=ln(5),r2=ln(6);Pi.range;Cs.range;QS.range;e2.range;kn.range;t2.range;r2.range;function cn(e){return Me(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Nc)}const Ai=cn(0),Os=cn(1),n2=cn(2),a2=cn(3),En=cn(4),s2=cn(5),i2=cn(6);Ai.range;Os.range;n2.range;a2.range;En.range;s2.range;i2.range;const kc=Me(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());kc.range;const Ec=Me(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Ec.range;const ir=Me(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ir.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Me(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});ir.range;const or=Me(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());or.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Me(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});or.range;function xg(e,t,r,n,s,i){const o=[[Kr,1,Jt],[Kr,5,5*Jt],[Kr,15,15*Jt],[Kr,30,30*Jt],[i,1,_t],[i,5,5*_t],[i,15,15*_t],[i,30,30*_t],[s,1,Qt],[s,3,3*Qt],[s,6,6*Qt],[s,12,12*Qt],[n,1,sr],[n,2,2*sr],[r,1,Nc],[t,1,om],[t,3,3*om],[e,1,uo]];function l(u,c,m){const f=c<u;f&&([u,c]=[c,u]);const h=m&&typeof m.range=="function"?m:d(u,c,m),g=h?h.range(u,+c+1):[];return f?g.reverse():g}function d(u,c,m){const f=Math.abs(c-u)/m,h=dc(([,,b])=>b).right(o,f);if(h===o.length)return e.every(sl(u/uo,c/uo,m));if(h===0)return Es.every(Math.max(sl(u,c,m),1));const[g,x]=o[f/o[h-1][2]<o[h][2]/f?h-1:h];return g.every(x)}return[l,d]}const[o2,l2]=xg(or,Ec,Ai,gg,Ac,_c),[c2,d2]=xg(ir,kc,Pi,Na,Pc,Sc);function mo(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function fo(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Xn(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function u2(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,d=e.shortMonths,u=Zn(s),c=Jn(s),m=Zn(i),f=Jn(i),h=Zn(o),g=Jn(o),x=Zn(l),b=Jn(l),y=Zn(d),j=Jn(d),w={a:B,A:I,b:X,B:Z,c:null,d:fm,e:fm,f:D2,g:K2,G:G2,H:O2,I:T2,j:M2,L:vg,m:I2,M:R2,p:se,q:G,Q:gm,s:xm,S:$2,u:L2,U:F2,V:B2,w:z2,W:U2,x:null,X:null,y:W2,Y:q2,Z:H2,"%":pm},S={a:H,A:J,b:Q,B:ce,c:null,d:hm,e:hm,f:Z2,g:o_,G:c_,H:V2,I:Y2,j:X2,L:bg,m:J2,M:Q2,p:E,q:z,Q:gm,s:xm,S:e_,u:t_,U:r_,V:n_,w:a_,W:s_,x:null,X:null,y:i_,Y:l_,Z:d_,"%":pm},v={a:C,A:T,b:O,B:F,c:P,d:um,e:um,f:A2,g:dm,G:cm,H:mm,I:mm,j:N2,L:P2,m:w2,M:S2,p:k,q:j2,Q:E2,s:C2,S:_2,u:g2,U:x2,V:v2,w:p2,W:y2,x:$,X:D,y:dm,Y:cm,Z:b2,"%":k2};w.x=N(r,w),w.X=N(n,w),w.c=N(t,w),S.x=N(r,S),S.X=N(n,S),S.c=N(t,S);function N(L,V){return function(ee){var R=[],Ne=-1,ie=0,We=L.length,he,Ht,Wn;for(ee instanceof Date||(ee=new Date(+ee));++Ne<We;)L.charCodeAt(Ne)===37&&(R.push(L.slice(ie,Ne)),(Ht=lm[he=L.charAt(++Ne)])!=null?he=L.charAt(++Ne):Ht=he==="e"?" ":"0",(Wn=V[he])&&(he=Wn(ee,Ht)),R.push(he),ie=Ne+1);return R.push(L.slice(ie,Ne)),R.join("")}}function _(L,V){return function(ee){var R=Xn(1900,void 0,1),Ne=A(R,L,ee+="",0),ie,We;if(Ne!=ee.length)return null;if("Q"in R)return new Date(R.Q);if("s"in R)return new Date(R.s*1e3+("L"in R?R.L:0));if(V&&!("Z"in R)&&(R.Z=0),"p"in R&&(R.H=R.H%12+R.p*12),R.m===void 0&&(R.m="q"in R?R.q:0),"V"in R){if(R.V<1||R.V>53)return null;"w"in R||(R.w=1),"Z"in R?(ie=fo(Xn(R.y,0,1)),We=ie.getUTCDay(),ie=We>4||We===0?Os.ceil(ie):Os(ie),ie=_i.offset(ie,(R.V-1)*7),R.y=ie.getUTCFullYear(),R.m=ie.getUTCMonth(),R.d=ie.getUTCDate()+(R.w+6)%7):(ie=mo(Xn(R.y,0,1)),We=ie.getDay(),ie=We>4||We===0?Cs.ceil(ie):Cs(ie),ie=Na.offset(ie,(R.V-1)*7),R.y=ie.getFullYear(),R.m=ie.getMonth(),R.d=ie.getDate()+(R.w+6)%7)}else("W"in R||"U"in R)&&("w"in R||(R.w="u"in R?R.u%7:"W"in R?1:0),We="Z"in R?fo(Xn(R.y,0,1)).getUTCDay():mo(Xn(R.y,0,1)).getDay(),R.m=0,R.d="W"in R?(R.w+6)%7+R.W*7-(We+5)%7:R.w+R.U*7-(We+6)%7);return"Z"in R?(R.H+=R.Z/100|0,R.M+=R.Z%100,fo(R)):mo(R)}}function A(L,V,ee,R){for(var Ne=0,ie=V.length,We=ee.length,he,Ht;Ne<ie;){if(R>=We)return-1;if(he=V.charCodeAt(Ne++),he===37){if(he=V.charAt(Ne++),Ht=v[he in lm?V.charAt(Ne++):he],!Ht||(R=Ht(L,ee,R))<0)return-1}else if(he!=ee.charCodeAt(R++))return-1}return R}function k(L,V,ee){var R=u.exec(V.slice(ee));return R?(L.p=c.get(R[0].toLowerCase()),ee+R[0].length):-1}function C(L,V,ee){var R=h.exec(V.slice(ee));return R?(L.w=g.get(R[0].toLowerCase()),ee+R[0].length):-1}function T(L,V,ee){var R=m.exec(V.slice(ee));return R?(L.w=f.get(R[0].toLowerCase()),ee+R[0].length):-1}function O(L,V,ee){var R=y.exec(V.slice(ee));return R?(L.m=j.get(R[0].toLowerCase()),ee+R[0].length):-1}function F(L,V,ee){var R=x.exec(V.slice(ee));return R?(L.m=b.get(R[0].toLowerCase()),ee+R[0].length):-1}function P(L,V,ee){return A(L,t,V,ee)}function $(L,V,ee){return A(L,r,V,ee)}function D(L,V,ee){return A(L,n,V,ee)}function B(L){return o[L.getDay()]}function I(L){return i[L.getDay()]}function X(L){return d[L.getMonth()]}function Z(L){return l[L.getMonth()]}function se(L){return s[+(L.getHours()>=12)]}function G(L){return 1+~~(L.getMonth()/3)}function H(L){return o[L.getUTCDay()]}function J(L){return i[L.getUTCDay()]}function Q(L){return d[L.getUTCMonth()]}function ce(L){return l[L.getUTCMonth()]}function E(L){return s[+(L.getUTCHours()>=12)]}function z(L){return 1+~~(L.getUTCMonth()/3)}return{format:function(L){var V=N(L+="",w);return V.toString=function(){return L},V},parse:function(L){var V=_(L+="",!1);return V.toString=function(){return L},V},utcFormat:function(L){var V=N(L+="",S);return V.toString=function(){return L},V},utcParse:function(L){var V=_(L+="",!0);return V.toString=function(){return L},V}}}var lm={"-":"",_:" ",0:"0"},Ue=/^\s*\d+/,m2=/^%/,f2=/[\\^$*+?|[\]().{}]/g;function oe(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function h2(e){return e.replace(f2,"\\$&")}function Zn(e){return new RegExp("^(?:"+e.map(h2).join("|")+")","i")}function Jn(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function p2(e,t,r){var n=Ue.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function g2(e,t,r){var n=Ue.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function x2(e,t,r){var n=Ue.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function v2(e,t,r){var n=Ue.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function y2(e,t,r){var n=Ue.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function cm(e,t,r){var n=Ue.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function dm(e,t,r){var n=Ue.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function b2(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function j2(e,t,r){var n=Ue.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function w2(e,t,r){var n=Ue.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function um(e,t,r){var n=Ue.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function N2(e,t,r){var n=Ue.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function mm(e,t,r){var n=Ue.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function S2(e,t,r){var n=Ue.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function _2(e,t,r){var n=Ue.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function P2(e,t,r){var n=Ue.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function A2(e,t,r){var n=Ue.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function k2(e,t,r){var n=m2.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function E2(e,t,r){var n=Ue.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function C2(e,t,r){var n=Ue.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function fm(e,t){return oe(e.getDate(),t,2)}function O2(e,t){return oe(e.getHours(),t,2)}function T2(e,t){return oe(e.getHours()%12||12,t,2)}function M2(e,t){return oe(1+Na.count(ir(e),e),t,3)}function vg(e,t){return oe(e.getMilliseconds(),t,3)}function D2(e,t){return vg(e,t)+"000"}function I2(e,t){return oe(e.getMonth()+1,t,2)}function R2(e,t){return oe(e.getMinutes(),t,2)}function $2(e,t){return oe(e.getSeconds(),t,2)}function L2(e){var t=e.getDay();return t===0?7:t}function F2(e,t){return oe(Pi.count(ir(e)-1,e),t,2)}function yg(e){var t=e.getDay();return t>=4||t===0?kn(e):kn.ceil(e)}function B2(e,t){return e=yg(e),oe(kn.count(ir(e),e)+(ir(e).getDay()===4),t,2)}function z2(e){return e.getDay()}function U2(e,t){return oe(Cs.count(ir(e)-1,e),t,2)}function W2(e,t){return oe(e.getFullYear()%100,t,2)}function K2(e,t){return e=yg(e),oe(e.getFullYear()%100,t,2)}function q2(e,t){return oe(e.getFullYear()%1e4,t,4)}function G2(e,t){var r=e.getDay();return e=r>=4||r===0?kn(e):kn.ceil(e),oe(e.getFullYear()%1e4,t,4)}function H2(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+oe(t/60|0,"0",2)+oe(t%60,"0",2)}function hm(e,t){return oe(e.getUTCDate(),t,2)}function V2(e,t){return oe(e.getUTCHours(),t,2)}function Y2(e,t){return oe(e.getUTCHours()%12||12,t,2)}function X2(e,t){return oe(1+_i.count(or(e),e),t,3)}function bg(e,t){return oe(e.getUTCMilliseconds(),t,3)}function Z2(e,t){return bg(e,t)+"000"}function J2(e,t){return oe(e.getUTCMonth()+1,t,2)}function Q2(e,t){return oe(e.getUTCMinutes(),t,2)}function e_(e,t){return oe(e.getUTCSeconds(),t,2)}function t_(e){var t=e.getUTCDay();return t===0?7:t}function r_(e,t){return oe(Ai.count(or(e)-1,e),t,2)}function jg(e){var t=e.getUTCDay();return t>=4||t===0?En(e):En.ceil(e)}function n_(e,t){return e=jg(e),oe(En.count(or(e),e)+(or(e).getUTCDay()===4),t,2)}function a_(e){return e.getUTCDay()}function s_(e,t){return oe(Os.count(or(e)-1,e),t,2)}function i_(e,t){return oe(e.getUTCFullYear()%100,t,2)}function o_(e,t){return e=jg(e),oe(e.getUTCFullYear()%100,t,2)}function l_(e,t){return oe(e.getUTCFullYear()%1e4,t,4)}function c_(e,t){var r=e.getUTCDay();return e=r>=4||r===0?En(e):En.ceil(e),oe(e.getUTCFullYear()%1e4,t,4)}function d_(){return"+0000"}function pm(){return"%"}function gm(e){return+e}function xm(e){return Math.floor(+e/1e3)}var mn,wg,Ng;u_({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function u_(e){return mn=u2(e),wg=mn.format,mn.parse,Ng=mn.utcFormat,mn.utcParse,mn}function m_(e){return new Date(e)}function f_(e){return e instanceof Date?+e:+new Date(+e)}function Cc(e,t,r,n,s,i,o,l,d,u){var c=gc(),m=c.invert,f=c.domain,h=u(".%L"),g=u(":%S"),x=u("%I:%M"),b=u("%I %p"),y=u("%a %d"),j=u("%b %d"),w=u("%B"),S=u("%Y");function v(N){return(d(N)<N?h:l(N)<N?g:o(N)<N?x:i(N)<N?b:n(N)<N?s(N)<N?y:j:r(N)<N?w:S)(N)}return c.invert=function(N){return new Date(m(N))},c.domain=function(N){return arguments.length?f(Array.from(N,f_)):f().map(m_)},c.ticks=function(N){var _=f();return e(_[0],_[_.length-1],N??10)},c.tickFormat=function(N,_){return _==null?v:u(_)},c.nice=function(N){var _=f();return(!N||typeof N.range!="function")&&(N=t(_[0],_[_.length-1],N??10)),N?f(cg(_,N)):c},c.copy=function(){return wa(c,Cc(e,t,r,n,s,i,o,l,d,u))},c}function h_(){return Ct.apply(Cc(c2,d2,ir,kc,Pi,Na,Pc,Sc,Kr,wg).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function p_(){return Ct.apply(Cc(o2,l2,or,Ec,Ai,_i,Ac,_c,Kr,Ng).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ki(){var e=0,t=1,r,n,s,i,o=Je,l=!1,d;function u(m){return m==null||isNaN(m=+m)?d:o(s===0?.5:(m=(i(m)-r)*s,l?Math.max(0,Math.min(1,m)):m))}u.domain=function(m){return arguments.length?([e,t]=m,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(m){return arguments.length?(l=!!m,u):l},u.interpolator=function(m){return arguments.length?(o=m,u):o};function c(m){return function(f){var h,g;return arguments.length?([h,g]=f,o=m(h,g),u):[o(0),o(1)]}}return u.range=c(Mn),u.rangeRound=c(pc),u.unknown=function(m){return arguments.length?(d=m,u):d},function(m){return i=m,r=m(e),n=m(t),s=r===n?0:1/(n-r),u}}function Er(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Sg(){var e=kr(ki()(Je));return e.copy=function(){return Er(e,Sg())},ur.apply(e,arguments)}function _g(){var e=yc(ki()).domain([1,10]);return e.copy=function(){return Er(e,_g()).base(e.base())},ur.apply(e,arguments)}function Pg(){var e=bc(ki());return e.copy=function(){return Er(e,Pg()).constant(e.constant())},ur.apply(e,arguments)}function Oc(){var e=jc(ki());return e.copy=function(){return Er(e,Oc()).exponent(e.exponent())},ur.apply(e,arguments)}function g_(){return Oc.apply(null,arguments).exponent(.5)}function Ag(){var e=[],t=Je;function r(n){if(n!=null&&!isNaN(n=+n))return t((ba(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(wr),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>tS(e,i/n))},r.copy=function(){return Ag(t).domain(e)},ur.apply(r,arguments)}function Ei(){var e=0,t=.5,r=1,n=1,s,i,o,l,d,u=Je,c,m=!1,f;function h(x){return isNaN(x=+x)?f:(x=.5+((x=+c(x))-i)*(n*x<n*i?l:d),u(m?Math.max(0,Math.min(1,x)):x))}h.domain=function(x){return arguments.length?([e,t,r]=x,s=c(e=+e),i=c(t=+t),o=c(r=+r),l=s===i?0:.5/(i-s),d=i===o?0:.5/(o-i),n=i<s?-1:1,h):[e,t,r]},h.clamp=function(x){return arguments.length?(m=!!x,h):m},h.interpolator=function(x){return arguments.length?(u=x,h):u};function g(x){return function(b){var y,j,w;return arguments.length?([y,j,w]=b,u=kS(x,[y,j,w]),h):[u(0),u(.5),u(1)]}}return h.range=g(Mn),h.rangeRound=g(pc),h.unknown=function(x){return arguments.length?(f=x,h):f},function(x){return c=x,s=x(e),i=x(t),o=x(r),l=s===i?0:.5/(i-s),d=i===o?0:.5/(o-i),n=i<s?-1:1,h}}function kg(){var e=kr(Ei()(Je));return e.copy=function(){return Er(e,kg())},ur.apply(e,arguments)}function Eg(){var e=yc(Ei()).domain([.1,1,10]);return e.copy=function(){return Er(e,Eg()).base(e.base())},ur.apply(e,arguments)}function Cg(){var e=bc(Ei());return e.copy=function(){return Er(e,Cg()).constant(e.constant())},ur.apply(e,arguments)}function Tc(){var e=jc(Ei());return e.copy=function(){return Er(e,Tc()).exponent(e.exponent())},ur.apply(e,arguments)}function x_(){return Tc.apply(null,arguments).exponent(.5)}const ra=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:mc,scaleDiverging:kg,scaleDivergingLog:Eg,scaleDivergingPow:Tc,scaleDivergingSqrt:x_,scaleDivergingSymlog:Cg,scaleIdentity:lg,scaleImplicit:il,scaleLinear:og,scaleLog:dg,scaleOrdinal:uc,scalePoint:aS,scalePow:wc,scaleQuantile:fg,scaleQuantize:hg,scaleRadial:mg,scaleSequential:Sg,scaleSequentialLog:_g,scaleSequentialPow:Oc,scaleSequentialQuantile:Ag,scaleSequentialSqrt:g_,scaleSequentialSymlog:Pg,scaleSqrt:ZS,scaleSymlog:ug,scaleThreshold:pg,scaleTime:h_,scaleUtc:p_,tickFormat:ig},Symbol.toStringTag,{value:"Module"}));var Cr=e=>e.chartData,v_=M([Cr],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Ci=(e,t,r,n)=>n?v_(e):Cr(e);function Cn(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(xt(t)&&xt(r))return!0}return!1}function vm(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function y_(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,i;if(xt(r))s=r;else if(typeof r=="function")return;if(xt(n))i=n;else if(typeof n=="function")return;var o=[s,i];if(Cn(o))return o}}function b_(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Cn(n))return vm(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,o,l;if(s==="auto")t!=null&&(o=Math.min(...t));else if(q(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&gu.test(s)){var d=gu.exec(s);if(d==null||t==null)o=void 0;else{var u=+d[1];o=t[0]-u}}else o=t==null?void 0:t[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(q(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&xu.test(i)){var c=xu.exec(i);if(c==null||t==null)l=void 0;else{var m=+c[1];l=t[1]+m}}else l=t==null?void 0:t[1];var f=[o,l];if(Cn(f))return t==null?f:vm(f,t,r)}}}var Dn=1e9,j_={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Dc,je=!0,At="[DecimalError] ",Zr=At+"Invalid argument: ",Mc=At+"Exponent out of range: ",In=Math.floor,Lr=Math.pow,w_=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ut,Le=1e7,ye=7,Og=9007199254740991,Ts=In(Og/ye),U={};U.absoluteValue=U.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};U.comparedTo=U.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};U.decimalPlaces=U.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*ye;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};U.dividedBy=U.div=function(e){return nr(this,new this.constructor(e))};U.dividedToIntegerBy=U.idiv=function(e){var t=this,r=t.constructor;return pe(nr(t,new r(e),0,1),r.precision)};U.equals=U.eq=function(e){return!this.cmp(e)};U.exponent=function(){return Ae(this)};U.greaterThan=U.gt=function(e){return this.cmp(e)>0};U.greaterThanOrEqualTo=U.gte=function(e){return this.cmp(e)>=0};U.isInteger=U.isint=function(){return this.e>this.d.length-2};U.isNegative=U.isneg=function(){return this.s<0};U.isPositive=U.ispos=function(){return this.s>0};U.isZero=function(){return this.s===0};U.lessThan=U.lt=function(e){return this.cmp(e)<0};U.lessThanOrEqualTo=U.lte=function(e){return this.cmp(e)<1};U.logarithm=U.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(ut))throw Error(At+"NaN");if(r.s<1)throw Error(At+(r.s?"NaN":"-Infinity"));return r.eq(ut)?new n(0):(je=!1,t=nr(ga(r,i),ga(e,i),i),je=!0,pe(t,s))};U.minus=U.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Dg(t,e):Tg(t,(e.s=-e.s,e))};U.modulo=U.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(At+"NaN");return r.s?(je=!1,t=nr(r,e,0,1).times(e),je=!0,r.minus(t)):pe(new n(r),s)};U.naturalExponential=U.exp=function(){return Mg(this)};U.naturalLogarithm=U.ln=function(){return ga(this)};U.negated=U.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};U.plus=U.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Tg(t,e):Dg(t,(e.s=-e.s,e))};U.precision=U.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Zr+e);if(t=Ae(s)+1,n=s.d.length-1,r=n*ye+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};U.squareRoot=U.sqrt=function(){var e,t,r,n,s,i,o,l=this,d=l.constructor;if(l.s<1){if(!l.s)return new d(0);throw Error(At+"NaN")}for(e=Ae(l),je=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Ut(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=In((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new d(t)):n=new d(s.toString()),r=d.precision,s=o=r+3;;)if(i=n,n=i.plus(nr(l,i,o+2)).times(.5),Ut(i.d).slice(0,o)===(t=Ut(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(pe(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return je=!0,pe(n,r)};U.times=U.mul=function(e){var t,r,n,s,i,o,l,d,u,c=this,m=c.constructor,f=c.d,h=(e=new m(e)).d;if(!c.s||!e.s)return new m(0);for(e.s*=c.s,r=c.e+e.e,d=f.length,u=h.length,d<u&&(i=f,f=h,h=i,o=d,d=u,u=o),i=[],o=d+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,s=d+n;s>n;)l=i[s]+h[n]*f[s-n-1]+t,i[s--]=l%Le|0,t=l/Le|0;i[s]=(i[s]+t)%Le|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,je?pe(e,m.precision):e};U.toDecimalPlaces=U.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(qt(e,0,Dn),t===void 0?t=n.rounding:qt(t,0,8),pe(r,e+Ae(r)+1,t))};U.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=rn(n,!0):(qt(e,0,Dn),t===void 0?t=s.rounding:qt(t,0,8),n=pe(new s(n),e+1,t),r=rn(n,!0,e+1)),r};U.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?rn(s):(qt(e,0,Dn),t===void 0?t=i.rounding:qt(t,0,8),n=pe(new i(s),e+Ae(s)+1,t),r=rn(n.abs(),!1,e+Ae(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};U.toInteger=U.toint=function(){var e=this,t=e.constructor;return pe(new t(e),Ae(e)+1,t.rounding)};U.toNumber=function(){return+this};U.toPower=U.pow=function(e){var t,r,n,s,i,o,l=this,d=l.constructor,u=12,c=+(e=new d(e));if(!e.s)return new d(ut);if(l=new d(l),!l.s){if(e.s<1)throw Error(At+"Infinity");return l}if(l.eq(ut))return l;if(n=d.precision,e.eq(ut))return pe(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=c<0?-c:c)<=Og){for(s=new d(ut),t=Math.ceil(n/ye+4),je=!1;r%2&&(s=s.times(l),bm(s.d,t)),r=In(r/2),r!==0;)l=l.times(l),bm(l.d,t);return je=!0,e.s<0?new d(ut).div(s):pe(s,n)}}else if(i<0)throw Error(At+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,je=!1,s=e.times(ga(l,n+u)),je=!0,s=Mg(s),s.s=i,s};U.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=Ae(s),n=rn(s,r<=i.toExpNeg||r>=i.toExpPos)):(qt(e,1,Dn),t===void 0?t=i.rounding:qt(t,0,8),s=pe(new i(s),e,t),r=Ae(s),n=rn(s,e<=r||r<=i.toExpNeg,e)),n};U.toSignificantDigits=U.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(qt(e,1,Dn),t===void 0?t=n.rounding:qt(t,0,8)),pe(new n(r),e,t)};U.toString=U.valueOf=U.val=U.toJSON=U[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ae(e),r=e.constructor;return rn(e,t<=r.toExpNeg||t>=r.toExpPos)};function Tg(e,t){var r,n,s,i,o,l,d,u,c=e.constructor,m=c.precision;if(!e.s||!t.s)return t.s||(t=new c(e)),je?pe(t,m):t;if(d=e.d,u=t.d,o=e.e,s=t.e,d=d.slice(),i=o-s,i){for(i<0?(n=d,i=-i,l=u.length):(n=u,s=o,l=d.length),o=Math.ceil(m/ye),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=d.length,i=u.length,l-i<0&&(i=l,n=u,u=d,d=n),r=0;i;)r=(d[--i]=d[i]+u[i]+r)/Le|0,d[i]%=Le;for(r&&(d.unshift(r),++s),l=d.length;d[--l]==0;)d.pop();return t.d=d,t.e=s,je?pe(t,m):t}function qt(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Zr+e)}function Ut(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=ye-n.length,r&&(i+=yr(r)),i+=n;o=e[t],n=o+"",r=ye-n.length,r&&(i+=yr(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var nr=function(){function e(n,s){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+o,n[l]=i%Le|0,o=i/Le|0;return o&&n.unshift(o),n}function t(n,s,i,o){var l,d;if(i!=o)d=i>o?1:-1;else for(l=d=0;l<i;l++)if(n[l]!=s[l]){d=n[l]>s[l]?1:-1;break}return d}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*Le+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var l,d,u,c,m,f,h,g,x,b,y,j,w,S,v,N,_,A,k=n.constructor,C=n.s==s.s?1:-1,T=n.d,O=s.d;if(!n.s)return new k(n);if(!s.s)throw Error(At+"Division by zero");for(d=n.e-s.e,_=O.length,v=T.length,h=new k(C),g=h.d=[],u=0;O[u]==(T[u]||0);)++u;if(O[u]>(T[u]||0)&&--d,i==null?j=i=k.precision:o?j=i+(Ae(n)-Ae(s))+1:j=i,j<0)return new k(0);if(j=j/ye+2|0,u=0,_==1)for(c=0,O=O[0],j++;(u<v||c)&&j--;u++)w=c*Le+(T[u]||0),g[u]=w/O|0,c=w%O|0;else{for(c=Le/(O[0]+1)|0,c>1&&(O=e(O,c),T=e(T,c),_=O.length,v=T.length),S=_,x=T.slice(0,_),b=x.length;b<_;)x[b++]=0;A=O.slice(),A.unshift(0),N=O[0],O[1]>=Le/2&&++N;do c=0,l=t(O,x,_,b),l<0?(y=x[0],_!=b&&(y=y*Le+(x[1]||0)),c=y/N|0,c>1?(c>=Le&&(c=Le-1),m=e(O,c),f=m.length,b=x.length,l=t(m,x,f,b),l==1&&(c--,r(m,_<f?A:O,f))):(c==0&&(l=c=1),m=O.slice()),f=m.length,f<b&&m.unshift(0),r(x,m,b),l==-1&&(b=x.length,l=t(O,x,_,b),l<1&&(c++,r(x,_<b?A:O,b))),b=x.length):l===0&&(c++,x=[0]),g[u++]=c,l&&x[0]?x[b++]=T[S]||0:(x=[T[S]],b=1);while((S++<v||x[0]!==void 0)&&j--)}return g[0]||g.shift(),h.e=d,pe(h,o?i+Ae(h)+1:i)}}();function Mg(e,t){var r,n,s,i,o,l,d=0,u=0,c=e.constructor,m=c.precision;if(Ae(e)>16)throw Error(Mc+Ae(e));if(!e.s)return new c(ut);for(je=!1,l=m,o=new c(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Lr(2,u))/Math.LN10*2+5|0,l+=n,r=s=i=new c(ut),c.precision=l;;){if(s=pe(s.times(e),l),r=r.times(++d),o=i.plus(nr(s,r,l)),Ut(o.d).slice(0,l)===Ut(i.d).slice(0,l)){for(;u--;)i=pe(i.times(i),l);return c.precision=m,t==null?(je=!0,pe(i,m)):i}i=o}}function Ae(e){for(var t=e.e*ye,r=e.d[0];r>=10;r/=10)t++;return t}function ho(e,t,r){if(t>e.LN10.sd())throw je=!0,r&&(e.precision=r),Error(At+"LN10 precision limit exceeded");return pe(new e(e.LN10),t)}function yr(e){for(var t="";e--;)t+="0";return t}function ga(e,t){var r,n,s,i,o,l,d,u,c,m=1,f=10,h=e,g=h.d,x=h.constructor,b=x.precision;if(h.s<1)throw Error(At+(h.s?"NaN":"-Infinity"));if(h.eq(ut))return new x(0);if(t==null?(je=!1,u=b):u=t,h.eq(10))return t==null&&(je=!0),ho(x,u);if(u+=f,x.precision=u,r=Ut(g),n=r.charAt(0),i=Ae(h),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(e),r=Ut(h.d),n=r.charAt(0),m++;i=Ae(h),n>1?(h=new x("0."+r),i++):h=new x(n+"."+r.slice(1))}else return d=ho(x,u+2,b).times(i+""),h=ga(new x(n+"."+r.slice(1)),u-f).plus(d),x.precision=b,t==null?(je=!0,pe(h,b)):h;for(l=o=h=nr(h.minus(ut),h.plus(ut),u),c=pe(h.times(h),u),s=3;;){if(o=pe(o.times(c),u),d=l.plus(nr(o,new x(s),u)),Ut(d.d).slice(0,u)===Ut(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(ho(x,u+2,b).times(i+""))),l=nr(l,new x(m),u),x.precision=b,t==null?(je=!0,pe(l,b)):l;l=d,s+=2}}function ym(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=In(r/ye),e.d=[],n=(r+1)%ye,r<0&&(n+=ye),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=ye;n<s;)e.d.push(+t.slice(n,n+=ye));t=t.slice(n),n=ye-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),je&&(e.e>Ts||e.e<-Ts))throw Error(Mc+r)}else e.s=0,e.e=0,e.d=[0];return e}function pe(e,t,r){var n,s,i,o,l,d,u,c,m=e.d;for(o=1,i=m[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=ye,s=t,u=m[c=0];else{if(c=Math.ceil((n+1)/ye),i=m.length,c>=i)return e;for(u=i=m[c],o=1;i>=10;i/=10)o++;n%=ye,s=n-ye+o}if(r!==void 0&&(i=Lr(10,o-s-1),l=u/i%10|0,d=t<0||m[c+1]!==void 0||u%i,d=r<4?(l||d)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||d||r==6&&(n>0?s>0?u/Lr(10,o-s):0:m[c-1])%10&1||r==(e.s<0?8:7))),t<1||!m[0])return d?(i=Ae(e),m.length=1,t=t-i-1,m[0]=Lr(10,(ye-t%ye)%ye),e.e=In(-t/ye)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(n==0?(m.length=c,i=1,c--):(m.length=c+1,i=Lr(10,ye-n),m[c]=s>0?(u/Lr(10,o-s)%Lr(10,s)|0)*i:0),d)for(;;)if(c==0){(m[0]+=i)==Le&&(m[0]=1,++e.e);break}else{if(m[c]+=i,m[c]!=Le)break;m[c--]=0,i=1}for(n=m.length;m[--n]===0;)m.pop();if(je&&(e.e>Ts||e.e<-Ts))throw Error(Mc+Ae(e));return e}function Dg(e,t){var r,n,s,i,o,l,d,u,c,m,f=e.constructor,h=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),je?pe(t,h):t;if(d=e.d,m=t.d,n=t.e,u=e.e,d=d.slice(),o=u-n,o){for(c=o<0,c?(r=d,o=-o,l=m.length):(r=m,n=u,l=d.length),s=Math.max(Math.ceil(h/ye),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=d.length,l=m.length,c=s<l,c&&(l=s),s=0;s<l;s++)if(d[s]!=m[s]){c=d[s]<m[s];break}o=0}for(c&&(r=d,d=m,m=r,t.s=-t.s),l=d.length,s=m.length-l;s>0;--s)d[l++]=0;for(s=m.length;s>o;){if(d[--s]<m[s]){for(i=s;i&&d[--i]===0;)d[i]=Le-1;--d[i],d[s]+=Le}d[s]-=m[s]}for(;d[--l]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=n,je?pe(t,h):t):new f(0)}function rn(e,t,r){var n,s=Ae(e),i=Ut(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+yr(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+yr(-s-1)+i,r&&(n=r-o)>0&&(i+=yr(n))):s>=o?(i+=yr(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+yr(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=yr(n))),e.s<0?"-"+i:i}function bm(e,t){if(e.length>t)return e.length=t,!0}function Ig(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Zr+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return ym(o,i.toString())}else if(typeof i!="string")throw Error(Zr+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,w_.test(i))ym(o,i);else throw Error(Zr+i)}if(s.prototype=U,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=Ig,s.config=s.set=N_,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function N_(e){if(!e||typeof e!="object")throw Error(At+"Object expected");var t,r,n,s=["precision",1,Dn,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(In(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Zr+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Zr+r+": "+n);return this}var Dc=Ig(j_);ut=new Dc(1);const me=Dc;var S_=e=>e,Rg={},$g=e=>e===Rg,jm=e=>function t(){return arguments.length===0||arguments.length===1&&$g(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Lg=(e,t)=>e===1?t:jm(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=n.filter(o=>o!==Rg).length;return i>=e?t(...n):Lg(e-i,jm(function(){for(var o=arguments.length,l=new Array(o),d=0;d<o;d++)l[d]=arguments[d];var u=n.map(c=>$g(c)?l.shift():c);return t(...u,...l)}))}),Oi=e=>Lg(e.length,e),dl=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},__=Oi((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),P_=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return S_;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce((l,d)=>d(l),i(...arguments))}},ul=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),Fg=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t&&s.every((o,l)=>{var d;return o===((d=t)===null||d===void 0?void 0:d[l])})||(t=s,r=e(...s)),r}};function Bg(e){var t;return e===0?t=1:t=Math.floor(new me(e).abs().log(10).toNumber())+1,t}function zg(e,t,r){for(var n=new me(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}Oi((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});Oi((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});Oi((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var Ug=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},Wg=(e,t,r)=>{if(e.lte(0))return new me(0);var n=Bg(e.toNumber()),s=new me(10).pow(n),i=e.div(s),o=n!==1?.05:.1,l=new me(Math.ceil(i.div(o).toNumber())).add(r).mul(o),d=l.mul(s);return t?new me(d.toNumber()):new me(Math.ceil(d.toNumber()))},A_=(e,t,r)=>{var n=new me(1),s=new me(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new me(10).pow(Bg(e)-1),s=new me(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new me(Math.floor(e)))}else e===0?s=new me(Math.floor((t-1)/2)):r||(s=new me(Math.floor(e)));var o=Math.floor((t-1)/2),l=P_(__(d=>s.add(new me(d-o).mul(n)).toNumber()),dl);return l(0,t)},Kg=function(t,r,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new me(0),tickMin:new me(0),tickMax:new me(0)};var o=Wg(new me(r).sub(t).div(n-1),s,i),l;t<=0&&r>=0?l=new me(0):(l=new me(t).add(r).div(2),l=l.sub(new me(l).mod(o)));var d=Math.ceil(l.sub(t).div(o).toNumber()),u=Math.ceil(new me(r).sub(l).div(o).toNumber()),c=d+u+1;return c>n?Kg(t,r,n,s,i+1):(c<n&&(u=r>0?u+(n-c):u,d=r>0?d:d+(n-c)),{step:o,tickMin:l.sub(new me(d).mul(o)),tickMax:l.add(new me(u).mul(o))})};function k_(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[o,l]=Ug([t,r]);if(o===-1/0||l===1/0){var d=l===1/0?[o,...dl(0,n-1).map(()=>1/0)]:[...dl(0,n-1).map(()=>-1/0),l];return t>r?ul(d):d}if(o===l)return A_(o,n,s);var{step:u,tickMin:c,tickMax:m}=Kg(o,l,i,s,0),f=zg(c,m.add(new me(.1).mul(u)),u);return t>r?ul(f):f}function E_(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=Ug([r,n]);if(i===-1/0||o===1/0)return[r,n];if(i===o)return[i];var l=Math.max(t,2),d=Wg(new me(o).sub(i).div(l-1),s,0),u=[...zg(new me(i),new me(o),d),o];return s===!1&&(u=u.map(c=>Math.round(c))),r>n?ul(u):u}var C_=Fg(k_),O_=Fg(E_),qg=e=>e.rootProps.maxBarSize,T_=e=>e.rootProps.barGap,Gg=e=>e.rootProps.barCategoryGap,M_=e=>e.rootProps.barSize,Ti=e=>e.rootProps.stackOffset,Ic=e=>e.options.chartName,Rc=e=>e.rootProps.syncId,Hg=e=>e.rootProps.syncMethod,$c=e=>e.options.eventEmitter,Xt={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ct={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Mi=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},D_={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Xt.angleAxisId,includeHidden:!1,name:void 0,reversed:Xt.reversed,scale:Xt.scale,tick:Xt.tick,tickCount:void 0,ticks:void 0,type:Xt.type,unit:void 0},I_={allowDataOverflow:ct.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ct.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ct.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ct.scale,tick:ct.tick,tickCount:ct.tickCount,ticks:void 0,type:ct.type,unit:void 0},R_={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Xt.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Xt.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Xt.scale,tick:Xt.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},$_={allowDataOverflow:ct.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ct.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ct.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ct.scale,tick:ct.tick,tickCount:ct.tickCount,ticks:void 0,type:"category",unit:void 0},Lc=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?R_:D_,Fc=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?$_:I_,Di=e=>e.polarOptions,Bc=M([cr,dr,ze],Zw),Vg=M([Di,Bc],(e,t)=>{if(e!=null)return Lt(e.innerRadius,t,0)}),Yg=M([Di,Bc],(e,t)=>{if(e!=null)return Lt(e.outerRadius,t,t*.8)}),L_=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},Xg=M([Di],L_);M([Lc,Xg],Mi);var Zg=M([Bc,Vg,Yg],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});M([Fc,Zg],Mi);var Jg=M([le,Di,Vg,Yg,cr,dr],(e,t,r,n,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:l,startAngle:d,endAngle:u}=t;return{cx:Lt(o,s,s/2),cy:Lt(l,i,i/2),innerRadius:r,outerRadius:n,startAngle:d,endAngle:u,clockWise:!1}}}),ke=(e,t)=>t,Ii=(e,t,r)=>r;function zc(e){return e==null?void 0:e.id}var De=e=>{var t=le(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Rn=e=>e.tooltip.settings.axisId,Ie=e=>{var t=De(e),r=Rn(e);return Sa(e,t,r)};function Qg(e,t,r){var{chartData:n=[]}=t,s=r==null?void 0:r.dataKey,i=new Map;return e.forEach(o=>{var l,d=(l=o.data)!==null&&l!==void 0?l:n;if(!(d==null||d.length===0)){var u=zc(o);d.forEach((c,m)=>{var f=s==null?m:String(Fe(c,s,null)),h=Fe(c,o.dataKey,0),g;i.has(f)?g=i.get(f):g={},Object.assign(g,{[u]:h}),i.set(f,g)})}}),Array.from(i.values())}function Ri(e){return e.stackId!=null&&e.dataKey!=null}function wm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ms(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wm(Object(r),!0).forEach(function(n){F_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function F_(e,t,r){return(t=B_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B_(e){var t=z_(e,"string");return typeof t=="symbol"?t:t+""}function z_(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ml=[0,"auto"],ot={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},mr=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??ot},lt={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:ml,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:bi},Or=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??lt},U_={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Uc=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??U_},it=(e,t,r)=>{switch(t){case"xAxis":return mr(e,r);case"yAxis":return Or(e,r);case"zAxis":return Uc(e,r);case"angleAxis":return Lc(e,r);case"radiusAxis":return Fc(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},W_=(e,t,r)=>{switch(t){case"xAxis":return mr(e,r);case"yAxis":return Or(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Sa=(e,t,r)=>{switch(t){case"xAxis":return mr(e,r);case"yAxis":return Or(e,r);case"angleAxis":return Lc(e,r);case"radiusAxis":return Fc(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},ex=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function tx(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var $i=e=>e.graphicalItems.cartesianItems,K_=M([ke,Ii],tx),rx=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),_a=M([$i,it,K_],rx),nx=M([_a],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Ri)),ax=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),sx=M([_a],ax),ix=e=>e.map(t=>t.data).filter(Boolean).flat(1),q_=M([_a],ix),ox=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},Wc=M([q_,Ci],ox),lx=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Fe(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Fe(s,n)}))):e.map(n=>({value:n})),Li=M([Wc,it,_a],lx);function cx(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function dn(e){return e.filter(t=>Kt(t)||t instanceof Date).map(Number).filter(t=>ht(t)===!1)}function G_(e,t,r){return!r||typeof t!="number"||ht(t)?[]:r.length?dn(r.flatMap(n=>{var s=Fe(e,n.dataKey),i,o;if(Array.isArray(s)?[i,o]=s:i=o=s,!(!xt(i)||!xt(o)))return[t-i,t+o]})):[]}var H_=M([nx,Ci,Ie],Qg),dx=(e,t,r)=>{var n={},s=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),n);return Object.fromEntries(Object.entries(s).map(i=>{var[o,l]=i,d=l.map(zc);return[o,{stackedData:fN(e,d,r),graphicalItems:l}]}))},fl=M([H_,nx,Ti],dx),ux=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:s}=t;if(r!=="zAxis"){var i=vN(e,n,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},V_=M([fl,Cr,ke],ux),mx=(e,t,r,n,s)=>r.length>0?e.flatMap(i=>r.flatMap(o=>{var l,d,u=(l=n[o.id])===null||l===void 0?void 0:l.filter(m=>cx(s,m)),c=Fe(i,(d=t.dataKey)!==null&&d!==void 0?d:o.dataKey);return{value:c,errorDomain:G_(i,c,u)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(i=>({value:Fe(i,t.dataKey),errorDomain:[]})):e.map(i=>({value:i,errorDomain:[]})),Fi=e=>e.errorBars,fx=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>cx(r,n));M([sx,Fi,ke],fx);var Y_=M([Wc,it,sx,Fi,ke],mx);function X_(e){var{value:t}=e;if(Kt(t)||t instanceof Date)return t}var Nm=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=dn(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Z_=(e,t,r)=>{var n=e.map(X_).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&rh(n))?Xp(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},Kc=e=>{var t;if(e==null||!("domain"in e))return ml;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=dn(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:ml},Ds=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var i=s.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},hx=e=>e.referenceElements.dots,$n=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),J_=M([hx,ke,Ii],$n),px=e=>e.referenceElements.areas,Q_=M([px,ke,Ii],$n),gx=e=>e.referenceElements.lines,eP=M([gx,ke,Ii],$n),xx=(e,t)=>{var r=dn(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},tP=M(J_,ke,xx),vx=(e,t)=>{var r=dn(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},rP=M([Q_,ke],vx),yx=(e,t)=>{var r=dn(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},nP=M(eP,ke,yx),aP=M(tP,nP,rP,(e,t,r)=>Ds(e,r,t)),sP=M([it],Kc),bx=(e,t,r,n,s,i,o)=>{var l=y_(t,e.allowDataOverflow);if(l!=null)return l;var d=i==="vertical"&&o==="xAxis"||i==="horizontal"&&o==="yAxis",u=d?Ds(r,s,Nm(n)):Ds(s,Nm(n));return b_(t,u,e.allowDataOverflow)},iP=M([it,sP,V_,Y_,aP,le,ke],bx),oP=[0,1],jx=(e,t,r,n,s,i,o)=>{if(!((e==null||r==null||r.length===0)&&o===void 0)){var{dataKey:l,type:d}=e,u=Ar(t,i);return u&&l==null?Xp(0,r.length):d==="category"?Z_(n,e,u):s==="expand"?oP:o}},qc=M([it,le,Wc,Li,Ti,ke,iP],jx),wx=(e,t,r,n,s)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(va(i));return l in ra?l:"point"}}},Pa=M([it,le,ex,Ic,ke],wx);function lP(e){if(e!=null){if(e in ra)return ra[e]();var t="scale".concat(va(e));if(t in ra)return ra[t]()}}function Gc(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=lP(t);if(s!=null){var i=s.domain(r).range(n);return lN(i),i}}}var Nx=(e,t,r)=>{var n=Kc(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Cn(e))return C_(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Cn(e))return O_(e,t.tickCount,t.allowDecimals)}},Hc=M([qc,Sa,Pa],Nx),Sx=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Cn(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],o=t[1],l=r[r.length-1];return[Math.min(s,i),Math.max(o,l)]}return t},cP=M([it,qc,Hc,ke],Sx),dP=M(Li,it,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(dn(e.map(l=>l.value))).sort((l,d)=>l-d);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var i=0;i<n.length-1;i++){var o=n[i+1]-n[i];r=Math.min(r,o)}return r/s}}),_x=M(dP,le,Gg,ze,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!xt(e))return 0;var i=t==="vertical"?n.height:n.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var o=Lt(r,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),uP=(e,t)=>{var r=mr(e,t);return r==null||typeof r.padding!="string"?0:_x(e,"xAxis",t,r.padding)},mP=(e,t)=>{var r=Or(e,t);return r==null||typeof r.padding!="string"?0:_x(e,"yAxis",t,r.padding)},fP=M(mr,uP,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),hP=M(Or,mP,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),pP=M([ze,fP,wi,ji,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:i}=n;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),gP=M([ze,le,hP,wi,ji,(e,t,r)=>r],(e,t,r,n,s,i)=>{var{padding:o}=s;return i?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Aa=(e,t,r,n)=>{var s;switch(t){case"xAxis":return pP(e,r,n);case"yAxis":return gP(e,r,n);case"zAxis":return(s=Uc(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return Xg(e);case"radiusAxis":return Zg(e,r);default:return}},Px=M([it,Aa],Mi),Ln=M([it,Pa,cP,Px],Gc);M([_a,Fi,ke],fx);function Ax(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Bi=(e,t)=>t,zi=(e,t,r)=>r,xP=M(ic,Bi,zi,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Ax)),vP=M(oc,Bi,zi,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Ax)),kx=(e,t)=>({width:e.width,height:t.height}),yP=(e,t)=>{var r=typeof t.width=="number"?t.width:bi;return{width:r,height:e.height}},Ex=M(ze,mr,kx),bP=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},jP=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},wP=M(dr,ze,xP,Bi,zi,(e,t,r,n,s)=>{var i={},o;return r.forEach(l=>{var d=kx(t,l);o==null&&(o=bP(t,n,e));var u=n==="top"&&!s||n==="bottom"&&s;i[l.id]=o-Number(u)*d.height,o+=(u?-1:1)*d.height}),i}),NP=M(cr,ze,vP,Bi,zi,(e,t,r,n,s)=>{var i={},o;return r.forEach(l=>{var d=yP(t,l);o==null&&(o=jP(t,n,e));var u=n==="left"&&!s||n==="right"&&s;i[l.id]=o-Number(u)*d.width,o+=(u?-1:1)*d.width}),i}),SP=(e,t)=>{var r=ze(e),n=mr(e,t);if(n!=null){var s=wP(e,n.orientation,n.mirror),i=s[t];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},_P=(e,t)=>{var r=ze(e),n=Or(e,t);if(n!=null){var s=NP(e,n.orientation,n.mirror),i=s[t];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},Cx=M(ze,Or,(e,t)=>{var r=typeof t.width=="number"?t.width:bi;return{width:r,height:e.height}}),Sm=(e,t,r)=>{switch(t){case"xAxis":return Ex(e,r).width;case"yAxis":return Cx(e,r).height;default:return}},Ox=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:o}=r,l=Ar(e,n),d=t.map(u=>u.value);if(o&&l&&i==="category"&&s&&rh(d))return d}},Vc=M([le,Li,it,ke],Ox),Tx=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,o=Ar(e,n);if(o&&(s==="number"||i!=="auto"))return t.map(l=>l.value)}},Yc=M([le,Li,Sa,ke],Tx),_m=M([le,W_,Pa,Ln,Vc,Yc,Aa,Hc,ke],(e,t,r,n,s,i,o,l,d)=>{if(t==null)return null;var u=Ar(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:i,duplicateDomain:s,isCategorical:u,niceTicks:l,range:o,realScaleType:r,scale:n}}),PP=(e,t,r,n,s,i,o,l,d)=>{if(!(t==null||n==null)){var u=Ar(e,d),{type:c,ticks:m,tickCount:f}=t,h=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=c==="category"&&n.bandwidth?n.bandwidth()/h:0;g=d==="angleAxis"&&i!=null&&i.length>=2?rt(i[0]-i[1])*2*g:g;var x=m||s;if(x){var b=x.map((y,j)=>{var w=o?o.indexOf(y):y;return{index:j,coordinate:n(w)+g,value:y,offset:g}});return b.filter(y=>!ht(y.coordinate))}return u&&l?l.map((y,j)=>({coordinate:n(y)+g,value:y,index:j,offset:g})):n.ticks?n.ticks(f).map(y=>({coordinate:n(y)+g,value:y,offset:g})):n.domain().map((y,j)=>({coordinate:n(y)+g,value:o?o[y]:y,index:j,offset:g}))}},Mx=M([le,Sa,Pa,Ln,Hc,Aa,Vc,Yc,ke],PP),AP=(e,t,r,n,s,i,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var l=Ar(e,o),{tickCount:d}=t,u=0;return u=o==="angleAxis"&&(n==null?void 0:n.length)>=2?rt(n[0]-n[1])*2*u:u,l&&i?i.map((c,m)=>({coordinate:r(c)+u,value:c,index:m,offset:u})):r.ticks?r.ticks(d).map(c=>({coordinate:r(c)+u,value:c,offset:u})):r.domain().map((c,m)=>({coordinate:r(c)+u,value:s?s[c]:c,index:m,offset:u}))}},_r=M([le,Sa,Ln,Aa,Vc,Yc,ke],AP),Pr=M(it,Ln,(e,t)=>{if(!(e==null||t==null))return Ms(Ms({},e),{},{scale:t})}),kP=M([it,Pa,qc,Px],Gc);M((e,t,r)=>Uc(e,r),kP,(e,t)=>{if(!(e==null||t==null))return Ms(Ms({},e),{},{scale:t})});var EP=M([le,ic,oc],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Dx=e=>e.options.defaultTooltipEventType,Ix=e=>e.options.validateTooltipEventTypes;function Rx(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function Xc(e,t){var r=Dx(e),n=Ix(e);return Rx(t,r,n)}function CP(e){return Y(t=>Xc(t,e))}var $x=(e,t)=>{var r,n=Number(t);if(!(ht(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},OP=e=>e.tooltip.settings,br={active:!1,index:null,dataKey:void 0,coordinate:void 0},TP={itemInteraction:{click:br,hover:br},axisInteraction:{click:br,hover:br},keyboardInteraction:br,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Lx=vt({name:"tooltip",initialState:TP,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=rr(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:MP,removeTooltipEntrySettings:DP,setTooltipSettingsState:IP,setActiveMouseOverItemIndex:Fx,mouseLeaveItem:RP,mouseLeaveChart:Bx,setActiveClickItemIndex:$P,setMouseOverAxisIndex:zx,setMouseClickAxisIndex:LP,setSyncInteraction:hl,setKeyboardInteraction:pl}=Lx.actions,FP=Lx.reducer;function Pm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ha(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pm(Object(r),!0).forEach(function(n){BP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BP(e,t,r){return(t=zP(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zP(e){var t=UP(e,"string");return typeof t=="symbol"?t:t+""}function UP(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WP(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function KP(e){return e.index!=null}var Ux=(e,t,r,n)=>{if(t==null)return br;var s=WP(e,t,r);if(s==null)return br;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(KP(s)){if(i)return Ha(Ha({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return Ha(Ha({},br),{},{coordinate:s.coordinate})},Zc=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!xt(n))return r;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(n,i)))},Wx=(e,t,r,n,s,i,o,l)=>{if(!(i==null||l==null)){var d=o[0],u=d==null?void 0:l(d.positions,i);if(u!=null)return u;var c=s==null?void 0:s[Number(i)];if(c)switch(r){case"horizontal":return{x:c.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:c.coordinate}}}},Kx=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===s})},ka=e=>e.options.tooltipPayloadSearcher,Fn=e=>e.tooltip;function Am(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function km(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Am(Object(r),!0).forEach(function(n){qP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Am(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qP(e,t,r){return(t=GP(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GP(e){var t=HP(e,"string");return typeof t=="symbol"?t:t+""}function HP(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VP(e,t){return e??t}var qx=(e,t,r,n,s,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:d,dataStartIndex:u,dataEndIndex:c}=r,m=[];return e.reduce((f,h)=>{var g,{dataDefinedOnItem:x,settings:b}=h,y=VP(x,l),j=Array.isArray(y)?wp(y,u,c):y,w=(g=b==null?void 0:b.dataKey)!==null&&g!==void 0?g:n==null?void 0:n.dataKey,S=b==null?void 0:b.nameKey,v;if(n!=null&&n.dataKey&&Array.isArray(j)&&!Array.isArray(j[0])&&o==="axis"?v=nh(j,n.dataKey,s):v=i(j,t,d,S),Array.isArray(v))v.forEach(_=>{var A=km(km({},b),{},{name:_.name,unit:_.unit,color:void 0,fill:void 0});f.push(vu({tooltipEntrySettings:A,dataKey:_.dataKey,payload:_.payload,value:Fe(_.payload,_.dataKey),name:_.name}))});else{var N;f.push(vu({tooltipEntrySettings:b,dataKey:w,payload:v,value:Fe(v,w),name:(N=Fe(v,S))!==null&&N!==void 0?N:b==null?void 0:b.name}))}return f},m)}},Jc=M([Ie,le,ex,Ic,De],wx),YP=M([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),XP=M([De,Rn],tx),Ea=M([YP,Ie,XP],rx),ZP=M([Ea],e=>e.filter(Ri)),JP=M([Ea],ix),Bn=M([JP,Cr],ox),QP=M([ZP,Cr,Ie],Qg),Qc=M([Bn,Ie,Ea],lx),eA=M([Ie],Kc),tA=M([Ea],e=>e.filter(Ri)),rA=M([QP,tA,Ti],dx),nA=M([rA,Cr,De],ux),aA=M([Ea],ax),sA=M([Bn,Ie,aA,Fi,De],mx),iA=M([hx,De,Rn],$n),oA=M([iA,De],xx),lA=M([px,De,Rn],$n),cA=M([lA,De],vx),dA=M([gx,De,Rn],$n),uA=M([dA,De],yx),mA=M([oA,uA,cA],Ds),fA=M([Ie,eA,nA,sA,mA,le,De],bx),Gx=M([Ie,le,Bn,Qc,Ti,De,fA],jx),hA=M([Gx,Ie,Jc],Nx),pA=M([Ie,Gx,hA,De],Sx),Hx=e=>{var t=De(e),r=Rn(e),n=!1;return Aa(e,t,r,n)},Vx=M([Ie,Hx],Mi),Yx=M([Ie,Jc,pA,Vx],Gc),gA=M([le,Qc,Ie,De],Ox),xA=M([le,Qc,Ie,De],Tx),vA=(e,t,r,n,s,i,o,l)=>{if(t){var{type:d}=t,u=Ar(e,l);if(n){var c=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,m=d==="category"&&n.bandwidth?n.bandwidth()/c:0;return m=l==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?rt(s[0]-s[1])*2*m:m,u&&o?o.map((f,h)=>({coordinate:n(f)+m,value:f,index:h,offset:m})):n.domain().map((f,h)=>({coordinate:n(f)+m,value:i?i[f]:f,index:h,offset:m}))}}},fr=M([le,Ie,Jc,Yx,Hx,gA,xA,De],vA),ed=M([Dx,Ix,OP],(e,t,r)=>Rx(r.shared,e,t)),Xx=e=>e.tooltip.settings.trigger,td=e=>e.tooltip.settings.defaultIndex,Ui=M([Fn,ed,Xx,td],Ux),nn=M([Ui,Bn],Zc),Zx=M([fr,nn],$x),Jx=M([Ui],e=>{if(e)return e.dataKey}),Qx=M([Fn,ed,Xx,td],Kx),yA=M([cr,dr,le,ze,fr,td,Qx,ka],Wx),bA=M([Ui,yA],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),jA=M([Ui],e=>e.active),wA=M([Qx,nn,Cr,Ie,Zx,ka,ed],qx),NA=M([wA],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function Em(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Cm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Em(Object(r),!0).forEach(function(n){SA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Em(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SA(e,t,r){return(t=_A(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _A(e){var t=PA(e,"string");return typeof t=="symbol"?t:t+""}function PA(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AA=()=>Y(Ie),kA=()=>{var e=AA(),t=Y(fr),r=Y(Yx);return da(Cm(Cm({},e),{},{scale:r}),t)},EA=()=>Y(Ic),rd=(e,t)=>t,e0=(e,t,r)=>r,nd=(e,t,r,n)=>n,CA=M(fr,e=>mi(e,t=>t.coordinate)),ad=M([Fn,rd,e0,nd],Ux),t0=M([ad,Bn],Zc),OA=(e,t,r)=>{if(t!=null){var n=Fn(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},r0=M([Fn,rd,e0,nd],Kx),Is=M([cr,dr,le,ze,fr,nd,r0,ka],Wx),TA=M([ad,Is],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),n0=M(fr,t0,$x),MA=M([r0,t0,Cr,Ie,n0,ka,rd],qx),DA=M([ad],e=>({isActive:e.active,activeIndex:e.index})),IA=(e,t,r,n,s,i,o,l)=>{if(!(!e||!t||!n||!s||!i)){var d=yN(e.chartX,e.chartY,t,r,l);if(d){var u=jN(d,t),c=iN(u,o,i,n,s),m=bN(t,i,c,d);return{activeIndex:String(c),activeCoordinate:m}}}};function gl(){return gl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gl.apply(null,arguments)}function Om(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Va(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Om(Object(r),!0).forEach(function(n){RA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Om(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RA(e,t,r){return(t=$A(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $A(e){var t=LA(e,"string");return typeof t=="symbol"?t:t+""}function LA(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FA(e){var{coordinate:t,payload:r,index:n,offset:s,tooltipAxisBandSize:i,layout:o,cursor:l,tooltipEventType:d,chartName:u}=e,c=t,m=r,f=n;if(!l||!c||u!=="ScatterChart"&&d!=="axis")return null;var h,g;if(u==="ScatterChart")h=c,g=l1;else if(u==="BarChart")h=c1(o,c,s,i),g=Wp;else if(o==="radial"){var{cx:x,cy:b,radius:y,startAngle:j,endAngle:w}=Kp(c);h={cx:x,cy:b,startAngle:j,endAngle:w,innerRadius:y,outerRadius:y},g=Gp}else h={points:U1(o,c,s)},g=Tp;var S=typeof l=="object"&&"className"in l?l.className:void 0,v=Va(Va(Va(Va({stroke:"#ccc",pointerEvents:"none"},s),h),_e(l,!1)),{},{payload:m,payloadIndex:f,className:fe("recharts-tooltip-cursor",S)});return p.isValidElement(l)?p.cloneElement(l,v):p.createElement(g,v)}function BA(e){var t=kA(),r=Ap(),n=Ni(),s=EA();return p.createElement(FA,gl({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var a0=p.createContext(null),zA=()=>p.useContext(a0),s0={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(d,u,c){this.fn=d,this.context=u,this.once=c||!1}function i(d,u,c,m,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var h=new s(c,m||d,f),g=r?r+u:u;return d._events[g]?d._events[g].fn?d._events[g]=[d._events[g],h]:d._events[g].push(h):(d._events[g]=h,d._eventsCount++),d}function o(d,u){--d._eventsCount===0?d._events=new n:delete d._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],c,m;if(this._eventsCount===0)return u;for(m in c=this._events)t.call(c,m)&&u.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},l.prototype.listeners=function(u){var c=r?r+u:u,m=this._events[c];if(!m)return[];if(m.fn)return[m.fn];for(var f=0,h=m.length,g=new Array(h);f<h;f++)g[f]=m[f].fn;return g},l.prototype.listenerCount=function(u){var c=r?r+u:u,m=this._events[c];return m?m.fn?1:m.length:0},l.prototype.emit=function(u,c,m,f,h,g){var x=r?r+u:u;if(!this._events[x])return!1;var b=this._events[x],y=arguments.length,j,w;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),y){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,c),!0;case 3:return b.fn.call(b.context,c,m),!0;case 4:return b.fn.call(b.context,c,m,f),!0;case 5:return b.fn.call(b.context,c,m,f,h),!0;case 6:return b.fn.call(b.context,c,m,f,h,g),!0}for(w=1,j=new Array(y-1);w<y;w++)j[w-1]=arguments[w];b.fn.apply(b.context,j)}else{var S=b.length,v;for(w=0;w<S;w++)switch(b[w].once&&this.removeListener(u,b[w].fn,void 0,!0),y){case 1:b[w].fn.call(b[w].context);break;case 2:b[w].fn.call(b[w].context,c);break;case 3:b[w].fn.call(b[w].context,c,m);break;case 4:b[w].fn.call(b[w].context,c,m,f);break;default:if(!j)for(v=1,j=new Array(y-1);v<y;v++)j[v-1]=arguments[v];b[w].fn.apply(b[w].context,j)}}return!0},l.prototype.on=function(u,c,m){return i(this,u,c,m,!1)},l.prototype.once=function(u,c,m){return i(this,u,c,m,!0)},l.prototype.removeListener=function(u,c,m,f){var h=r?r+u:u;if(!this._events[h])return this;if(!c)return o(this,h),this;var g=this._events[h];if(g.fn)g.fn===c&&(!f||g.once)&&(!m||g.context===m)&&o(this,h);else{for(var x=0,b=[],y=g.length;x<y;x++)(g[x].fn!==c||f&&!g[x].once||m&&g[x].context!==m)&&b.push(g[x]);b.length?this._events[h]=b.length===1?b[0]:b:o(this,h)}return this},l.prototype.removeAllListeners=function(u){var c;return u?(c=r?r+u:u,this._events[c]&&o(this,c)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(s0);var UA=s0.exports;const WA=lr(UA);var xa=new WA,xl="recharts.syncEvent.tooltip",Tm="recharts.syncEvent.brush";function i0(e,t){if(t){var r=Number.parseInt(t,10);if(!ht(r))return e==null?void 0:e[r]}}var KA={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},o0=vt({name:"options",initialState:KA,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),qA=o0.reducer,{createEventEmitter:GA}=o0.actions;function HA(e){return e.tooltip.syncInteraction}var VA={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},l0=vt({name:"chartData",initialState:VA,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:Mm,setDataStartEndIndexes:YA,setComputedData:G5}=l0.actions,XA=l0.reducer,c0=()=>{};function ZA(){var e=Y(Rc),t=Y($c),r=Be(),n=Y(Hg),s=Y(fr),i=Ni(),o=lc(),l=Y(d=>d.rootProps.className);p.useEffect(()=>{if(e==null)return c0;var d=(u,c,m)=>{if(t!==m&&e===u){if(n==="index"){r(c);return}if(s!=null){var f;if(typeof n=="function"){var h={activeTooltipIndex:c.payload.index==null?void 0:Number(c.payload.index),isTooltipActive:c.payload.active,activeIndex:c.payload.index==null?void 0:Number(c.payload.index),activeLabel:c.payload.label,activeDataKey:c.payload.dataKey,activeCoordinate:c.payload.coordinate},g=n(s,h);f=s[g]}else n==="value"&&(f=s.find(N=>String(N.value)===c.payload.label));var{coordinate:x}=c.payload;if(f==null||c.payload.active===!1||x==null||o==null){r(hl({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:b,y}=x,j=Math.min(b,o.x+o.width),w=Math.min(y,o.y+o.height),S={x:i==="horizontal"?f.coordinate:j,y:i==="horizontal"?w:f.coordinate},v=hl({active:c.payload.active,coordinate:S,dataKey:c.payload.dataKey,index:String(f.index),label:c.payload.label});r(v)}}};return xa.on(xl,d),()=>{xa.off(xl,d)}},[l,r,t,e,n,s,i,o])}function JA(){var e=Y(Rc),t=Y($c),r=Be();p.useEffect(()=>{if(e==null)return c0;var n=(s,i,o)=>{t!==o&&e===s&&r(YA(i))};return xa.on(Tm,n),()=>{xa.off(Tm,n)}},[r,t,e])}function QA(){var e=Be();p.useEffect(()=>{e(GA())},[e]),ZA(),JA()}function ek(e,t,r,n,s,i){var o=Y(f=>OA(f,e,t)),l=Y($c),d=Y(Rc),u=Y(Hg),c=Y(HA),m=c==null?void 0:c.active;p.useEffect(()=>{if(!m&&d!=null&&l!=null){var f=hl({active:i,coordinate:r,dataKey:o,index:s,label:typeof n=="number"?String(n):n});xa.emit(xl,d,f,l)}},[m,r,o,s,n,l,d,u,i])}function Dm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Im(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dm(Object(r),!0).forEach(function(n){tk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tk(e,t,r){return(t=rk(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rk(e){var t=nk(e,"string");return typeof t=="symbol"?t:t+""}function nk(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ak(e){return e.dataKey}function sk(e,t){return p.isValidElement(e)?p.cloneElement(e,t):typeof e=="function"?p.createElement(e,t):p.createElement(BN,t)}var Rm=[],ik={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Tn.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function qr(e){var t=Gt(e,ik),{active:r,allowEscapeViewBox:n,animationDuration:s,animationEasing:i,content:o,filterNull:l,isAnimationActive:d,offset:u,payloadUniqBy:c,position:m,reverseDirection:f,useTranslate3d:h,wrapperStyle:g,cursor:x,shared:b,trigger:y,defaultIndex:j,portal:w,axisId:S}=t,v=Be(),N=typeof j=="number"?String(j):j;p.useEffect(()=>{v(IP({shared:b,trigger:y,axisId:S,active:r,defaultIndex:N}))},[v,b,y,S,r,N]);var _=lc(),A=Op(),k=CP(b),{activeIndex:C,isActive:T}=Y(Q=>DA(Q,k,y,N)),O=Y(Q=>MA(Q,k,y,N)),F=Y(Q=>n0(Q,k,y,N)),P=Y(Q=>TA(Q,k,y,N)),$=O,D=zA(),B=r??T,[I,X]=Yj([$,B]),Z=k==="axis"?F:void 0;ek(k,y,P,Z,C,B);var se=w??D;if(se==null)return null;var G=$??Rm;B||(G=Rm),l&&G.length&&(G=fj($.filter(Q=>Q.value!=null&&(Q.hide!==!0||t.includeHidden)),c,ak));var H=G.length>0,J=p.createElement(HN,{allowEscapeViewBox:n,animationDuration:s,animationEasing:i,isAnimationActive:d,active:B,coordinate:P,hasPayload:H,offset:u,position:m,reverseDirection:f,useTranslate3d:h,viewBox:_,wrapperStyle:g,lastBoundingBox:I,innerRef:X,hasPortalFromProps:!!w},sk(o,Im(Im({},t),{},{payload:G,label:Z,active:B,coordinate:P,accessibilityLayer:A})));return p.createElement(p.Fragment,null,Yf.createPortal(J,se),B&&p.createElement(BA,{cursor:x,tooltipEventType:k,coordinate:P,payload:$,index:C}))}var d0={},u0={},m0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:i}={}){let o,l=null;const d=i!=null&&i.includes("leading"),u=i==null||i.includes("trailing"),c=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},m=()=>{u&&c(),x()};let f=null;const h=()=>{f!=null&&clearTimeout(f),f=setTimeout(()=>{f=null,m()},n)},g=()=>{f!==null&&(clearTimeout(f),f=null)},x=()=>{g(),o=void 0,l=null},b=()=>{c()},y=function(...j){if(s!=null&&s.aborted)return;o=this,l=j;const w=f==null;h(),d&&w&&c()};return y.schedule=h,y.cancel=x,y.flush=b,s==null||s.addEventListener("abort",x,{once:!0}),y}e.debounce=t})(m0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=m0;function r(n,s=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:l=!0,maxWait:d}=i,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let c,m=null;const f=t.debounce(function(...x){c=n.apply(this,x),m=null},s,{edges:u}),h=function(...x){return d!=null&&(m===null&&(m=Date.now()),Date.now()-m>=d)?(c=n.apply(this,x),m=Date.now(),f.cancel(),f.schedule(),c):(f.apply(this,x),c)},g=()=>(f.flush(),c);return h.cancel=f.cancel,h.flush=g,h}e.debounce=r})(u0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=u0;function r(n,s=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(n,s,{leading:o,maxWait:s,trailing:l})}e.throttle=r})(d0);var ok=d0.throttle;const lk=lr(ok);var aa=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]};function $m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function po(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$m(Object(r),!0).forEach(function(n){ck(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$m(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ck(e,t,r){return(t=dk(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dk(e){var t=uk(e,"string");return typeof t=="symbol"?t:t+""}function uk(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jr=p.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s="100%",height:i="100%",minWidth:o=0,minHeight:l,maxHeight:d,children:u,debounce:c=0,id:m,className:f,onResize:h,style:g={}}=e,x=p.useRef(null),b=p.useRef();b.current=h,p.useImperativeHandle(t,()=>x.current);var[y,j]=p.useState({containerWidth:n.width,containerHeight:n.height}),w=p.useCallback((v,N)=>{j(_=>{var A=Math.round(v),k=Math.round(N);return _.containerWidth===A&&_.containerHeight===k?_:{containerWidth:A,containerHeight:k}})},[]);p.useEffect(()=>{var v=k=>{var C,{width:T,height:O}=k[0].contentRect;w(T,O),(C=b.current)===null||C===void 0||C.call(b,T,O)};c>0&&(v=lk(v,c,{trailing:!0,leading:!1}));var N=new ResizeObserver(v),{width:_,height:A}=x.current.getBoundingClientRect();return w(_,A),N.observe(x.current),()=>{N.disconnect()}},[w,c]);var S=p.useMemo(()=>{var{containerWidth:v,containerHeight:N}=y;if(v<0||N<0)return null;aa(zr(s)||zr(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,i),aa(!r||r>0,"The aspect(%s) must be greater than zero.",r);var _=zr(s)?v:s,A=zr(i)?N:i;return r&&r>0&&(_?A=_/r:A&&(_=A*r),d&&A>d&&(A=d)),aa(_>0||A>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,_,A,s,i,o,l,r),p.Children.map(u,k=>p.cloneElement(k,{width:_,height:A,style:po({width:_,height:A},k.props.style)}))},[r,u,i,d,l,o,y,s]);return p.createElement("div",{id:m?"".concat(m):void 0,className:fe("recharts-responsive-container",f),style:po(po({},g),{},{width:s,height:i,minWidth:o,minHeight:l,maxHeight:d}),ref:x},p.createElement("div",{style:{width:0,height:0,overflow:"visible"}},S))}),f0=e=>null;f0.displayName="Cell";function mk(e,t,r){return(t=fk(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fk(e){var t=hk(e,"string");return typeof t=="symbol"?t:t+""}function hk(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class pk{constructor(t){mk(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function Lm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lm(Object(r),!0).forEach(function(n){xk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xk(e,t,r){return(t=vk(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vk(e){var t=yk(e,"string");return typeof t=="symbol"?t:t+""}function yk(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bk={cacheSize:2e3,enableCache:!0},h0=gk({},bk),Fm=new pk(h0.cacheSize),jk={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Bm="recharts_measurement_span";function wk(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(i,"|").concat(o,"|").concat(l)}var zm=(e,t)=>{try{var r=document.getElementById(Bm);r||(r=document.createElement("span"),r.setAttribute("id",Bm),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,jk,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},sa=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Tn.isSsr)return{width:0,height:0};if(!h0.enableCache)return zm(t,r);var n=wk(t,r),s=Fm.get(n);if(s)return s;var i=zm(t,r);return Fm.set(n,i),i},Um=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Wm=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Nk=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Sk=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,p0={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},_k=Object.keys(p0),yn="NaN";function Pk(e,t){return e*p0[t]}class Qe{static parse(t){var r,[,n,s]=(r=Sk.exec(t))!==null&&r!==void 0?r:[];return new Qe(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,ht(t)&&(this.unit=""),r!==""&&!Nk.test(r)&&(this.num=NaN,this.unit=""),_k.includes(r)&&(this.num=Pk(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Qe(NaN,""):new Qe(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Qe(NaN,""):new Qe(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Qe(NaN,""):new Qe(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Qe(NaN,""):new Qe(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ht(this.num)}}function g0(e){if(e.includes(yn))return yn;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,i]=(r=Um.exec(t))!==null&&r!==void 0?r:[],o=Qe.parse(n??""),l=Qe.parse(i??""),d=s==="*"?o.multiply(l):o.divide(l);if(d.isNaN())return yn;t=t.replace(Um,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,c,m,f]=(u=Wm.exec(t))!==null&&u!==void 0?u:[],h=Qe.parse(c??""),g=Qe.parse(f??""),x=m==="+"?h.add(g):h.subtract(g);if(x.isNaN())return yn;t=t.replace(Wm,x.toString())}return t}var Km=/\(([^()]*)\)/;function Ak(e){for(var t=e,r;(r=Km.exec(t))!=null;){var[,n]=r;t=t.replace(Km,g0(n))}return t}function kk(e){var t=e.replace(/\s+/g,"");return t=Ak(t),t=g0(t),t}function Ek(e){try{return kk(e)}catch{return yn}}function go(e){var t=Ek(e.slice(5,-1));return t===yn?"":t}var Ck=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Ok=["dx","dy","angle","className","breakAll"];function vl(){return vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vl.apply(null,arguments)}function qm(e,t){if(e==null)return{};var r,n,s=Tk(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Tk(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var x0=/[ \f\n\r\t\v\u2028\u2029]+/,v0=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];be(t)||(r?s=t.toString().split(""):s=t.toString().split(x0));var i=s.map(l=>({word:l,width:sa(l,n).width})),o=r?0:sa(" ",n).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},Mk=(e,t,r,n,s)=>{var{maxLines:i,children:o,style:l,breakAll:d}=e,u=q(i),c=o,m=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return T.reduce((O,F)=>{var{word:P,width:$}=F,D=O[O.length-1];if(D&&(n==null||s||D.width+$+r<Number(n)))D.words.push(P),D.width+=$+r;else{var B={words:[P],width:$};O.push(B)}return O},[])},f=m(t),h=C=>C.reduce((T,O)=>T.width>O.width?T:O);if(!u||s)return f;var g=f.length>i||h(f).width>Number(n);if(!g)return f;for(var x="…",b=C=>{var T=c.slice(0,C),O=v0({breakAll:d,style:l,children:T+x}).wordsWithComputedWidth,F=m(O),P=F.length>i||h(F).width>Number(n);return[P,F]},y=0,j=c.length-1,w=0,S;y<=j&&w<=c.length-1;){var v=Math.floor((y+j)/2),N=v-1,[_,A]=b(N),[k]=b(v);if(!_&&!k&&(y=v+1),_&&k&&(j=v-1),!_&&k){S=A;break}w++}return S||f},Gm=e=>{var t=be(e)?[]:e.toString().split(x0);return[{words:t}]},Dk=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:i,maxLines:o}=e;if((t||r)&&!Tn.isSsr){var l,d,u=v0({breakAll:i,children:n,style:s});if(u){var{wordsWithComputedWidth:c,spaceWidth:m}=u;l=c,d=m}else return Gm(n);return Mk({breakAll:i,children:n,maxLines:o,style:s},l,d,t,r)}return Gm(n)},Hm="#808080",sd=p.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:s="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:d="end",fill:u=Hm}=e,c=qm(e,Ck),m=p.useMemo(()=>Dk({breakAll:c.breakAll,children:c.children,maxLines:c.maxLines,scaleToFit:o,style:c.style,width:c.width}),[c.breakAll,c.children,c.maxLines,o,c.style,c.width]),{dx:f,dy:h,angle:g,className:x,breakAll:b}=c,y=qm(c,Ok);if(!Kt(r)||!Kt(n))return null;var j=r+(q(f)?f:0),w=n+(q(h)?h:0),S;switch(d){case"start":S=go("calc(".concat(i,")"));break;case"middle":S=go("calc(".concat((m.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:S=go("calc(".concat(m.length-1," * -").concat(s,")"));break}var v=[];if(o){var N=m[0].width,{width:_}=c;v.push("scale(".concat(q(_)?_/N:1,")"))}return g&&v.push("rotate(".concat(g,", ").concat(j,", ").concat(w,")")),v.length&&(y.transform=v.join(" ")),p.createElement("text",vl({},_e(y,!0),{ref:t,x:j,y:w,className:fe("recharts-text",x),textAnchor:l,fill:u.includes("url")?Hm:u}),m.map((A,k)=>{var C=A.words.join(b?"":" ");return p.createElement("tspan",{x:j,dy:k===0?S:s,key:"".concat(C,"-").concat(k)},C)}))});sd.displayName="Text";var Ik=["offset"],Rk=["labelRef"];function Vm(e,t){if(e==null)return{};var r,n,s=$k(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function $k(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ym(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Se(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ym(Object(r),!0).forEach(function(n){Lk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ym(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lk(e,t,r){return(t=Fk(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fk(e){var t=Bk(e,"string");return typeof t=="symbol"?t:t+""}function Bk(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zt(){return Zt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zt.apply(null,arguments)}var zk=e=>{var{value:t,formatter:r}=e,n=be(e.children)?t:e.children;return typeof r=="function"?r(n):n},id=e=>e!=null&&typeof e=="function",Uk=(e,t)=>{var r=rt(t-e),n=Math.min(Math.abs(t-e),360);return r*n},Wk=(e,t,r,n)=>{var{position:s,offset:i,className:o}=e,{cx:l,cy:d,innerRadius:u,outerRadius:c,startAngle:m,endAngle:f,clockWise:h}=n,g=(u+c)/2,x=Uk(m,f),b=x>=0?1:-1,y,j;s==="insideStart"?(y=m+b*i,j=h):s==="insideEnd"?(y=f-b*i,j=!h):s==="end"&&(y=f+b*i,j=h),j=x<=0?j:!j;var w=Ge(l,d,g,y),S=Ge(l,d,g,y+(j?1:-1)*359),v="M".concat(w.x,",").concat(w.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(j?0:1,`,
    `).concat(S.x,",").concat(S.y),N=be(e.id)?oa("recharts-radial-line-"):e.id;return p.createElement("text",Zt({},r,{dominantBaseline:"central",className:fe("recharts-radial-bar-label",o)}),p.createElement("defs",null,p.createElement("path",{id:N,d:v})),p.createElement("textPath",{xlinkHref:"#".concat(N)},t))},Kk=(e,t,r)=>{var{cx:n,cy:s,innerRadius:i,outerRadius:o,startAngle:l,endAngle:d}=e,u=(l+d)/2;if(r==="outside"){var{x:c,y:m}=Ge(n,s,o+t,u);return{x:c,y:m,textAnchor:c>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var f=(i+o)/2,{x:h,y:g}=Ge(n,s,f,u);return{x:h,y:g,textAnchor:"middle",verticalAnchor:"middle"}},qk=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,{x:i,y:o,width:l,height:d}=t,u=d>=0?1:-1,c=u*n,m=u>0?"end":"start",f=u>0?"start":"end",h=l>=0?1:-1,g=h*n,x=h>0?"end":"start",b=h>0?"start":"end";if(s==="top"){var y={x:i+l/2,y:o-u*n,textAnchor:"middle",verticalAnchor:m};return Se(Se({},y),r?{height:Math.max(o-r.y,0),width:l}:{})}if(s==="bottom"){var j={x:i+l/2,y:o+d+c,textAnchor:"middle",verticalAnchor:f};return Se(Se({},j),r?{height:Math.max(r.y+r.height-(o+d),0),width:l}:{})}if(s==="left"){var w={x:i-g,y:o+d/2,textAnchor:x,verticalAnchor:"middle"};return Se(Se({},w),r?{width:Math.max(w.x-r.x,0),height:d}:{})}if(s==="right"){var S={x:i+l+g,y:o+d/2,textAnchor:b,verticalAnchor:"middle"};return Se(Se({},S),r?{width:Math.max(r.x+r.width-S.x,0),height:d}:{})}var v=r?{width:l,height:d}:{};return s==="insideLeft"?Se({x:i+g,y:o+d/2,textAnchor:b,verticalAnchor:"middle"},v):s==="insideRight"?Se({x:i+l-g,y:o+d/2,textAnchor:x,verticalAnchor:"middle"},v):s==="insideTop"?Se({x:i+l/2,y:o+c,textAnchor:"middle",verticalAnchor:f},v):s==="insideBottom"?Se({x:i+l/2,y:o+d-c,textAnchor:"middle",verticalAnchor:m},v):s==="insideTopLeft"?Se({x:i+g,y:o+c,textAnchor:b,verticalAnchor:f},v):s==="insideTopRight"?Se({x:i+l-g,y:o+c,textAnchor:x,verticalAnchor:f},v):s==="insideBottomLeft"?Se({x:i+g,y:o+d-c,textAnchor:b,verticalAnchor:m},v):s==="insideBottomRight"?Se({x:i+l-g,y:o+d-c,textAnchor:x,verticalAnchor:m},v):s&&typeof s=="object"&&(q(s.x)||zr(s.x))&&(q(s.y)||zr(s.y))?Se({x:i+Lt(s.x,l),y:o+Lt(s.y,d),textAnchor:"end",verticalAnchor:"end"},v):Se({x:i+l/2,y:o+d/2,textAnchor:"middle",verticalAnchor:"middle"},v)},Gk=e=>"cx"in e&&q(e.cx);function dt(e){var{offset:t=5}=e,r=Vm(e,Ik),n=Se({offset:t},r),{viewBox:s,position:i,value:o,children:l,content:d,className:u="",textBreakAll:c,labelRef:m}=n,f=Y(Jg),h=lc(),g=i==="center"?h:f??h,x=s||g;if(!x||be(o)&&be(l)&&!p.isValidElement(d)&&typeof d!="function")return null;var b=Se(Se({},n),{},{viewBox:x});if(p.isValidElement(d)){var{labelRef:y}=b,j=Vm(b,Rk);return p.cloneElement(d,j)}var w;if(typeof d=="function"){if(w=p.createElement(d,b),p.isValidElement(w))return w}else w=zk(n);var S=Gk(x),v=_e(n,!0);if(S&&(i==="insideStart"||i==="insideEnd"||i==="end"))return Wk(n,w,v,x);var N=S?Kk(x,n.offset,n.position):qk(n,x);return p.createElement(sd,Zt({ref:m,className:fe("recharts-label",u)},v,N,{breakAll:c}),w)}dt.displayName="Label";var y0=e=>{var{cx:t,cy:r,angle:n,startAngle:s,endAngle:i,r:o,radius:l,innerRadius:d,outerRadius:u,x:c,y:m,top:f,left:h,width:g,height:x,clockWise:b,labelViewBox:y}=e;if(y)return y;if(q(g)&&q(x)){if(q(c)&&q(m))return{x:c,y:m,width:g,height:x};if(q(f)&&q(h))return{x:f,y:h,width:g,height:x}}if(q(c)&&q(m))return{x:c,y:m,width:0,height:0};if(q(t)&&q(r))return{cx:t,cy:r,startAngle:s||n||0,endAngle:i||n||0,innerRadius:d||0,outerRadius:u||l||o||0,clockWise:b};if(e.viewBox)return e.viewBox},Hk=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?p.createElement(dt,Zt({key:"label-implicit"},n)):Kt(e)?p.createElement(dt,Zt({key:"label-implicit",value:e},n)):p.isValidElement(e)?e.type===dt?p.cloneElement(e,Se({key:"label-implicit"},n)):p.createElement(dt,Zt({key:"label-implicit",content:e},n)):id(e)?p.createElement(dt,Zt({key:"label-implicit",content:e},n)):e&&typeof e=="object"?p.createElement(dt,Zt({},e,{key:"label-implicit"},n)):null},Vk=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:s,labelRef:i}=t,o=y0(t),l=zl(s,dt).map((u,c)=>p.cloneElement(u,{viewBox:r||o,key:"label-".concat(c)}));if(!n)return l;var d=Hk(t.label,r||o,i);return[d,...l]};dt.parseViewBox=y0;dt.renderCallByParent=Vk;var b0={},j0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(j0);var w0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(w0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=j0,r=w0,n=oi;function s(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=s})(b0);var Yk=b0.last;const Xk=lr(Yk);var Zk=["valueAccessor"],Jk=["data","dataKey","clockWise","id","textBreakAll"];function Rs(){return Rs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rs.apply(null,arguments)}function Xm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Zm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xm(Object(r),!0).forEach(function(n){Qk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qk(e,t,r){return(t=eE(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eE(e){var t=tE(e,"string");return typeof t=="symbol"?t:t+""}function tE(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jm(e,t){if(e==null)return{};var r,n,s=rE(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function rE(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var nE=e=>Array.isArray(e.value)?Xk(e.value):e.value;function Nr(e){var{valueAccessor:t=nE}=e,r=Jm(e,Zk),{data:n,dataKey:s,clockWise:i,id:o,textBreakAll:l}=r,d=Jm(r,Jk);return!n||!n.length?null:p.createElement(Ft,{className:"recharts-label-list"},n.map((u,c)=>{var m=be(s)?t(u,c):Fe(u&&u.payload,s),f=be(o)?{}:{id:"".concat(o,"-").concat(c)};return p.createElement(dt,Rs({},_e(u,!0),d,f,{parentViewBox:u.parentViewBox,value:m,textBreakAll:l,viewBox:dt.parseViewBox(be(i)?u:Zm(Zm({},u),{},{clockWise:i})),key:"label-".concat(c),index:c}))}))}Nr.displayName="LabelList";function aE(e,t){return e?e===!0?p.createElement(Nr,{key:"labelList-implicit",data:t}):p.isValidElement(e)||id(e)?p.createElement(Nr,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?p.createElement(Nr,Rs({data:t},e,{key:"labelList-implicit"})):null:null}function sE(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,s=zl(n,Nr).map((o,l)=>p.cloneElement(o,{data:t,key:"labelList-".concat(l)}));if(!r)return s;var i=aE(e.label,t);return[i,...s]}Nr.renderCallByParent=sE;function yl(){return yl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yl.apply(null,arguments)}var N0=e=>{var{cx:t,cy:r,r:n,className:s}=e,i=fe("recharts-dot",s);return t===+t&&r===+r&&n===+n?p.createElement("circle",yl({},on(e),Fl(e),{className:i,cx:t,cy:r,r:n})):null},iE={radiusAxis:{},angleAxis:{}},S0=vt({name:"polarAxis",initialState:iE,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:H5,removeRadiusAxis:V5,addAngleAxis:Y5,removeAngleAxis:X5}=S0.actions,oE=S0.reducer,_0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var s;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((s=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&s.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(_0);var lE=_0.isPlainObject;const cE=lr(lE);function $s(){return $s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$s.apply(null,arguments)}var Qm=(e,t,r,n,s)=>{var i=r-n,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-i/2,",").concat(t+s),o+="L ".concat(e+r-i/2-n,",").concat(t+s),o+="L ".concat(e,",").concat(t," Z"),o},dE={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},uE=e=>{var t=Gt(e,dE),r=p.useRef(),[n,s]=p.useState(-1);p.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&s(b)}catch{}},[]);var{x:i,y:o,upperWidth:l,lowerWidth:d,height:u,className:c}=t,{animationEasing:m,animationDuration:f,animationBegin:h,isUpdateAnimationActive:g}=t;if(i!==+i||o!==+o||l!==+l||d!==+d||u!==+u||l===0&&d===0||u===0)return null;var x=fe("recharts-trapezoid",c);return g?p.createElement(js,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:u,x:i,y:o},to:{upperWidth:l,lowerWidth:d,height:u,x:i,y:o},duration:f,animationEasing:m,isActive:g},b=>{var{upperWidth:y,lowerWidth:j,height:w,x:S,y:v}=b;return p.createElement(js,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:h,duration:f,easing:m},p.createElement("path",$s({},_e(t,!0),{className:x,d:Qm(S,v,y,j,w),ref:r})))}):p.createElement("g",null,p.createElement("path",$s({},_e(t,!0),{className:x,d:Qm(i,o,l,d,u)})))},mE=["option","shapeType","propTransformer","activeClassName","isActive"];function fE(e,t){if(e==null)return{};var r,n,s=hE(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function hE(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ef(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ls(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ef(Object(r),!0).forEach(function(n){pE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ef(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pE(e,t,r){return(t=gE(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gE(e){var t=xE(e,"string");return typeof t=="symbol"?t:t+""}function xE(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vE(e,t){return Ls(Ls({},t),e)}function yE(e,t){return e==="symbols"}function tf(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return p.createElement(Wp,r);case"trapezoid":return p.createElement(uE,r);case"sector":return p.createElement(Gp,r);case"symbols":if(yE(t))return p.createElement(_h,r);break;default:return null}}function bE(e){return p.isValidElement(e)?e.props:e}function jE(e){var{option:t,shapeType:r,propTransformer:n=vE,activeClassName:s="recharts-active-shape",isActive:i}=e,o=fE(e,mE),l;if(p.isValidElement(t))l=p.cloneElement(t,Ls(Ls({},o),bE(t)));else if(typeof t=="function")l=t(o);else if(cE(t)&&typeof t!="boolean"){var d=n(t,o);l=p.createElement(tf,{shapeType:r,elementProps:d})}else{var u=o;l=p.createElement(tf,{shapeType:r,elementProps:u})}return i?p.createElement(Ft,{className:s},l):l}var P0=(e,t)=>{var r=Be();return(n,s)=>i=>{e==null||e(n,s,i),r(Fx({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},A0=e=>{var t=Be();return(r,n)=>s=>{e==null||e(r,n,s),t(RP())}},k0=(e,t)=>{var r=Be();return(n,s)=>i=>{e==null||e(n,s,i),r($P({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function E0(e){var{fn:t,args:r}=e,n=Be(),s=st();return p.useEffect(()=>{if(!s){var i=t(r);return n(MP(i)),()=>{n(DP(i))}}},[t,r,n,s]),null}var wE=()=>{};function C0(e){var{legendPayload:t}=e,r=Be(),n=st();return p.useEffect(()=>n?wE:(r(MN(t)),()=>{r(DN(t))}),[r,n,t]),null}function O0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=p.useRef(oa(t)),n=p.useRef(e);return n.current!==e&&(r.current=oa(t),n.current=e),r.current}var xo,NE=()=>{var[e]=p.useState(()=>oa("uid-"));return e},SE=(xo=by.useId)!==null&&xo!==void 0?xo:NE;function _E(e,t){var r=SE();return t||(e?"".concat(e,"-").concat(r):r)}var PE=p.createContext(void 0),T0=e=>{var{id:t,type:r,children:n}=e,s=_E("recharts-".concat(r),t);return p.createElement(PE.Provider,{value:s},n(s))},AE={cartesianItems:[],polarItems:[]},M0=vt({name:"graphicalItems",initialState:AE,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,s=rr(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},removeCartesianGraphicalItem(e,t){var r=rr(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=rr(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:kE,replaceCartesianGraphicalItem:EE,removeCartesianGraphicalItem:CE,addPolarGraphicalItem:Z5,removePolarGraphicalItem:J5}=M0.actions,OE=M0.reducer;function D0(e){var t=Be(),r=p.useRef(null);return p.useEffect(()=>{r.current===null?t(kE(e)):r.current!==e&&t(EE({prev:r.current,next:e})),r.current=e},[t,e]),p.useEffect(()=>()=>{r.current&&(t(CE(r.current)),r.current=null)},[t]),null}function TE(){}var ME={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},rf={t:0},vo={t:1};function I0(e){var t=Gt(e,ME),{isActive:r,canBegin:n,duration:s,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:d,children:u}=t,c=Up("JavascriptAnimate",t.animationManager),[m,f]=p.useState(r?rf:vo),h=p.useRef(null);return p.useEffect(()=>{r||f(vo)},[r]),p.useEffect(()=>{if(!r||!n)return TE;var g=zp(rf,vo,Fp(i),s,f,c.getTimeoutController()),x=()=>{h.current=g()};return c.start([d,o,x,s,l]),()=>{c.stop(),h.current&&h.current(),l()}},[r,n,s,i,o,d,l,c]),u(m.t)}var DE=M([ze],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),IE=M([DE,cr,dr],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),od=()=>Y(IE),RE=()=>Y(NA);function nf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function af(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nf(Object(r),!0).forEach(function(n){$E(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $E(e,t,r){return(t=LE(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LE(e){var t=FE(e,"string");return typeof t=="symbol"?t:t+""}function FE(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BE=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:s,dataKey:i}=e;if(s===!1||t.x==null||t.y==null)return null;var o=af(af({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},_e(s,!1)),Fl(s)),l;return p.isValidElement(s)?l=p.cloneElement(s,o):typeof s=="function"?l=s(o):l=p.createElement(N0,o),p.createElement(Ft,{className:"recharts-active-dot"},l)};function zE(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:s}=e,i=Y(nn),o=RE();if(t==null||o==null)return null;var l=t.find(d=>o.includes(d.payload));return be(l)?null:BE({point:l,childIndex:Number(i),mainColor:r,dataKey:s,activeDot:n})}var UE="Invariant failed";function WE(e,t){throw new Error(UE)}var KE=["x","y"];function bl(){return bl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bl.apply(null,arguments)}function sf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Qn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sf(Object(r),!0).forEach(function(n){qE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qE(e,t,r){return(t=GE(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GE(e){var t=HE(e,"string");return typeof t=="symbol"?t:t+""}function HE(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VE(e,t){if(e==null)return{};var r,n,s=YE(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function YE(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function XE(e,t){var{x:r,y:n}=e,s=VE(e,KE),i="".concat(r),o=parseInt(i,10),l="".concat(n),d=parseInt(l,10),u="".concat(t.height||s.height),c=parseInt(u,10),m="".concat(t.width||s.width),f=parseInt(m,10);return Qn(Qn(Qn(Qn(Qn({},t),s),o?{x:o}:{}),d?{y:d}:{}),{},{height:c,width:f,name:t.name,radius:t.radius})}function R0(e){return p.createElement(jE,bl({shapeType:"rectangle",propTransformer:XE,activeClassName:"recharts-active-bar"},e))}var ZE=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,s)=>{if(q(t))return t;var i=q(n)||be(n);return i?t(n,s):(i||WE(),r)}},JE={},$0=vt({name:"errorBars",initialState:JE,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:Q5,removeErrorBar:eI}=$0.actions,QE=$0.reducer,eC=["children"];function tC(e,t){if(e==null)return{};var r,n,s=rC(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function rC(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var nC={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},aC=p.createContext(nC);function L0(e){var{children:t}=e,r=tC(e,eC);return p.createElement(aC.Provider,{value:r},t)}function ld(e,t){var r,n,s=Y(u=>mr(u,e)),i=Y(u=>Or(u,t)),o=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:ot.allowDataOverflow,l=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:lt.allowDataOverflow,d=o||l;return{needClip:d,needClipX:o,needClipY:l}}function F0(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=od(),{needClipX:i,needClipY:o,needClip:l}=ld(t,r);if(!l)return null;var{x:d,y:u,width:c,height:m}=s;return p.createElement("clipPath",{id:"clipPath-".concat(n)},p.createElement("rect",{x:i?d:d-c/2,y:o?u:u-m/2,width:i?c:c*2,height:o?m:m*2}))}var sC=["onMouseEnter","onMouseLeave","onClick"],iC=["value","background","tooltipPosition"],oC=["id"],lC=["onMouseEnter","onClick","onMouseLeave"];function On(){return On=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},On.apply(null,arguments)}function of(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ye(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?of(Object(r),!0).forEach(function(n){cC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):of(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cC(e,t,r){return(t=dC(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dC(e){var t=uC(e,"string");return typeof t=="symbol"?t:t+""}function uC(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fs(e,t){if(e==null)return{};var r,n,s=mC(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function mC(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var fC=e=>{var{dataKey:t,name:r,fill:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:n,value:yi(r,t),payload:e}]};function hC(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:s,name:i,hide:o,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:yi(i,t),hide:o,type:e.tooltipType,color:e.fill,unit:l}}}function pC(e){var t=Y(nn),{data:r,dataKey:n,background:s,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:l,onClick:d}=i,u=Fs(i,sC),c=P0(o,n),m=A0(l),f=k0(d,n);if(!s||r==null)return null;var h=_e(s,!1);return p.createElement(p.Fragment,null,r.map((g,x)=>{var{value:b,background:y,tooltipPosition:j}=g,w=Fs(g,iC);if(!y)return null;var S=c(g,x),v=m(g,x),N=f(g,x),_=Ye(Ye(Ye(Ye(Ye({option:s,isActive:String(x)===t},w),{},{fill:"#eee"},y),h),Bl(u,g,x)),{},{onMouseEnter:S,onMouseLeave:v,onClick:N,dataKey:n,index:x,className:"recharts-bar-background-rectangle"});return p.createElement(R0,On({key:"background-bar-".concat(x)},_))}))}function B0(e){var{data:t,props:r,showLabels:n}=e,s=on(r),{id:i}=s,o=Fs(s,oC),{shape:l,dataKey:d,activeBar:u}=r,c=Y(nn),m=Y(Jx),{onMouseEnter:f,onClick:h,onMouseLeave:g}=r,x=Fs(r,lC),b=P0(f,d),y=A0(g),j=k0(h,d);return t?p.createElement(p.Fragment,null,t.map((w,S)=>{var v=u&&String(S)===c&&(m==null||d===m),N=v?u:l,_=Ye(Ye(Ye({},o),w),{},{isActive:v,option:N,index:S,dataKey:d});return p.createElement(Ft,On({className:"recharts-bar-rectangle"},Bl(x,w,S),{onMouseEnter:b(w,S),onMouseLeave:y(w,S),onClick:j(w,S),key:"rectangle-".concat(w==null?void 0:w.x,"-").concat(w==null?void 0:w.y,"-").concat(w==null?void 0:w.value,"-").concat(S)}),p.createElement(R0,_))}),n&&Nr.renderCallByParent(r,t)):null}function gC(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:s,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:d,onAnimationEnd:u,onAnimationStart:c}=t,m=r.current,f=O0(t,"recharts-bar-"),[h,g]=p.useState(!1),x=p.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),b=p.useCallback(()=>{typeof c=="function"&&c(),g(!0)},[c]);return p.createElement(I0,{begin:o,duration:l,isActive:i,easing:d,onAnimationEnd:x,onAnimationStart:b,key:f},y=>{var j=y===1?n:n==null?void 0:n.map((w,S)=>{var v=m&&m[S];if(v)return Ye(Ye({},w),{},{x:Dt(v.x,w.x,y),y:Dt(v.y,w.y,y),width:Dt(v.width,w.width,y),height:Dt(v.height,w.height,y)});if(s==="horizontal"){var N=Dt(0,w.height,y);return Ye(Ye({},w),{},{y:w.y+w.height-N,height:N})}var _=Dt(0,w.width,y);return Ye(Ye({},w),{},{width:_})});return y>0&&(r.current=j??null),j==null?null:p.createElement(Ft,null,p.createElement(B0,{props:t,data:j,showLabels:!h}))})}function xC(e){var{data:t,isAnimationActive:r}=e,n=p.useRef(null);return r&&t&&t.length&&(n.current==null||n.current!==t)?p.createElement(gC,{previousRectanglesRef:n,props:e}):p.createElement(B0,{props:e,data:t,showLabels:!0})}var z0=0,vC=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Fe(e,t)}};class yC extends p.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:s,xAxisId:i,yAxisId:o,needClip:l,background:d,id:u}=this.props;if(t)return null;var c=fe("recharts-bar",s),m=u;return p.createElement(Ft,{className:c,id:u},l&&p.createElement("defs",null,p.createElement(F0,{clipPathId:m,xAxisId:i,yAxisId:o})),p.createElement(Ft,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(m,")"):void 0},p.createElement(pC,{data:r,dataKey:n,background:d,allOtherBarProps:this.props}),p.createElement(xC,this.props)),this.props.children)}}var bC={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Tn.isSsr,legendType:"rect",minPointSize:z0,xAxisId:0,yAxisId:0};function jC(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:d,animationEasing:u,isAnimationActive:c}=e,{needClip:m}=ld(t,r),f=Ni(),h=st(),g=zl(e.children,f0),x=Y(j=>VC(j,t,r,h,e.id,g));if(f!=="vertical"&&f!=="horizontal")return null;var b,y=x==null?void 0:x[0];return y==null||y.height==null||y.width==null?b=0:b=f==="vertical"?y.height/2:y.width/2,p.createElement(L0,{xAxisId:t,yAxisId:r,data:x,dataPointFormatter:vC,errorBarOffset:b},p.createElement(yC,On({},e,{layout:f,needClip:m,data:x,xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:d,animationEasing:u,isAnimationActive:c})))}function wC(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:s,bandSize:i,xAxis:o,yAxis:l,xAxisTicks:d,yAxisTicks:u,stackedData:c,displayedData:m,offset:f,cells:h}=e,g=t==="horizontal"?l:o,x=c?g.scale.domain():null,b=pN({numericAxis:g});return m.map((y,j)=>{var w,S,v,N,_,A;c?w=cN(c[j],x):(w=Fe(y,r),Array.isArray(w)||(w=[b,w]));var k=ZE(n,z0)(w[1],j);if(t==="horizontal"){var C,[T,O]=[l.scale(w[0]),l.scale(w[1])];S=pu({axis:o,ticks:d,bandSize:i,offset:s.offset,entry:y,index:j}),v=(C=O??T)!==null&&C!==void 0?C:void 0,N=s.size;var F=T-O;if(_=ht(F)?0:F,A={x:S,y:f.top,width:N,height:f.height},Math.abs(k)>0&&Math.abs(_)<Math.abs(k)){var P=rt(_||k)*(Math.abs(k)-Math.abs(_));v-=P,_+=P}}else{var[$,D]=[o.scale(w[0]),o.scale(w[1])];if(S=$,v=pu({axis:l,ticks:u,bandSize:i,offset:s.offset,entry:y,index:j}),N=D-$,_=s.size,A={x:f.left,y:v,width:f.width,height:_},Math.abs(k)>0&&Math.abs(N)<Math.abs(k)){var B=rt(N||k)*(Math.abs(k)-Math.abs(N));N+=B}}if(S==null||v==null||N==null||_==null)return null;var I=Ye(Ye({},y),{},{x:S,y:v,width:N,height:_,value:c?w:w[1],payload:y,background:A,tooltipPosition:{x:S+N/2,y:v+_/2}},h&&h[j]&&h[j].props);return I}).filter(Boolean)}function ia(e){var t=Gt(e,bC),r=st();return p.createElement(T0,{id:t.id,type:"bar"},n=>p.createElement(p.Fragment,null,p.createElement(C0,{legendPayload:fC(t)}),p.createElement(E0,{fn:hC,args:t}),p.createElement(D0,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:hN(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),p.createElement(jC,On({},t,{id:n}))))}ia.displayName="Bar";function lf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ya(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lf(Object(r),!0).forEach(function(n){NC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NC(e,t,r){return(t=SC(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SC(e){var t=_C(e,"string");return typeof t=="symbol"?t:t+""}function _C(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PC=(e,t)=>t,AC=(e,t,r)=>r,kC=(e,t,r,n)=>n,EC=(e,t,r,n,s)=>s,Ca=M([$i,EC],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),CC=M([Ca],e=>e==null?void 0:e.maxBarSize),OC=(e,t,r,n,s,i)=>i,cf=(e,t,r)=>{var n=r??e;if(!be(n))return Lt(n,t,0)},TC=M([le,$i,PC,AC,kC],(e,t,r,n,s)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),MC=(e,t,r,n)=>{var s=le(e);return s==="horizontal"?fl(e,"yAxis",r,n):fl(e,"xAxis",t,n)},DC=(e,t,r)=>{var n=le(e);return n==="horizontal"?Sm(e,"xAxis",t):Sm(e,"yAxis",r)},IC=(e,t,r)=>{var n={},s=e.filter(Ri),i=e.filter(u=>u.stackId==null),o=s.reduce((u,c)=>(u[c.stackId]||(u[c.stackId]=[]),u[c.stackId].push(c),u),n),l=Object.entries(o).map(u=>{var[c,m]=u,f=m.map(g=>g.dataKey),h=cf(t,r,m[0].barSize);return{stackId:c,dataKeys:f,barSize:h}}),d=i.map(u=>{var c=[u.dataKey].filter(f=>f!=null),m=cf(t,r,u.barSize);return{stackId:void 0,dataKeys:c,barSize:m}});return[...l,...d]},RC=M([TC,M_,DC],IC),$C=(e,t,r,n,s)=>{var i,o,l=Ca(e,t,r,n,s);if(l!=null){var d=le(e),u=qg(e),{maxBarSize:c}=l,m=be(c)?u:c,f,h;return d==="horizontal"?(f=Pr(e,"xAxis",t,n),h=_r(e,"xAxis",t,n)):(f=Pr(e,"yAxis",r,n),h=_r(e,"yAxis",r,n)),(i=(o=da(f,h,!0))!==null&&o!==void 0?o:m)!==null&&i!==void 0?i:0}},U0=(e,t,r,n)=>{var s=le(e),i,o;return s==="horizontal"?(i=Pr(e,"xAxis",t,n),o=_r(e,"xAxis",t,n)):(i=Pr(e,"yAxis",r,n),o=_r(e,"yAxis",r,n)),da(i,o)};function LC(e,t,r,n,s){var i=n.length;if(!(i<1)){var o=Lt(e,r,0,!0),l,d=[];if(xt(n[0].barSize)){var u=!1,c=r/i,m=n.reduce((y,j)=>y+(j.barSize||0),0);m+=(i-1)*o,m>=r&&(m-=(i-1)*o,o=0),m>=r&&c>0&&(u=!0,c*=.9,m=i*c);var f=(r-m)/2>>0,h={offset:f-o,size:0};l=n.reduce((y,j)=>{var w,S={stackId:j.stackId,dataKeys:j.dataKeys,position:{offset:h.offset+h.size+o,size:u?c:(w=j.barSize)!==null&&w!==void 0?w:0}},v=[...y,S];return h=v[v.length-1].position,v},d)}else{var g=Lt(t,r,0,!0);r-2*g-(i-1)*o<=0&&(o=0);var x=(r-2*g-(i-1)*o)/i;x>1&&(x>>=0);var b=xt(s)?Math.min(x,s):x;l=n.reduce((y,j,w)=>[...y,{stackId:j.stackId,dataKeys:j.dataKeys,position:{offset:g+(x+o)*w+(x-b)/2,size:b}}],d)}return l}}var FC=(e,t,r,n,s,i,o)=>{var l=be(o)?t:o,d=LC(r,n,s!==i?s:i,e,l);return s!==i&&d!=null&&(d=d.map(u=>Ya(Ya({},u),{},{position:Ya(Ya({},u.position),{},{offset:u.position.offset-s/2})}))),d},BC=M([RC,qg,T_,Gg,$C,U0,CC],FC),zC=(e,t,r,n)=>Pr(e,"xAxis",t,n),UC=(e,t,r,n)=>Pr(e,"yAxis",r,n),WC=(e,t,r,n)=>_r(e,"xAxis",t,n),KC=(e,t,r,n)=>_r(e,"yAxis",r,n),qC=M([BC,Ca],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),GC=(e,t)=>{var r=zc(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var s=e[n];if(s){var{stackedData:i}=s;if(i)return i.find(o=>o.key===r)}}}},HC=M([MC,Ca],GC),VC=M([ze,zC,UC,WC,KC,qC,le,Ci,U0,HC,Ca,OC],(e,t,r,n,s,i,o,l,d,u,c,m)=>{var{chartData:f,dataStartIndex:h,dataEndIndex:g}=l;if(!(c==null||i==null||o!=="horizontal"&&o!=="vertical"||t==null||r==null||n==null||s==null||d==null)){var{data:x}=c,b;if(x!=null&&x.length>0?b=x:b=f==null?void 0:f.slice(h,g+1),b!=null)return wC({layout:o,barSettings:c,pos:i,bandSize:d,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,stackedData:u,displayedData:b,offset:e,cells:m})}}),YC=e=>{var{chartData:t}=e,r=Be(),n=st();return p.useEffect(()=>n?()=>{}:(r(Mm(t)),()=>{r(Mm(void 0))}),[t,r,n]),null},df={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},W0=vt({name:"brush",initialState:df,reducers:{setBrushSettings(e,t){return t.payload==null?df:t.payload}}}),{setBrushSettings:tI}=W0.actions,XC=W0.reducer;function ZC(e,t,r){return(t=JC(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JC(e){var t=QC(e,"string");return typeof t=="symbol"?t:t+""}function QC(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class cd{static create(t){return new cd(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}ZC(cd,"EPS",1e-4);function eO(e){return(e%180+180)%180}var tO=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=eO(s),o=i*Math.PI/180,l=Math.atan(n/r),d=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(d)},rO={dots:[],areas:[],lines:[]},K0=vt({name:"referenceElements",initialState:rO,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=rr(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=rr(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=rr(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:rI,removeDot:nI,addArea:aI,removeArea:sI,addLine:iI,removeLine:oI}=K0.actions,nO=K0.reducer,aO=p.createContext(void 0),sO=e=>{var{children:t}=e,[r]=p.useState("".concat(oa("recharts"),"-clip")),n=od();if(n==null)return null;var{x:s,y:i,width:o,height:l}=n;return p.createElement(aO.Provider,{value:r},p.createElement("defs",null,p.createElement("clipPath",{id:r},p.createElement("rect",{x:s,y:i,height:l,width:o}))),t)};function yo(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function q0(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function iO(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return tO(n,r)}function oO(e,t,r){var n=r==="width",{x:s,y:i,width:o,height:l}=e;return t===1?{start:n?s:i,end:n?s+o:i+l}:{start:n?s+o:i+l,end:n?s:i}}function Bs(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function lO(e,t){return q0(e,t+1)}function cO(e,t,r,n,s){for(var i=(n||[]).slice(),{start:o,end:l}=t,d=0,u=1,c=o,m=function(){var g=n==null?void 0:n[d];if(g===void 0)return{v:q0(n,u)};var x=d,b,y=()=>(b===void 0&&(b=r(g,x)),b),j=g.coordinate,w=d===0||Bs(e,j,y,c,l);w||(d=0,c=o,u+=1),w&&(c=j+e*(y()/2+s),d+=u)},f;u<=i.length;)if(f=m(),f)return f.v;return[]}function uf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ve(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uf(Object(r),!0).forEach(function(n){dO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dO(e,t,r){return(t=uO(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uO(e){var t=mO(e,"string");return typeof t=="symbol"?t:t+""}function mO(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fO(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,{start:l}=t,{end:d}=t,u=function(f){var h=i[f],g,x=()=>(g===void 0&&(g=r(h,f)),g);if(f===o-1){var b=e*(h.coordinate+e*x()/2-d);i[f]=h=Ve(Ve({},h),{},{tickCoord:b>0?h.coordinate-b*e:h.coordinate})}else i[f]=h=Ve(Ve({},h),{},{tickCoord:h.coordinate});var y=Bs(e,h.tickCoord,x,l,d);y&&(d=h.tickCoord-e*(x()/2+s),i[f]=Ve(Ve({},h),{},{isShow:!0}))},c=o-1;c>=0;c--)u(c);return i}function hO(e,t,r,n,s,i){var o=(n||[]).slice(),l=o.length,{start:d,end:u}=t;if(i){var c=n[l-1],m=r(c,l-1),f=e*(c.coordinate+e*m/2-u);o[l-1]=c=Ve(Ve({},c),{},{tickCoord:f>0?c.coordinate-f*e:c.coordinate});var h=Bs(e,c.tickCoord,()=>m,d,u);h&&(u=c.tickCoord-e*(m/2+s),o[l-1]=Ve(Ve({},c),{},{isShow:!0}))}for(var g=i?l-1:l,x=function(j){var w=o[j],S,v=()=>(S===void 0&&(S=r(w,j)),S);if(j===0){var N=e*(w.coordinate-e*v()/2-d);o[j]=w=Ve(Ve({},w),{},{tickCoord:N<0?w.coordinate-N*e:w.coordinate})}else o[j]=w=Ve(Ve({},w),{},{tickCoord:w.coordinate});var _=Bs(e,w.tickCoord,v,d,u);_&&(d=w.tickCoord+e*(v()/2+s),o[j]=Ve(Ve({},w),{},{isShow:!0}))},b=0;b<g;b++)x(b);return o}function dd(e,t,r){var{tick:n,ticks:s,viewBox:i,minTickGap:o,orientation:l,interval:d,tickFormatter:u,unit:c,angle:m}=e;if(!s||!s.length||!n)return[];if(q(d)||Tn.isSsr){var f;return(f=lO(s,q(d)?d:0))!==null&&f!==void 0?f:[]}var h=[],g=l==="top"||l==="bottom"?"width":"height",x=c&&g==="width"?sa(c,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=(w,S)=>{var v=typeof u=="function"?u(w.value,S):w.value;return g==="width"?iO(sa(v,{fontSize:t,letterSpacing:r}),x,m):sa(v,{fontSize:t,letterSpacing:r})[g]},y=s.length>=2?rt(s[1].coordinate-s[0].coordinate):1,j=oO(i,y,g);return d==="equidistantPreserveStart"?cO(y,j,b,s,o):(d==="preserveStart"||d==="preserveStartEnd"?h=hO(y,j,b,s,o,d==="preserveStartEnd"):h=fO(y,j,b,s,o),h.filter(w=>w.isShow))}var pO=["viewBox"],gO=["viewBox"];function bn(){return bn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bn.apply(null,arguments)}function mf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ce(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mf(Object(r),!0).forEach(function(n){ud(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ff(e,t){if(e==null)return{};var r,n,s=xO(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function xO(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ud(e,t,r){return(t=vO(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vO(e){var t=yO(e,"string");return typeof t=="symbol"?t:t+""}function yO(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Tr extends p.Component{constructor(t){super(t),this.tickRefs=p.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,s=ff(t,pO),i=this.props,{viewBox:o}=i,l=ff(i,gO);return!yo(n,o)||!yo(s,l)||!yo(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:s,height:i,orientation:o,tickSize:l,mirror:d,tickMargin:u}=this.props,c,m,f,h,g,x,b=d?-1:1,y=t.tickSize||l,j=q(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":c=m=t.coordinate,h=n+ +!d*i,f=h-b*y,x=f-b*u,g=j;break;case"left":f=h=t.coordinate,m=r+ +!d*s,c=m-b*y,g=c-b*u,x=j;break;case"right":f=h=t.coordinate,m=r+ +d*s,c=m+b*y,g=c+b*u,x=j;break;default:c=m=t.coordinate,h=n+ +d*i,f=h+b*y,x=f+b*u,g=j;break}return{line:{x1:c,y1:f,x2:m,y2:h},tick:{x:g,y:x}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:s,orientation:i,mirror:o,axisLine:l}=this.props,d=Ce(Ce(Ce({},_e(this.props,!1)),_e(l,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var u=+(i==="top"&&!o||i==="bottom"&&o);d=Ce(Ce({},d),{},{x1:t,y1:r+u*s,x2:t+n,y2:r+u*s})}else{var c=+(i==="left"&&!o||i==="right"&&o);d=Ce(Ce({},d),{},{x1:t+c*n,y1:r,x2:t+c*n,y2:r+s})}return p.createElement("line",bn({},d,{className:fe("recharts-cartesian-axis-line",Qr(l,"className"))}))}static renderTickItem(t,r,n){var s,i=fe(r.className,"recharts-cartesian-axis-tick-value");if(p.isValidElement(t))s=p.cloneElement(t,Ce(Ce({},r),{},{className:i}));else if(typeof t=="function")s=t(Ce(Ce({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=fe(o,t.className)),s=p.createElement(sd,bn({},r,{className:o}),n)}return s}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:s,stroke:i,tick:o,tickFormatter:l,unit:d,padding:u}=this.props,c=dd(Ce(Ce({},this.props),{},{ticks:n}),t,r),m=this.getTickTextAnchor(),f=this.getTickVerticalAnchor(),h=on(this.props),g=_e(o,!1),x=Ce(Ce({},h),{},{fill:"none"},_e(s,!1)),b=c.map((y,j)=>{var{line:w,tick:S}=this.getTickLineCoord(y),v=Ce(Ce(Ce(Ce({textAnchor:m,verticalAnchor:f},h),{},{stroke:"none",fill:i},g),S),{},{index:j,payload:y,visibleTicksCount:c.length,tickFormatter:l,padding:u});return p.createElement(Ft,bn({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},Bl(this.props,y,j)),s&&p.createElement("line",bn({},x,w,{className:fe("recharts-cartesian-axis-tick-line",Qr(s,"className"))})),o&&Tr.renderTickItem(o,v,"".concat(typeof l=="function"?l(y.value,j):y.value).concat(d||"")))});return b.length>0?p.createElement("g",{className:"recharts-cartesian-axis-ticks"},b):null}render(){var{axisLine:t,width:r,height:n,className:s,hide:i}=this.props;if(i)return null;var{ticks:o}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:p.createElement(Ft,{className:fe("recharts-cartesian-axis",s),ref:l=>{if(l){var d=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(d);var u=d[0];if(u){var c=window.getComputedStyle(u).fontSize,m=window.getComputedStyle(u).letterSpacing;(c!==this.state.fontSize||m!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),dt.renderCallByParent(this.props))}}ud(Tr,"displayName","CartesianAxis");ud(Tr,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var bO=["x1","y1","x2","y2","key"],jO=["offset"],wO=["xAxisId","yAxisId"],NO=["xAxisId","yAxisId"];function hf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Xe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hf(Object(r),!0).forEach(function(n){SO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SO(e,t,r){return(t=_O(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _O(e){var t=PO(e,"string");return typeof t=="symbol"?t:t+""}function PO(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gr(){return Gr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gr.apply(null,arguments)}function zs(e,t){if(e==null)return{};var r,n,s=AO(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function AO(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var kO=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:s,width:i,height:o,ry:l}=e;return p.createElement("rect",{x:n,y:s,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function G0(e,t){var r;if(p.isValidElement(e))r=p.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:s,x2:i,y2:o,key:l}=t,d=zs(t,bO),u=on(d),{offset:c}=u,m=zs(u,jO);r=p.createElement("line",Gr({},m,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function EO(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,l=zs(e,wO),d=s.map((u,c)=>{var m=Xe(Xe({},l),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(c),index:c});return G0(n,m)});return p.createElement("g",{className:"recharts-cartesian-grid-horizontal"},d)}function CO(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,l=zs(e,NO),d=s.map((u,c)=>{var m=Xe(Xe({},l),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(c),index:c});return G0(n,m)});return p.createElement("g",{className:"recharts-cartesian-grid-vertical"},d)}function OO(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:i,height:o,horizontalPoints:l,horizontal:d=!0}=e;if(!d||!t||!t.length)return null;var u=l.map(m=>Math.round(m+s-s)).sort((m,f)=>m-f);s!==u[0]&&u.unshift(0);var c=u.map((m,f)=>{var h=!u[f+1],g=h?s+o-m:u[f+1]-m;if(g<=0)return null;var x=f%t.length;return p.createElement("rect",{key:"react-".concat(f),y:m,x:n,height:g,width:i,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return p.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},c)}function TO(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:i,width:o,height:l,verticalPoints:d}=e;if(!t||!r||!r.length)return null;var u=d.map(m=>Math.round(m+s-s)).sort((m,f)=>m-f);s!==u[0]&&u.unshift(0);var c=u.map((m,f)=>{var h=!u[f+1],g=h?s+o-m:u[f+1]-m;if(g<=0)return null;var x=f%r.length;return p.createElement("rect",{key:"react-".concat(f),x:m,y:i,width:g,height:l,stroke:"none",fill:r[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return p.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},c)}var MO=(e,t)=>{var{xAxis:r,width:n,height:s,offset:i}=e;return Np(dd(Xe(Xe(Xe({},Tr.defaultProps),r),{},{ticks:Sp(r),viewBox:{x:0,y:0,width:n,height:s}})),i.left,i.left+i.width,t)},DO=(e,t)=>{var{yAxis:r,width:n,height:s,offset:i}=e;return Np(dd(Xe(Xe(Xe({},Tr.defaultProps),r),{},{ticks:Sp(r),viewBox:{x:0,y:0,width:n,height:s}})),i.top,i.top+i.height,t)},IO={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function Hr(e){var t=kp(),r=Ep(),n=Ap(),s=Xe(Xe({},Gt(e,IO)),{},{x:q(e.x)?e.x:n.left,y:q(e.y)?e.y:n.top,width:q(e.width)?e.width:n.width,height:q(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:o,x:l,y:d,width:u,height:c,syncWithTicks:m,horizontalValues:f,verticalValues:h}=s,g=st(),x=Y(k=>_m(k,"xAxis",i,g)),b=Y(k=>_m(k,"yAxis",o,g));if(!q(u)||u<=0||!q(c)||c<=0||!q(l)||l!==+l||!q(d)||d!==+d)return null;var y=s.verticalCoordinatesGenerator||MO,j=s.horizontalCoordinatesGenerator||DO,{horizontalPoints:w,verticalPoints:S}=s;if((!w||!w.length)&&typeof j=="function"){var v=f&&f.length,N=j({yAxis:b?Xe(Xe({},b),{},{ticks:v?f:b.ticks}):void 0,width:t,height:r,offset:n},v?!0:m);aa(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(w=N)}if((!S||!S.length)&&typeof y=="function"){var _=h&&h.length,A=y({xAxis:x?Xe(Xe({},x),{},{ticks:_?h:x.ticks}):void 0,width:t,height:r,offset:n},_?!0:m);aa(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(S=A)}return p.createElement("g",{className:"recharts-cartesian-grid"},p.createElement(kO,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),p.createElement(OO,Gr({},s,{horizontalPoints:w})),p.createElement(TO,Gr({},s,{verticalPoints:S})),p.createElement(EO,Gr({},s,{offset:n,horizontalPoints:w,xAxis:x,yAxis:b})),p.createElement(CO,Gr({},s,{offset:n,verticalPoints:S,xAxis:x,yAxis:b})))}Hr.displayName="CartesianGrid";var H0=(e,t,r,n)=>Pr(e,"xAxis",t,n),V0=(e,t,r,n)=>_r(e,"xAxis",t,n),Y0=(e,t,r,n)=>Pr(e,"yAxis",r,n),X0=(e,t,r,n)=>_r(e,"yAxis",r,n),RO=M([le,H0,Y0,V0,X0],(e,t,r,n,s)=>Ar(e,"xAxis")?da(t,n,!1):da(r,s,!1)),$O=(e,t,r,n,s)=>s;function LO(e){return e.type==="line"}var FO=M([$i,$O],(e,t)=>e.filter(LO).find(r=>r.id===t)),BO=M([le,H0,Y0,V0,X0,FO,RO,Ci],(e,t,r,n,s,i,o,l)=>{var{chartData:d,dataStartIndex:u,dataEndIndex:c}=l;if(!(i==null||t==null||r==null||n==null||s==null||n.length===0||s.length===0||o==null)){var{dataKey:m,data:f}=i,h;if(f!=null&&f.length>0?h=f:h=d==null?void 0:d.slice(u,c+1),h!=null)return oT({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataKey:m,bandSize:o,displayedData:h})}}),zO=["id"],UO=["type","layout","connectNulls","needClip"],WO=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function pf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function It(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pf(Object(r),!0).forEach(function(n){KO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KO(e,t,r){return(t=qO(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qO(e){var t=GO(e,"string");return typeof t=="symbol"?t:t+""}function GO(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function md(e,t){if(e==null)return{};var r,n,s=HO(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function HO(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function an(){return an=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},an.apply(null,arguments)}var VO=e=>{var{dataKey:t,name:r,stroke:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:n,value:yi(r,t),payload:e}]};function YO(e){var{dataKey:t,data:r,stroke:n,strokeWidth:s,fill:i,name:o,hide:l,unit:d}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:i,dataKey:t,nameKey:void 0,name:yi(o,t),hide:l,type:e.tooltipType,color:e.stroke,unit:d}}}var Z0=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function XO(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],s=0;s<t;++s)n=[...n,...r];return n}var ZO=(e,t,r)=>{var n=r.reduce((m,f)=>m+f);if(!n)return Z0(t,e);for(var s=Math.floor(e/n),i=e%n,o=t-e,l=[],d=0,u=0;d<r.length;u+=r[d],++d)if(u+r[d]>i){l=[...r.slice(0,d),i-u];break}var c=l.length%2===0?[0,o]:[o];return[...XO(r,s),...l,...c].map(m=>"".concat(m,"px")).join(", ")};function JO(e,t){var r;if(p.isValidElement(e))r=p.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=fe("recharts-line-dot",typeof e!="boolean"?e.className:"");r=p.createElement(N0,an({},t,{className:n}))}return r}function QO(e,t){return e==null?!1:t?!0:e.length===1}function eT(e){var{clipPathId:t,points:r,props:n}=e,{dot:s,dataKey:i,needClip:o}=n;if(!QO(r,s))return null;var{id:l}=n,d=md(n,zO),u=ih(s),c=on(d),m=_e(s,!0),f=r.map((g,x)=>{var b=It(It(It({key:"dot-".concat(x),r:3},c),m),{},{index:x,cx:g.x,cy:g.y,dataKey:i,value:g.value,payload:g.payload,points:r});return JO(s,b)}),h={clipPath:o?"url(#clipPath-".concat(u?"":"dots-").concat(t,")"):void 0};return p.createElement(Ft,an({className:"recharts-line-dots",key:"dots"},h),f)}function jl(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:s,props:i,showLabels:o}=e,{type:l,layout:d,connectNulls:u,needClip:c}=i,m=md(i,UO),f=It(It({},_e(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(t,")"):void 0,points:n,type:l,layout:d,connectNulls:u,strokeDasharray:s??i.strokeDasharray});return p.createElement(p.Fragment,null,(n==null?void 0:n.length)>1&&p.createElement(Tp,an({},f,{pathRef:r})),p.createElement(eT,{points:n,clipPathId:t,props:i}),o&&Nr.renderCallByParent(i,n))}function tT(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function rT(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:s,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:l,isAnimationActive:d,animationBegin:u,animationDuration:c,animationEasing:m,animateNewValues:f,width:h,height:g,onAnimationEnd:x,onAnimationStart:b}=r,y=s.current,j=O0(r,"recharts-line-"),[w,S]=p.useState(!1),v=p.useCallback(()=>{typeof x=="function"&&x(),S(!1)},[x]),N=p.useCallback(()=>{typeof b=="function"&&b(),S(!0)},[b]),_=tT(n.current),A=i.current;return p.createElement(I0,{begin:u,duration:c,isActive:d,easing:m,onAnimationEnd:v,onAnimationStart:N,key:j},k=>{var C=Dt(A,_+A,k),T=Math.min(C,_),O;if(l){var F="".concat(l).split(/[,\s]+/gim).map(D=>parseFloat(D));O=ZO(T,_,F)}else O=Z0(_,T);if(y){var P=y.length/o.length,$=k===1?o:o.map((D,B)=>{var I=Math.floor(B*P);if(y[I]){var X=y[I];return It(It({},D),{},{x:Dt(X.x,D.x,k),y:Dt(X.y,D.y,k)})}return f?It(It({},D),{},{x:Dt(h*2,D.x,k),y:Dt(g/2,D.y,k)}):It(It({},D),{},{x:D.x,y:D.y})});return s.current=$,p.createElement(jl,{props:r,points:$,clipPathId:t,pathRef:n,showLabels:!w,strokeDasharray:O})}return k>0&&_>0&&(s.current=o,i.current=T),p.createElement(jl,{props:r,points:o,clipPathId:t,pathRef:n,showLabels:!w,strokeDasharray:O})})}function nT(e){var{clipPathId:t,props:r}=e,{points:n,isAnimationActive:s}=r,i=p.useRef(null),o=p.useRef(0),l=p.useRef(null),d=i.current;return s&&n&&n.length&&d!==n?p.createElement(rT,{props:r,clipPathId:t,previousPointsRef:i,longestAnimatedLengthRef:o,pathRef:l}):p.createElement(jl,{props:r,points:n,clipPathId:t,pathRef:l,showLabels:!0})}var aT=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Fe(e.payload,t)});class sT extends p.Component{render(){var t,{hide:r,dot:n,points:s,className:i,xAxisId:o,yAxisId:l,top:d,left:u,width:c,height:m,id:f,needClip:h}=this.props;if(r)return null;var g=fe("recharts-line",i),x=f,{r:b=3,strokeWidth:y=2}=(t=_e(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},j=ih(n),w=b*2+y;return p.createElement(p.Fragment,null,p.createElement(Ft,{className:g},h&&p.createElement("defs",null,p.createElement(F0,{clipPathId:x,xAxisId:o,yAxisId:l}),!j&&p.createElement("clipPath",{id:"clipPath-dots-".concat(x)},p.createElement("rect",{x:u-w/2,y:d-w/2,width:c+w,height:m+w}))),p.createElement(nT,{props:this.props,clipPathId:x}),p.createElement(L0,{xAxisId:o,yAxisId:l,data:s,dataPointFormatter:aT,errorBarOffset:0},this.props.children)),p.createElement(zE,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var J0={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Tn.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function iT(e){var t=Gt(e,J0),{activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:i,animationEasing:o,connectNulls:l,dot:d,hide:u,isAnimationActive:c,label:m,legendType:f,xAxisId:h,yAxisId:g,id:x}=t,b=md(t,WO),{needClip:y}=ld(h,g),j=od(),w=Ni(),S=st(),v=Y(C=>BO(C,h,g,S,x));if(w!=="horizontal"&&w!=="vertical"||v==null||j==null)return null;var{height:N,width:_,x:A,y:k}=j;return p.createElement(sT,an({},b,{id:x,connectNulls:l,dot:d,activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:i,animationEasing:o,isAnimationActive:c,hide:u,label:m,legendType:f,xAxisId:h,yAxisId:g,points:v,layout:w,height:N,width:_,left:A,top:k,needClip:y}))}function oT(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:i,dataKey:o,bandSize:l,displayedData:d}=e;return d.map((u,c)=>{var m=Fe(u,o);if(t==="horizontal"){var f=hu({axis:r,ticks:s,bandSize:l,entry:u,index:c}),h=be(m)?null:n.scale(m);return{x:f,y:h,value:m,payload:u}}var g=be(m)?null:r.scale(m),x=hu({axis:n,ticks:i,bandSize:l,entry:u,index:c});return g==null||x==null?null:{x:g,y:x,value:m,payload:u}}).filter(Boolean)}function sn(e){var t=Gt(e,J0),r=st();return p.createElement(T0,{id:t.id,type:"line"},n=>p.createElement(p.Fragment,null,p.createElement(C0,{legendPayload:VO(t)}),p.createElement(E0,{fn:YO,args:t}),p.createElement(D0,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),p.createElement(iT,an({},t,{id:n}))))}sn.displayName="Line";function gf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gf(Object(r),!0).forEach(function(n){lT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lT(e,t,r){return(t=cT(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cT(e){var t=dT(e,"string");return typeof t=="symbol"?t:t+""}function dT(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uT={xAxis:{},yAxis:{},zAxis:{}},Q0=vt({name:"cartesianAxis",initialState:uT,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=xf(xf({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:mT,removeXAxis:fT,addYAxis:hT,removeYAxis:pT,addZAxis:lI,removeZAxis:cI,updateYAxisWidth:gT}=Q0.actions,xT=Q0.reducer,vT=["children"],yT=["dangerouslySetInnerHTML","ticks"];function ev(e,t,r){return(t=bT(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bT(e){var t=jT(e,"string");return typeof t=="symbol"?t:t+""}function jT(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wl(){return wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wl.apply(null,arguments)}function tv(e,t){if(e==null)return{};var r,n,s=wT(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function wT(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function NT(e){var t=Be(),r=p.useMemo(()=>{var{children:i}=e,o=tv(e,vT);return o},[e]),n=Y(i=>mr(i,r.id)),s=r===n;return p.useEffect(()=>(t(mT(r)),()=>{t(fT(r))}),[r,t]),s?e.children:null}var ST=e=>{var{xAxisId:t,className:r}=e,n=Y(Pp),s=st(),i="xAxis",o=Y(h=>Ln(h,i,t,s)),l=Y(h=>Mx(h,i,t,s)),d=Y(h=>Ex(h,t)),u=Y(h=>SP(h,t));if(d==null||u==null)return null;var{dangerouslySetInnerHTML:c,ticks:m}=e,f=tv(e,yT);return p.createElement(Tr,wl({},f,{scale:o,x:u.x,y:u.y,width:d.width,height:d.height,className:fe("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:l}))},_T=e=>{var t,r,n,s,i;return p.createElement(NT,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},p.createElement(ST,e))};class er extends p.Component{render(){return p.createElement(_T,this.props)}}ev(er,"displayName","XAxis");ev(er,"defaultProps",{allowDataOverflow:ot.allowDataOverflow,allowDecimals:ot.allowDecimals,allowDuplicatedCategory:ot.allowDuplicatedCategory,height:ot.height,hide:!1,mirror:ot.mirror,orientation:ot.orientation,padding:ot.padding,reversed:ot.reversed,scale:ot.scale,tickCount:ot.tickCount,type:ot.type,xAxisId:0});var PT=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:i=0}=e,o=0;if(t){t.forEach(c=>{if(c){var m=c.getBoundingClientRect();m.width>o&&(o=m.width)}});var l=r?r.getBoundingClientRect().width:0,d=s+i,u=o+d+l+(r?n:0);return Math.round(u)}return 0},AT=["dangerouslySetInnerHTML","ticks"];function rv(e,t,r){return(t=kT(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kT(e){var t=ET(e,"string");return typeof t=="symbol"?t:t+""}function ET(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nl(){return Nl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nl.apply(null,arguments)}function CT(e,t){if(e==null)return{};var r,n,s=OT(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function OT(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function TT(e){var t=Be();return p.useEffect(()=>(t(hT(e)),()=>{t(pT(e))}),[e,t]),null}var MT=e=>{var t,{yAxisId:r,className:n,width:s,label:i}=e,o=p.useRef(null),l=p.useRef(null),d=Y(Pp),u=st(),c=Be(),m="yAxis",f=Y(w=>Ln(w,m,r,u)),h=Y(w=>Cx(w,r)),g=Y(w=>_P(w,r)),x=Y(w=>Mx(w,m,r,u));if(p.useLayoutEffect(()=>{var w;if(!(s!=="auto"||!h||id(i)||p.isValidElement(i))){var S=o.current,v=S==null||(w=S.tickRefs)===null||w===void 0?void 0:w.current,{tickSize:N,tickMargin:_}=S.props,A=PT({ticks:v,label:l.current,labelGapWithTick:5,tickSize:N,tickMargin:_});Math.round(h.width)!==Math.round(A)&&c(gT({id:r,width:A}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,h==null?void 0:h.width,h,c,i,r,s]),h==null||g==null)return null;var{dangerouslySetInnerHTML:b,ticks:y}=e,j=CT(e,AT);return p.createElement(Tr,Nl({},j,{ref:o,labelRef:l,scale:f,x:g.x,y:g.y,width:h.width,height:h.height,className:fe("recharts-".concat(m," ").concat(m),n),viewBox:d,ticks:x}))},DT=e=>{var t,r,n,s,i;return p.createElement(p.Fragment,null,p.createElement(TT,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),p.createElement(MT,e))},IT={allowDataOverflow:lt.allowDataOverflow,allowDecimals:lt.allowDecimals,allowDuplicatedCategory:lt.allowDuplicatedCategory,hide:!1,mirror:lt.mirror,orientation:lt.orientation,padding:lt.padding,reversed:lt.reversed,scale:lt.scale,tickCount:lt.tickCount,type:lt.type,width:lt.width,yAxisId:0};class tr extends p.Component{render(){return p.createElement(DT,this.props)}}rv(tr,"displayName","YAxis");rv(tr,"defaultProps",IT);var RT={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oa=p;function $T(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var LT=typeof Object.is=="function"?Object.is:$T,FT=Oa.useSyncExternalStore,BT=Oa.useRef,zT=Oa.useEffect,UT=Oa.useMemo,WT=Oa.useDebugValue;RT.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var i=BT(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=UT(function(){function d(h){if(!u){if(u=!0,c=h,h=n(h),s!==void 0&&o.hasValue){var g=o.value;if(s(g,h))return m=g}return m=h}if(g=m,LT(c,h))return g;var x=n(h);return s!==void 0&&s(g,x)?(c=h,g):(c=h,m=x)}var u=!1,c,m,f=r===void 0?null:r;return[function(){return d(t())},f===null?void 0:function(){return d(f())}]},[t,r,n,s]);var l=FT(e,i[0],i[1]);return zT(function(){o.hasValue=!0,o.value=l},[l]),WT(l),l};function KT(e){e()}function qT(){let e=null,t=null;return{clear(){e=null,t=null},notify(){KT(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var vf={notify(){},get:()=>[]};function GT(e,t){let r,n=vf,s=0,i=!1;function o(x){c();const b=n.subscribe(x);let y=!1;return()=>{y||(y=!0,b(),m())}}function l(){n.notify()}function d(){g.onStateChange&&g.onStateChange()}function u(){return i}function c(){s++,r||(r=e.subscribe(d),n=qT())}function m(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=vf)}function f(){i||(i=!0,c())}function h(){i&&(i=!1,m())}const g={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:d,isSubscribed:u,trySubscribe:f,tryUnsubscribe:h,getListeners:()=>n};return g}var HT=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VT=HT(),YT=()=>typeof navigator<"u"&&navigator.product==="ReactNative",XT=YT(),ZT=()=>VT||XT?p.useLayoutEffect:p.useEffect,JT=ZT(),bo=Symbol.for("react-redux-context"),jo=typeof globalThis<"u"?globalThis:{};function QT(){if(!p.createContext)return{};const e=jo[bo]??(jo[bo]=new Map);let t=e.get(p.createContext);return t||(t=p.createContext(null),e.set(p.createContext,t)),t}var eM=QT();function tM(e){const{children:t,context:r,serverState:n,store:s}=e,i=p.useMemo(()=>{const d=GT(s);return{store:s,subscription:d,getServerState:n?()=>n:void 0}},[s,n]),o=p.useMemo(()=>s.getState(),[s]);JT(()=>{const{subscription:d}=i;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),o!==s.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[i,o]);const l=r||eM;return p.createElement(l.Provider,{value:i},t)}var rM=tM,nM=(e,t)=>t,fd=M([nM,le,Jg,De,Vx,fr,CA,ze],IA),hd=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},nv=Pt("mouseClick"),av=ya();av.startListening({actionCreator:nv,effect:(e,t)=>{var r=e.payload,n=fd(t.getState(),hd(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(LP({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var Sl=Pt("mouseMove"),sv=ya();sv.startListening({actionCreator:Sl,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=Xc(n,n.tooltip.settings.shared),i=fd(n,hd(r));s==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(zx({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(Bx()))}});function aM(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var yf={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},iv=vt({name:"rootProps",initialState:yf,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:yf.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),sM=iv.reducer,{updateOptions:iM}=iv.actions,ov=vt({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:dI}=ov.actions,oM=ov.reducer,lv=Pt("keyDown"),cv=Pt("focus"),pd=ya();pd.startListening({actionCreator:lv,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(Zc(s,Bn(r))),l=fr(r);if(i==="Enter"){var d=Is(r,"axis","hover",String(s.index));t.dispatch(pl({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:d}));return}var u=EP(r),c=u==="left-to-right"?1:-1,m=i==="ArrowRight"?1:-1,f=o+m*c;if(!(l==null||f>=l.length||f<0)){var h=Is(r,"axis","hover",String(f));t.dispatch(pl({active:!0,activeIndex:f.toString(),activeDataKey:void 0,activeCoordinate:h}))}}}}});pd.startListening({actionCreator:cv,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",o=Is(r,"axis","hover",String(i));t.dispatch(pl({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var Nt=Pt("externalEvent"),dv=ya();dv.startListening({actionCreator:Nt,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:bA(r),activeDataKey:Jx(r),activeIndex:nn(r),activeLabel:Zx(r),activeTooltipIndex:nn(r),isTooltipActive:jA(r)};e.payload.handler(n,e.payload.reactEvent)}}});var lM=M([Fn],e=>e.tooltipItemPayloads),cM=M([lM,ka,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(l=>l.settings.dataKey===n);if(s!=null){var{positions:i}=s;if(i!=null){var o=t(i,r);return o}}}),uv=Pt("touchMove"),mv=ya();mv.startListening({actionCreator:uv,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=Xc(n,n.tooltip.settings.shared);if(s==="axis"){var i=fd(n,hd({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(zx({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var o,l=r.touches[0],d=document.elementFromPoint(l.clientX,l.clientY);if(!d||!d.getAttribute)return;var u=d.getAttribute(NN),c=(o=d.getAttribute(SN))!==null&&o!==void 0?o:void 0,m=cM(t.getState(),u,c);t.dispatch(Fx({activeDataKey:c,activeIndex:u,activeCoordinate:m}))}}});var dM=Qh({brush:XC,cartesianAxis:xT,chartData:XA,errorBars:QE,graphicalItems:OE,layout:Gw,legend:IN,options:qA,polarAxis:oE,polarOptions:oM,referenceElements:nO,rootProps:sM,tooltip:FP}),uM=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return xw({reducer:dM,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([av.middleware,sv.middleware,pd.middleware,dv.middleware,mv.middleware]),devTools:{serialize:{replacer:aM},name:"recharts-".concat(r)}})};function mM(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=st(),i=p.useRef(null);if(s)return r;i.current==null&&(i.current=uM(t,n));var o=Jl;return p.createElement(rM,{context:o,store:i.current},r)}function fM(e){var{layout:t,width:r,height:n,margin:s}=e,i=Be(),o=st();return p.useEffect(()=>{o||(i(Ww(t)),i(Kw({width:r,height:n})),i(Uw(s)))},[i,o,t,r,n,s]),null}function hM(e){var t=Be();return p.useEffect(()=>{t(iM(e))},[t,e]),null}var pM=["children"];function gM(e,t){if(e==null)return{};var r,n,s=xM(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function xM(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Us(){return Us=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Us.apply(null,arguments)}var vM={width:"100%",height:"100%"},yM=p.forwardRef((e,t)=>{var r=kp(),n=Ep(),s=Op();if(!vs(r)||!vs(n))return null;var{children:i,otherAttributes:o,title:l,desc:d}=e,u,c;return typeof o.tabIndex=="number"?u=o.tabIndex:u=s?0:void 0,typeof o.role=="string"?c=o.role:c=s?"application":void 0,p.createElement(oh,Us({},o,{title:l,desc:d,role:c,tabIndex:u,width:r,height:n,style:vM,ref:t}),i)}),bM=e=>{var{children:t}=e,r=Y(wi);if(!r)return null;var{width:n,height:s,y:i,x:o}=r;return p.createElement(oh,{width:n,height:s,x:o,y:i},t)},bf=p.forwardRef((e,t)=>{var{children:r}=e,n=gM(e,pM),s=st();return s?p.createElement(bM,null,r):p.createElement(yM,Us({ref:t},n),r)});function jM(){var e=Be(),[t,r]=p.useState(null),n=Y(wN);return p.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;xt(i)&&i!==n&&e(qw(i))}},[t,e,n]),r}function jf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jf(Object(r),!0).forEach(function(n){NM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NM(e,t,r){return(t=SM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SM(e){var t=_M(e,"string");return typeof t=="symbol"?t:t+""}function _M(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PM=p.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:d,onMouseEnter:u,onMouseLeave:c,onMouseMove:m,onMouseUp:f,onTouchEnd:h,onTouchMove:g,onTouchStart:x,style:b,width:y}=e,j=Be(),[w,S]=p.useState(null),[v,N]=p.useState(null);QA();var _=jM(),A=p.useCallback(G=>{_(G),typeof t=="function"&&t(G),S(G),N(G)},[_,t,S,N]),k=p.useCallback(G=>{j(nv(G)),j(Nt({handler:i,reactEvent:G}))},[j,i]),C=p.useCallback(G=>{j(Sl(G)),j(Nt({handler:u,reactEvent:G}))},[j,u]),T=p.useCallback(G=>{j(Bx()),j(Nt({handler:c,reactEvent:G}))},[j,c]),O=p.useCallback(G=>{j(Sl(G)),j(Nt({handler:m,reactEvent:G}))},[j,m]),F=p.useCallback(()=>{j(cv())},[j]),P=p.useCallback(G=>{j(lv(G.key))},[j]),$=p.useCallback(G=>{j(Nt({handler:o,reactEvent:G}))},[j,o]),D=p.useCallback(G=>{j(Nt({handler:l,reactEvent:G}))},[j,l]),B=p.useCallback(G=>{j(Nt({handler:d,reactEvent:G}))},[j,d]),I=p.useCallback(G=>{j(Nt({handler:f,reactEvent:G}))},[j,f]),X=p.useCallback(G=>{j(Nt({handler:x,reactEvent:G}))},[j,x]),Z=p.useCallback(G=>{j(uv(G)),j(Nt({handler:g,reactEvent:G}))},[j,g]),se=p.useCallback(G=>{j(Nt({handler:h,reactEvent:G}))},[j,h]);return p.createElement(a0.Provider,{value:w},p.createElement(jb.Provider,{value:v},p.createElement("div",{className:fe("recharts-wrapper",n),style:wM({position:"relative",cursor:"default",width:y,height:s},b),onClick:k,onContextMenu:$,onDoubleClick:D,onFocus:F,onKeyDown:P,onMouseDown:B,onMouseEnter:C,onMouseLeave:T,onMouseMove:O,onMouseUp:I,onTouchEnd:se,onTouchMove:Z,onTouchStart:X,ref:A},r)))}),AM=["children","className","width","height","style","compact","title","desc"];function kM(e,t){if(e==null)return{};var r,n,s=EM(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function EM(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var CM=p.forwardRef((e,t)=>{var{children:r,className:n,width:s,height:i,style:o,compact:l,title:d,desc:u}=e,c=kM(e,AM),m=on(c);return l?p.createElement(bf,{otherAttributes:m,title:d,desc:u},r):p.createElement(PM,{className:n,style:o,width:s,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},p.createElement(bf,{otherAttributes:m,title:d,desc:u,ref:t},p.createElement(sO,null,r)))}),OM=["width","height"];function _l(){return _l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_l.apply(null,arguments)}function TM(e,t){if(e==null)return{};var r,n,s=MM(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function MM(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var DM={top:5,right:5,bottom:5,left:5},IM={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:DM,reverseStackOrder:!1,syncMethod:"index"},fv=p.forwardRef(function(t,r){var n,s=Gt(t.categoricalChartProps,IM),{width:i,height:o}=s,l=TM(s,OM);if(!vs(i)||!vs(o))return null;var{chartName:d,defaultTooltipEventType:u,validateTooltipEventTypes:c,tooltipPayloadSearcher:m,categoricalChartProps:f}=t,h={chartName:d,defaultTooltipEventType:u,validateTooltipEventTypes:c,tooltipPayloadSearcher:m,eventEmitter:void 0};return p.createElement(mM,{preloadedState:{options:h},reduxStoreName:(n=f.id)!==null&&n!==void 0?n:d},p.createElement(YC,{chartData:f.data}),p.createElement(fM,{width:i,height:o,layout:s.layout,margin:s.margin}),p.createElement(hM,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),p.createElement(CM,_l({},l,{width:i,height:o,ref:r})))}),RM=["axis"],Wi=p.forwardRef((e,t)=>p.createElement(fv,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:RM,tooltipPayloadSearcher:i0,categoricalChartProps:e,ref:t})),$M=["axis","item"],ns=p.forwardRef((e,t)=>p.createElement(fv,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:$M,tooltipPayloadSearcher:i0,categoricalChartProps:e,ref:t}));const LM=({data:e,color:t="#3B82F6"})=>!e||e.length<2?null:a.jsx("div",{className:"h-8 w-16",children:a.jsx(jr,{width:"100%",height:"100%",children:a.jsx(Wi,{data:e,children:a.jsx(sn,{type:"monotone",dataKey:"value",stroke:t,strokeWidth:2,dot:!1,activeDot:!1})})})}),FM=({current:e,previous:t,label:r,format:n="number",sparklineData:s})=>{const i=e-t,o=t>0?i/t*100:0,l=i>0,d=i===0,u=c=>{switch(n){case"percentage":return`${c}%`;case"currency":return`₹${c.toLocaleString()}`;case"decimal":return c.toFixed(2);default:return c.toString()}};return a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:u(e)}),a.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ${d?"bg-gray-100 text-gray-600":l?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[l?a.jsx(Ml,{className:"h-3 w-3"}):a.jsx(Uf,{className:"h-3 w-3"}),a.jsx("span",{children:d?"0%":`${Math.abs(o).toFixed(1)}%`})]}),a.jsx("div",{className:"text-xs text-gray-500",children:"vs last month"}),a.jsx(LM,{data:s,color:l?"#10B981":"#EF4444"})]})},BM=({data:e,color:t="blue"})=>{if(!e||e.length===0)return a.jsx("div",{className:"h-16 bg-gray-100 rounded flex items-center justify-center text-xs text-gray-500",children:"No data available"});const r=Math.max(...e),n=Math.min(...e),s=r-n||1,i=e.map((o,l)=>{const d=l/(e.length-1)*100,u=100-(o-n)/s*100;return`${d},${u}`}).join(" ");return a.jsx("div",{className:"h-16 w-full",children:a.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[a.jsx("polyline",{fill:"none",stroke:t==="blue"?"#3B82F6":t==="green"?"#10B981":"#EF4444",strokeWidth:"2",points:i}),e.map((o,l)=>{const d=l/(e.length-1)*100,u=100-(o-n)/s*100;return a.jsx("circle",{cx:d,cy:u,r:"2",fill:t==="blue"?"#3B82F6":t==="green"?"#10B981":"#EF4444"},l)})]})})},zM=({kpi:e,isOpen:t,onClose:r,historicalData:n})=>!t||!e?null:a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:[e.title," Details"]}),a.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Formula & Calculation"}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600",children:e.description}),a.jsxs("p",{className:"text-sm font-mono mt-2",children:["Current Value: ",e.current]}),a.jsxs("p",{className:"text-sm font-mono",children:["Target: ",e.target]}),a.jsxs("p",{className:"text-sm font-mono",children:["Achievement: ",(e.current/e.target*100).toFixed(1),"%"]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"6-Month Trend"}),a.jsx("div",{className:"h-64",children:a.jsx(jr,{width:"100%",height:"100%",children:a.jsxs(Wi,{data:n,children:[a.jsx(er,{dataKey:"month"}),a.jsx(tr,{}),a.jsx(qr,{}),a.jsx(sn,{type:"monotone",dataKey:"value",stroke:"#3B82F6",strokeWidth:2,dot:{fill:"#3B82F6",strokeWidth:2,r:4}}),a.jsx(sn,{type:"monotone",dataKey:"target",stroke:"#EF4444",strokeWidth:2,strokeDasharray:"5 5",dot:!1})]})})})]})]})]})}),UM=({title:e,current:t,previous:r,target:n,data:s,format:i,color:o,description:l,onEdit:d,onDelete:u,onViewDetails:c,canOverride:m,onOverride:f})=>{const h=n>0?t/n*100:0,g=t>=n,x=(s==null?void 0:s.slice(-6).map((b,y)=>({value:b,index:y})))||[];return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-lg transition-all duration-200 cursor-pointer group",onClick:()=>c&&c({title:e,current:t,previous:r,target:n,data:s,format:i,color:o,description:l}),children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-1 group-hover:text-blue-600 transition-colors",children:e}),a.jsx(Sr,{className:"h-4 w-4 text-gray-400 group-hover:text-blue-500"})]}),a.jsx(FM,{current:t,previous:r,format:i,sparklineData:x})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:`p-2 rounded-lg ${g?"bg-green-100":h>75?"bg-yellow-100":"bg-red-100"}`,children:a.jsxs("div",{className:`text-xs font-medium ${g?"text-green-700":h>75?"text-yellow-700":"text-red-700"}`,children:[h.toFixed(0),"%"]})}),a.jsxs("div",{className:"flex space-x-1",onClick:b=>b.stopPropagation(),children:[m&&a.jsx("button",{onClick:()=>f&&f({title:e,current:t,previous:r,target:n,data:s,format:i,color:o,description:l}),className:"p-1 text-gray-400 hover:text-orange-600 transition-colors",title:"Manager Override",children:a.jsx(Ff,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>d&&d({title:e,current:t,previous:r,target:n,data:s,format:i,color:o,description:l}),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",children:a.jsx(Bf,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>u&&u(),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",children:a.jsx(zf,{className:"h-4 w-4"})})]})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[a.jsxs("span",{children:["Target: ",i==="currency"?`₹${n.toLocaleString()}`:n]}),a.jsxs("span",{children:[h.toFixed(1),"% achieved"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${g?"bg-green-500":h>75?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(h,100)}%`}})})]}),a.jsx("div",{className:"mb-3",children:a.jsx(BM,{data:s,color:o})}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-xs text-gray-500",children:l}),g&&a.jsx(Ks,{className:"h-5 w-5 text-green-500"})]})]})},WM=({kpis:e,employee:t})=>{const r=p.useMemo(()=>{if(!e||e.length===0)return 0;const i=e.map(o=>{const l=o.target>0?o.current/o.target*100:0;return Math.min(l,100)});return i.reduce((o,l)=>o+l,0)/i.length},[e]),n=i=>i>=90?"text-green-600 bg-green-50 border-green-200":i>=75?"text-blue-600 bg-blue-50 border-blue-200":i>=60?"text-yellow-600 bg-yellow-50 border-yellow-200":"text-red-600 bg-red-50 border-red-200",s=i=>i>=90?"Excellent":i>=75?"Good":i>=60?"Average":"Needs Improvement";return a.jsx("div",{className:`border-2 rounded-lg p-6 ${n(r)}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Overall Performance Score"}),a.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-4",children:[a.jsx("div",{className:"text-4xl font-bold",children:r.toFixed(1)}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm font-medium",children:s(r)}),a.jsx("div",{className:"text-xs opacity-75",children:"out of 100"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"KPIs Tracked"}),a.jsx("div",{className:"text-lg font-bold",children:(e==null?void 0:e.length)||0})]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Targets Met"}),a.jsx("div",{className:"text-lg font-bold",children:(e==null?void 0:e.filter(i=>i.current>=i.target).length)||0})]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Avg Achievement"}),a.jsxs("div",{className:"text-lg font-bold",children:[r.toFixed(0),"%"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Rank"}),a.jsx("div",{className:"text-lg font-bold",children:"#-"})]})]}),a.jsx("div",{className:"mt-4 text-xs opacity-75",children:"This score is visible on your profile and agency dashboard"})]})})},KM=({isOpen:e,onClose:t,kpi:r,onSave:n})=>{const[s,i]=p.useState({title:"",target:0,current:0,format:"number",description:""});p.useEffect(()=>{i(r?{title:r.title||"",target:r.target||0,current:r.current||0,format:r.format||"number",description:r.description||""}:{title:"",target:0,current:0,format:"number",description:""})},[r,e]);const o=l=>{l.preventDefault(),n(s),t()};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:r?"Edit KPI":"Add New KPI"}),a.jsxs("form",{onSubmit:o,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"KPI Title"}),a.jsx("input",{type:"text",value:s.title,onChange:l=>i(d=>({...d,title:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Target"}),a.jsx("input",{type:"number",value:s.target,onChange:l=>i(d=>({...d,target:parseFloat(l.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current"}),a.jsx("input",{type:"number",value:s.current,onChange:l=>i(d=>({...d,current:parseFloat(l.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Format"}),a.jsxs("select",{value:s.format,onChange:l=>i(d=>({...d,format:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"number",children:"Number"}),a.jsx("option",{value:"percentage",children:"Percentage"}),a.jsx("option",{value:"currency",children:"Currency (₹)"}),a.jsx("option",{value:"decimal",children:"Decimal"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{value:s.description,onChange:l=>i(d=>({...d,description:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"What does this KPI measure?"})]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),a.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[r?"Update":"Add"," KPI"]})]})]})]})}):null},qM=({employee:e})=>{const t=kt(),{notify:r}=at(),[n,s]=p.useState(!1),[i,o]=p.useState([]),[l,d]=p.useState({}),[u,c]=p.useState(!1),[m,f]=p.useState(null),[h,g]=p.useState("6months"),[x,b]=p.useState(!1),[y,j]=p.useState(null),[w,S]=p.useState(!1),v=Tl(),N=$f(v);p.useEffect(()=>{(async()=>{if(e!=null&&e.id){s(!0);try{const{data:C,error:T}=await t.from("employee_kpis").select("*").eq("employee_id",e.id).eq("month_key",v);if(T)throw T;const{data:O,error:F}=await t.from("employee_kpis").select("*").eq("employee_id",e.id).eq("month_key",N);if(F)throw F;const P=[];let $=new Date;for(let Z=0;Z<6;Z++){const se=$.getFullYear(),G=($.getMonth()+1).toString().padStart(2,"0");P.push(`${se}-${G}`),$.setMonth($.getMonth()-1)}const{data:D,error:B}=await t.from("employee_kpis").select("*").eq("employee_id",e.id).in("month_key",P).order("month_key",{ascending:!0});if(B)throw B;const I=(C||[]).map(Z=>{const se=O==null?void 0:O.find(H=>H.kpi_name===Z.kpi_name),G=(D==null?void 0:D.filter(H=>H.kpi_name===Z.kpi_name))||[];return{id:Z.id,title:Z.kpi_name,current:Z.current_value||0,previous:(se==null?void 0:se.current_value)||0,target:Z.target_value||0,format:Z.format||"number",description:Z.description||"",data:G.map(H=>H.current_value||0),color:Z.color||"blue"}});o(I);const X={};D==null||D.forEach(Z=>{X[Z.kpi_name]||(X[Z.kpi_name]=[]),X[Z.kpi_name].push({month:Z.month_key,value:Z.current_value||0})}),d(X)}catch(C){console.error("Error fetching KPI data:",C),r("Failed to load KPI data","error")}finally{s(!1)}}})()},[e,v,N,t,r]);const _=async k=>{try{const C={employee_id:e.id,month_key:v,kpi_name:k.title,current_value:k.current,target_value:k.target,format:k.format,description:k.description,color:"blue",updated_at:new Date().toISOString()};if(m){const{error:T}=await t.from("employee_kpis").update(C).eq("id",m.id);if(T)throw T;r("KPI updated successfully!","success")}else{const{error:T}=await t.from("employee_kpis").insert(C);if(T)throw T;r("KPI added successfully!","success")}window.location.reload()}catch(C){console.error("Error saving KPI:",C),r("Failed to save KPI","error")}},A=async k=>{if(confirm("Are you sure you want to delete this KPI?"))try{const{error:C}=await t.from("employee_kpis").delete().eq("id",k);if(C)throw C;o(T=>T.filter(O=>O.id!==k)),r("KPI deleted successfully!","success")}catch(C){console.error("Error deleting KPI:",C),r("Failed to delete KPI","error")}};return n?a.jsx(Te,{title:"📊 Performance & KPI Tracking",className:"bg-white",children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(Pe,{size:"lg"})})}):a.jsx(Te,{title:"📊 Performance & KPI Tracking",className:"bg-white",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Your KPIs for ",Jr(v)]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Track your key performance indicators and see growth trends"})]}),a.jsxs("button",{onClick:()=>{f(null),c(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[a.jsx("span",{children:"+"}),a.jsx("span",{children:"Add KPI"})]})]}),a.jsx(WM,{kpis:i,employee:e}),i.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(k=>a.jsx(UM,{...k,onEdit:C=>{f(C),c(!0)},onDelete:()=>A(k.id),onViewDetails:C=>{j(C),b(!0)},canOverride:w,onOverride:C=>{console.log("Override KPI:",C)}},k.id))}):a.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"text-4xl mb-4",children:"📊"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No KPIs Added Yet"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Start tracking your performance by adding your first KPI"}),a.jsx("button",{onClick:()=>{f(null),c(!0)},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add Your First KPI"})]}),a.jsx(KM,{isOpen:u,onClose:()=>c(!1),kpi:m,onSave:_}),a.jsx(zM,{isOpen:x,onClose:()=>b(!1),kpi:y,historicalData:y?l[y.title]||[]:[]}),a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[a.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"ℹ️ How KPI Tracking Works"}),a.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Performance Score:"})," Average of all your KPI achievement rates (target vs actual)"]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Trend Indicators:"})," Compare current month performance with previous month"]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Visual Charts:"})," See your progress over the last 6 months"]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Agency Ranking:"})," Your performance score is used for agency-wide rankings"]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Target Setting:"})," Work with your manager to set realistic and challenging targets"]})]})]})]})})},GM=({month:e,attendanceData:t,onAttendanceChange:r})=>{const n=f=>{const[h,g]=f.split("-").map(Number);return new Date(h,g,0).getDate()},s=f=>{const[h,g]=f.split("-").map(Number);return new Date(h,g-1,1).getDay()},i=n(e),o=s(e),l=Array.from({length:i},(f,h)=>h+1),d=Array.from({length:o},(f,h)=>null),u=f=>{const h=`${e}-${f.toString().padStart(2,"0")}`;return t[h]||"not-set"},c=f=>{switch(f){case"present":return"bg-green-500 text-white";case"wfh":return"bg-blue-500 text-white";case"leave":return"bg-yellow-500 text-white";case"absent":return"bg-red-500 text-white";case"holiday":return"bg-gray-400 text-white";default:return"bg-gray-100 text-gray-600 border border-gray-300"}},m=f=>{const h=`${e}-${f.toString().padStart(2,"0")}`,g=u(f),x=["present","wfh","leave","absent","holiday"],b=x.indexOf(g),y=x[(b+1)%x.length];r(h,y)};return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsxs("h4",{className:"font-medium text-gray-900 mb-4",children:["📅 Attendance Calendar - ",Jr(e)]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 text-xs",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),a.jsx("span",{children:"Present"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded"}),a.jsx("span",{children:"WFH"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded"}),a.jsx("span",{children:"Leave"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-3 h-3 bg-red-500 rounded"}),a.jsx("span",{children:"Absent"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-3 h-3 bg-gray-400 rounded"}),a.jsx("span",{children:"Holiday"})]})]}),a.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(f=>a.jsx("div",{className:"text-center text-xs font-medium text-gray-600 py-2",children:f},f)),d.map((f,h)=>a.jsx("div",{className:"h-8"},`empty-${h}`)),l.map(f=>{const h=u(f);return a.jsx("button",{onClick:()=>m(f),className:`h-8 w-8 text-xs font-medium rounded hover:scale-110 transition-all duration-200 ${c(h)}`,title:`Day ${f} - ${h.replace("-"," ").toUpperCase()} (Click to change)`,children:f},f)})]})]})},HM=({logs:e,onAddLog:t,onUpdateLog:r,onDeleteLog:n})=>{const[s,i]=p.useState(!1),[o,l]=p.useState({type:"whatsapp",count:1,description:"",date:new Date().toISOString().split("T")[0]}),d=()=>{o.description.trim()&&(t(o),l({type:"whatsapp",count:1,description:"",date:new Date().toISOString().split("T")[0]}),i(!1))},u=c=>{switch(c){case"whatsapp":return"💬";case"call":return"📞";case"email":return"📧";case"meeting":return"🤝";default:return"📝"}};return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"📞 Communication Log"}),a.jsx("button",{onClick:()=>i(!0),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:"+ Add Log"})]}),s&&a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Type"}),a.jsxs("select",{value:o.type,onChange:c=>l(m=>({...m,type:c.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",children:[a.jsx("option",{value:"whatsapp",children:"WhatsApp"}),a.jsx("option",{value:"call",children:"Call"}),a.jsx("option",{value:"email",children:"Email"}),a.jsx("option",{value:"meeting",children:"Meeting"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Count"}),a.jsx("input",{type:"number",value:o.count,onChange:c=>l(m=>({...m,count:parseInt(c.target.value)||1})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",min:"1"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Date"}),a.jsx("input",{type:"date",value:o.date,onChange:c=>l(m=>({...m,date:c.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("input",{type:"text",value:o.description,onChange:c=>l(m=>({...m,description:c.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Brief description..."})]})]}),a.jsxs("div",{className:"flex justify-end space-x-2 mt-3",children:[a.jsx("button",{onClick:()=>i(!1),className:"px-3 py-1 text-sm text-gray-600 border border-gray-300 rounded hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{onClick:d,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:"Add Log"})]})]}),a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:e.length>0?e.map((c,m)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-lg",children:u(c.type)}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[c.count,"x ",c.type.charAt(0).toUpperCase()+c.type.slice(1)]}),a.jsx("div",{className:"text-xs text-gray-600",children:c.description}),a.jsx("div",{className:"text-xs text-gray-500",children:c.date})]})]}),a.jsx("button",{onClick:()=>n(m),className:"text-red-500 hover:text-red-700 text-sm",title:"Delete log",children:"🗑️"})]},m)):a.jsxs("div",{className:"text-center py-6 text-gray-500",children:[a.jsx("p",{className:"text-sm",children:"No communication logs added yet"}),a.jsx("p",{className:"text-xs",children:'Click "Add Log" to start tracking your communications'})]})})]})},VM=({meetings:e,onAddMeeting:t,onDeleteMeeting:r})=>{const[n,s]=p.useState(!1),[i,o]=p.useState({title:"",url:"",date:new Date().toISOString().split("T")[0],duration:60}),l=()=>{i.title.trim()&&i.url.trim()&&(t(i),o({title:"",url:"",date:new Date().toISOString().split("T")[0],duration:60}),s(!1))},d=u=>{try{return new URL(u),!0}catch{return!1}};return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"🔗 Meeting URLs"}),a.jsx("button",{onClick:()=>s(!0),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:"+ Add Meeting"})]}),n&&a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Meeting Title"}),a.jsx("input",{type:"text",value:i.title,onChange:u=>o(c=>({...c,title:u.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"e.g., Client Review, Team Standup"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Date"}),a.jsx("input",{type:"date",value:i.date,onChange:u=>o(c=>({...c,date:u.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Meeting URL"}),a.jsx("input",{type:"url",value:i.url,onChange:u=>o(c=>({...c,url:u.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"https://meet.google.com/..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Duration (minutes)"}),a.jsx("input",{type:"number",value:i.duration,onChange:u=>o(c=>({...c,duration:parseInt(u.target.value)||60})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",min:"15",step:"15"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-2 mt-3",children:[a.jsx("button",{onClick:()=>s(!1),className:"px-3 py-1 text-sm text-gray-600 border border-gray-300 rounded hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{onClick:l,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:"Add Meeting"})]})]}),a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:e.length>0?e.map((u,c)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900",children:u.title}),a.jsxs("span",{className:"text-xs text-gray-500",children:["(",u.duration," min)"]})]}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:u.date}),a.jsx("div",{className:"text-xs text-blue-600 mt-1",children:a.jsx("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:d(u.url)?"🔗 Open Meeting":"❌ Invalid URL"})})]}),a.jsx("button",{onClick:()=>r(c),className:"text-red-500 hover:text-red-700 text-sm ml-2",title:"Delete meeting",children:"🗑️"})]},c)):a.jsxs("div",{className:"text-center py-6 text-gray-500",children:[a.jsx("p",{className:"text-sm",children:"No meeting URLs added yet"}),a.jsx("p",{className:"text-xs",children:'Click "Add Meeting" to start tracking your meetings'})]})})]})},YM=({attendanceData:e,communicationLogs:t,meetings:r,submissions:n,month:s})=>{const i=p.useMemo(()=>{new Date(new Date(s+"-01").getFullYear(),new Date(s+"-01").getMonth()+1,0).getDate();const l=25,d=Object.values(e).filter(x=>["present","wfh"].includes(x)).length,u=Math.min(d/l*100,100),c=t.reduce((x,b)=>x+b.count,0),m=Math.min(c/50*100,100),f=Math.min(r.length/10*100,100),h=n.length>0?100:0,g=u*.4+m*.3+f*.2+h*.1;return{total:Math.round(g),breakdown:{attendance:Math.round(u),communication:Math.round(m),meetings:Math.round(f),submissions:Math.round(h)},stats:{attendanceDays:d,workingDays:l,totalCommunications:c,totalMeetings:r.length,submissionsCount:n.length}}},[e,t,r,n,s]),o=l=>l>=90?"text-green-600 bg-green-50 border-green-200":l>=75?"text-blue-600 bg-blue-50 border-blue-200":l>=60?"text-yellow-600 bg-yellow-50 border-yellow-200":"text-red-600 bg-red-50 border-red-200";return a.jsxs("div",{className:`border-2 rounded-lg p-6 ${o(i.total)}`,children:[a.jsx("h4",{className:"text-lg font-semibold mb-4 text-center",children:"📊 Discipline Score"}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsxs("div",{className:"text-4xl font-bold mb-2",children:[i.total,"/100"]}),a.jsx("div",{className:"text-sm opacity-75",children:"Overall Discipline Score"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold",children:i.breakdown.attendance}),a.jsx("div",{className:"text-xs opacity-75",children:"Attendance"}),a.jsxs("div",{className:"text-xs",children:[i.stats.attendanceDays,"/",i.stats.workingDays," days"]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold",children:i.breakdown.communication}),a.jsx("div",{className:"text-xs opacity-75",children:"Communication"}),a.jsxs("div",{className:"text-xs",children:[i.stats.totalCommunications," logs"]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold",children:i.breakdown.meetings}),a.jsx("div",{className:"text-xs opacity-75",children:"Meetings"}),a.jsxs("div",{className:"text-xs",children:[i.stats.totalMeetings," meetings"]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold",children:i.breakdown.submissions}),a.jsx("div",{className:"text-xs opacity-75",children:"Submissions"}),a.jsxs("div",{className:"text-xs",children:[i.stats.submissionsCount," forms"]})]})]}),a.jsx("div",{className:"text-xs opacity-75 text-center",children:"Formula: Attendance (40%) + Communication (30%) + Meetings (20%) + Submissions (10%)"})]})},XM=({employee:e})=>{const t=kt(),{notify:r}=at(),[n,s]=p.useState(!1),[i,o]=p.useState(Tl()),[l,d]=p.useState({}),[u,c]=p.useState([]),[m,f]=p.useState([]),[h,g]=p.useState([]);p.useEffect(()=>{(async()=>{if(e!=null&&e.id){s(!0);try{const{data:v,error:N}=await t.from("employee_attendance").select("*").eq("employee_id",e.id).like("date",`${i}%`);if(N)throw N;const _={};v==null||v.forEach(P=>{_[P.date]=P.status}),d(_);const{data:A,error:k}=await t.from("employee_communications").select("*").eq("employee_id",e.id).like("date",`${i}%`).order("date",{ascending:!1});if(k)throw k;c(A||[]);const{data:C,error:T}=await t.from("employee_meetings").select("*").eq("employee_id",e.id).like("date",`${i}%`).order("date",{ascending:!1});if(T)throw T;f(C||[]);const{data:O,error:F}=await t.from("submissions").select("*").eq("employee_name",e.name).eq("month_key",i);if(F)throw F;g(O||[])}catch(v){console.error("Error loading discipline data:",v),r("Failed to load discipline data","error")}finally{s(!1)}}})()},[e,i,t,r]);const x=async(S,v)=>{try{const{error:N}=await t.from("employee_attendance").upsert({employee_id:e.id,date:S,status:v,updated_at:new Date().toISOString()});if(N)throw N;d(_=>({..._,[S]:v})),r("Attendance updated","success")}catch(N){console.error("Error updating attendance:",N),r("Failed to update attendance","error")}},b=async S=>{try{const{data:v,error:N}=await t.from("employee_communications").insert({employee_id:e.id,type:S.type,count:S.count,description:S.description,date:S.date,created_at:new Date().toISOString()}).select().single();if(N)throw N;c(_=>[v,..._]),r("Communication log added","success")}catch(v){console.error("Error adding communication log:",v),r("Failed to add communication log","error")}},y=async S=>{const v=u[S];if(v.id)try{const{error:N}=await t.from("employee_communications").delete().eq("id",v.id);if(N)throw N;c(_=>_.filter((A,k)=>k!==S)),r("Communication log deleted","success")}catch(N){console.error("Error deleting communication log:",N),r("Failed to delete communication log","error")}},j=async S=>{try{const{data:v,error:N}=await t.from("employee_meetings").insert({employee_id:e.id,title:S.title,url:S.url,date:S.date,duration:S.duration,created_at:new Date().toISOString()}).select().single();if(N)throw N;f(_=>[v,..._]),r("Meeting added","success")}catch(v){console.error("Error adding meeting:",v),r("Failed to add meeting","error")}},w=async S=>{const v=m[S];if(v.id)try{const{error:N}=await t.from("employee_meetings").delete().eq("id",v.id);if(N)throw N;f(_=>_.filter((A,k)=>k!==S)),r("Meeting deleted","success")}catch(N){console.error("Error deleting meeting:",N),r("Failed to delete meeting","error")}};return n?a.jsx(Te,{title:"📋 Discipline Tracking",className:"bg-white",children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(Pe,{size:"lg"})})}):a.jsx(Te,{title:"📋 Discipline Tracking",className:"bg-white",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Select Month:"}),a.jsx("select",{value:i,onChange:S=>o(S.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:12},(S,v)=>{const N=new Date;N.setMonth(N.getMonth()-v);const _=`${N.getFullYear()}-${(N.getMonth()+1).toString().padStart(2,"0")}`;return a.jsx("option",{value:_,children:Jr(_)},_)})})]}),a.jsx(YM,{attendanceData:l,communicationLogs:u,meetings:m,submissions:h,month:i}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx(GM,{month:i,attendanceData:l,onAttendanceChange:x}),a.jsx(HM,{logs:u,onAddLog:b,onDeleteLog:y})]}),a.jsx(VM,{meetings:m,onAddMeeting:j,onDeleteMeeting:w}),a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[a.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"ℹ️ How Discipline Scoring Works"}),a.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Attendance (40%):"})," Based on present/WFH days vs total working days (25/month)"]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Communication (30%):"})," WhatsApp messages, calls, emails logged (target: 50/month)"]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Meetings (20%):"})," Meeting URLs and attendance tracking (target: 10/month)"]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Submissions (10%):"})," Monthly form submissions and reports completed"]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Self-Reporting:"})," All data is self-reported and should be accurate for fair evaluation"]})]})]})]})})};function ZM({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const hv=p.forwardRef(ZM);function JM({title:e,titleId:t,...r},n){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?p.createElement("title",{id:t},e):null,p.createElement("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z",clipRule:"evenodd"}))}const QM=p.forwardRef(JM),wo=({score:e,size:t=120})=>{const r=(t-20)/2,n=2*Math.PI*r,s=n,i=n-e/100*n,o=l=>l>=70?"#10B981":l>=50?"#F59E0B":"#EF4444";return a.jsxs("div",{className:"relative",style:{width:t,height:t},children:[a.jsxs("svg",{width:t,height:t,className:"transform -rotate-90",children:[a.jsx("circle",{cx:t/2,cy:t/2,r,stroke:"#E5E7EB",strokeWidth:"8",fill:"none"}),a.jsx("circle",{cx:t/2,cy:t/2,r,stroke:o(e),strokeWidth:"8",fill:"none",strokeDasharray:s,strokeDashoffset:i,strokeLinecap:"round",className:"transition-all duration-1000 ease-out"})]}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`text-2xl font-bold ${e>=70?"text-green-600":e>=50?"text-yellow-600":"text-red-600"}`,children:e}),a.jsx("div",{className:"text-xs text-gray-500",children:"NPS"})]})})]})},gd=({rating:e,onRatingChange:t,readonly:r=!1,size:n="md"})=>{const[s,i]=p.useState(0),o={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"};return a.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(l=>{const d=l<=(s||e);return a.jsx("button",{type:"button",disabled:r,className:`${r?"cursor-default":"cursor-pointer hover:scale-110"} transition-transform`,onMouseEnter:()=>!r&&i(l),onMouseLeave:()=>!r&&i(0),onClick:()=>!r&&t&&t(l),children:d?a.jsx(QM,{className:`${o[n]} text-yellow-400`}):a.jsx(zv,{className:`${o[n]} text-gray-300`})},l)})})},eD=({type:e,targetEmployee:t,onSubmit:r,onCancel:n})=>{var d;const[s,i]=p.useState({rating:0,feedback:"",category:"",anonymous:!1}),o={peer:["Communication","Collaboration","Technical Skills","Leadership","Reliability"],company:["Work Environment","Management","Tools & Resources","Growth Opportunities","Work-Life Balance"],client:["Service Quality","Communication","Timeliness","Problem Solving","Overall Satisfaction"]},l=u=>{u.preventDefault(),!(s.rating===0||!s.feedback.trim())&&r(s)};return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e==="peer"?`Feedback for ${t==null?void 0:t.name}`:e==="company"?"Company Feedback":"Client Satisfaction"}),a.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),a.jsxs("form",{onSubmit:l,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),a.jsxs("select",{value:s.category,onChange:u=>i({...s,category:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[a.jsx("option",{value:"",children:"Select a category"}),(d=o[e])==null?void 0:d.map(u=>a.jsx("option",{value:u,children:u},u))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating"}),a.jsx(gd,{rating:s.rating,onRatingChange:u=>i({...s,rating:u})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Feedback"}),a.jsx("textarea",{value:s.feedback,onChange:u=>i({...s,feedback:u.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Share your thoughts...",required:!0})]}),e==="peer"&&a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"anonymous",checked:s.anonymous,onChange:u=>i({...s,anonymous:u.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"anonymous",className:"ml-2 text-sm text-gray-700",children:"Submit anonymously"})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{type:"submit",disabled:s.rating===0||!s.feedback.trim(),className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Submit Feedback"}),a.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})]})},No=({feedback:e,showActions:t=!1,onAppreciate:r,onFlag:n})=>{var d;const[s,i]=p.useState(!1),o=150,l=e.feedback.length>o;return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-blue-600",children:e.anonymous?"?":((d=e.from_name)==null?void 0:d.charAt(0))||"U"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.anonymous?"Anonymous":e.from_name||"Unknown"}),a.jsxs("div",{className:"text-xs text-gray-500",children:[e.category," • ",new Date(e.created_at).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(gd,{rating:e.rating,readonly:!0,size:"sm"}),t&&a.jsxs("div",{className:"flex space-x-1",children:[a.jsx("button",{onClick:()=>r&&r(e.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",title:"Appreciate",children:a.jsx(Sd,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>n&&n(e.id),className:"p-1 text-gray-400 hover:text-yellow-500 transition-colors",title:"Flag for review",children:a.jsx(qs,{className:"h-4 w-4"})})]})]})]}),a.jsx("div",{className:"text-sm text-gray-700",children:l&&!s?a.jsxs(a.Fragment,{children:[e.feedback.substring(0,o),"...",a.jsx("button",{onClick:()=>i(!0),className:"text-blue-600 hover:text-blue-700 ml-1",children:"Read more"})]}):a.jsxs(a.Fragment,{children:[e.feedback,l&&s&&a.jsx("button",{onClick:()=>i(!1),className:"text-blue-600 hover:text-blue-700 ml-1",children:"Show less"})]})}),e.appreciations>0&&a.jsxs("div",{className:"mt-2 flex items-center space-x-1 text-xs text-gray-500",children:[a.jsx(Sd,{className:"h-3 w-3 text-red-500"}),a.jsxs("span",{children:[e.appreciations," appreciation",e.appreciations!==1?"s":""]})]})]})},tD=({employee:e})=>{const t=kt(),{notify:r}=at(),[n,s]=p.useState(!0),[i,o]=p.useState("overview"),[l,d]=p.useState(null),[u,c]=p.useState({client_satisfaction:0,peer_rating:0,company_satisfaction:0}),[m,f]=p.useState({received:[],given:[],company:[]}),[h,g]=p.useState([]),[x,b]=p.useState(null);p.useEffect(()=>{e!=null&&e.id&&y()},[e==null?void 0:e.id]);const y=async()=>{s(!0);try{const{data:S,error:v}=await t.from("employee_nps").select("*").eq("employee_id",e.id).eq("month",new Date().toISOString().slice(0,7)).single();S&&!v&&c(S);const{data:N,error:_}=await t.from("employee_feedback").select("*, from_employee:from_employee_id(name)").eq("to_employee_id",e.id).order("created_at",{ascending:!1});if(_)throw _;const{data:A,error:k}=await t.from("employee_feedback").select("*, to_employee:to_employee_id(name)").eq("from_employee_id",e.id).order("created_at",{ascending:!1});if(k)throw k;const{data:C,error:T}=await t.from("company_feedback").select("*").eq("employee_id",e.id).order("created_at",{ascending:!1});if(T)throw T;f({received:N||[],given:A||[],company:C||[]});const{data:O,error:F}=await t.from("employees").select("id, name, department").neq("id",e.id).eq("is_active",!0);if(F)throw F;g(O||[])}catch(S){console.error("Error loading feedback data:",S),r("Failed to load feedback data","error")}finally{s(!1)}},j=async S=>{try{if(l==="peer"&&x){const{error:v}=await t.from("employee_feedback").insert({from_employee_id:e.id,to_employee_id:x.id,rating:S.rating,feedback:S.feedback,category:S.category,anonymous:S.anonymous,month:new Date().toISOString().slice(0,7)});if(v)throw v;r("Peer feedback submitted successfully!","success")}else if(l==="company"){const{error:v}=await t.from("company_feedback").insert({employee_id:e.id,rating:S.rating,feedback:S.feedback,category:S.category,month:new Date().toISOString().slice(0,7)});if(v)throw v;r("Company feedback submitted successfully!","success")}d(null),b(null),y()}catch(v){console.error("Error submitting feedback:",v),r("Failed to submit feedback","error")}},w=async S=>{try{const{error:v}=await t.from("employee_feedback").update({appreciations:t.raw("appreciations + 1")}).eq("id",S);if(v)throw v;r("Appreciation added!","success"),y()}catch(v){console.error("Error adding appreciation:",v),r("Failed to add appreciation","error")}};return n?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(Pe,{size:"lg"})}):a.jsxs(Te,{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Feedback & NPS"}),a.jsx("p",{className:"text-gray-600",children:"Client satisfaction, peer feedback, and company insights"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Sr,{className:"h-5 w-5 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-500",children:"Updated monthly"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 text-center",children:[a.jsx(wo,{score:u.client_satisfaction}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mt-4",children:"Client Satisfaction"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Based on client feedback"})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 text-center",children:[a.jsx(wo,{score:u.peer_rating}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mt-4",children:"Peer Rating"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Team collaboration score"})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 text-center",children:[a.jsx(wo,{score:u.company_satisfaction}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mt-4",children:"Company Satisfaction"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Your workplace happiness"})]})]}),a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex space-x-8",children:[{id:"overview",name:"Overview",icon:"📊"},{id:"received",name:"Received Feedback",icon:"📥"},{id:"given",name:"Given Feedback",icon:"📤"},{id:"company",name:"Company Feedback",icon:"🏢"}].map(S=>a.jsxs("button",{onClick:()=>o(S.id),className:`py-2 px-1 border-b-2 font-medium text-sm ${i===S.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx("span",{className:"mr-2",children:S.icon}),S.name]},S.id))})}),a.jsxs("div",{className:"space-y-6",children:[i==="overview"&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:()=>d("peer"),className:"w-full flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx(Oo,{className:"h-5 w-5 text-blue-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Give Peer Feedback"})]}),a.jsxs("button",{onClick:()=>d("company"),className:"w-full flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx(na,{className:"h-5 w-5 text-green-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Company Feedback"})]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"This Month"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Feedback Received"}),a.jsx("span",{className:"font-medium",children:m.received.length})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Feedback Given"}),a.jsx("span",{className:"font-medium",children:m.given.length})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Average Rating"}),a.jsx("div",{className:"flex items-center space-x-1",children:a.jsx(gd,{rating:m.received.length>0?m.received.reduce((S,v)=>S+v.rating,0)/m.received.length:0,readonly:!0,size:"sm"})})]})]})]})]}),i==="received"&&a.jsx("div",{className:"space-y-4",children:m.received.length>0?m.received.map(S=>{var v;return a.jsx(No,{feedback:{...S,from_name:(v=S.from_employee)==null?void 0:v.name},showActions:!0,onAppreciate:w},S.id)}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(na,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No feedback received yet"})]})}),i==="given"&&a.jsx("div",{className:"space-y-4",children:m.given.length>0?m.given.map(S=>{var v;return a.jsx(No,{feedback:{...S,from_name:`To: ${(v=S.to_employee)==null?void 0:v.name}`}},S.id)}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Oo,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No feedback given yet"}),a.jsx("button",{onClick:()=>d("peer"),className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Give Feedback"})]})}),i==="company"&&a.jsx("div",{className:"space-y-4",children:m.company.length>0?m.company.map(S=>a.jsx(No,{feedback:{...S,from_name:"You",anonymous:!1}},S.id)):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(na,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No company feedback submitted yet"}),a.jsx("button",{onClick:()=>d("company"),className:"mt-4 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:"Share Feedback"})]})})]}),l&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:l==="peer"&&!x?a.jsxs("div",{className:"bg-white rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Employee"}),a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:h.map(S=>a.jsxs("button",{onClick:()=>b(S),className:"w-full text-left p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx("div",{className:"font-medium",children:S.name}),a.jsx("div",{className:"text-sm text-gray-600",children:S.department})]},S.id))}),a.jsx("button",{onClick:()=>d(null),className:"mt-4 w-full py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]}):a.jsx(eD,{type:l,targetEmployee:x,onSubmit:j,onCancel:()=>{d(null),b(null)}})})}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(Sr,{className:"h-5 w-5 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"How NPS Scores Work:"}),a.jsxs("ul",{className:"space-y-1 text-blue-700",children:[a.jsxs("li",{children:["• ",a.jsx("strong",{children:"70-100:"})," Excellent performance, exceeding expectations"]}),a.jsxs("li",{children:["• ",a.jsx("strong",{children:"50-69:"})," Good performance, meeting most expectations"]}),a.jsxs("li",{children:["• ",a.jsx("strong",{children:"0-49:"})," Needs improvement, below expectations"]})]})]})]})})]})},rD=({current:e,target:t,label:r,showPercentage:n=!0})=>{const s=Math.min(e/t*100,100),i=e>=t,o=e>t;return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:r}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:`text-sm font-medium ${i?"text-green-600":e>t*.7?"text-yellow-600":"text-red-600"}`,children:[e,"/",t," hours"]}),n&&a.jsxs("span",{className:`text-xs ${i?"text-green-600":"text-gray-500"}`,children:["(",Math.round(s),"%)"]}),i&&a.jsx(hv,{className:"h-4 w-4 text-green-500"})]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${o?"bg-gradient-to-r from-green-500 to-blue-500":i?"bg-green-500":s>70?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(s,100)}%`}})}),o&&a.jsxs("div",{className:"flex items-center space-x-1 text-xs text-blue-600",children:[a.jsx(Kv,{className:"h-3 w-3"}),a.jsxs("span",{children:["Exceeded target by ",e-t," hours!"]})]})]})},nD=({entry:e,onSave:t,onCancel:r})=>{const[n,s]=p.useState({title:(e==null?void 0:e.title)||"",url:(e==null?void 0:e.url)||"",hours:(e==null?void 0:e.hours)||"",learning_type:(e==null?void 0:e.learning_type)||"video",description:(e==null?void 0:e.description)||"",key_takeaways:(e==null?void 0:e.key_takeaways)||"",completion_date:(e==null?void 0:e.completion_date)||new Date().toISOString().split("T")[0]}),[i,o]=p.useState({}),l=[{value:"video",label:"📹 Video/YouTube",icon:"📹"},{value:"course",label:"🎓 Online Course",icon:"🎓"},{value:"book",label:"📚 Book/Article",icon:"📚"},{value:"workshop",label:"🛠️ Workshop/Webinar",icon:"🛠️"},{value:"podcast",label:"🎧 Podcast",icon:"🎧"},{value:"conference",label:"🎤 Conference/Talk",icon:"🎤"},{value:"practice",label:"💻 Hands-on Practice",icon:"💻"},{value:"other",label:"📝 Other",icon:"📝"}],d=()=>{const c={};if(n.title.trim()||(c.title="Title is required"),!n.url.trim())c.url="URL is required";else try{new URL(n.url)}catch{c.url="Please enter a valid URL"}return!n.hours||parseFloat(n.hours)<=0?c.hours="Hours must be greater than 0":parseFloat(n.hours)>24&&(c.hours="Hours cannot exceed 24 per entry"),n.description.trim()||(c.description="Description is required"),n.key_takeaways.trim()||(c.key_takeaways="Key takeaways are required"),o(c),Object.keys(c).length===0},u=c=>{c.preventDefault(),d()&&t({...n,hours:parseFloat(n.hours)})};return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e?"Edit Learning Entry":"Add Learning Entry"}),a.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),a.jsxs("form",{onSubmit:u,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),a.jsx("input",{type:"text",value:n.title,onChange:c=>s({...n,title:c.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i.title?"border-red-300":"border-gray-300"}`,placeholder:"e.g., React Hooks Tutorial"}),i.title&&a.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.title})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),a.jsx("select",{value:n.learning_type,onChange:c=>s({...n,learning_type:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:l.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL *"}),a.jsx("input",{type:"url",value:n.url,onChange:c=>s({...n,url:c.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i.url?"border-red-300":"border-gray-300"}`,placeholder:"https://..."}),i.url&&a.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.url})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hours *"}),a.jsx("input",{type:"number",step:"0.5",min:"0.5",max:"24",value:n.hours,onChange:c=>s({...n,hours:c.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i.hours?"border-red-300":"border-gray-300"}`,placeholder:"2.5"}),i.hours&&a.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.hours})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Completion Date *"}),a.jsx("input",{type:"date",value:n.completion_date,onChange:c=>s({...n,completion_date:c.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),a.jsx("textarea",{value:n.description,onChange:c=>s({...n,description:c.target.value}),rows:3,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i.description?"border-red-300":"border-gray-300"}`,placeholder:"Brief description of the content..."}),i.description&&a.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.description})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What did you learn? *"}),a.jsx("textarea",{value:n.key_takeaways,onChange:c=>s({...n,key_takeaways:c.target.value}),rows:4,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i.key_takeaways?"border-red-300":"border-gray-300"}`,placeholder:"Key concepts, skills, or insights gained..."}),i.key_takeaways&&a.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.key_takeaways})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:e?"Update Entry":"Add Entry"}),a.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})]})},aD=({entry:e,onEdit:t,onDelete:r,canEdit:n=!0})=>{const[s,i]=p.useState(!1),[o,l]=p.useState(!1),d=c=>({video:"📹",course:"🎓",book:"📚",workshop:"🛠️",podcast:"🎧",conference:"🎤",practice:"💻",other:"📝"})[c]||"📝",u=(c,m=150)=>c.length<=m?c:c.substring(0,m)+"...";return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("span",{className:"text-lg",children:d(e.learning_type)}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),a.jsxs("div",{className:"flex items-center space-x-1 text-sm text-blue-600",children:[a.jsx(jn,{className:"h-4 w-4"}),a.jsxs("span",{children:[e.hours,"h"]})]})]}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-3",children:[a.jsxs("span",{children:["Completed: ",new Date(e.completion_date).toLocaleDateString()]}),a.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 underline",children:"View Resource"})]})]}),n&&a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>t(e),className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",title:"Edit entry",children:a.jsx(Bf,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>r(e.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"Delete entry",children:a.jsx(zf,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Description"}),a.jsxs("p",{className:"text-sm text-gray-600",children:[s?e.description:u(e.description),e.description.length>150&&a.jsx("button",{onClick:()=>i(!s),className:"text-blue-600 hover:text-blue-700 ml-1",children:s?"Show less":"Read more"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Key Takeaways"}),a.jsxs("p",{className:"text-sm text-gray-600",children:[o?e.key_takeaways:u(e.key_takeaways),e.key_takeaways.length>150&&a.jsx("button",{onClick:()=>l(!o),className:"text-blue-600 hover:text-blue-700 ml-1",children:o?"Show less":"Read more"})]})]})]})},sD=({entries:e,currentMonth:t})=>{const r=e.filter(o=>o.completion_date.startsWith(t)),n=r.reduce((o,l)=>o+l.hours,0),s=r.reduce((o,l)=>(o[l.learning_type]=(o[l.learning_type]||0)+l.hours,o),{}),i=o=>({video:"Videos",course:"Courses",book:"Books/Articles",workshop:"Workshops",podcast:"Podcasts",conference:"Conferences",practice:"Practice",other:"Other"})[o]||"Other";return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Learning Statistics"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Entries"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[n.toFixed(1),"h"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Hours"})]})]}),Object.keys(s).length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Learning Types"}),a.jsx("div",{className:"space-y-2",children:Object.entries(s).sort(([,o],[,l])=>l-o).map(([o,l])=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:i(o)}),a.jsxs("span",{className:"text-sm font-medium",children:[l.toFixed(1),"h"]})]},o))})]})]})},iD=({employee:e})=>{const t=kt(),{notify:r}=at(),[n,s]=p.useState(!0),[i,o]=p.useState(!1),[l,d]=p.useState(null),[u,c]=p.useState([]),[m]=p.useState(new Date().toISOString().slice(0,7)),[f]=p.useState(6),[h,g]=p.useState(!0);p.useEffect(()=>{e!=null&&e.id&&x()},[e==null?void 0:e.id]),p.useEffect(()=>{const N=u.filter(_=>_.completion_date.startsWith(m)).reduce((_,A)=>_+A.hours,0);g(N>=f)},[u,m,f]);const x=async()=>{s(!0);try{const{data:v,error:N}=await t.from("learning_entries").select("*").eq("employee_id",e.id).order("completion_date",{ascending:!1});if(N)throw N;c(v||[])}catch(v){console.error("Error loading learning entries:",v),r("Failed to load learning entries","error")}finally{s(!1)}},b=async v=>{try{if(l){const{error:N}=await t.from("learning_entries").update({...v,updated_at:new Date().toISOString()}).eq("id",l.id);if(N)throw N;r("Learning entry updated successfully!","success")}else{const{error:N}=await t.from("learning_entries").insert({...v,employee_id:e.id,month:v.completion_date.slice(0,7)});if(N)throw N;r("Learning entry added successfully!","success")}o(!1),d(null),x()}catch(N){console.error("Error saving learning entry:",N),r("Failed to save learning entry","error")}},y=async v=>{if(confirm("Are you sure you want to delete this learning entry?"))try{const{error:N}=await t.from("learning_entries").delete().eq("id",v);if(N)throw N;r("Learning entry deleted successfully!","success"),x()}catch(N){console.error("Error deleting learning entry:",N),r("Failed to delete learning entry","error")}},j=v=>{d(v),o(!0)},S=u.filter(v=>v.completion_date.startsWith(m)).reduce((v,N)=>v+N.hours,0);return n?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(Pe,{size:"lg"})}):a.jsxs(Te,{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Learning & Growth"}),a.jsx("p",{className:"text-gray-600",children:"Track your continuous learning journey"})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[!h&&a.jsxs("div",{className:"flex items-center space-x-2 bg-red-50 text-red-700 px-3 py-2 rounded-lg",children:[a.jsx(Ff,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Report submission blocked"})]}),a.jsxs("button",{onClick:()=>{d(null),o(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[a.jsx(Uv,{className:"h-4 w-4"}),a.jsx("span",{children:"Add Learning"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 bg-white border border-gray-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Monthly Progress"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Wf,{className:"h-5 w-5 text-blue-600"}),a.jsx("span",{className:"text-sm text-gray-600",children:new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"})})]})]}),a.jsx(rD,{current:S,target:f,label:"Learning Hours"}),S<f&&a.jsx("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(qs,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-yellow-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Learning Target Not Met"}),a.jsxs("p",{children:["You need ",a.jsxs("strong",{children:[(f-S).toFixed(1)," more hours"]})," to reach the minimum ",f," hours required this month. Complete your learning to unlock monthly report submission."]})]})]})}),S>=f&&a.jsx("div",{className:"mt-4 bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(hv,{className:"h-5 w-5 text-green-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-green-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Learning Target Achieved!"}),a.jsxs("p",{children:["Great job! You've completed ",S.toFixed(1)," hours of learning this month. Your monthly report submission is now unlocked."]})]})]})})]}),a.jsx(sD,{entries:u,currentMonth:m})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Learning Entries"}),a.jsxs("div",{className:"text-sm text-gray-600",children:[u.length," total entries"]})]}),i&&a.jsx(nD,{entry:l,onSave:b,onCancel:()=>{o(!1),d(null)}}),u.length>0?a.jsx("div",{className:"space-y-4",children:u.map(v=>a.jsx(aD,{entry:v,onEdit:j,onDelete:y},v.id))}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Wv,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"No learning entries yet"}),a.jsx("button",{onClick:()=>{d(null),o(!0)},className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Add Your First Learning Entry"})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(Sr,{className:"h-5 w-5 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-2",children:"Learning Requirements:"}),a.jsxs("ul",{className:"space-y-1 text-blue-700",children:[a.jsxs("li",{children:["• ",a.jsx("strong",{children:"Minimum 6 hours"})," of learning required per month"]}),a.jsx("li",{children:"• Include URL links to all learning materials"}),a.jsx("li",{children:"• Document key takeaways and learnings for each entry"}),a.jsx("li",{children:"• Monthly report submission is blocked until learning target is met"}),a.jsx("li",{children:"• Learning hours carry over - exceeding targets is encouraged!"})]})]})]})})]})},oD=({insight:e,type:t="info"})=>{const r=()=>{switch(t){case"success":return a.jsx(Ks,{className:"h-5 w-5 text-green-600"});case"warning":return a.jsx(qs,{className:"h-5 w-5 text-yellow-600"});case"danger":return a.jsx(Yv,{className:"h-5 w-5 text-red-600"});case"tip":return a.jsx(Vv,{className:"h-5 w-5 text-blue-600"});default:return a.jsx(Sr,{className:"h-5 w-5 text-gray-600"})}},n=()=>{switch(t){case"success":return"bg-green-50 border-green-200";case"warning":return"bg-yellow-50 border-yellow-200";case"danger":return"bg-red-50 border-red-200";case"tip":return"bg-blue-50 border-blue-200";default:return"bg-gray-50 border-gray-200"}};return a.jsx("div",{className:`border rounded-lg p-4 ${n()}`,children:a.jsxs("div",{className:"flex items-start space-x-3",children:[r(),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:e.title}),a.jsx("p",{className:"text-sm text-gray-700",children:e.description}),e.action&&a.jsxs("p",{className:"text-sm font-medium text-gray-900 mt-2",children:["💡 ",e.action]})]})]})})},So=({value:e,previousValue:t,label:r,format:n="number"})=>{const s=e-t,i=t!==0?s/t*100:0,o=s>0,l=s===0,d=u=>{switch(n){case"percentage":return`${u.toFixed(1)}%`;case"hours":return`${u.toFixed(1)}h`;case"currency":return`$${u.toLocaleString()}`;default:return u.toFixed(1)}};return a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:d(e)}),a.jsx("div",{className:"text-sm text-gray-600 mb-1",children:r}),a.jsxs("div",{className:`flex items-center justify-center space-x-1 text-xs ${l?"text-gray-500":o?"text-green-600":"text-red-600"}`,children:[l?a.jsx(Kf,{className:"h-3 w-3"}):o?a.jsx(Gv,{className:"h-3 w-3"}):a.jsx(Hv,{className:"h-3 w-3"}),a.jsxs("span",{children:[Math.abs(i).toFixed(1),"% vs last month"]})]})]})},lD=({score:e,rank:t,totalEmployees:r})=>{const n=i=>i>=85?"text-green-600 bg-green-100":i>=70?"text-blue-600 bg-blue-100":i>=55?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",s=i=>i>=85?"Exceptional":i>=70?"Strong":i>=55?"Satisfactory":"Needs Improvement";return a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`inline-flex items-center justify-center w-20 h-20 rounded-full text-2xl font-bold ${n(e)}`,children:e.toFixed(0)}),a.jsxs("div",{className:"mt-2",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:s(e)}),a.jsxs("div",{className:"text-xs text-gray-600",children:["Rank #",t," of ",r]})]})]})},cD=({data:e,currentEmployeeId:t})=>{const r=e.map(n=>({...n,isCurrentUser:n.id===t}));return a.jsx("div",{className:"h-64",children:a.jsx(jr,{width:"100%",height:"100%",children:a.jsxs(ns,{data:r,margin:{top:20,right:30,left:20,bottom:5},children:[a.jsx(Hr,{strokeDasharray:"3 3"}),a.jsx(er,{dataKey:"name",angle:-45,textAnchor:"end",height:80,fontSize:12}),a.jsx(tr,{}),a.jsx(qr,{formatter:(n,s)=>[n.toFixed(1),"Score"],labelFormatter:n=>`Employee: ${n}`}),a.jsx(ia,{dataKey:"score",fill:n=>n.isCurrentUser?"#3B82F6":"#E5E7EB",radius:[4,4,0,0]})]})})})},dD=({skills:e})=>{const t=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4"];return a.jsx("div",{className:"space-y-4",children:e.map((r,n)=>{const s=r.score/100*100;return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:r.name}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-sm text-gray-600",children:[r.score.toFixed(1),"/100"]}),r.trend&&a.jsxs("div",{className:`flex items-center space-x-1 text-xs ${r.trend>0?"text-green-600":r.trend<0?"text-red-600":"text-gray-500"}`,children:[r.trend>0?a.jsx(Ml,{className:"h-3 w-3"}):r.trend<0?a.jsx(Uf,{className:"h-3 w-3"}):a.jsx(Kf,{className:"h-3 w-3"}),a.jsxs("span",{children:[Math.abs(r.trend).toFixed(1),"%"]})]})]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"h-2 rounded-full transition-all duration-500",style:{width:`${s}%`,backgroundColor:t[n%t.length]}})})]},r.name)})})},wf=({data:e})=>a.jsx("div",{className:"h-64",children:a.jsx(jr,{width:"100%",height:"100%",children:a.jsxs(Wi,{data:e,margin:{top:20,right:30,left:20,bottom:5},children:[a.jsx(Hr,{strokeDasharray:"3 3"}),a.jsx(er,{dataKey:"month"}),a.jsx(tr,{domain:[0,100]}),a.jsx(qr,{formatter:t=>[t.toFixed(1),"Performance Score"],labelFormatter:t=>`Month: ${t}`}),a.jsx(sn,{type:"monotone",dataKey:"score",stroke:"#3B82F6",strokeWidth:3,dot:{fill:"#3B82F6",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#3B82F6",strokeWidth:2}})]})})}),Nf=({employees:e,currentEmployeeId:t,showFull:r=!1})=>{const n=r?e:e.slice(0,5),s=i=>{switch(i){case 1:return"🥇";case 2:return"🥈";case 3:return"🥉";default:return`#${i}`}};return a.jsxs("div",{className:"space-y-3",children:[n.map((i,o)=>{const l=o+1,d=i.id===t;return a.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${d?"bg-blue-50 border-blue-200":"bg-white border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"text-lg font-bold text-gray-600 w-8",children:s(l)}),a.jsxs("div",{children:[a.jsxs("div",{className:`font-medium ${d?"text-blue-900":"text-gray-900"}`,children:[i.name," ",d&&"(You)"]}),a.jsx("div",{className:"text-sm text-gray-600",children:i.department})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:`text-lg font-bold ${i.score>=85?"text-green-600":i.score>=70?"text-blue-600":i.score>=55?"text-yellow-600":"text-red-600"}`,children:i.score.toFixed(1)}),a.jsx("div",{className:"text-xs text-gray-500",children:"Score"})]})]},i.id)}),!r&&e.length>5&&a.jsxs("div",{className:"text-center text-sm text-gray-500 pt-2",children:["... and ",e.length-5," more employees"]})]})},uD=({employee:e})=>{const t=kt(),{notify:r}=at(),[n,s]=p.useState(!0),[i,o]=p.useState({currentScore:0,previousScore:0,rank:0,totalEmployees:0,insights:[],skills:[],timeline:[],teamComparison:[],leaderboard:[]}),[l,d]=p.useState("overview");p.useEffect(()=>{e!=null&&e.id&&u()},[e==null?void 0:e.id]);const u=async()=>{s(!0);try{const f=new Date().toISOString().slice(0,7),h=new Date(new Date().setMonth(new Date().getMonth()-1)).toISOString().slice(0,7),{data:g,error:x}=await t.from("employee_performance").select("*").eq("employee_id",e.id).in("month",[f,h]).order("month",{ascending:!1});if(x)throw x;const b=g==null?void 0:g.find(D=>D.month===f),y=g==null?void 0:g.find(D=>D.month===h),{data:j,error:w}=await t.from("employee_performance").select("employee_id, overall_score, employees(name, department)").eq("month",f).order("overall_score",{ascending:!1});if(w)throw w;const{data:S,error:v}=await t.from("monthly_kpi_reports").select("*").eq("employee_id",e.id).eq("month",f).single();if(v&&v.code!=="PGRST116")throw v;const{data:N,error:_}=await t.from("employee_performance").select("month, overall_score").eq("employee_id",e.id).order("month",{ascending:!0}).limit(6);if(_)throw _;const A=(b==null?void 0:b.overall_score)||0,k=(y==null?void 0:y.overall_score)||0,C=(j==null?void 0:j.map(D=>{var B,I;return{id:D.employee_id,name:((B=D.employees)==null?void 0:B.name)||"Unknown",department:((I=D.employees)==null?void 0:I.department)||"Unknown",score:D.overall_score||0}}))||[],T=C.findIndex(D=>D.id===e.id)+1,O=c(A,k,S,T,C.length),F=m(S),P=(N==null?void 0:N.map(D=>({month:new Date(D.month+"-01").toLocaleDateString("en-US",{month:"short",year:"2-digit"}),score:D.overall_score||0})))||[],$=C.filter(D=>D.department===e.department).slice(0,10);o({currentScore:A,previousScore:k,rank:T,totalEmployees:C.length,insights:O,skills:F,timeline:P,teamComparison:$,leaderboard:C})}catch(f){console.error("Error loading analytics data:",f),r("Failed to load analytics data","error")}finally{s(!1)}},c=(f,h,g,x,b)=>{const y=[],j=f-h,w=h!==0?j/h*100:0;if(j>5?y.push({title:"🚀 Strong Performance Growth",description:`Your performance score improved by ${j.toFixed(1)} points (${w.toFixed(1)}%) this month!`,action:"Keep up the excellent work and maintain this momentum.",type:"success"}):j<-5&&y.push({title:"📉 Performance Decline",description:`Your performance score decreased by ${Math.abs(j).toFixed(1)} points this month.`,action:"Focus on improving key KPIs and seek feedback from your manager.",type:"warning"}),x<=3?y.push({title:"🏆 Top Performer",description:`You're ranked #${x} out of ${b} employees - exceptional work!`,action:"Consider mentoring others and sharing your best practices.",type:"success"}):x>b*.8&&y.push({title:"⚠️ Performance Below Average",description:"You're in the bottom 20% of performers. Let's work on improvement.",action:"Schedule a meeting with your manager to create an improvement plan.",type:"danger"}),g){const v=["sales_target","client_satisfaction","project_completion","learning_hours"].filter(N=>g[N]&&g[N]<70);v.length>0&&y.push({title:"🎯 Focus Areas Identified",description:`These KPIs need attention: ${v.join(", ").replace(/_/g," ")}.`,action:"Prioritize these areas in your next month's goals.",type:"tip"})}return y.length===0&&y.push({title:"📊 Steady Performance",description:"Your performance is consistent. Look for opportunities to excel.",action:"Set stretch goals and challenge yourself to reach the next level.",type:"info"}),y},m=f=>f?[{name:"Sales Performance",score:f.sales_target||0,trend:Math.random()*20-10},{name:"Client Satisfaction",score:f.client_satisfaction||0,trend:Math.random()*20-10},{name:"Project Delivery",score:f.project_completion||0,trend:Math.random()*20-10},{name:"Learning & Growth",score:f.learning_hours?Math.min(f.learning_hours/6*100,100):0,trend:Math.random()*20-10},{name:"Communication",score:f.communication_score||0,trend:Math.random()*20-10}].filter(h=>h.score>0):[];return n?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(Pe,{size:"lg"})}):a.jsxs(Te,{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Growth & Analytics"}),a.jsx("p",{className:"text-gray-600",children:"Performance insights and team comparisons"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(qv,{className:"h-5 w-5 text-blue-600"}),a.jsx("span",{className:"text-sm text-gray-500",children:"AI-powered insights"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:a.jsx(lD,{score:i.currentScore,rank:i.rank,totalEmployees:i.totalEmployees})}),a.jsx(So,{value:i.currentScore,previousValue:i.previousScore,label:"Overall Score"}),a.jsx(So,{value:i.rank,previousValue:i.rank+1,label:"Team Rank"}),a.jsx(So,{value:85,previousValue:80,label:"Engagement",format:"percentage"})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"📊 Performance Insights"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.insights.map((f,h)=>a.jsx(oD,{insight:f,type:f.type},h))})]}),a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex space-x-8",children:[{id:"overview",name:"Overview",icon:"📊"},{id:"skills",name:"Skills Breakdown",icon:"🎯"},{id:"timeline",name:"Performance Timeline",icon:"📈"},{id:"team",name:"Team Comparison",icon:"👥"},{id:"leaderboard",name:"Leaderboard",icon:"🏆"}].map(f=>a.jsxs("button",{onClick:()=>d(f.id),className:`py-2 px-1 border-b-2 font-medium text-sm ${l===f.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx("span",{className:"mr-2",children:f.icon}),f.name]},f.id))})}),a.jsxs("div",{className:"space-y-6",children:[l==="overview"&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Timeline"}),a.jsx(wf,{data:i.timeline})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top 5 Performers"}),a.jsx(Nf,{employees:i.leaderboard,currentEmployeeId:e.id,showFull:!1})]})]}),l==="skills"&&a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Skills & KPI Breakdown"}),i.skills.length>0?a.jsx(dD,{skills:i.skills}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(vn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No KPI data available for this month"})]})]}),l==="timeline"&&a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"6-Month Performance Timeline"}),i.timeline.length>0?a.jsx(wf,{data:i.timeline}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Ml,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"Not enough historical data available"})]})]}),l==="team"&&a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:["Team Comparison - ",e.department]}),i.teamComparison.length>0?a.jsx(cD,{data:i.teamComparison,currentEmployeeId:e.id}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Oo,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No team data available"})]})]}),l==="leaderboard"&&a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Company Leaderboard"}),a.jsx(Nf,{employees:i.leaderboard,currentEmployeeId:e.id,showFull:!0})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(Sr,{className:"h-5 w-5 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-2",children:"How is my score calculated?"}),a.jsxs("ul",{className:"space-y-1 text-blue-700",children:[a.jsxs("li",{children:["• ",a.jsx("strong",{children:"Performance Score:"})," Average of all KPIs weighted by importance"]}),a.jsxs("li",{children:["• ",a.jsx("strong",{children:"Ranking:"})," Based on overall performance compared to all employees"]}),a.jsxs("li",{children:["• ",a.jsx("strong",{children:"Trends:"})," Month-over-month comparison of key metrics"]}),a.jsxs("li",{children:["• ",a.jsx("strong",{children:"Insights:"})," AI-generated recommendations based on your data"]})]})]})]})})]})},mD=({session:e})=>{var s;const t=i=>i!=null&&i.includes("Mobile")||i!=null&&i.includes("Android")||i!=null&&i.includes("iPhone")?a.jsx(ey,{className:"h-4 w-4 text-blue-600"}):a.jsx(Pd,{className:"h-4 w-4 text-gray-600"}),r=i=>i?i.includes("Chrome")?"Chrome":i.includes("Firefox")?"Firefox":i.includes("Safari")?"Safari":i.includes("Edge")?"Edge":"Other":"Unknown",n=i=>{if(!i)return"Unknown Location";const{city:o,region:l,country:d}=i;return[o,l,d].filter(Boolean).join(", ")};return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-blue-600",children:((s=e.employee_name)==null?void 0:s.charAt(0))||"U"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:e.employee_name}),a.jsx("div",{className:"text-sm text-gray-600",children:e.department})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[t(e.user_agent),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.is_active?"Active":"Ended"})]})]}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(jn,{className:"h-4 w-4"}),a.jsxs("span",{children:["Login: ",new Date(e.login_time).toLocaleString()]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Qv,{className:"h-4 w-4"}),a.jsx("span",{children:n(e.location)})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Hf,{className:"h-4 w-4"}),a.jsxs("span",{children:["IP: ",e.ip_address]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Pd,{className:"h-4 w-4"}),a.jsx("span",{children:r(e.user_agent)})]}),e.logout_time&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(jn,{className:"h-4 w-4"}),a.jsxs("span",{children:["Logout: ",new Date(e.logout_time).toLocaleString()]})]}),e.session_duration&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(jn,{className:"h-4 w-4"}),a.jsxs("span",{children:["Duration: ",Math.round(e.session_duration/60)," minutes"]})]})]})]})},fD=({employee:e,onViewReport:t,onDownloadPDF:r})=>{var n,s;return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-blue-600",children:((n=e.name)==null?void 0:n.charAt(0))||"U"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:e.name}),a.jsxs("div",{className:"text-sm text-gray-600",children:[e.department," • ",e.role]})]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.overall_score>=85?"bg-green-100 text-green-800":e.overall_score>=70?"bg-blue-100 text-blue-800":e.overall_score>=55?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:["Score: ",((s=e.overall_score)==null?void 0:s.toFixed(1))||"N/A"]})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Last Login:"}),a.jsx("div",{className:"font-medium",children:e.last_login?new Date(e.last_login).toLocaleDateString():"Never"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Reports Submitted:"}),a.jsx("div",{className:"font-medium",children:e.reports_count||0})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("button",{onClick:()=>t(e),className:"flex-1 bg-blue-600 text-white py-2 px-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2 text-sm",children:[a.jsx(Jv,{className:"h-4 w-4"}),a.jsx("span",{children:"View Report"})]}),a.jsx("button",{onClick:()=>r(e),className:"bg-gray-600 text-white py-2 px-3 rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center",title:"Download PDF",children:a.jsx(qf,{className:"h-4 w-4"})})]})]})},Sf=({data:e})=>a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Distribution"}),a.jsx("div",{className:"h-64",children:a.jsx(jr,{width:"100%",height:"100%",children:a.jsxs(ns,{data:e.performanceDistribution,children:[a.jsx(Hr,{strokeDasharray:"3 3"}),a.jsx(er,{dataKey:"range"}),a.jsx(tr,{}),a.jsx(qr,{}),a.jsx(ia,{dataKey:"count",fill:"#3B82F6",radius:[4,4,0,0]})]})})})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Department Averages"}),a.jsx("div",{className:"h-64",children:a.jsx(jr,{width:"100%",height:"100%",children:a.jsxs(ns,{data:e.departmentAverages,layout:"horizontal",children:[a.jsx(Hr,{strokeDasharray:"3 3"}),a.jsx(er,{type:"number",domain:[0,100]}),a.jsx(tr,{dataKey:"department",type:"category",width:80}),a.jsx(qr,{}),a.jsx(ia,{dataKey:"average",fill:"#10B981",radius:[0,4,4,0]})]})})})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Monthly Performance Trends"}),a.jsx("div",{className:"h-64",children:a.jsx(jr,{width:"100%",height:"100%",children:a.jsxs(Wi,{data:e.monthlyTrends,children:[a.jsx(Hr,{strokeDasharray:"3 3"}),a.jsx(er,{dataKey:"month"}),a.jsx(tr,{domain:[0,100]}),a.jsx(qr,{}),a.jsx(sn,{type:"monotone",dataKey:"average",stroke:"#3B82F6",strokeWidth:3}),a.jsx(sn,{type:"monotone",dataKey:"median",stroke:"#10B981",strokeWidth:2,strokeDasharray:"5 5"})]})})})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Login Activity (Last 7 Days)"}),a.jsx("div",{className:"h-64",children:a.jsx(jr,{width:"100%",height:"100%",children:a.jsxs(ns,{data:e.loginActivity,children:[a.jsx(Hr,{strokeDasharray:"3 3"}),a.jsx(er,{dataKey:"date"}),a.jsx(tr,{}),a.jsx(qr,{}),a.jsx(ia,{dataKey:"logins",fill:"#8B5CF6",radius:[4,4,0,0]})]})})})]})]}),hD=({filters:e,onFiltersChange:t})=>a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx(Xv,{className:"h-5 w-5 text-gray-600"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filters"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),a.jsxs("select",{value:e.department,onChange:r=>t({...e,department:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"",children:"All Departments"}),a.jsx("option",{value:"Engineering",children:"Engineering"}),a.jsx("option",{value:"Sales",children:"Sales"}),a.jsx("option",{value:"Marketing",children:"Marketing"}),a.jsx("option",{value:"HR",children:"HR"}),a.jsx("option",{value:"Operations",children:"Operations"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),a.jsxs("select",{value:e.role,onChange:r=>t({...e,role:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"",children:"All Roles"}),a.jsx("option",{value:"Manager",children:"Manager"}),a.jsx("option",{value:"Senior",children:"Senior"}),a.jsx("option",{value:"Junior",children:"Junior"}),a.jsx("option",{value:"Intern",children:"Intern"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Month"}),a.jsx("input",{type:"month",value:e.month,onChange:r=>t({...e,month:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),a.jsxs("div",{className:"relative",children:[a.jsx(Zv,{className:"h-4 w-4 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),a.jsx("input",{type:"text",value:e.search,onChange:r=>t({...e,search:r.target.value}),placeholder:"Search employees...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]})]}),pD=({currentUser:e})=>{const t=kt(),{notify:r}=at(),[n,s]=p.useState(!0),[i,o]=p.useState("overview"),[l,d]=p.useState({department:"",role:"",month:new Date().toISOString().slice(0,7),search:""}),[u,c]=p.useState({employees:[],loginSessions:[],analytics:{performanceDistribution:[],departmentAverages:[],monthlyTrends:[],loginActivity:[]},stats:{totalEmployees:0,activeUsers:0,avgPerformance:0,totalLogins:0}}),m=(e==null?void 0:e.role)==="superadmin"||(e==null?void 0:e.is_admin);p.useEffect(()=>{m&&f()},[m,l]);const f=async()=>{var y;s(!0);try{let j=t.from("employees").select(`
          *,
          employee_performance!inner(
            overall_score,
            month
          )
        `).eq("employee_performance.month",l.month);l.department&&(j=j.eq("department",l.department)),l.role&&(j=j.eq("role",l.role)),l.search&&(j=j.ilike("name",`%${l.search}%`));const{data:w,error:S}=await j;if(S)throw S;const{data:v,error:N}=await t.from("login_sessions").select(`
          *,
          employees(name, department)
        `).order("login_time",{ascending:!1}).limit(50);if(N)throw N;const _=h(w),A={totalEmployees:(w==null?void 0:w.length)||0,activeUsers:((y=v==null?void 0:v.filter(k=>k.is_active))==null?void 0:y.length)||0,avgPerformance:(w==null?void 0:w.length)>0?w.reduce((k,C)=>{var T,O;return k+(((O=(T=C.employee_performance)==null?void 0:T[0])==null?void 0:O.overall_score)||0)},0)/w.length:0,totalLogins:(v==null?void 0:v.length)||0};c({employees:w||[],loginSessions:(v==null?void 0:v.map(k=>{var C,T;return{...k,employee_name:(C=k.employees)==null?void 0:C.name,department:(T=k.employees)==null?void 0:T.department}}))||[],analytics:_,stats:A})}catch(j){console.error("Error loading superadmin data:",j),r("Failed to load superadmin data","error")}finally{s(!1)}},h=y=>{const j=[{range:"0-25",count:0},{range:"26-50",count:0},{range:"51-75",count:0},{range:"76-100",count:0}];y.forEach(_=>{var k,C;const A=((C=(k=_.employee_performance)==null?void 0:k[0])==null?void 0:C.overall_score)||0;A<=25?j[0].count++:A<=50?j[1].count++:A<=75?j[2].count++:j[3].count++});const w=y.reduce((_,A)=>{var C,T;const k=A.department||"Unknown";return _[k]||(_[k]=[]),_[k].push(((T=(C=A.employee_performance)==null?void 0:C[0])==null?void 0:T.overall_score)||0),_},{}),S=Object.entries(w).map(([_,A])=>({department:_,average:A.reduce((k,C)=>k+C,0)/A.length}));return{performanceDistribution:j,departmentAverages:S,monthlyTrends:[{month:"Jan",average:72,median:75},{month:"Feb",average:74,median:76},{month:"Mar",average:76,median:78},{month:"Apr",average:78,median:80},{month:"May",average:75,median:77},{month:"Jun",average:77,median:79}],loginActivity:[{date:"Mon",logins:45},{date:"Tue",logins:52},{date:"Wed",logins:48},{date:"Thu",logins:61},{date:"Fri",logins:55},{date:"Sat",logins:23},{date:"Sun",logins:18}]}},g=y=>{r(`Viewing report for ${y.name}`,"info")},x=async y=>{try{r("Generating PDF report...","info");const j={employeeName:y.name,department:y.department,period:new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"}),metrics:{"Performance Score":`${y.overall_score||85}%`,"Projects Completed":y.reports_count||12,"Last Login":y.last_login?new Date(y.last_login).toLocaleDateString():"Never",Department:y.department||"N/A"},summary:`Performance summary for ${y.name} in ${y.department} department. Overall performance score: ${y.overall_score||85}%.`},w=To.generateFilename(`employee-report-${y.name.replace(/\s+/g,"-")}`),S=await Mo(j,"pdf","employeePerformance",w);S.success?r(S.message,"success"):r(S.message,"error")}catch(j){console.error("Error generating PDF:",j),r("Failed to generate PDF report","error")}},b=async()=>{try{r("Generating organization-wide report...","info");const y={month:new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"}),generatedBy:"Super Admin",metrics:{"Total Employees":u.stats.totalEmployees,"Active Users":u.stats.activeUsers,"Average Performance":`${u.stats.avgPerformance.toFixed(1)}%`,"Total Logins":u.stats.totalLogins,"Department Count":[...new Set(u.employees.map(S=>S.department))].length},departmentBreakdown:[...new Set(u.employees.map(S=>S.department))].map(S=>({department:S,employeeCount:u.employees.filter(v=>v.department===S).length,avgPerformance:Math.round(u.employees.filter(v=>v.department===S).reduce((v,N)=>{var _,A;return v+(((A=(_=N.employee_performance)==null?void 0:_[0])==null?void 0:A.overall_score)||0)},0)/u.employees.filter(v=>v.department===S).length)}))},j=To.generateFilename("organization-report"),w=await Mo(y,"excel","monthlyReport",j);w.success?r(w.message,"success"):r(w.message,"error")}catch(y){console.error("Error generating org report:",y),r("Failed to generate organization report","error")}};return m?n?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(Pe,{size:"lg"})}):a.jsxs(Te,{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Superadmin Controls"}),a.jsx("p",{className:"text-gray-600",children:"System administration and organization-wide analytics"})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{onClick:b,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[a.jsx(qf,{className:"h-4 w-4"}),a.jsx("span",{children:"Download Org Report"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Gf,{className:"h-5 w-5 text-green-600"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Superadmin Access"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 text-center",children:[a.jsx(_d,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:u.stats.totalEmployees}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Employees"})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 text-center",children:[a.jsx(Ks,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:u.stats.activeUsers}),a.jsx("div",{className:"text-sm text-gray-600",children:"Active Users"})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 text-center",children:[a.jsx(vn,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:u.stats.avgPerformance.toFixed(1)}),a.jsx("div",{className:"text-sm text-gray-600",children:"Avg Performance"})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 text-center",children:[a.jsx(Hf,{className:"h-8 w-8 text-orange-600 mx-auto mb-2"}),a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:u.stats.totalLogins}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Logins"})]})]}),a.jsx(hD,{filters:l,onFiltersChange:d}),a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex space-x-8",children:[{id:"overview",name:"Overview",icon:"📊"},{id:"employees",name:"Employee Reports",icon:"👥"},{id:"sessions",name:"Login Sessions",icon:"🔐"},{id:"analytics",name:"Analytics",icon:"📈"}].map(y=>a.jsxs("button",{onClick:()=>o(y.id),className:`py-2 px-1 border-b-2 font-medium text-sm ${i===y.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx("span",{className:"mr-2",children:y.icon}),y.name]},y.id))})}),a.jsxs("div",{className:"space-y-6",children:[i==="overview"&&a.jsx(Sf,{data:u.analytics}),i==="employees"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Employee Reports (",u.employees.length,")"]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.employees.map(y=>{var j,w;return a.jsx(fD,{employee:{...y,overall_score:(w=(j=y.employee_performance)==null?void 0:j[0])==null?void 0:w.overall_score},onViewReport:g,onDownloadPDF:x},y.id)})}),u.employees.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(_d,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No employees found with current filters"})]})]}),i==="sessions"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Recent Login Sessions (",u.loginSessions.length,")"]})}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:u.loginSessions.map(y=>a.jsx(mD,{session:y},y.id))}),u.loginSessions.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(jn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No login sessions found"})]})]}),i==="analytics"&&a.jsx(Sf,{data:u.analytics})]}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(Sr,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-yellow-800",children:[a.jsx("p",{className:"font-medium mb-2",children:"Superadmin Features:"}),a.jsxs("ul",{className:"space-y-1 text-yellow-700",children:[a.jsxs("li",{children:["• ",a.jsx("strong",{children:"Employee Reports:"})," View and download individual performance reports"]}),a.jsxs("li",{children:["• ",a.jsx("strong",{children:"Login Tracking:"})," Monitor user sessions with IP and location data"]}),a.jsxs("li",{children:["• ",a.jsx("strong",{children:"Organization Analytics:"})," Company-wide performance insights"]}),a.jsxs("li",{children:["• ",a.jsx("strong",{children:"PDF Generation:"})," Export detailed reports for compliance and review"]}),a.jsxs("li",{children:["• ",a.jsx("strong",{children:"Advanced Filtering:"})," Filter by department, role, time period, and more"]})]})]})]})})]}):a.jsxs(Te,{className:"text-center py-12",children:[a.jsx(qs,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Denied"}),a.jsx("p",{className:"text-gray-600",children:"You don't have permission to access superadmin controls."})]})},gD=({sections:e,currentSection:t})=>{const r=e.filter(i=>i.completed).length,n=e.length,s=r/n*100;return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Dashboard Progress"}),a.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[r,"/",n," sections completed"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-4",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-3 rounded-full transition-all duration-500 ease-out",style:{width:`${s}%`}})}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:e.map((i,o)=>a.jsxs("div",{className:`flex items-center space-x-2 p-2 rounded-lg text-sm ${i.id===t?"bg-blue-100 border border-blue-300":i.completed?"bg-green-50 border border-green-200":"bg-gray-50 border border-gray-200"}`,children:[a.jsx("span",{className:"text-lg",children:i.completed?"✅":i.id===t?"🔄":"⭕"}),a.jsx("span",{className:`font-medium ${i.id===t?"text-blue-700":i.completed?"text-green-700":"text-gray-600"}`,children:i.name})]},i.id))}),a.jsx("div",{className:"mt-3 text-xs text-gray-500 text-center",children:"Complete all sections to unlock your full dashboard potential"})]})},xD=({title:e,description:t,type:r="info"})=>{const[n,s]=p.useState(!1),i=r==="warning"?"text-yellow-600":r==="success"?"text-green-600":"text-blue-600",o=r==="warning"?"bg-yellow-50 border-yellow-200":r==="success"?"bg-green-50 border-green-200":"bg-blue-50 border-blue-200";return a.jsxs("div",{className:`border rounded-lg p-3 ${o}`,children:[a.jsxs("button",{onClick:()=>s(!n),className:"flex items-center justify-between w-full text-left",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Sr,{className:`h-4 w-4 ${i}`}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:e})]}),n?a.jsx(ny,{className:"h-4 w-4 text-gray-500"}):a.jsx(ay,{className:"h-4 w-4 text-gray-500"})]}),n&&a.jsx("div",{className:"mt-2 text-sm text-gray-700",children:t})]})},vD=()=>{const e=[{question:"How is my performance score calculated?",answer:"Your performance score is calculated as the average of all your completed KPIs for the current month. Each KPI is weighted equally, and the final score is updated in real-time as you complete more KPIs."},{question:"What happens if I don't complete my learning hours?",answer:"You need to complete at least 6 hours of learning per month. If you haven't met this requirement, you won't be able to submit your monthly report or request performance reviews until the learning target is achieved."},{question:"How does the discipline score work?",answer:"Your discipline score is calculated based on: Attendance (40%), Communication logs (30%), Meeting participation (20%), and Timely submissions (10%). Each component is scored and weighted to give you an overall discipline rating."},{question:"Can I edit my submitted data?",answer:"Most data can be edited until the monthly deadline. However, some fields may be locked by managers or after certain approval processes. Contact your manager if you need to modify locked data."},{question:"Who can see my performance data?",answer:"Your direct manager, HR team, and superadmins can view your performance data. Peer feedback is anonymized, and client feedback is shared with relevant stakeholders for improvement purposes."}];return a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx(ry,{className:"h-5 w-5 text-gray-600"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Frequently Asked Questions"})]}),a.jsx("div",{className:"space-y-4",children:e.map((t,r)=>a.jsx(xD,{title:t.question,description:t.answer,type:"info"},r))})]})},yD=({activeTab:e,setActiveTab:t,completionStatus:r,currentUser:n,dashboardType:s})=>{const i=()=>{if(!s)return[];switch(s){case"seo":return[{id:"seo-performance",name:"SEO Performance",icon:vn,completed:!0},{id:"keyword-tracking",name:"Keyword Tracking",icon:Ia,completed:r.performance}];case"ads":return[{id:"ads-performance",name:"Ads Performance",icon:vn,completed:!0},{id:"campaign-metrics",name:"Campaign Metrics",icon:Ia,completed:r.performance}];case"social":return[{id:"social-engagement",name:"Social Engagement",icon:na,completed:!0},{id:"content-calendar",name:"Content Calendar",icon:Ad,completed:r.monthly}];case"youtube":return[{id:"youtube-analytics",name:"YouTube Analytics",icon:vn,completed:!0},{id:"video-performance",name:"Video Performance",icon:Ia,completed:r.performance}];default:return[]}},o=[{id:"profile",name:"Profile",icon:ty,completed:r.profile},{id:"monthly",name:"Monthly Forms",icon:Ad,completed:r.monthly},{id:"performance",name:"Performance & KPI",icon:vn,completed:r.performance},{id:"discipline",name:"Discipline",icon:jn,completed:r.discipline},{id:"feedback",name:"Feedback & NPS",icon:na,completed:r.feedback},{id:"learning",name:"Learning & Growth",icon:Wf,completed:r.learning},{id:"analytics",name:"Analytics",icon:Ia,completed:r.analytics}],l=[...i(),...o];return((n==null?void 0:n.role)==="superadmin"||n!=null&&n.is_admin)&&l.push({id:"superadmin",name:"Superadmin",icon:Gf,completed:!0}),a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex space-x-8 overflow-x-auto",children:l.map(d=>{const u=d.icon;return a.jsxs("button",{onClick:()=>t(d.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 whitespace-nowrap ${e===d.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(u,{className:"h-4 w-4"}),a.jsx("span",{children:d.name}),d.completed&&d.id!=="superadmin"&&a.jsx(Ks,{className:"h-4 w-4 text-green-500"})]},d.id)})})})},bD=({employee:e,overallScore:t})=>{var s;const r=()=>{const i=new Date().getHours();return i<12?"Good Morning":i<17?"Good Afternoon":"Good Evening"},n=i=>i>=90?"text-green-600":i>=75?"text-blue-600":i>=60?"text-yellow-600":"text-red-600";return a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg p-6 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold mb-2",children:[r(),", ",(e==null?void 0:e.name)||"Employee","! 👋"]}),a.jsxs("p",{className:"text-blue-100 mb-1",children:[e==null?void 0:e.department," • ",((s=e==null?void 0:e.role)==null?void 0:s[0])||"Employee"]}),a.jsx("p",{className:"text-blue-200 text-sm",children:"Welcome to your comprehensive employee dashboard"})]}),t!==null&&a.jsxs("div",{className:"text-center bg-white bg-opacity-20 rounded-lg p-4",children:[a.jsx("div",{className:`text-3xl font-bold ${n(t)}`,children:t.toFixed(1)}),a.jsx("div",{className:"text-sm text-blue-100",children:"Overall Score"})]})]})})},jD=({employee:e,stats:t})=>a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[t.profileCompletion,"%"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Profile Complete"})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.monthlyFormsCompleted}),a.jsx("div",{className:"text-sm text-gray-600",children:"Forms Completed"})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t.kpisTracked}),a.jsx("div",{className:"text-sm text-gray-600",children:"KPIs Tracked"})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[t.disciplineScore,"/100"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Discipline Score"})]})]}),Dr=({employeeId:e,dashboardType:t})=>{console.log("📊 Loading employee dashboard with type:",t);const r=()=>{if(!t)return"profile";switch(t){case"seo":return"seo-performance";case"ads":return"ads-performance";case"social":return"social-engagement";case"youtube":return"youtube-analytics";default:return"profile"}},n=kt(),{notify:s}=at(),[i,o]=p.useState(!0),[l,d]=p.useState(null),[u,c]=p.useState(r()),[m,f]=p.useState({profileCompletion:0,monthlyFormsCompleted:0,kpisTracked:0,disciplineScore:0,feedbackScore:0,learningHours:0,analyticsScore:0}),[h,g]=p.useState({profile:!1,monthly:!1,performance:!1,discipline:!1,feedback:!1,learning:!1,analytics:!1}),x=()=>{switch(t){case"seo":return[{id:"seo-performance",name:"SEO Performance",icon:"🔍",completed:!0},{id:"keyword-tracking",name:"Keyword Tracking",icon:"📈",completed:m.kpisTracked>0}];case"ads":return[{id:"ads-performance",name:"Ads Performance",icon:"📣",completed:!0},{id:"campaign-metrics",name:"Campaign Metrics",icon:"📊",completed:m.kpisTracked>0}];case"social":return[{id:"social-engagement",name:"Social Engagement",icon:"👥",completed:!0},{id:"content-calendar",name:"Content Calendar",icon:"📅",completed:m.monthlyFormsCompleted>0}];case"youtube":return[{id:"youtube-analytics",name:"YouTube Analytics",icon:"📹",completed:!0},{id:"video-performance",name:"Video Performance",icon:"🎬",completed:m.kpisTracked>0}];default:return[]}},b=p.useMemo(()=>[...t?x():[],{id:"profile",name:"Profile",icon:"👤",completed:m.profileCompletion>=80},{id:"accountability",name:"Accountability",icon:"📋",completed:m.monthlyFormsCompleted>0},{id:"performance",name:"Performance",icon:"📊",completed:m.kpisTracked>0},{id:"discipline",name:"Discipline",icon:"📅",completed:m.disciplineScore>=70}],[m]),y=p.useMemo(()=>{const S=[m.profileCompletion,m.monthlyFormsCompleted>0?100:0,m.kpisTracked>0?85:0,m.disciplineScore,m.feedbackScore||0,m.learningHours*16.67||0,m.analyticsScore||0].filter(v=>v>0);return S.length>0?S.reduce((v,N)=>v+N,0)/S.length:0},[m]);p.useEffect(()=>{(async()=>{if(e){o(!0);try{const{data:v,error:N}=await n.from("employees").select("*").eq("id",e).single();if(N)throw N;d(v),await j(v)}catch(v){console.error("Error loading employee data:",v),s("Failed to load employee data","error")}finally{o(!1)}}})()},[e,n,s]);const j=async S=>{try{const v=["name","phone","department","role","joining_date"],N=v.filter(X=>S[X]).length,_=Math.round(N/v.length*100),{data:A,error:k}=await n.from("submissions").select("id").eq("employee_name",S.name);if(k)throw k;const C=(A==null?void 0:A.length)||0,{data:T,error:O}=await n.from("employee_kpis").select("id").eq("employee_id",S.id);if(O)throw O;const F=(T==null?void 0:T.length)||0,P=new Date().toISOString().slice(0,7),{data:$,error:D}=await n.from("employee_attendance").select("status").eq("employee_id",S.id).like("date",`${P}%`);if(D)throw D;const B=($==null?void 0:$.filter(X=>["present","wfh"].includes(X.status)).length)||0,I=Math.min(Math.round(B/25*100),100);f({profileCompletion:_,monthlyFormsCompleted:C,kpisTracked:F,disciplineScore:I})}catch(v){console.error("Error loading dashboard stats:",v)}},w=S=>{l&&j(l)};return i?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Pe,{size:"lg"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading your dashboard..."})]})}):l?a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx(bD,{employee:l,overallScore:y}),a.jsx(jD,{employee:l,stats:m}),a.jsx(gD,{sections:b,currentSection:u}),a.jsx(yD,{activeTab:u,setActiveTab:c,completionStatus:h,currentUser:l,dashboardType:t}),a.jsxs("div",{className:"space-y-6",children:[u==="profile"&&a.jsx(eb,{employee:l,onUpdate:()=>w()}),u==="monthly"&&a.jsx(ab,{employee:l,onSubmit:()=>w()}),u==="performance"&&a.jsx(qM,{employee:l,onUpdate:()=>w()}),u==="discipline"&&a.jsx(XM,{employee:l,onUpdate:()=>w()}),u==="feedback"&&a.jsx(tD,{employee:l,onUpdate:()=>w()}),u==="learning"&&a.jsx(iD,{employee:l,onUpdate:()=>w()}),u==="analytics"&&a.jsx(uD,{employee:l,onUpdate:()=>w()}),u==="superadmin"&&a.jsx(pD,{currentUser:l})]}),a.jsx("div",{className:"mt-8",children:a.jsx(vD,{})}),a.jsxs("div",{className:"mt-12 text-center text-sm text-gray-500",children:[a.jsxs("p",{children:["Employee Dashboard • Branding Pioneers • ",new Date().getFullYear()]}),a.jsx("p",{className:"mt-1",children:"Need help? Contact your manager or HR department"})]})]})}):a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:"😕"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Employee Not Found"}),a.jsx("p",{className:"text-gray-600",children:"The requested employee profile could not be loaded."})]})})};function wD({allSubmissions:e}){const[t,r]=p.useState("all"),[n,s]=p.useState("All"),[i,o]=p.useState("overall"),l=p.useMemo(()=>{if(!e||e.length===0)return[];let c=e;if(t!=="all"){const f=new Date,h=new Date;switch(t){case"monthly":h.setMonth(f.getMonth()-1);break;case"quarterly":h.setMonth(f.getMonth()-3);break;case"yearly":h.setFullYear(f.getFullYear()-1);break}c=e.filter(g=>g.submissions&&g.submissions.some(x=>{const[b,y]=x.monthKey.split("-").map(Number);return new Date(b,y-1)>=h}))}return n!=="All"&&(c=c.filter(f=>f.department===n)),c.map(f=>{var w,S;let h=0,g=0,x=0,b=0,y=0;if(f.submissions&&f.submissions.length>0){switch(i){case"overall":h=parseFloat(f.averageScore)||0;break;case"kpi":h=f.submissions.reduce((v,N)=>{var _;return v+(((_=N.scores)==null?void 0:_.kpiScore)||0)},0)/f.submissions.length;break;case"learning":h=f.submissions.reduce((v,N)=>{var _;return v+(((_=N.scores)==null?void 0:_.learningScore)||0)},0)/f.submissions.length;break;case"relationship":h=f.submissions.reduce((v,N)=>{var _;return v+(((_=N.scores)==null?void 0:_.relationshipScore)||0)},0)/f.submissions.length;break}if(g=f.submissions.length,x=f.totalHours||0,b=Math.min(1,g/6),f.submissions.length>=2){const v=[...f.submissions].sort((A,k)=>A.monthKey.localeCompare(k.monthKey)),N=((w=v[0].scores)==null?void 0:w.overall)||0,_=((S=v[v.length-1].scores)==null?void 0:S.overall)||0;y=Math.max(0,(_-N)/10)}}const j=h+b*.5+y*.3;return{...f,rankingScore:j,submissionCount:g,totalHours:x,consistencyBonus:b,improvementBonus:y,badge:u(j,g)}}).filter(f=>f.rankingScore>0).sort((f,h)=>h.rankingScore-f.rankingScore).map((f,h)=>({...f,rank:h+1}))},[e,t,n,i]),d=p.useMemo(()=>e?[...new Set(e.map(c=>c.department))].filter(Boolean).sort():[],[e]),u=(c,m)=>c>=9&&m>=6?{type:"gold",icon:"🥇",label:"Gold Champion",className:"bg-gradient-to-r from-yellow-400 to-yellow-600 text-white border-yellow-500"}:c>=8&&m>=4?{type:"silver",icon:"🥈",label:"Silver Star",className:"bg-gradient-to-r from-gray-300 to-gray-500 text-white border-gray-400"}:c>=7&&m>=2?{type:"bronze",icon:"🥉",label:"Bronze Achiever",className:"bg-gradient-to-r from-orange-400 to-orange-600 text-white border-orange-500"}:c>=6?{type:"rising",icon:"🌟",label:"Rising Star",className:"bg-gradient-to-r from-purple-400 to-purple-600 text-white border-purple-500"}:{type:"participant",icon:"💪",label:"Active",className:"bg-gradient-to-r from-blue-400 to-blue-600 text-white border-blue-500"};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 rounded-xl shadow-sm p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:"🏆 Employee Leaderboard"}),a.jsx("p",{className:"opacity-90",children:"Top performing team members across all metrics"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl font-bold",children:l.length}),a.jsx("div",{className:"text-sm opacity-90",children:"Active Performers"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Period"}),a.jsxs("select",{value:t,onChange:c=>r(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"all",children:"All Time"}),a.jsx("option",{value:"monthly",children:"Last Month"}),a.jsx("option",{value:"quarterly",children:"Last Quarter"}),a.jsx("option",{value:"yearly",children:"Last Year"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),a.jsxs("select",{value:n,onChange:c=>s(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"All",children:"All Departments"}),d.map(c=>a.jsx("option",{value:c,children:c},c))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ranking Metric"}),a.jsxs("select",{value:i,onChange:c=>o(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"overall",children:"Overall Score"}),a.jsx("option",{value:"kpi",children:"KPI Performance"}),a.jsx("option",{value:"learning",children:"Learning & Development"}),a.jsx("option",{value:"relationship",children:"Client Relationships"})]})]})]})}),l.length>=3&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6 text-center",children:"🏆 Top Performers"}),a.jsxs("div",{className:"flex justify-center items-end gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"bg-gray-200 rounded-lg p-4 mb-2",children:[a.jsx("div",{className:"text-2xl",children:"🥈"}),a.jsx("div",{className:"text-sm font-medium mt-2",children:l[1].name}),a.jsx("div",{className:"text-xs text-gray-600",children:l[1].department}),a.jsx("div",{className:"text-lg font-bold text-gray-600 mt-1",children:l[1].rankingScore.toFixed(1)}),l[1].hasTestimonial&&a.jsx("div",{className:"text-xs text-purple-700 mt-1",children:"🎥 Testimonial"})]}),a.jsx("div",{className:"bg-gray-400 h-16 rounded-t-lg flex items-center justify-center text-white font-bold",children:"2nd"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"bg-yellow-100 rounded-lg p-4 mb-2 border-2 border-yellow-400",children:[a.jsx("div",{className:"text-3xl",children:"🥇"}),a.jsx("div",{className:"text-sm font-medium mt-2",children:l[0].name}),a.jsx("div",{className:"text-xs text-gray-600",children:l[0].department}),a.jsx("div",{className:"text-xl font-bold text-yellow-600 mt-1",children:l[0].rankingScore.toFixed(1)}),l[0].hasTestimonial&&a.jsx("div",{className:"text-xs text-purple-700 mt-1",children:"🎥 Testimonial"})]}),a.jsx("div",{className:"bg-yellow-500 h-20 rounded-t-lg flex items-center justify-center text-white font-bold",children:"1st"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"bg-orange-100 rounded-lg p-4 mb-2",children:[a.jsx("div",{className:"text-2xl",children:"🥉"}),a.jsx("div",{className:"text-sm font-medium mt-2",children:l[2].name}),a.jsx("div",{className:"text-xs text-gray-600",children:l[2].department}),a.jsx("div",{className:"text-lg font-bold text-orange-600 mt-1",children:l[2].rankingScore.toFixed(1)}),l[2].hasTestimonial&&a.jsx("div",{className:"text-xs text-purple-700 mt-1",children:"🎥 Testimonial"})]}),a.jsx("div",{className:"bg-orange-500 h-12 rounded-t-lg flex items-center justify-center text-white font-bold",children:"3rd"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Complete Rankings"})}),l.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"📋"}),a.jsx("p",{className:"text-gray-500",children:"No performance data available for the selected criteria."})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submissions"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Learning Hours"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Badge"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(c=>a.jsxs("tr",{className:`hover:bg-gray-50 ${c.rank<=3?"bg-gradient-to-r from-yellow-50 to-orange-50":""}`,children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsxs("span",{className:`text-lg font-bold ${c.rank===1?"text-yellow-600":c.rank===2?"text-gray-600":c.rank===3?"text-orange-600":"text-gray-800"}`,children:["#",c.rank]}),c.rank<=3&&a.jsx("span",{className:"ml-2 text-lg",children:c.rank===1?"🥇":c.rank===2?"🥈":"🥉"})]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:c.name}),a.jsx("div",{className:"text-sm text-gray-500",children:c.phone})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:c.department}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:`text-lg font-semibold ${c.rankingScore>=9?"text-green-600":c.rankingScore>=8?"text-blue-600":c.rankingScore>=7?"text-yellow-600":"text-gray-600"}`,children:c.rankingScore.toFixed(1)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:c.submissionCount}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[c.totalHours.toFixed(1),"h"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-xs font-medium border transition-all duration-200 hover:shadow-lg hover:scale-105 cursor-default ${c.badge.className}`,children:[a.jsx("span",{className:"mr-1.5 text-sm",children:c.badge.icon}),c.badge.label]})})]},`${c.name}-${c.phone}`))})]})})]})]})}const ND=e=>{if(!e)return{isEligible:!1,reason:"User information not available"};if((e==null?void 0:e.role)==="intern"||(e==null?void 0:e.userType)==="intern"||(e==null?void 0:e.user_category)==="intern")return{isEligible:!1,reason:"Interns are not eligible for the Arcade Program"};if((e==null?void 0:e.department)==="HR"||(e==null?void 0:e.department)==="hr"||(e==null?void 0:e.role)==="HR")return{isEligible:!1,reason:"HR department employees are not eligible for the Arcade Program"};const t=(e==null?void 0:e.employment_type)||(e==null?void 0:e.employee_type);return t&&!(t==="full-time"||t==="fulltime"||t==="full_time"||t==="Full-time"||t==="Full Time")?{isEligible:!1,reason:"Only full-time employees are eligible for the Arcade Program"}:{isEligible:!0,reason:"User is eligible for the Arcade Program"}},SD=(e,t)=>{var o;const r=[];["hr","team_leader","manager","operations_head"].includes((o=t==null?void 0:t.role)==null?void 0:o.toLowerCase())||r.push("Only HR, Team Leaders, Managers, or Operations Head can create escalations"),e.employee_id||r.push("Employee selection is required"),e.escalation_type||r.push("Escalation type is required"),(!e.points_deducted||e.points_deducted<=0)&&r.push("Points deduction must be greater than 0"),(!e.reason||e.reason.trim().length<20)&&r.push("Reason must be at least 20 characters long");const i={client_complaint:30,missed_meeting:10,performance_issue:10,behavioral_issue:15,other:20}[e.escalation_type]||20;return e.points_deducted>i&&r.push(`Maximum ${i} points can be deducted for ${e.escalation_type}`),{isValid:r.length===0,errors:r}},_D=({currentUser:e,onNavigate:t})=>{var Q,ce;const r=kt(),{handleDataFetching:n,handleDatabaseOperation:s,showSuccessNotification:i,showErrorModal:o,showWarningModal:l}=Py(),[d,u]=p.useState([]),[c,m]=p.useState([]),[f,h]=p.useState([]),[g,x]=p.useState({}),[b,y]=p.useState(!0),[j,w]=p.useState("activities"),[S,v]=p.useState(""),[N,_]=p.useState([]),[A,k]=p.useState(!1),[C,T]=p.useState({employee_id:"",escalation_type:"",escalation_subtype:"",description:"",points_deducted:0});p.useEffect(()=>{e!=null&&e.id&&(F(),P(),$(),D(),O())},[e]);const O=async()=>{await n(async()=>{const{data:E,error:z}=await r.from("employees").select("id, name, email, department").neq("department","HR").order("name");if(z)throw z;return E||[]},{onSuccess:E=>{_(E)},onError:E=>{l("Failed to load employees. Some features may be limited."),_([])}})},F=async()=>{await n(async()=>{const{data:E,error:z}=await r.from("arcade_activities").select(`
            *,
            employees!inner(name, email, department)
          `).eq("status","pending").order("created_at",{ascending:!1});if(z)throw z;return E||[]},{onSuccess:E=>{u(E)},onError:E=>{l("Failed to load pending activities."),u([])}})},P=async()=>{await n(async()=>{const{data:E,error:z}=await r.from("arcade_redemptions").select(`
            *,
            employees!inner(name, email, department)
          `).eq("status","pending").order("created_at",{ascending:!1});if(z)throw z;return E||[]},{onSuccess:E=>{m(E)},onError:E=>{l("Failed to load pending redemptions."),m([])}})},$=async()=>{await n(async()=>{const{data:E,error:z}=await r.from("arcade_escalations").select(`
            *,
            employees!inner(name, email, department)
          `).order("created_at",{ascending:!1}).limit(50);if(z)throw z;return E||[]},{onSuccess:E=>{h(E)},onError:E=>{l("Failed to load escalations."),h([])}})},D=async()=>{await n(async()=>{const{data:E,error:z}=await r.from("arcade_employee_summary").select("*");if(z)throw z;return E||[]},{onSuccess:E=>{const z=E.length,L=E.reduce((Ne,ie)=>Ne+(ie.total_points_earned||0),0),V=E.reduce((Ne,ie)=>Ne+(ie.total_points_redeemed||0),0),ee=z>0?Math.round(L/z):0,R=E.sort((Ne,ie)=>(ie.current_points||0)-(Ne.current_points||0)).slice(0,5);x({totalEmployees:z,totalPointsEarned:L,totalPointsRedeemed:V,averagePoints:ee,topPerformers:R})},onError:E=>{l("Failed to load analytics data."),x({})},onFinally:()=>{y(!1)}})},B=async E=>{await s(async()=>{const{error:z}=await r.from("arcade_activities").update({status:"approved",approved_by:e.id,approved_at:new Date().toISOString()}).eq("id",E);if(z)throw z},{onSuccess:()=>{i("Activity approved successfully!"),F(),D()},onError:z=>{o("Failed to approve activity",z.message)}})},I=async E=>{await s(async()=>{const{error:z}=await r.from("arcade_activities").update({status:"rejected",approved_by:e.id,approved_at:new Date().toISOString()}).eq("id",E);if(z)throw z},{onSuccess:()=>{i("Activity rejected successfully!"),F()},onError:z=>{o("Failed to reject activity",z.message)}})},X=async E=>{try{const{error:z}=await r.from("arcade_redemptions").update({status:"approved",approved_by:e.id,approved_at:new Date().toISOString()}).eq("id",E);if(z){console.error("Error approving redemption:",z),alert("Error approving redemption");return}alert("Redemption approved successfully!"),P(),D()}catch(z){console.error("Error:",z),alert("Error approving redemption")}},Z=async E=>{try{const{error:z}=await r.from("arcade_redemptions").update({status:"rejected",approved_by:e.id,approved_at:new Date().toISOString()}).eq("id",E);if(z){console.error("Error rejecting redemption:",z),alert("Error rejecting redemption");return}alert("Redemption rejected successfully!"),P()}catch(z){console.error("Error:",z),alert("Error rejecting redemption")}},se=async E=>{try{const{error:z}=await r.from("arcade_redemptions").update({status:"fulfilled",fulfilled_at:new Date().toISOString()}).eq("id",E);if(z){console.error("Error fulfilling redemption:",z),alert("Error fulfilling redemption");return}alert("Redemption marked as fulfilled!"),P()}catch(z){console.error("Error:",z),alert("Error fulfilling redemption")}},G=async E=>{E.preventDefault();try{const z=SD(C,e);if(!z.isValid){alert(z.errors.join(". "));return}const{data:L}=await r.from("employees").select("*").eq("id",C.employee_id).single();if(L){const ee=ND(L);if(!ee.isEligible){alert(`Target employee is not eligible for Arcade Program: ${ee.reason}`);return}}const{error:V}=await r.from("arcade_escalations").insert([{employee_id:C.employee_id,escalation_type:C.escalation_type,escalation_subtype:C.escalation_subtype,description:C.description,points_deducted:C.points_deducted,reported_by:e.id}]);if(V){console.error("Error creating escalation:",V),alert("Error creating escalation");return}alert("Escalation created successfully!"),k(!1),T({employee_id:"",escalation_type:"",escalation_subtype:"",description:"",points_deducted:0}),$(),D()}catch(z){console.error("Error:",z),alert("Error creating escalation")}},H=E=>({client_issues:[{value:"whatsapp_complaint",label:"WhatsApp Complaint (-2 pts)",points:2},{value:"call_escalation",label:"Call Escalation (-5 pts)",points:5},{value:"non_response",label:"Non-response to Client (-2 pts/day)",points:2},{value:"client_loss",label:"Client Loss (-30 pts)",points:30}],meeting_attendance:[{value:"daily_operations",label:"Daily Operations (-1 pt)",points:1},{value:"tactical",label:"Tactical (-3 pts)",points:3},{value:"strategic",label:"Strategic (-5 pts)",points:5}],performance_issues:[{value:"missed_deadline",label:"Missed Deadline (-3 pts)",points:3},{value:"missed_tactical_target",label:"Missed Tactical Target (-1 pt)",points:1},{value:"missed_strategic_target",label:"Missed Strategic Target (-2 pts)",points:2},{value:"late_payments",label:"Late Payments (-2 pts/month)",points:2}],behavioral_issues:[{value:"colleague_misbehavior",label:"Colleague Misbehavior (-10 pts)",points:10},{value:"unannounced_leaves",label:"Unannounced Leaves (-5 pts)",points:5}]})[E]||[],J=(E,z)=>{const L={client_engagement:"Client Engagement",content_creation:"Content Creation",attendance:"Attendance",performance:"Performance",polls:"Poll Performance"};return{whatsapp_appreciation:"WhatsApp Appreciation",google_review:"Google Review",video_testimonial:"Video Testimonial",client_referral:"Client Referral",bp_reel:"BP Reel",full_video:"Full Video",monthly_attendance:"100% Monthly Attendance",employee_referral:"Employee Referral",tactical_goals:"Tactical Goals",strategic_goals:"Strategic Goals",poll_first:"Poll - 1st Place",poll_second:"Poll - 2nd Place",poll_third:"Poll - 3rd Place"}[z]||`${L[E]||E} - ${z}`};return b?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading admin panel..."})]})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"🎮 Arcade Admin Panel"}),a.jsx("p",{className:"text-gray-600",children:"Manage the Arcade program and employee activities"})]}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("button",{onClick:()=>k(!0),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"⚠️ Create Escalation"}),a.jsx("button",{onClick:()=>t("dashboard"),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"← Back to Dashboard"})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-3xl mr-4",children:"👥"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Employees"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g.totalEmployees})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-3xl mr-4",children:"💰"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Points Earned"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:g.totalPointsEarned})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-3xl mr-4",children:"🛍️"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Points Redeemed"}),a.jsx("p",{className:"text-2xl font-bold text-purple-600",children:g.totalPointsRedeemed})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"text-3xl mr-4",children:"📊"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Average Points"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:g.averagePoints})]})]})})]}),a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"-mb-px flex space-x-8",children:[{key:"activities",label:"Pending Activities",icon:"💰",count:d.length},{key:"redemptions",label:"Pending Redemptions",icon:"🛍️",count:c.length},{key:"escalations",label:"Recent Escalations",icon:"⚠️",count:f.length},{key:"analytics",label:"Top Performers",icon:"🏆",count:((Q=g.topPerformers)==null?void 0:Q.length)||0}].map(E=>a.jsxs("button",{onClick:()=>w(E.key),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${j===E.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx("span",{children:E.icon}),a.jsx("span",{children:E.label}),a.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs",children:E.count})]},E.key))})})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg",children:[j==="activities"&&a.jsxs("div",{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Pending Activities"}),d.length>0?a.jsx("div",{className:"space-y-4",children:d.map(E=>a.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:J(E.activity_type,E.activity_subtype)}),a.jsxs("span",{className:"font-bold text-green-600",children:["+",E.points_earned," pts"]})]}),a.jsx("p",{className:"text-gray-600 mb-2",children:E.description}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[a.jsxs("span",{children:["👤 ",E.employees.name]}),a.jsxs("span",{children:["📧 ",E.employees.email]}),a.jsxs("span",{children:["🏢 ",E.employees.department]}),a.jsxs("span",{children:["📅 ",new Date(E.created_at).toLocaleDateString()]})]}),E.proof_url&&a.jsx("a",{href:E.proof_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm mt-2 inline-block",children:"📎 View Proof"})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>B(E.id),className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 transition-colors",children:"✅ Approve"}),a.jsx("button",{onClick:()=>I(E.id),className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition-colors",children:"❌ Reject"})]})]})},E.id))}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"✅"}),a.jsx("p",{className:"text-gray-500",children:"No pending activities"})]})]}),j==="redemptions"&&a.jsxs("div",{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Pending Redemptions"}),c.length>0?a.jsx("div",{className:"space-y-4",children:c.map(E=>a.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:E.reward_name}),a.jsxs("span",{className:"font-bold text-purple-600",children:["-",E.points_required," pts"]}),a.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs capitalize",children:E.reward_type.replace("_"," ")})]}),a.jsx("p",{className:"text-gray-600 mb-2",children:E.request_details}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[a.jsxs("span",{children:["👤 ",E.employees.name]}),a.jsxs("span",{children:["📧 ",E.employees.email]}),a.jsxs("span",{children:["🏢 ",E.employees.department]}),a.jsxs("span",{children:["📅 ",new Date(E.created_at).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>X(E.id),className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 transition-colors",children:"✅ Approve"}),a.jsx("button",{onClick:()=>Z(E.id),className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition-colors",children:"❌ Reject"}),E.status==="approved"&&a.jsx("button",{onClick:()=>se(E.id),className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors",children:"📦 Fulfill"})]})]})},E.id))}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"✅"}),a.jsx("p",{className:"text-gray-500",children:"No pending redemptions"})]})]}),j==="escalations"&&a.jsxs("div",{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Recent Escalations"}),f.length>0?a.jsx("div",{className:"space-y-4",children:f.map(E=>a.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsxs("h3",{className:"font-medium text-gray-900 capitalize",children:[E.escalation_type.replace("_"," ")," - ",E.escalation_subtype.replace("_"," ")]}),a.jsxs("span",{className:"font-bold text-red-600",children:["-",E.points_deducted," pts"]})]}),a.jsx("p",{className:"text-gray-600 mb-2",children:E.description}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[a.jsxs("span",{children:["👤 ",E.employees.name]}),a.jsxs("span",{children:["📧 ",E.employees.email]}),a.jsxs("span",{children:["🏢 ",E.employees.department]}),a.jsxs("span",{children:["📅 ",new Date(E.created_at).toLocaleDateString()]})]})]})})},E.id))}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"📋"}),a.jsx("p",{className:"text-gray-500",children:"No escalations found"})]})]}),j==="analytics"&&a.jsxs("div",{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Top Performers"}),((ce=g.topPerformers)==null?void 0:ce.length)>0?a.jsx("div",{className:"space-y-4",children:g.topPerformers.map((E,z)=>a.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"text-2xl",children:z===0?"🥇":z===1?"🥈":z===2?"🥉":"🏅"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:E.employee_name}),a.jsx("p",{className:"text-sm text-gray-600",children:E.department})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-lg font-bold text-blue-600",children:[E.current_points," pts"]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Earned: ",E.total_points_earned]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Redeemed: ",E.total_points_redeemed]})]})]})},E.employee_id))}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"🏆"}),a.jsx("p",{className:"text-gray-500",children:"No performance data available"})]})]})]}),A&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Create Escalation"}),a.jsxs("form",{onSubmit:G,children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee"}),a.jsxs("select",{value:C.employee_id,onChange:E=>T({...C,employee_id:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[a.jsx("option",{value:"",children:"Select Employee"}),N.map(E=>a.jsxs("option",{value:E.id,children:[E.name," - ",E.department]},E.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Escalation Type"}),a.jsxs("select",{value:C.escalation_type,onChange:E=>{T({...C,escalation_type:E.target.value,escalation_subtype:"",points_deducted:0})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[a.jsx("option",{value:"",children:"Select Type"}),a.jsx("option",{value:"client_issues",children:"Client Issues"}),a.jsx("option",{value:"meeting_attendance",children:"Meeting Attendance"}),a.jsx("option",{value:"performance_issues",children:"Performance Issues"}),a.jsx("option",{value:"behavioral_issues",children:"Behavioral Issues"})]})]}),C.escalation_type&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Specific Issue"}),a.jsxs("select",{value:C.escalation_subtype,onChange:E=>{const z=H(C.escalation_type).find(L=>L.value===E.target.value);T({...C,escalation_subtype:E.target.value,points_deducted:(z==null?void 0:z.points)||0})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[a.jsx("option",{value:"",children:"Select Issue"}),H(C.escalation_type).map(E=>a.jsx("option",{value:E.value,children:E.label},E.value))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Points to Deduct"}),a.jsx("input",{type:"number",value:C.points_deducted,onChange:E=>T({...C,points_deducted:parseInt(E.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{value:C.description,onChange:E=>T({...C,description:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"Provide details about the escalation...",required:!0})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsx("button",{type:"button",onClick:()=>k(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Create Escalation"})]})]})]})})]})})},xd=p.createContext(),PD=({children:e,defaultValue:t,value:r,onValueChange:n,className:s="",...i})=>{const[o,l]=p.useState(r||t||""),d=u=>{l(u),n&&n(u)};return a.jsx(xd.Provider,{value:{activeTab:o,setActiveTab:d},children:a.jsx("div",{className:s,...i,children:e})})},AD=({children:e,className:t="",...r})=>a.jsx("div",{className:`inline-flex h-10 items-center justify-center rounded-md bg-gray-100 p-1 text-gray-500 ${t}`,...r,children:e}),Xa=({children:e,value:t,className:r="",...n})=>{const{activeTab:s,setActiveTab:i}=p.useContext(xd),o=s===t;return a.jsx("button",{className:`inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ${o?"bg-white text-gray-950 shadow-sm":"text-gray-600 hover:text-gray-900"} ${r}`,onClick:()=>i(t),...n,children:e})},Za=({children:e,value:t,className:r="",...n})=>{const{activeTab:s}=p.useContext(xd);return s!==t?null:a.jsx("div",{className:`mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 ${r}`,...n,children:e})},hn=({children:e,onValueChange:t,defaultValue:r,value:n,...s})=>{const[i,o]=p.useState(!1),[l,d]=p.useState(n||r||""),u=c=>{d(c),t&&t(c),o(!1)};return a.jsx("div",{className:"relative",...s,children:mt.Children.map(e,c=>mt.isValidElement(c)?mt.cloneElement(c,{isOpen:i,setIsOpen:o,selectedValue:l,onValueChange:u}):c)})},pn=({children:e,className:t="",isOpen:r,setIsOpen:n,selectedValue:s})=>a.jsxs("button",{type:"button",className:`flex h-10 w-full items-center justify-between rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:cursor-not-allowed disabled:opacity-50 ${t}`,onClick:()=>n(!r),children:[e,a.jsx("svg",{className:"h-4 w-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"m6 9 6 6 6-6"})})]}),gn=({placeholder:e,selectedValue:t})=>a.jsx("span",{className:t?"":"text-gray-500",children:t||e}),xn=({children:e,className:t="",isOpen:r})=>r?a.jsx("div",{className:`absolute top-full z-50 w-full rounded-md border bg-white shadow-md ${t}`,children:e}):null,He=({children:e,value:t,onValueChange:r})=>a.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-gray-100",onClick:()=>r(t),children:e}),Ws=mt.forwardRef(({className:e="",type:t="text",...r},n)=>a.jsx("input",{type:t,className:`flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:cursor-not-allowed disabled:opacity-50 ${e}`,ref:n,...r}));Ws.displayName="Input";const pv=mt.forwardRef(({className:e="",...t},r)=>a.jsx("textarea",{className:`flex min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:cursor-not-allowed disabled:opacity-50 ${e}`,ref:r,...t}));pv.displayName="Textarea";const kD=()=>{const[e,t]=p.useState("sales_executive"),[r,n]=p.useState("2024-01"),[s,i]=p.useState("leads"),[o,l]=p.useState("kanban"),[d,u]=p.useState(!1),[c,m]=p.useState({stage:"all",source:"all",priority:"all",ageing:"all"}),f={name:"John Smith"},h={newLeads:15,meetings:12,proposals:5,wonAmount:15e4,pipelineAmount:45e4,winRate:40,avgFollowupSLA:18},g={totalRevenue:85e4,revenueTarget:1e6,forecastRisk:15,staleLeads:23,avgWinRate:35},x=[{id:"1",leadName:"Tech Solutions Inc",company:"Tech Solutions Inc",contactName:"Alice Johnson",email:"alice@techsolutions.com",phone:"+91-9876543210",stage:"qualified",source:"website",estAmount:75e3,probability:60,estCloseDate:"2024-02-15",lastContacted:"2024-01-20",nextAction:"2024-01-25",ageing:5,owner:"John Smith",priority:"high",serviceInterest:["seo","web"]},{id:"2",leadName:"Digital Marketing Co",company:"Digital Marketing Co",contactName:"Bob Wilson",email:"bob@digitalmarketing.com",phone:"+91-9876543211",stage:"proposal_sent",source:"google_ads",estAmount:12e4,probability:75,estCloseDate:"2024-02-28",lastContacted:"2024-01-22",nextAction:"2024-01-26",ageing:3,owner:"John Smith",priority:"high",serviceInterest:["ads","social"]},{id:"3",leadName:"E-commerce Startup",company:"E-commerce Startup",contactName:"Carol Davis",email:"carol@ecommerce.com",phone:"+91-9876543212",stage:"discovery",source:"reference",estAmount:5e4,probability:40,estCloseDate:"2024-03-10",lastContacted:"2024-01-19",nextAction:"2024-01-24",ageing:6,owner:"John Smith",priority:"medium",serviceInterest:["web","seo"]}],b=[{id:"1",leadId:"1",type:"call",summary:"Discussed project requirements and timeline",activityTime:"2024-01-20T10:30:00Z",duration:30,outcome:"meeting_booked",nextAction:"Send proposal draft"},{id:"2",leadId:"2",type:"email",summary:"Sent proposal with pricing details",activityTime:"2024-01-22T14:15:00Z",outcome:"connected",nextAction:"Follow up on proposal feedback"}],y={revenueTargetScore:20,pipelineCoverageScore:8,leadToMeetingScore:7,meetingToProposalScore:6,proposalToWinScore:7,followupSLAScore:8,staleControlScore:4,activitiesThroughputScore:5,proposalDisciplineScore:4,dataCompletenessScore:3,mentorScore:8,csDeliveryNPS:8,totalScore:88},j=[{key:"new",label:"New",color:"bg-gray-100"},{key:"qualified",label:"Qualified",color:"bg-blue-100"},{key:"discovery",label:"Discovery",color:"bg-yellow-100"},{key:"proposal_sent",label:"Proposal Sent",color:"bg-orange-100"},{key:"negotiation",label:"Negotiation",color:"bg-purple-100"},{key:"won",label:"Won",color:"bg-green-100"},{key:"lost",label:"Lost",color:"bg-red-100"}],w=[{key:"fb_ads",label:"Facebook Ads"},{key:"website",label:"Website"},{key:"seo",label:"SEO"},{key:"google_ads",label:"Google Ads"},{key:"reference",label:"Reference"},{key:"other",label:"Other"}],S=P=>{const $=j.find(D=>D.key===P);return $?$.color:"bg-gray-100"},v=P=>{switch(P){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},N=P=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(P),_=P=>new Date(P).toLocaleDateString("en-IN"),A=P=>P<=3?"text-green-600":P<=7?"text-yellow-600":"text-red-600",k=x.filter(P=>!(c.stage!=="all"&&P.stage!==c.stage||c.source!=="all"&&P.source!==c.source||c.priority!=="all"&&P.priority!==c.priority)),C=()=>e==="sales_executive"?a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-7 gap-4 mb-6",children:[a.jsx(de,{children:a.jsx(ue,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"New Leads"}),a.jsx("p",{className:"text-2xl font-bold",children:h.newLeads})]}),a.jsx(Oy,{className:"h-8 w-8 text-blue-500"})]})})}),a.jsx(de,{children:a.jsx(ue,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Meetings"}),a.jsx("p",{className:"text-2xl font-bold",children:h.meetings})]}),a.jsx(Ty,{className:"h-8 w-8 text-green-500"})]})})}),a.jsx(de,{children:a.jsx(ue,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Proposals"}),a.jsx("p",{className:"text-2xl font-bold",children:h.proposals})]}),a.jsx(My,{className:"h-8 w-8 text-orange-500"})]})})}),a.jsx(de,{children:a.jsx(ue,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Won Amount"}),a.jsx("p",{className:"text-xl font-bold",children:N(h.wonAmount)})]}),a.jsx(Dd,{className:"h-8 w-8 text-purple-500"})]})})}),a.jsx(de,{children:a.jsx(ue,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Pipeline"}),a.jsx("p",{className:"text-xl font-bold",children:N(h.pipelineAmount)})]}),a.jsx(Id,{className:"h-8 w-8 text-indigo-500"})]})})}),a.jsx(de,{children:a.jsx(ue,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Win Rate"}),a.jsxs("p",{className:"text-2xl font-bold",children:[h.winRate,"%"]})]}),a.jsx(Dy,{className:"h-8 w-8 text-green-600"})]})})}),a.jsx(de,{children:a.jsx(ue,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Avg SLA"}),a.jsxs("p",{className:"text-2xl font-bold",children:[h.avgFollowupSLA,"h"]})]}),a.jsx(Iy,{className:"h-8 w-8 text-blue-600"})]})})})]}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-6",children:[a.jsx(de,{children:a.jsx(ue,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Revenue vs Target"}),a.jsx("p",{className:"text-xl font-bold",children:N(g.totalRevenue)}),a.jsxs("p",{className:"text-sm text-gray-500",children:["of ",N(g.revenueTarget)]})]}),a.jsx(Dd,{className:"h-8 w-8 text-purple-500"})]})})}),a.jsx(de,{children:a.jsx(ue,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Forecast Risk"}),a.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[g.forecastRisk,"%"]})]}),a.jsx(Ry,{className:"h-8 w-8 text-orange-500"})]})})}),a.jsx(de,{children:a.jsx(ue,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Stale Leads"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:g.staleLeads})]}),a.jsx($y,{className:"h-8 w-8 text-red-500"})]})})}),a.jsx(de,{children:a.jsx(ue,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Avg Win Rate"}),a.jsxs("p",{className:"text-2xl font-bold",children:[g.avgWinRate,"%"]})]}),a.jsx(Id,{className:"h-8 w-8 text-green-500"})]})})}),a.jsx(de,{children:a.jsx(ue,{className:"p-4",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("div",{children:a.jsxs($e,{size:"sm",className:"w-full",children:[a.jsx(Jf,{className:"h-4 w-4 mr-2"}),"Export"]})})})})})]}),T=()=>a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-7 gap-4",children:j.map(P=>{const $=k.filter(D=>D.stage===P.key);return a.jsxs("div",{className:`${P.color} p-4 rounded-lg`,children:[a.jsxs("h3",{className:"font-semibold mb-3",children:[P.label," (",$.length,")"]}),a.jsx("div",{className:"space-y-3",children:$.map(D=>a.jsx(de,{className:"cursor-pointer hover:shadow-md transition-shadow",children:a.jsxs(ue,{className:"p-3",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("h4",{className:"font-medium text-sm",children:D.leadName}),a.jsx(Yt,{className:v(D.priority),children:D.priority})]}),a.jsx("p",{className:"text-xs text-gray-600 mb-2",children:D.contactName}),a.jsxs("p",{className:"text-sm font-semibold text-green-600 mb-2",children:[N(D.estAmount)," (",D.probability,"%)"]}),a.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[a.jsxs("span",{children:["Due: ",_(D.estCloseDate)]}),a.jsxs("span",{className:A(D.ageing),children:[D.ageing,"d"]})]}),a.jsxs("div",{className:"flex justify-between mt-2",children:[a.jsxs($e,{size:"sm",variant:"outline",className:"text-xs px-2 py-1",children:[a.jsx(as,{className:"h-3 w-3 mr-1"}),"View"]}),a.jsxs($e,{size:"sm",variant:"outline",className:"text-xs px-2 py-1",children:[a.jsx(Ly,{className:"h-3 w-3 mr-1"}),"Edit"]})]})]})},D.id))})]},P.key)})}),O=()=>a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50",children:[a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Stage"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Lead"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Company"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Source"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Est. Amount"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Prob%"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Est. Close"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Last Contact"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Next Action"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Ageing"}),a.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Actions"})]})}),a.jsx("tbody",{children:k.map(P=>{var $,D;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:a.jsx(Yt,{className:S(P.stage),children:($=j.find(B=>B.key===P.stage))==null?void 0:$.label})}),a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:P.leadName}),a.jsx("p",{className:"text-sm text-gray-600",children:P.contactName})]})}),a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:P.company}),a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:a.jsx(Yt,{variant:"outline",children:(D=w.find(B=>B.key===P.source))==null?void 0:D.label})}),a.jsx("td",{className:"border border-gray-300 px-4 py-2 font-semibold text-green-600",children:N(P.estAmount)}),a.jsxs("td",{className:"border border-gray-300 px-4 py-2",children:[P.probability,"%"]}),a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:_(P.estCloseDate)}),a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:_(P.lastContacted)}),a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:_(P.nextAction)}),a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:a.jsxs("span",{className:A(P.ageing),children:[P.ageing," days"]})}),a.jsx("td",{className:"border border-gray-300 px-4 py-2",children:a.jsxs("div",{className:"flex space-x-1",children:[a.jsx($e,{size:"sm",variant:"outline",children:a.jsx(as,{className:"h-3 w-3"})}),a.jsx($e,{size:"sm",variant:"outline",children:a.jsx(Td,{className:"h-3 w-3"})}),a.jsx($e,{size:"sm",variant:"outline",children:a.jsx(Md,{className:"h-3 w-3"})})]})})]},P.id)})})]})}),F=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs(de,{children:[a.jsx(et,{children:a.jsx(tt,{className:"text-lg",children:"Revenue & Target (35 pts)"})}),a.jsx(ue,{children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Revenue Target:"}),a.jsxs("span",{className:"font-semibold",children:[y.revenueTargetScore,"/25"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Pipeline Coverage:"}),a.jsxs("span",{className:"font-semibold",children:[y.pipelineCoverageScore,"/10"]})]}),a.jsx("div",{className:"border-t pt-2 mt-2",children:a.jsxs("div",{className:"flex justify-between font-bold",children:[a.jsx("span",{children:"Subtotal:"}),a.jsxs("span",{children:[y.revenueTargetScore+y.pipelineCoverageScore,"/35"]})]})})]})})]}),a.jsxs(de,{children:[a.jsx(et,{children:a.jsx(tt,{className:"text-lg",children:"Conversion (25 pts)"})}),a.jsx(ue,{children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Lead→Meeting:"}),a.jsxs("span",{className:"font-semibold",children:[y.leadToMeetingScore,"/8"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Meeting→Proposal:"}),a.jsxs("span",{className:"font-semibold",children:[y.meetingToProposalScore,"/8"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Proposal→Win:"}),a.jsxs("span",{className:"font-semibold",children:[y.proposalToWinScore,"/9"]})]}),a.jsx("div",{className:"border-t pt-2 mt-2",children:a.jsxs("div",{className:"flex justify-between font-bold",children:[a.jsx("span",{children:"Subtotal:"}),a.jsxs("span",{children:[y.leadToMeetingScore+y.meetingToProposalScore+y.proposalToWinScore,"/25"]})]})})]})})]}),a.jsxs(de,{children:[a.jsx(et,{children:a.jsx(tt,{className:"text-lg",children:"Velocity & Discipline (20 pts)"})}),a.jsx(ue,{children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Follow-up SLA:"}),a.jsxs("span",{className:"font-semibold",children:[y.followupSLAScore,"/8"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Stale Control:"}),a.jsxs("span",{className:"font-semibold",children:[y.staleControlScore,"/6"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Activities:"}),a.jsxs("span",{className:"font-semibold",children:[y.activitiesThroughputScore,"/6"]})]}),a.jsx("div",{className:"border-t pt-2 mt-2",children:a.jsxs("div",{className:"flex justify-between font-bold",children:[a.jsx("span",{children:"Subtotal:"}),a.jsxs("span",{children:[y.followupSLAScore+y.staleControlScore+y.activitiesThroughputScore,"/20"]})]})})]})})]}),a.jsxs(de,{children:[a.jsx(et,{children:a.jsx(tt,{className:"text-lg",children:"Hygiene & Relationship (20 pts)"})}),a.jsx(ue,{children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Proposal Discipline:"}),a.jsxs("span",{className:"font-semibold",children:[y.proposalDisciplineScore,"/4"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Data Completeness:"}),a.jsxs("span",{className:"font-semibold",children:[y.dataCompletenessScore,"/4"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Mentor Score:"}),a.jsxs("span",{className:"font-semibold",children:[(y.mentorScore/10*2).toFixed(1),"/2"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"CS/Delivery NPS:"}),a.jsxs("span",{className:"font-semibold",children:[(y.csDeliveryNPS/10*6).toFixed(1),"/6"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Handoff Quality:"}),a.jsx("span",{className:"font-semibold",children:"4/4"})]}),a.jsx("div",{className:"border-t pt-2 mt-2",children:a.jsxs("div",{className:"flex justify-between font-bold",children:[a.jsx("span",{children:"Subtotal:"}),a.jsxs("span",{children:[(y.proposalDisciplineScore+y.dataCompletenessScore+y.mentorScore/10*2+y.csDeliveryNPS/10*6+4).toFixed(1),"/20"]})]})})]})})]})]}),a.jsxs(de,{children:[a.jsx(et,{children:a.jsx(tt,{className:"text-xl",children:"Overall Performance Score"})}),a.jsx(ue,{children:a.jsx("div",{className:"flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-6xl font-bold text-green-600 mb-2",children:y.totalScore}),a.jsx("div",{className:"text-xl text-gray-600",children:"out of 100 points"}),a.jsx("div",{className:"mt-4",children:a.jsx(Yt,{className:"text-lg px-4 py-2 bg-blue-100 text-blue-800",children:"Good"})})]})})})]})]});return a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sales CRM Dashboard"}),a.jsxs("p",{className:"text-gray-600",children:["Welcome back, ",f.name]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(hn,{value:r,onValueChange:n,children:[a.jsx(pn,{className:"w-32",children:a.jsx(gn,{})}),a.jsxs(xn,{children:[a.jsx(He,{value:"2024-01",children:"Jan 2024"}),a.jsx(He,{value:"2023-12",children:"Dec 2023"}),a.jsx(He,{value:"2023-11",children:"Nov 2023"})]})]}),a.jsxs(hn,{value:e,onValueChange:t,children:[a.jsx(pn,{className:"w-40",children:a.jsx(gn,{})}),a.jsxs(xn,{children:[a.jsx(He,{value:"sales_executive",children:"Sales Executive"}),a.jsx(He,{value:"sales_lead",children:"Sales Lead"}),a.jsx(He,{value:"admin",children:"Admin"}),a.jsx(He,{value:"reviewer_mentor",children:"Reviewer/Mentor"})]})]})]})]}),C(),a.jsxs(PD,{value:s,onValueChange:i,children:[a.jsxs(AD,{className:"grid w-full grid-cols-4",children:[a.jsx(Xa,{value:"leads",children:"My Leads"}),a.jsx(Xa,{value:"calendar",children:"Calendar & Tasks"}),a.jsx(Xa,{value:"performance",children:"Monthly Review"}),a.jsx(Xa,{value:"activities",children:"Activities"})]}),a.jsxs(Za,{value:"leads",className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs($e,{onClick:()=>u(!0),children:[a.jsx(Zf,{className:"h-4 w-4 mr-2"}),"Create Lead"]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx($e,{variant:o==="kanban"?"default":"outline",onClick:()=>l("kanban"),size:"sm",children:"Kanban"}),a.jsx($e,{variant:o==="table"?"default":"outline",onClick:()=>l("table"),size:"sm",children:"Table"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ky,{className:"h-4 w-4"}),a.jsxs(hn,{value:c.stage,onValueChange:P=>m({...c,stage:P}),children:[a.jsx(pn,{className:"w-32",children:a.jsx(gn,{placeholder:"Stage"})}),a.jsxs(xn,{children:[a.jsx(He,{value:"all",children:"All Stages"}),j.map(P=>a.jsx(He,{value:P.key,children:P.label},P.key))]})]}),a.jsxs(hn,{value:c.source,onValueChange:P=>m({...c,source:P}),children:[a.jsx(pn,{className:"w-32",children:a.jsx(gn,{placeholder:"Source"})}),a.jsxs(xn,{children:[a.jsx(He,{value:"all",children:"All Sources"}),w.map(P=>a.jsx(He,{value:P.key,children:P.label},P.key))]})]}),a.jsxs(hn,{value:c.priority,onValueChange:P=>m({...c,priority:P}),children:[a.jsx(pn,{className:"w-32",children:a.jsx(gn,{placeholder:"Priority"})}),a.jsxs(xn,{children:[a.jsx(He,{value:"all",children:"All Priorities"}),a.jsx(He,{value:"high",children:"High"}),a.jsx(He,{value:"medium",children:"Medium"}),a.jsx(He,{value:"low",children:"Low"})]})]})]})]}),o==="kanban"?T():O()]}),a.jsx(Za,{value:"calendar",className:"space-y-4",children:a.jsxs(de,{children:[a.jsx(et,{children:a.jsx(tt,{children:"Calendar & Tasks"})}),a.jsxs(ue,{children:[a.jsx("p",{className:"text-gray-600",children:"Calendar integration and task management features will be implemented here."}),a.jsxs("div",{className:"mt-4 space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Follow up with Tech Solutions Inc"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Due: Jan 25, 2024"})]}),a.jsx($e,{size:"sm",children:"Mark Done"})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Send proposal to Digital Marketing Co"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Due: Jan 26, 2024"})]}),a.jsx($e,{size:"sm",children:"Mark Done"})]})]})]})]})}),a.jsx(Za,{value:"performance",children:F()}),a.jsx(Za,{value:"activities",className:"space-y-4",children:a.jsxs(de,{children:[a.jsx(et,{children:a.jsx(tt,{children:"Recent Activities"})}),a.jsx(ue,{children:a.jsx("div",{className:"space-y-4",children:b.map(P=>a.jsxs("div",{className:"flex items-start space-x-4 p-4 border rounded",children:[a.jsxs("div",{className:"flex-shrink-0",children:[P.type==="call"&&a.jsx(Td,{className:"h-5 w-5 text-blue-500"}),P.type==="email"&&a.jsx(Md,{className:"h-5 w-5 text-green-500"}),P.type==="meeting"&&a.jsx(Ey,{className:"h-5 w-5 text-purple-500"}),P.type==="whatsapp"&&a.jsx(Cy,{className:"h-5 w-5 text-green-600"})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"font-medium",children:P.type.charAt(0).toUpperCase()+P.type.slice(1)}),a.jsx("span",{className:"text-sm text-gray-500",children:new Date(P.activityTime).toLocaleString()})]}),a.jsx("p",{className:"text-gray-600 mt-1",children:P.summary}),P.duration&&a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Duration: ",P.duration," minutes"]}),P.outcome&&a.jsx(Yt,{className:"mt-2",variant:"outline",children:P.outcome.replace("_"," ")}),P.nextAction&&a.jsxs("p",{className:"text-sm text-blue-600 mt-2",children:["Next: ",P.nextAction]})]})]},P.id))})})]})})]})]})},Fr=mt.forwardRef(({className:e="",...t},r)=>a.jsx("label",{ref:r,className:`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${e}`,...t}));Fr.displayName="Label";const gv=p.createContext(),_f=({children:e,open:t,onOpenChange:r})=>a.jsx(gv.Provider,{value:{open:t,onOpenChange:r},children:e}),Pf=({children:e,className:t="",...r})=>{const{open:n,onOpenChange:s}=p.useContext(gv);return n?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>s(!1)}),a.jsxs("div",{className:`relative bg-white rounded-lg shadow-lg p-6 max-w-md w-full mx-4 ${t}`,...r,children:[a.jsx("button",{className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",onClick:()=>s(!1),children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e]})]}):null},Af=({children:e,className:t="",...r})=>a.jsx("div",{className:`flex flex-col space-y-1.5 text-center sm:text-left ${t}`,...r,children:e}),kf=({children:e,className:t="",...r})=>a.jsx("h2",{className:`text-lg font-semibold leading-none tracking-tight ${t}`,...r,children:e}),Ef=({children:e,className:t="",...r})=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{className:`w-full caption-bottom text-sm ${t}`,...r,children:e})}),Cf=({children:e,className:t="",...r})=>a.jsx("thead",{className:`[&_tr]:border-b ${t}`,...r,children:e}),Of=({children:e,className:t="",...r})=>a.jsx("tbody",{className:`[&_tr:last-child]:border-0 ${t}`,...r,children:e}),Ja=({children:e,className:t="",...r})=>a.jsx("tr",{className:`border-b transition-colors hover:bg-gray-100/50 data-[state=selected]:bg-gray-100 ${t}`,...r,children:e}),Tt=({children:e,className:t="",...r})=>a.jsx("th",{className:`h-12 px-4 text-left align-middle font-medium text-gray-500 [&:has([role=checkbox])]:pr-0 ${t}`,...r,children:e}),Mt=({children:e,className:t="",...r})=>a.jsx("td",{className:`p-4 align-middle [&:has([role=checkbox])]:pr-0 ${t}`,...r,children:e});class ED{constructor(){this.config=null}async loadConfig(){if(this.config)return this.config;const{data:t,error:r}=await re.from("seo_config").select("config_key, config_value");if(r)throw new Error(`Failed to load SEO config: ${r.message}`);return this.config={},t.forEach(n=>{this.config[n.config_key]=n.config_value}),this.config}async calculateMonthScore(t,r,n=[]){await this.loadConfig();const s={trafficImpact:this.calculateTrafficImpact(t),rankings:this.calculateRankings(t,r),technicalHealth:this.calculateTechnicalHealth(t),deliveryScope:this.calculateDeliveryScope(t,r),relationshipQuality:this.calculateRelationshipQuality(t)};let i=s.trafficImpact.points+s.rankings.points+s.technicalHealth.points+s.deliveryScope.points+s.relationshipQuality.points;const o=this.calculatePenalties(t,r,n);return i=Math.max(0,i-o.total),{totalScore:Math.round(i*100)/100,breakdown:s,penalties:o,maxScore:100}}calculateTrafficImpact(t){const r=this.calculateGrowthPercentage(t.gsc_organic_prev_30d,t.gsc_organic_curr_30d),n=this.calculateGrowthPercentage(t.ga_total_prev_30d,t.ga_total_curr_30d),s=this.mapGrowthToPoints(r,{30:20,15:16,5:12,0:8,[-10]:4,[-1/0]:0}),i=this.mapGrowthToPoints(n,{30:15,15:12,5:9,0:6,[-10]:3,[-1/0]:0});return{points:s+i,maxPoints:35,details:{organicGrowth:{percentage:r,points:s},totalTrafficGrowth:{percentage:n,points:i}}}}calculateRankings(t,r){const n=this.config.ranking_targets[r.type],s=(t.serp_top3_count*1.5+t.serp_top10_count*.5)/n.serp_target*12,i=Math.min(12,Math.max(0,s)),o=t.gmb_top3_count/n.gmb_target*8,l=Math.min(8,Math.max(0,o));return{points:i+l,maxPoints:20,details:{serp:{top3:t.serp_top3_count,top10:t.serp_top10_count,points:i,target:n.serp_target},gmb:{top3:t.gmb_top3_count,points:l,target:n.gmb_target}}}}calculateTechnicalHealth(t){const r=(t.pagespeed_home+t.pagespeed_service+t.pagespeed_location)/3,n=this.mapPageSpeedToPoints(r),s=t.sc_errors_home+t.sc_errors_service+t.sc_errors_location,i=this.mapErrorsToPoints(s);return{points:n+i,maxPoints:20,details:{pageSpeed:{average:Math.round(r),points:n,breakdown:{home:t.pagespeed_home,service:t.pagespeed_service,location:t.pagespeed_location}},errors:{total:s,points:i,breakdown:{home:t.sc_errors_home,service:t.sc_errors_service,location:t.sc_errors_location}}}}}calculateDeliveryScope(t,r){const n=this.config.delivery_targets[r.type],s={blogs:t.deliverables_blogs,backlinks:t.deliverables_backlinks,onpage:t.deliverables_onpage,techfixes:t.deliverables_techfixes},i=15/4;let o=0;const l={};return Object.keys(n).forEach(d=>{const u=s[d]||0,c=n[d],m=u/c*100;let f=0;m>=100?f=1:m>=75?f=.75:m>=50?f=.5:f=0;const h=i*f;o+=h,l[d]={achieved:u,target:c,percentage:Math.round(m),points:Math.round(h*100)/100}}),{points:Math.round(o*100)/100,maxPoints:15,details:l}}calculateRelationshipQuality(t){const r=t.nps_client?t.nps_client/10*6:0,n=t.client_meeting_date?1:0,s=(t.interactions_count||0)>=4?1:0,i=n&&s?2:n||s?1.5:0,o=t.mentor_score?t.mentor_score/10*2:0;return{points:r+i+o,maxPoints:10,details:{nps:{score:t.nps_client,points:Math.round(r*100)/100},interactions:{count:t.interactions_count,hasMeeting:n,points:i},mentor:{score:t.mentor_score,points:Math.round(o*100)/100}}}}calculatePenalties(t,r,n){const s=[];let i=0;if(n.length>=1){const d=this.calculateGrowthPercentage(t.gsc_organic_prev_30d,t.gsc_organic_curr_30d),u=this.calculateGrowthPercentage(n[0].gsc_organic_prev_30d,n[0].gsc_organic_curr_30d);d<0&&u<0&&(s.push({type:"consecutive_negative_growth",points:5}),i+=5)}const o=this.config.delivery_targets[r.type];return Object.keys(o).some(d=>(t[`deliverables_${d}`]||0)>0)||(s.push({type:"missing_mandatory_deliverables",points:5}),i+=5),{penalties:s,total:i}}calculateGrowthPercentage(t,r){return!t||t===0?r>0?100:0:(r-t)/t*100}mapGrowthToPoints(t,r){const n=Object.keys(r).map(Number).sort((s,i)=>i-s);for(const s of n)if(t>=s)return r[s];return 0}mapPageSpeedToPoints(t){return t>=90?10:t>=80?8:t>=70?6:t>=60?4:2}mapErrorsToPoints(t){return t===0?10:t<=5?8:t<=15?5:t<=40?2:0}async calculateEmployeeMonthScore(t,r){const{data:n,error:s}=await re.from("seo_monthly_entries").select(`
        *,
        clients!inner(*)
      `).eq("employee_id",t).eq("month",r).eq("status","approved");if(s)throw new Error(`Failed to fetch entries: ${s.message}`);if(!n.length)return null;await this.loadConfig();const i=this.config.client_weights;let o=0,l=0;return n.forEach(d=>{const u=i[d.clients.type]||1;o+=d.month_score*u,l+=u}),l>0?o/l:0}async calculateAppraisalScore(t,r,n){const{data:s,error:i}=await re.from("seo_monthly_entries").select("month_score").eq("employee_id",t).eq("status","approved").gte("month",r).lte("month",n);if(i)throw new Error(`Failed to fetch appraisal entries: ${i.message}`);if(!s.length)return null;const o=s.reduce((c,m)=>c+m.month_score,0)/s.length;await this.loadConfig();const l=this.config.appraisal_bands;let d="D",u=0;return["A","B","C","D"].forEach(c=>{o>=l[c].min_score&&(d=c,u=l[c].increment_pct)}),{avgScore:Math.round(o*100)/100,ratingBand:d,incrementPct:u,entryCount:s.length}}}const _o=new ED;class CD{async getEntries(t={}){const{employeeId:r,clientId:n,month:s,status:i,page:o=1,limit:l=50,sortBy:d="month",sortOrder:u="desc"}=t;let c=re.from("seo_monthly_entries").select(`
        *,
        clients!inner(id, name, type, active),
        users!inner(id, name, email),
        reviewer:reviewed_by(id, name, email)
      `,{count:"exact"});r&&(c=c.eq("employee_id",r)),n&&(c=c.eq("client_id",n)),s&&(c=c.eq("month",s)),i&&(c=c.eq("status",i)),c=c.order(d,{ascending:u==="asc"});const m=(o-1)*l,f=m+l-1;c=c.range(m,f);const{data:h,error:g,count:x}=await c;if(g)throw new Error(`Failed to fetch SEO entries: ${g.message}`);return{data:h,pagination:{page:o,limit:l,total:x,totalPages:Math.ceil(x/l)}}}async getEntry(t){const{data:r,error:n}=await re.from("seo_monthly_entries").select(`
        *,
        clients!inner(id, name, type, active),
        users!inner(id, name, email),
        reviewer:reviewed_by(id, name, email)
      `).eq("id",t).single();if(n)throw new Error(`Failed to fetch SEO entry: ${n.message}`);return r}async createEntry(t){const r=["employee_id","client_id","month"];for(const o of r)if(!t[o])throw new Error(`Missing required field: ${o}`);const{data:n}=await re.from("seo_monthly_entries").select("id").eq("employee_id",t.employee_id).eq("client_id",t.client_id).eq("month",t.month).single();if(n)throw new Error("Entry already exists for this employee, client, and month");const{data:s,error:i}=await re.from("seo_monthly_entries").insert(t).select().single();if(i)throw new Error(`Failed to create SEO entry: ${i.message}`);return s}async updateEntry(t,r){const n=["organic_growth_pct","traffic_growth_pct","technical_health_score","ranking_score","delivery_score","relationship_score","month_score"],s={...r};n.forEach(l=>delete s[l]);const{data:i,error:o}=await re.from("seo_monthly_entries").update(s).eq("id",t).select().single();if(o)throw new Error(`Failed to update SEO entry: ${o.message}`);return i}async submitEntry(t){const r=await this.getEntry(t);if(r.status!=="draft")throw new Error("Only draft entries can be submitted");this.validateEntryData(r);const{data:n}=await re.from("seo_monthly_entries").select("*").eq("employee_id",r.employee_id).eq("client_id",r.client_id).lt("month",r.month).order("month",{ascending:!1}).limit(2),s=await _o.calculateMonthScore(r,r.clients,n||[]),i={organic_growth_pct:_o.calculateGrowthPercentage(r.gsc_organic_prev_30d,r.gsc_organic_curr_30d),traffic_growth_pct:_o.calculateGrowthPercentage(r.ga_total_prev_30d,r.ga_total_curr_30d),technical_health_score:s.breakdown.technicalHealth.points,ranking_score:s.breakdown.rankings.points,delivery_score:s.breakdown.deliveryScope.points,relationship_score:s.breakdown.relationshipQuality.points,month_score:s.totalScore,status:"submitted",submitted_at:new Date().toISOString()},{data:o,error:l}=await re.from("seo_monthly_entries").update(i).eq("id",t).select().single();if(l)throw new Error(`Failed to submit SEO entry: ${l.message}`);return{...o,scoring:s}}async approveEntry(t,r,n=""){const{data:s,error:i}=await re.from("seo_monthly_entries").update({status:"approved",review_comment:n,reviewed_by:r,reviewed_at:new Date().toISOString()}).eq("id",t).eq("status","submitted").select().single();if(i)throw new Error(`Failed to approve SEO entry: ${i.message}`);return s}async returnEntry(t,r,n){if(!n||n.trim()==="")throw new Error("Comment is required when returning an entry");const{data:s,error:i}=await re.from("seo_monthly_entries").update({status:"returned",review_comment:n,reviewed_by:r,reviewed_at:new Date().toISOString()}).eq("id",t).eq("status","submitted").select().single();if(i)throw new Error(`Failed to return SEO entry: ${i.message}`);return s}async addMentorScore(t,r,n){if(r<1||r>10)throw new Error("Mentor score must be between 1 and 10");const{data:s,error:i}=await re.from("seo_monthly_entries").update({mentor_score:r}).eq("id",t).select().single();if(i)throw new Error(`Failed to add mentor score: ${i.message}`);return s}async getEmployeeDashboard(t){const r=new Date().getFullYear(),n=new Date().getMonth()+1,s=n===1?12:n-1,i=n===1?r-1:r,{data:o}=await re.from("seo_monthly_entries").select("month_score").eq("employee_id",t).eq("status","approved").gte("month",`${r}-01`).lte("month",`${r}-12`),l=`${i}-${s.toString().padStart(2,"0")}`,{data:d}=await re.from("seo_monthly_entries").select("month_score").eq("employee_id",t).eq("status","approved").eq("month",l),{data:u}=await re.from("seo_accounts").select("client_id").eq("employee_id",t).eq("status","active"),c=new Date;c.setDate(c.getDate()-90);const{data:m}=await re.from("seo_monthly_entries").select("nps_client").eq("employee_id",t).not("nps_client","is",null).gte("created_at",c.toISOString()),f=(o==null?void 0:o.length)>0?o.reduce((x,b)=>x+b.month_score,0)/o.length:0,h=(d==null?void 0:d.length)>0?d.reduce((x,b)=>x+b.month_score,0)/d.length:0,g=(m==null?void 0:m.length)>0?m.reduce((x,b)=>x+b.nps_client,0)/m.length:0;return{ytdAvgScore:Math.round(f*100)/100,lastMonthScore:Math.round(h*100)/100,activeClientsCount:(u==null?void 0:u.length)||0,avgNPS:Math.round(g*100)/100}}async getTeamDashboard(t=null){new Date().toISOString().slice(0,7);let r=re.from("seo_monthly_entries").select(`
        *,
        users!inner(id, name, email, role),
        clients!inner(id, name, type)
      `);const{data:n}=await r;return this.calculateTeamMetrics(n||[])}async getClients(t={}){const{active:r=!0,type:n}=t;let s=re.from("clients").select("*").order("name");r!==null&&(s=s.eq("active",r)),n&&(s=s.eq("type",n));const{data:i,error:o}=await s;if(o)throw new Error(`Failed to fetch clients: ${o.message}`);return i}async getEmployeeAccounts(t){const{data:r,error:n}=await re.from("seo_accounts").select(`
        *,
        clients!inner(id, name, type, active)
      `).eq("employee_id",t).eq("status","active");if(n)throw new Error(`Failed to fetch SEO accounts: ${n.message}`);return r}validateEntryData(t){const n=["gsc_organic_prev_30d","gsc_organic_curr_30d","ga_total_prev_30d","ga_total_curr_30d","serp_top3_count","serp_top10_count","pagespeed_home","pagespeed_service","pagespeed_location"].filter(s=>t[s]===null||t[s]===void 0);if(n.length>0)throw new Error(`Missing required fields: ${n.join(", ")}`)}calculateTeamMetrics(t){const r=new Date().toISOString().slice(0,7),n=t.filter(l=>l.status==="approved"),s=t.filter(l=>l.month===r),i=n.length>0?n.reduce((l,d)=>l+d.month_score,0)/n.length:0,o=n.filter(l=>l.month_score<65);return{totalEntries:t.length,approvedEntries:n.length,pendingReview:t.filter(l=>l.status==="submitted").length,avgTeamScore:Math.round(i*100)/100,lowPerformersCount:o.length,currentMonthSubmissions:s.length}}}const Qa=new CD,OD={ADMIN:"admin"},TD={MANAGER:"manager"},MD={CREATE_ENTRY:"create_entry",EDIT_OWN_DRAFT:"edit_own_draft",SUBMIT_ENTRY:"submit_entry",VIEW_OWN_ENTRIES:"view_own_entries",ADD_MENTOR_SCORE:"add_mentor_score",APPROVE_ENTRY:"approve_entry",RETURN_ENTRY:"return_entry",VIEW_TEAM_ENTRIES:"view_team_entries",OVERRIDE_ENTRY:"override_entry",BACKFILL_PAST_MONTHS:"backfill_past_months",CHANGE_WEIGHTS_TARGETS:"change_weights_targets",VIEW_ALL_ENTRIES:"view_all_entries",VIEW_EMPLOYEE_DASHBOARD:"view_employee_dashboard",VIEW_TEAM_DASHBOARD:"view_team_dashboard",VIEW_ADMIN_DASHBOARD:"view_admin_dashboard",CREATE_APPRAISAL:"create_appraisal",VIEW_APPRAISALS:"view_appraisals",EDIT_APPRAISAL:"edit_appraisal",EXPORT_TEAM_DATA:"export_team_data",EXPORT_ALL_DATA:"export_all_data"};OD.ADMIN+"",[...Object.values(MD)];const DD=({message:e="You don't have permission to access this feature."})=>a.jsx(de,{className:"max-w-md mx-auto mt-8",children:a.jsxs(ue,{className:"p-6 text-center",children:[a.jsx(Fy,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Access Denied"}),a.jsx("p",{className:"text-muted-foreground",children:e})]})}),ID=({children:e,fallback:t=a.jsx(DD,{message:"Appraisal data is only accessible to managers."})})=>{const{authState:r}=Bt(),n=r.user;return!n||n.department!==TD.MANAGER&&n.userRole!=="admin"?t:e},RD=()=>a.jsx(ID,{children:a.jsx($D,{})}),$D=()=>{var v;const{user:e,role:t}=Bt(),[r,n]=p.useState([]),[s,i]=p.useState([]),[o,l]=p.useState(null),[d,u]=p.useState(!1),[c,m]=p.useState(!0),[f,h]=p.useState({employee_id:"",period_start:"",period_end:"",notes:""});p.useEffect(()=>{g()},[]);const g=async()=>{try{m(!0);const[N,_]=await Promise.all([Qa.getAppraisals(),Qa.getEmployees({department:"SEO"})]);n(N),i(_)}catch(N){console.error("Failed to load appraisal data:",N),Hi.error("Failed to load appraisal data")}finally{m(!1)}},x=async(N,_,A)=>{try{return await Qa.calculateAppraisal({employee_id:N,period_start:_,period_end:A})}catch(k){throw console.error("Failed to calculate appraisal:",k),k}},b=async()=>{try{const N=await x(f.employee_id,f.period_start,f.period_end);await Qa.createAppraisal({...f,...N}),Hi.success("Appraisal created successfully"),u(!1),h({employee_id:"",period_start:"",period_end:"",notes:""}),g()}catch(N){console.error("Failed to create appraisal:",N),Hi.error("Failed to create appraisal")}},y=N=>{const _={A:"bg-green-100 text-green-800",B:"bg-blue-100 text-blue-800",C:"bg-yellow-100 text-yellow-800",D:"bg-red-100 text-red-800"};return a.jsx(Yt,{className:_[N]||"bg-gray-100 text-gray-800",children:N})},j=(N,_)=>{const A={A:"Full increment bracket",B:"Standard increment",C:"Limited increment",D:"PIP/No increment"};return a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium",children:A[N]}),_&&a.jsxs("div",{className:"text-muted-foreground",children:[_,"%"]})]})},w=()=>a.jsx(_f,{open:d,onOpenChange:u,children:a.jsxs(Pf,{className:"max-w-md",children:[a.jsx(Af,{children:a.jsx(kf,{children:"Create New Appraisal"})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(Fr,{htmlFor:"employee_id",children:"Employee"}),a.jsxs(hn,{value:f.employee_id,onValueChange:N=>h(_=>({..._,employee_id:N})),children:[a.jsx(pn,{children:a.jsx(gn,{placeholder:"Select Employee"})}),a.jsx(xn,{children:s.map(N=>a.jsx(He,{value:N.id,children:N.name},N.id))})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(Fr,{htmlFor:"period_start",children:"Period Start"}),a.jsx(Ws,{id:"period_start",type:"date",value:f.period_start,onChange:N=>h(_=>({..._,period_start:N.target.value}))})]}),a.jsxs("div",{children:[a.jsx(Fr,{htmlFor:"period_end",children:"Period End"}),a.jsx(Ws,{id:"period_end",type:"date",value:f.period_end,onChange:N=>h(_=>({..._,period_end:N.target.value}))})]})]}),a.jsxs("div",{children:[a.jsx(Fr,{htmlFor:"notes",children:"Notes"}),a.jsx(pv,{id:"notes",value:f.notes,onChange:N=>h(_=>({..._,notes:N.target.value})),placeholder:"Additional notes for this appraisal period...",rows:3})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx($e,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),a.jsx($e,{onClick:b,disabled:!f.employee_id||!f.period_start||!f.period_end,children:"Create Appraisal"})]})]})]})}),S=({appraisal:N})=>{var _;return a.jsx(_f,{open:!!o,onOpenChange:()=>l(null),children:a.jsxs(Pf,{className:"max-w-2xl",children:[a.jsx(Af,{children:a.jsxs(kf,{children:["Appraisal Details - ",N==null?void 0:N.employee_name]})}),N&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs(de,{children:[a.jsx(et,{children:a.jsx(tt,{className:"text-lg",children:"Appraisal Period"})}),a.jsx(ue,{children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(Fr,{children:"Period Start"}),a.jsx("p",{className:"font-medium",children:new Date(N.period_start).toLocaleDateString()})]}),a.jsxs("div",{children:[a.jsx(Fr,{children:"Period End"}),a.jsx("p",{className:"font-medium",children:new Date(N.period_end).toLocaleDateString()})]})]})})]}),a.jsxs(de,{children:[a.jsx(et,{children:a.jsx(tt,{className:"text-lg",children:"Performance Summary"})}),a.jsx(ue,{children:a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:((_=N.avg_month_score)==null?void 0:_.toFixed(1))||"N/A"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Average Score"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold",children:y(N.final_rating_band)}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Rating Band"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[N.eligible_increment_pct||0,"%"]}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Increment"})]})]})})]}),N.monthly_scores&&a.jsxs(de,{children:[a.jsx(et,{children:a.jsx(tt,{className:"text-lg",children:"Monthly Breakdown"})}),a.jsx(ue,{children:a.jsxs(Ef,{children:[a.jsx(Cf,{children:a.jsxs(Ja,{children:[a.jsx(Tt,{children:"Month"}),a.jsx(Tt,{children:"Clients"}),a.jsx(Tt,{children:"Avg Score"}),a.jsx(Tt,{children:"Status"})]})}),a.jsx(Of,{children:N.monthly_scores.map((A,k)=>{var C;return a.jsxs(Ja,{children:[a.jsx(Mt,{children:A.month}),a.jsx(Mt,{children:A.client_count}),a.jsx(Mt,{children:a.jsx("span",{className:A.score>=75?"text-green-600":A.score>=65?"text-yellow-600":"text-red-600",children:(C=A.score)==null?void 0:C.toFixed(1)})}),a.jsx(Mt,{children:a.jsx(Yt,{variant:A.all_approved?"default":"secondary",children:A.all_approved?"Complete":"Pending"})})]},k)})})]})})]}),N.notes&&a.jsxs(de,{children:[a.jsx(et,{children:a.jsx(tt,{className:"text-lg",children:"Notes"})}),a.jsx(ue,{children:a.jsx("p",{className:"text-sm",children:N.notes})})]})]})]})})};return c?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-2 text-muted-foreground",children:"Loading appraisal data..."})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"SEO Appraisal System"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage performance appraisals and increment eligibility"})]}),((v=authState.user)==null?void 0:v.role)==="admin"&&a.jsxs($e,{onClick:()=>u(!0),children:[a.jsx(Zf,{className:"h-4 w-4 mr-2"}),"New Appraisal"]})]}),a.jsxs(de,{children:[a.jsx(et,{children:a.jsx(tt,{className:"text-lg",children:"Rating Bands & Increment Policy"})}),a.jsx(ue,{children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center p-4 border rounded-lg bg-green-50",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600 mb-2",children:"A"}),a.jsx("div",{className:"text-sm font-medium",children:"≥85 Score"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Full increment bracket"})]}),a.jsxs("div",{className:"text-center p-4 border rounded-lg bg-blue-50",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-2",children:"B"}),a.jsx("div",{className:"text-sm font-medium",children:"75-84.9 Score"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Standard increment"})]}),a.jsxs("div",{className:"text-center p-4 border rounded-lg bg-yellow-50",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-600 mb-2",children:"C"}),a.jsx("div",{className:"text-sm font-medium",children:"65-74.9 Score"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Limited increment"})]}),a.jsxs("div",{className:"text-center p-4 border rounded-lg bg-red-50",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600 mb-2",children:"D"}),a.jsx("div",{className:"text-sm font-medium",children:"<65 Score"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"PIP/No increment"})]})]})})]}),a.jsxs(de,{children:[a.jsx(et,{children:a.jsx(tt,{children:"Recent Appraisals"})}),a.jsx(ue,{children:r.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(By,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("p",{className:"text-lg font-medium",children:"No appraisals yet"}),a.jsx("p",{className:"text-muted-foreground",children:"Create your first appraisal to get started"})]}):a.jsxs(Ef,{children:[a.jsx(Cf,{children:a.jsxs(Ja,{children:[a.jsx(Tt,{children:"Employee"}),a.jsx(Tt,{children:"Period"}),a.jsx(Tt,{children:"Avg Score"}),a.jsx(Tt,{children:"Rating"}),a.jsx(Tt,{children:"Increment"}),a.jsx(Tt,{children:"Created"}),a.jsx(Tt,{children:"Actions"})]})}),a.jsx(Of,{children:r.map(N=>{var _;return a.jsxs(Ja,{children:[a.jsx(Mt,{className:"font-medium",children:N.employee_name}),a.jsx(Mt,{children:a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{children:new Date(N.period_start).toLocaleDateString()}),a.jsxs("div",{className:"text-muted-foreground",children:["to ",new Date(N.period_end).toLocaleDateString()]})]})}),a.jsx(Mt,{children:a.jsx("span",{className:N.avg_month_score>=75?"text-green-600":N.avg_month_score>=65?"text-yellow-600":"text-red-600",children:((_=N.avg_month_score)==null?void 0:_.toFixed(1))||"N/A"})}),a.jsx(Mt,{children:y(N.final_rating_band)}),a.jsx(Mt,{children:j(N.final_rating_band,N.eligible_increment_pct)}),a.jsx(Mt,{children:new Date(N.created_at).toLocaleDateString()}),a.jsx(Mt,{children:a.jsxs($e,{size:"sm",variant:"outline",onClick:()=>l(N),children:[a.jsx(as,{className:"h-3 w-3 mr-1"}),"View"]})})]},N.id)})})]})})]}),a.jsx(w,{}),o&&a.jsx(S,{appraisal:o})]})};class LD{static async authenticateUser(t,r,n=null,s=null){try{if(!re)throw new Error("Database connection not available");let{data:i,error:o}=await re.from("unified_users").select("*").eq("email",t).eq("status","active").single();if(o&&o.code==="PGRST116"){const{data:d,error:u}=await re.from("user_accounts").select("*").eq("email",t).eq("is_active",!0).single();if(u||!d)throw await this.logFailedLoginAttempt(t,n,s),new Error("Invalid email or password");i={id:d.id,user_id:d.user_id,name:d.full_name,email:d.email,phone:d.phone,password_hash:"password123",role:this.mapAccountRoleToUnifiedRole(d.role),user_category:this.mapRoleToCategory(d.role),department:d.department,status:d.is_active?"active":"inactive",login_attempts:d.failed_login_attempts||0,permissions:{},dashboard_access:[]},o=null}if(o||!i)throw await this.logFailedLoginAttempt(t,n,s),new Error("Invalid email or password");if(i.password_hash!==r)throw await this.incrementLoginAttempts(i.id),new Error("Invalid email or password");if(i.login_attempts>=5)throw new Error("Account locked due to too many failed attempts. Contact administrator.");const l=await this.createUserSession(i.id,n,s);return await re.from("unified_users").update({last_login:new Date().toISOString(),login_attempts:0,updated_at:new Date().toISOString()}).eq("id",i.id),{success:!0,user:{id:i.id,user_id:i.user_id,name:i.name,email:i.email,phone:i.phone,role:i.role,user_category:i.user_category,department:i.department,permissions:i.permissions||{},dashboard_access:i.dashboard_access||[],status:i.status},session:l}}catch(i){throw console.error("Authentication error:",i),i}}static async createUserSession(t,r,n){const s=this.generateSessionToken(),i=new Date(Date.now()+24*60*60*1e3),{data:o,error:l}=await re.from("user_sessions").insert({user_id:t,session_token:s,ip_address:r,user_agent:n,expires_at:i.toISOString(),is_active:!0}).select().single();if(l)throw new Error("Failed to create session");return{id:o.id,session_token:s,expires_at:i.toISOString()}}static async incrementLoginAttempts(t){await re.from("unified_users").update({login_attempts:re.raw("login_attempts + 1"),updated_at:new Date().toISOString()}).eq("id",t)}static async logFailedLoginAttempt(t,r,n){try{console.warn("Failed login attempt:",{email:t,ip_address:r,user_agent:n,timestamp:new Date().toISOString()})}catch(s){console.error("Failed to log login attempt:",s)}}static async getUserLoginHistory(t){const{data:r}=await re.from("unified_users").select("role").eq("id",t).single();if(!r||r.role!=="Super Admin")throw new Error("Access denied. Only Super Admin can view login history.");const{data:n,error:s}=await re.from("user_sessions").select(`
        *,
        unified_users!inner(
          name,
          email,
          role
        )
      `).order("login_timestamp",{ascending:!1}).limit(1e3);if(s)throw new Error("Failed to fetch login history");return n.map(i=>({id:i.id,user_name:i.unified_users.name,user_email:i.unified_users.email,user_role:i.unified_users.role,ip_address:i.ip_address,user_agent:i.user_agent,login_time:i.login_timestamp,last_activity:i.last_activity,is_active:i.is_active,logout_time:i.logout_timestamp}))}static async logoutUser(t){await re.from("user_sessions").update({is_active:!1,logout_timestamp:new Date().toISOString()}).eq("session_token",t)}static async validateSession(t){const{data:r,error:n}=await re.from("user_sessions").select(`
        *,
        unified_users!inner(*)
      `).eq("session_token",t).eq("is_active",!0).gt("expires_at",new Date().toISOString()).single();return n||!r?null:(await re.from("user_sessions").update({last_activity:new Date().toISOString()}).eq("id",r.id),{user:r.unified_users,session:{id:r.id,session_token:r.session_token,expires_at:r.expires_at}})}static generateSessionToken(){return`session_${Date.now()}_${Math.random().toString(36).substring(2,15)}_${Math.random().toString(36).substring(2,15)}`}static getClientIP(t){var r,n,s;return((r=t==null?void 0:t.headers)==null?void 0:r["x-forwarded-for"])||((n=t==null?void 0:t.headers)==null?void 0:n["x-real-ip"])||((s=t==null?void 0:t.connection)==null?void 0:s.remoteAddress)||"unknown"}static mapAccountRoleToUnifiedRole(t){return{employee:"Web Developer",manager:"Operations Head",hr:"HR Manager",admin:"Super Admin"}[t]||"Web Developer"}static mapRoleToCategory(t){return{employee:"employee",manager:"management",hr:"management",admin:"super_admin"}[t]||"employee"}}const vd="-",FD=e=>{const t=zD(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(vd);return l[0]===""&&l.length!==1&&l.shift(),xv(l,t)||BD(o)},getConflictingClassGroupIds:(o,l)=>{const d=r[o]||[];return l&&n[o]?[...d,...n[o]]:d}}},xv=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?xv(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(vd);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},Tf=/^\[(.+)\]$/,BD=e=>{if(Tf.test(e)){const t=Tf.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},zD=e=>{const{theme:t,classGroups:r}=e,n={nextPart:new Map,validators:[]};for(const s in r)Pl(r[s],n,s,t);return n},Pl=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:Mf(t,s);i.classGroupId=r;return}if(typeof s=="function"){if(UD(s)){Pl(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,o])=>{Pl(o,Mf(t,i),r,n)})})},Mf=(e,t)=>{let r=e;return t.split(vd).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},UD=e=>e.isThemeGetter,WD=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return s(i,o),o},set(i,o){r.has(i)?r.set(i,o):s(i,o)}}},Al="!",kl=":",KD=kl.length,qD=e=>{const{prefix:t,experimentalParseClassName:r}=e;let n=s=>{const i=[];let o=0,l=0,d=0,u;for(let g=0;g<s.length;g++){let x=s[g];if(o===0&&l===0){if(x===kl){i.push(s.slice(d,g)),d=g+KD;continue}if(x==="/"){u=g;continue}}x==="["?o++:x==="]"?o--:x==="("?l++:x===")"&&l--}const c=i.length===0?s:s.substring(d),m=GD(c),f=m!==c,h=u&&u>d?u-d:void 0;return{modifiers:i,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:h}};if(t){const s=t+kl,i=n;n=o=>o.startsWith(s)?i(o.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(r){const s=n;n=i=>r({className:i,parseClassName:s})}return n},GD=e=>e.endsWith(Al)?e.substring(0,e.length-1):e.startsWith(Al)?e.substring(1):e,HD=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const s=[];let i=[];return n.forEach(o=>{o[0]==="["||t[o]?(s.push(...i.sort(),o),i=[]):i.push(o)}),s.push(...i.sort()),s}},VD=e=>({cache:WD(e.cacheSize),parseClassName:qD(e),sortModifiers:HD(e),...FD(e)}),YD=/\s+/,XD=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s,sortModifiers:i}=t,o=[],l=e.trim().split(YD);let d="";for(let u=l.length-1;u>=0;u-=1){const c=l[u],{isExternal:m,modifiers:f,hasImportantModifier:h,baseClassName:g,maybePostfixModifierPosition:x}=r(c);if(m){d=c+(d.length>0?" "+d:d);continue}let b=!!x,y=n(b?g.substring(0,x):g);if(!y){if(!b){d=c+(d.length>0?" "+d:d);continue}if(y=n(g),!y){d=c+(d.length>0?" "+d:d);continue}b=!1}const j=i(f).join(":"),w=h?j+Al:j,S=w+y;if(o.includes(S))continue;o.push(S);const v=s(y,b);for(let N=0;N<v.length;++N){const _=v[N];o.push(w+_)}d=c+(d.length>0?" "+d:d)}return d};function ZD(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=vv(t))&&(n&&(n+=" "),n+=r);return n}const vv=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=vv(e[n]))&&(r&&(r+=" "),r+=t);return r};function JD(e,...t){let r,n,s,i=o;function o(d){const u=t.reduce((c,m)=>m(c),e());return r=VD(u),n=r.cache.get,s=r.cache.set,i=l,l(d)}function l(d){const u=n(d);if(u)return u;const c=XD(d,r);return s(d,c),c}return function(){return i(ZD.apply(null,arguments))}}const Oe=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},yv=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,bv=/^\((?:(\w[\w-]*):)?(.+)\)$/i,QD=/^\d+\/\d+$/,e5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,t5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,r5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,n5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,a5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,fn=e=>QD.test(e),ne=e=>!!e&&!Number.isNaN(Number(e)),vr=e=>!!e&&Number.isInteger(Number(e)),Po=e=>e.endsWith("%")&&ne(e.slice(0,-1)),Vt=e=>e5.test(e),s5=()=>!0,i5=e=>t5.test(e)&&!r5.test(e),jv=()=>!1,o5=e=>n5.test(e),l5=e=>a5.test(e),c5=e=>!W(e)&&!K(e),d5=e=>zn(e,Sv,jv),W=e=>yv.test(e),Ir=e=>zn(e,_v,i5),Ao=e=>zn(e,p5,ne),Df=e=>zn(e,wv,jv),u5=e=>zn(e,Nv,l5),es=e=>zn(e,Pv,o5),K=e=>bv.test(e),ea=e=>Un(e,_v),m5=e=>Un(e,g5),If=e=>Un(e,wv),f5=e=>Un(e,Sv),h5=e=>Un(e,Nv),ts=e=>Un(e,Pv,!0),zn=(e,t,r)=>{const n=yv.exec(e);return n?n[1]?t(n[1]):r(n[2]):!1},Un=(e,t,r=!1)=>{const n=bv.exec(e);return n?n[1]?t(n[1]):r:!1},wv=e=>e==="position"||e==="percentage",Nv=e=>e==="image"||e==="url",Sv=e=>e==="length"||e==="size"||e==="bg-size",_v=e=>e==="length",p5=e=>e==="number",g5=e=>e==="family-name",Pv=e=>e==="shadow",x5=()=>{const e=Oe("color"),t=Oe("font"),r=Oe("text"),n=Oe("font-weight"),s=Oe("tracking"),i=Oe("leading"),o=Oe("breakpoint"),l=Oe("container"),d=Oe("spacing"),u=Oe("radius"),c=Oe("shadow"),m=Oe("inset-shadow"),f=Oe("text-shadow"),h=Oe("drop-shadow"),g=Oe("blur"),x=Oe("perspective"),b=Oe("aspect"),y=Oe("ease"),j=Oe("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],v=()=>[...S(),K,W],N=()=>["auto","hidden","clip","visible","scroll"],_=()=>["auto","contain","none"],A=()=>[K,W,d],k=()=>[fn,"full","auto",...A()],C=()=>[vr,"none","subgrid",K,W],T=()=>["auto",{span:["full",vr,K,W]},vr,K,W],O=()=>[vr,"auto",K,W],F=()=>["auto","min","max","fr",K,W],P=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],$=()=>["start","end","center","stretch","center-safe","end-safe"],D=()=>["auto",...A()],B=()=>[fn,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],I=()=>[e,K,W],X=()=>[...S(),If,Df,{position:[K,W]}],Z=()=>["no-repeat",{repeat:["","x","y","space","round"]}],se=()=>["auto","cover","contain",f5,d5,{size:[K,W]}],G=()=>[Po,ea,Ir],H=()=>["","none","full",u,K,W],J=()=>["",ne,ea,Ir],Q=()=>["solid","dashed","dotted","double"],ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],E=()=>[ne,Po,If,Df],z=()=>["","none",g,K,W],L=()=>["none",ne,K,W],V=()=>["none",ne,K,W],ee=()=>[ne,K,W],R=()=>[fn,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Vt],breakpoint:[Vt],color:[s5],container:[Vt],"drop-shadow":[Vt],ease:["in","out","in-out"],font:[c5],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Vt],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Vt],shadow:[Vt],spacing:["px",ne],text:[Vt],"text-shadow":[Vt],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",fn,W,K,b]}],container:["container"],columns:[{columns:[ne,W,K,l]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:v()}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:_()}],"overscroll-x":[{"overscroll-x":_()}],"overscroll-y":[{"overscroll-y":_()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:k()}],"inset-x":[{"inset-x":k()}],"inset-y":[{"inset-y":k()}],start:[{start:k()}],end:[{end:k()}],top:[{top:k()}],right:[{right:k()}],bottom:[{bottom:k()}],left:[{left:k()}],visibility:["visible","invisible","collapse"],z:[{z:[vr,"auto",K,W]}],basis:[{basis:[fn,"full","auto",l,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ne,fn,"auto","initial","none",W]}],grow:[{grow:["",ne,K,W]}],shrink:[{shrink:["",ne,K,W]}],order:[{order:[vr,"first","last","none",K,W]}],"grid-cols":[{"grid-cols":C()}],"col-start-end":[{col:T()}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":C()}],"row-start-end":[{row:T()}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":F()}],"auto-rows":[{"auto-rows":F()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...P(),"normal"]}],"justify-items":[{"justify-items":[...$(),"normal"]}],"justify-self":[{"justify-self":["auto",...$()]}],"align-content":[{content:["normal",...P()]}],"align-items":[{items:[...$(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...$(),{baseline:["","last"]}]}],"place-content":[{"place-content":P()}],"place-items":[{"place-items":[...$(),"baseline"]}],"place-self":[{"place-self":["auto",...$()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:D()}],mx:[{mx:D()}],my:[{my:D()}],ms:[{ms:D()}],me:[{me:D()}],mt:[{mt:D()}],mr:[{mr:D()}],mb:[{mb:D()}],ml:[{ml:D()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:B()}],w:[{w:[l,"screen",...B()]}],"min-w":[{"min-w":[l,"screen","none",...B()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...B()]}],h:[{h:["screen","lh",...B()]}],"min-h":[{"min-h":["screen","lh","none",...B()]}],"max-h":[{"max-h":["screen","lh",...B()]}],"font-size":[{text:["base",r,ea,Ir]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,K,Ao]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Po,W]}],"font-family":[{font:[m5,W,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,K,W]}],"line-clamp":[{"line-clamp":[ne,"none",K,Ao]}],leading:[{leading:[i,...A()]}],"list-image":[{"list-image":["none",K,W]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",K,W]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:I()}],"text-color":[{text:I()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:[ne,"from-font","auto",K,Ir]}],"text-decoration-color":[{decoration:I()}],"underline-offset":[{"underline-offset":[ne,"auto",K,W]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",K,W]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",K,W]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:X()}],"bg-repeat":[{bg:Z()}],"bg-size":[{bg:se()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},vr,K,W],radial:["",K,W],conic:[vr,K,W]},h5,u5]}],"bg-color":[{bg:I()}],"gradient-from-pos":[{from:G()}],"gradient-via-pos":[{via:G()}],"gradient-to-pos":[{to:G()}],"gradient-from":[{from:I()}],"gradient-via":[{via:I()}],"gradient-to":[{to:I()}],rounded:[{rounded:H()}],"rounded-s":[{"rounded-s":H()}],"rounded-e":[{"rounded-e":H()}],"rounded-t":[{"rounded-t":H()}],"rounded-r":[{"rounded-r":H()}],"rounded-b":[{"rounded-b":H()}],"rounded-l":[{"rounded-l":H()}],"rounded-ss":[{"rounded-ss":H()}],"rounded-se":[{"rounded-se":H()}],"rounded-ee":[{"rounded-ee":H()}],"rounded-es":[{"rounded-es":H()}],"rounded-tl":[{"rounded-tl":H()}],"rounded-tr":[{"rounded-tr":H()}],"rounded-br":[{"rounded-br":H()}],"rounded-bl":[{"rounded-bl":H()}],"border-w":[{border:J()}],"border-w-x":[{"border-x":J()}],"border-w-y":[{"border-y":J()}],"border-w-s":[{"border-s":J()}],"border-w-e":[{"border-e":J()}],"border-w-t":[{"border-t":J()}],"border-w-r":[{"border-r":J()}],"border-w-b":[{"border-b":J()}],"border-w-l":[{"border-l":J()}],"divide-x":[{"divide-x":J()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":J()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Q(),"hidden","none"]}],"divide-style":[{divide:[...Q(),"hidden","none"]}],"border-color":[{border:I()}],"border-color-x":[{"border-x":I()}],"border-color-y":[{"border-y":I()}],"border-color-s":[{"border-s":I()}],"border-color-e":[{"border-e":I()}],"border-color-t":[{"border-t":I()}],"border-color-r":[{"border-r":I()}],"border-color-b":[{"border-b":I()}],"border-color-l":[{"border-l":I()}],"divide-color":[{divide:I()}],"outline-style":[{outline:[...Q(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ne,K,W]}],"outline-w":[{outline:["",ne,ea,Ir]}],"outline-color":[{outline:I()}],shadow:[{shadow:["","none",c,ts,es]}],"shadow-color":[{shadow:I()}],"inset-shadow":[{"inset-shadow":["none",m,ts,es]}],"inset-shadow-color":[{"inset-shadow":I()}],"ring-w":[{ring:J()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:I()}],"ring-offset-w":[{"ring-offset":[ne,Ir]}],"ring-offset-color":[{"ring-offset":I()}],"inset-ring-w":[{"inset-ring":J()}],"inset-ring-color":[{"inset-ring":I()}],"text-shadow":[{"text-shadow":["none",f,ts,es]}],"text-shadow-color":[{"text-shadow":I()}],opacity:[{opacity:[ne,K,W]}],"mix-blend":[{"mix-blend":[...ce(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ce()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ne]}],"mask-image-linear-from-pos":[{"mask-linear-from":E()}],"mask-image-linear-to-pos":[{"mask-linear-to":E()}],"mask-image-linear-from-color":[{"mask-linear-from":I()}],"mask-image-linear-to-color":[{"mask-linear-to":I()}],"mask-image-t-from-pos":[{"mask-t-from":E()}],"mask-image-t-to-pos":[{"mask-t-to":E()}],"mask-image-t-from-color":[{"mask-t-from":I()}],"mask-image-t-to-color":[{"mask-t-to":I()}],"mask-image-r-from-pos":[{"mask-r-from":E()}],"mask-image-r-to-pos":[{"mask-r-to":E()}],"mask-image-r-from-color":[{"mask-r-from":I()}],"mask-image-r-to-color":[{"mask-r-to":I()}],"mask-image-b-from-pos":[{"mask-b-from":E()}],"mask-image-b-to-pos":[{"mask-b-to":E()}],"mask-image-b-from-color":[{"mask-b-from":I()}],"mask-image-b-to-color":[{"mask-b-to":I()}],"mask-image-l-from-pos":[{"mask-l-from":E()}],"mask-image-l-to-pos":[{"mask-l-to":E()}],"mask-image-l-from-color":[{"mask-l-from":I()}],"mask-image-l-to-color":[{"mask-l-to":I()}],"mask-image-x-from-pos":[{"mask-x-from":E()}],"mask-image-x-to-pos":[{"mask-x-to":E()}],"mask-image-x-from-color":[{"mask-x-from":I()}],"mask-image-x-to-color":[{"mask-x-to":I()}],"mask-image-y-from-pos":[{"mask-y-from":E()}],"mask-image-y-to-pos":[{"mask-y-to":E()}],"mask-image-y-from-color":[{"mask-y-from":I()}],"mask-image-y-to-color":[{"mask-y-to":I()}],"mask-image-radial":[{"mask-radial":[K,W]}],"mask-image-radial-from-pos":[{"mask-radial-from":E()}],"mask-image-radial-to-pos":[{"mask-radial-to":E()}],"mask-image-radial-from-color":[{"mask-radial-from":I()}],"mask-image-radial-to-color":[{"mask-radial-to":I()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":S()}],"mask-image-conic-pos":[{"mask-conic":[ne]}],"mask-image-conic-from-pos":[{"mask-conic-from":E()}],"mask-image-conic-to-pos":[{"mask-conic-to":E()}],"mask-image-conic-from-color":[{"mask-conic-from":I()}],"mask-image-conic-to-color":[{"mask-conic-to":I()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:X()}],"mask-repeat":[{mask:Z()}],"mask-size":[{mask:se()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",K,W]}],filter:[{filter:["","none",K,W]}],blur:[{blur:z()}],brightness:[{brightness:[ne,K,W]}],contrast:[{contrast:[ne,K,W]}],"drop-shadow":[{"drop-shadow":["","none",h,ts,es]}],"drop-shadow-color":[{"drop-shadow":I()}],grayscale:[{grayscale:["",ne,K,W]}],"hue-rotate":[{"hue-rotate":[ne,K,W]}],invert:[{invert:["",ne,K,W]}],saturate:[{saturate:[ne,K,W]}],sepia:[{sepia:["",ne,K,W]}],"backdrop-filter":[{"backdrop-filter":["","none",K,W]}],"backdrop-blur":[{"backdrop-blur":z()}],"backdrop-brightness":[{"backdrop-brightness":[ne,K,W]}],"backdrop-contrast":[{"backdrop-contrast":[ne,K,W]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ne,K,W]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ne,K,W]}],"backdrop-invert":[{"backdrop-invert":["",ne,K,W]}],"backdrop-opacity":[{"backdrop-opacity":[ne,K,W]}],"backdrop-saturate":[{"backdrop-saturate":[ne,K,W]}],"backdrop-sepia":[{"backdrop-sepia":["",ne,K,W]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",K,W]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ne,"initial",K,W]}],ease:[{ease:["linear","initial",y,K,W]}],delay:[{delay:[ne,K,W]}],animate:[{animate:["none",j,K,W]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,K,W]}],"perspective-origin":[{"perspective-origin":v()}],rotate:[{rotate:L()}],"rotate-x":[{"rotate-x":L()}],"rotate-y":[{"rotate-y":L()}],"rotate-z":[{"rotate-z":L()}],scale:[{scale:V()}],"scale-x":[{"scale-x":V()}],"scale-y":[{"scale-y":V()}],"scale-z":[{"scale-z":V()}],"scale-3d":["scale-3d"],skew:[{skew:ee()}],"skew-x":[{"skew-x":ee()}],"skew-y":[{"skew-y":ee()}],transform:[{transform:[K,W,"","none","gpu","cpu"]}],"transform-origin":[{origin:v()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:R()}],"translate-x":[{"translate-x":R()}],"translate-y":[{"translate-y":R()}],"translate-z":[{"translate-z":R()}],"translate-none":["translate-none"],accent:[{accent:I()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:I()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",K,W]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",K,W]}],fill:[{fill:["none",...I()]}],"stroke-w":[{stroke:[ne,ea,Ir,Ao]}],stroke:[{stroke:["none",...I()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},v5=JD(x5);function yd(...e){return v5(fe(e))}const El=mt.forwardRef(({className:e,variant:t,...r},n)=>a.jsx("div",{ref:n,role:"alert",className:yd("relative w-full rounded-lg border p-4",{"border-red-200 bg-red-50 text-red-900":t==="destructive","border-yellow-200 bg-yellow-50 text-yellow-900":t==="warning","border-blue-200 bg-blue-50 text-blue-900":t==="info","border-green-200 bg-green-50 text-green-900":t==="success","border-gray-200 bg-gray-50 text-gray-900":!t||t==="default"},e),...r}));El.displayName="Alert";const Cl=mt.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:yd("text-sm [&_p]:leading-relaxed",e),...t}));Cl.displayName="AlertDescription";const y5=mt.forwardRef(({className:e,...t},r)=>a.jsx("h5",{ref:r,className:yd("mb-1 font-medium leading-none tracking-tight",e),...t}));y5.displayName="AlertTitle";function b5(){const{user:e,hasPermission:t}=Bt(),{notify:r}=at(),[n,s]=p.useState([]),[i,o]=p.useState(!1),[l,d]=p.useState(null),[u,c]=p.useState(""),[m,f]=p.useState(!0),[h,g]=p.useState([]),x=t("audit:logs")&&(e==null?void 0:e.role)==="Super Admin";p.useEffect(()=>{x&&b()},[x]),p.useEffect(()=>{if(u){const v=n.filter(N=>{var _,A,k,C;return((_=N.user_name)==null?void 0:_.toLowerCase().includes(u.toLowerCase()))||((A=N.user_email)==null?void 0:A.toLowerCase().includes(u.toLowerCase()))||((k=N.user_role)==null?void 0:k.toLowerCase().includes(u.toLowerCase()))||((C=N.ip_address)==null?void 0:C.includes(u))});g(v)}else g(n)},[u,n]);const b=async()=>{try{o(!0),d(null);const v=await LD.getUserLoginHistory(e.id);s(v),r({type:"success",title:"Login History Loaded",message:`Retrieved ${v.length} login records`})}catch(v){console.error("Failed to fetch login history:",v),d(v.message),r({type:"error",title:"Access Denied",message:v.message})}finally{o(!1)}},y=()=>{if(h.length===0){r({type:"warning",title:"No Data",message:"No login history to export"});return}const N=[["User Name","Email","Role","IP Address","Login Time","Last Activity","Status","Logout Time"].join(","),...h.map(C=>[`"${C.user_name||"N/A"}"`,`"${C.user_email||"N/A"}"`,`"${C.user_role||"N/A"}"`,`"${m?C.ip_address||"N/A":"Hidden"}"`,`"${new Date(C.login_time).toLocaleString()}"`,`"${C.last_activity?new Date(C.last_activity).toLocaleString():"N/A"}"`,`"${C.is_active?"Active":"Inactive"}"`,`"${C.logout_time?new Date(C.logout_time).toLocaleString():"N/A"}"`].join(","))].join(`
`),_=new Blob([N],{type:"text/csv;charset=utf-8;"}),A=document.createElement("a"),k=URL.createObjectURL(_);A.setAttribute("href",k),A.setAttribute("download",`login_history_${new Date().toISOString().split("T")[0]}.csv`),A.style.visibility="hidden",document.body.appendChild(A),A.click(),document.body.removeChild(A),r({type:"success",title:"Export Complete",message:"Login history exported to CSV"})},j=v=>v?new Date(v).toLocaleString():"N/A",w=v=>a.jsx(Yt,{variant:v?"success":"secondary",children:v?"Active":"Inactive"}),S=v=>{const N={"Super Admin":"destructive","Operations Head":"warning",HR:"info",Manager:"secondary",Employee:"outline",Intern:"outline",Freelancer:"outline"};return a.jsx(Yt,{variant:N[v]||"outline",children:v})};return x?a.jsxs(de,{className:"w-full max-w-6xl mx-auto",children:[a.jsxs(et,{children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx(tt,{className:"text-2xl font-bold",children:"User Login History"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs($e,{variant:"outline",size:"sm",onClick:()=>f(!m),className:"flex items-center gap-2",children:[m?a.jsx(zy,{className:"h-4 w-4"}):a.jsx(as,{className:"h-4 w-4"}),m?"Hide IPs":"Show IPs"]}),a.jsxs($e,{variant:"outline",size:"sm",onClick:y,disabled:h.length===0,className:"flex items-center gap-2",children:[a.jsx(Jf,{className:"h-4 w-4"}),"Export CSV"]}),a.jsxs($e,{variant:"outline",size:"sm",onClick:b,disabled:i,className:"flex items-center gap-2",children:[a.jsx(Rd,{className:`h-4 w-4 ${i?"animate-spin":""}`}),"Refresh"]})]})]}),a.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx(Uy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(Ws,{placeholder:"Search by name, email, role, or IP address...",value:u,onChange:v=>c(v.target.value),className:"pl-10"})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",h.length," of ",n.length," records"]})]})]}),a.jsxs(ue,{children:[l&&a.jsx(El,{className:"mb-4",children:a.jsx(Cl,{children:l})}),i?a.jsxs("div",{className:"flex justify-center items-center py-8",children:[a.jsx(Rd,{className:"h-6 w-6 animate-spin"}),a.jsx("span",{className:"ml-2",children:"Loading login history..."})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full border-collapse border border-gray-200",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50",children:[a.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"User"}),a.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Role"}),m&&a.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"IP Address"}),a.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Login Time"}),a.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Last Activity"}),a.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Status"}),a.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Logout Time"})]})}),a.jsx("tbody",{children:h.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:m?7:6,className:"border border-gray-200 px-4 py-8 text-center text-gray-500",children:u?"No matching login records found":"No login history available"})}):h.map((v,N)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"border border-gray-200 px-4 py-2",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:v.user_name||"Unknown"}),a.jsx("div",{className:"text-sm text-gray-600",children:v.user_email})]})}),a.jsx("td",{className:"border border-gray-200 px-4 py-2",children:S(v.user_role)}),m&&a.jsx("td",{className:"border border-gray-200 px-4 py-2 font-mono text-sm",children:v.ip_address||"N/A"}),a.jsx("td",{className:"border border-gray-200 px-4 py-2 text-sm",children:j(v.login_time)}),a.jsx("td",{className:"border border-gray-200 px-4 py-2 text-sm",children:j(v.last_activity)}),a.jsx("td",{className:"border border-gray-200 px-4 py-2",children:w(v.is_active)}),a.jsx("td",{className:"border border-gray-200 px-4 py-2 text-sm",children:j(v.logout_time)})]},v.id||N))})]})})]})]}):a.jsx(de,{className:"w-full max-w-4xl mx-auto",children:a.jsx(ue,{className:"p-6",children:a.jsx(El,{children:a.jsx(Cl,{children:"Access Denied: Only Super Admin users can view login history."})})})})}function j5({onNavigateToDashboard:e}){var jd,wd,Nd;const t=kt(),{submissions:r,clients:n,loading:s,refreshAllData:i}=sy(),{employees:o}=iy(),{notify:l}=at(),{openModal:d,closeModal:u}=Vf(),{crossDashboardData:c,performanceMetrics:m,dashboardActivity:f,notifications:h,unreadNotifications:g,activeDashboards:x,totalActiveUsers:b,updateDashboardActivity:y,markNotificationRead:j,clearNotifications:w}=oy(),{currentUser:S,hasFeatureAccess:v}=ly(),{systemNotifications:N}=cy(),{auditLogs:_,logUserAction:A}=dy(),{navigate:k}=uy(),[C,T]=p.useState([]),[O,F]=p.useState({employees:0,interns:0,freelancers:0,managers:0,sales:0,hr:0,finance:0,agency:0}),[P,$]=p.useState({sales:{value:"₹0",change:"+0%"},hr:{value:"0",change:"+0"},finance:{value:"₹0",change:"+0%"},intern:{value:"0",change:"+0"}}),[D,B]=p.useState({totalEmployees:0,activeProjects:0,monthlyRevenue:"₹0",clientSatisfaction:0}),[I,X]=p.useState({database:"healthy",sync:"healthy",performance:"good",security:"secure"}),[Z,se]=p.useState(!1),[G,H]=p.useState(!1),[J,Q]=p.useState(!1),[ce,E]=p.useState(!1),[z,L]=p.useState(!1),[V,ee]=p.useState(!1),[R,Ne]=p.useState(!1),[ie,We]=p.useState(!1),[he,Ht]=p.useState({totalSubmissions:0,currentMonthSubmissions:0,totalEmployees:0,activeEmployees:0,totalClients:0,activeClients:0,pendingReviews:0,averagePerformance:8.5,dataSync:"healthy"});p.useEffect(()=>{(async()=>{let ve={};if(S)try{ve=await Ed.getPersonalizedDashboardMetrics(S,"superAdmin")}catch(Ot){console.error("Error loading personalized metrics:",Ot)}const bt=ve.totalSubmissions||(r==null?void 0:r.length)||0,hr=new Date().toISOString().slice(0,7),Ee=ve.currentMonthSubmissions||(r==null?void 0:r.filter(Ot=>{var Da;return(Da=Ot.created_at)==null?void 0:Da.startsWith(hr)}).length)||0,pr=ve.totalEmployees||(o==null?void 0:o.length)||0,Ta=ve.activeEmployees||(o==null?void 0:o.filter(Ot=>Ot.status==="active").length)||0,Ma=ve.totalClients||(n==null?void 0:n.length)||0,Ki=ve.activeClients||(n==null?void 0:n.filter(Ot=>Ot.status==="active").length)||0,kv=ve.pendingReviews||(r==null?void 0:r.filter(Ot=>Ot.status==="pending_review").length)||0,Ev=ve.averagePerformance||((r==null?void 0:r.length)>0?r.reduce((Ot,Da)=>Ot+(Da.performance_score||0),0)/r.length:8.5),Cv=s.submissions||s.clients?"syncing":"healthy";Ht({totalSubmissions:bt,currentMonthSubmissions:Ee,totalEmployees:pr,activeEmployees:Ta,totalClients:Ma,activeClients:Ki,pendingReviews:kv,averagePerformance:Ev,dataSync:Cv})})()},[r,o,n,s,S]);const Wn=p.useCallback(async()=>{try{const[ae,ve]=await Promise.all([kd.getDynamicStats(),kd.getSuperAdminStats()]);$(ae),B(ve)}catch(ae){console.error("Error fetching dynamic stats:",ae),$({sales:{value:"₹2.5M",change:"+12%"},hr:{value:"156",change:"+8"},finance:{value:"₹1.2M",change:"+5%"},intern:{value:"15",change:"+3"}}),B({totalEmployees:156,activeProjects:45,monthlyRevenue:"₹2.5M",clientSatisfaction:92})}},[]);p.useEffect(()=>{const ae=()=>{const bt=t?"healthy":"local",hr=s.submissions||s.clients?"syncing":"healthy",Ee=he.averagePerformance>8?"excellent":he.averagePerformance>6?"good":"needs-attention",pr="secure";(I.database!==bt||I.sync!==hr||I.performance!==Ee||I.security!==pr)&&X({database:bt,sync:hr,performance:Ee,security:pr})};ae();const ve=setInterval(ae,3e4);return()=>clearInterval(ve)},[he.averagePerformance,s,t]);const bd=p.useCallback(async()=>{if(S)try{const ae=await Ed.getPersonalizedDashboardCards(S);T(ae)}catch(ae){console.error("Error loading personalized cards:",ae),T([])}},[S]);p.useEffect(()=>{Wn(),bd()},[Wn,bd]);const yt=p.useCallback(async(ae,ve)=>{try{switch(ae){case"refresh":await i(),l("Data refreshed successfully","success"),A("data_refresh",{dashboard:ve});break;case"broadcast":d("broadcast",{dashboard:ve});break;case"backup":l("Backup initiated","info"),A("backup_initiated",{dashboard:ve});break;case"export":l("Export started","info"),A("data_export",{dashboard:ve});break;case"audit":ee(!0);break;default:console.warn("Unknown action:",ae)}}catch(bt){console.error("Quick action failed:",bt),l("Action failed. Please try again.","error")}},[i,l,d,A]),Mr=({title:ae,icon:ve,color:bt,stats:hr,onNavigate:Ee,onQuickAction:pr,isNew:Ta=!1})=>a.jsx("div",{className:`bg-white rounded-2xl shadow-lg border border-gray-200/50 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 ${Ta?"ring-2 ring-green-200":""}`,children:a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`w-14 h-14 bg-gradient-to-r ${bt} rounded-xl flex items-center justify-center text-white text-2xl shadow-lg`,children:ve}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[ae,Ta&&a.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-medium",children:"NEW"})]}),a.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Full administrative access"})]})]})}),a.jsx("div",{className:"grid grid-cols-3 gap-4 mb-6",children:hr.map((Ma,Ki)=>a.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-xl",children:[a.jsx("div",{className:"text-xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:Ma.value}),a.jsx("div",{className:"text-xs text-gray-600 font-medium mt-1",children:Ma.label})]},Ki))}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:Ee,className:`flex-1 bg-gradient-to-r ${bt} hover:shadow-lg text-white py-3 px-4 rounded-xl text-sm font-semibold transition-all duration-300 transform hover:scale-105`,children:"Open Dashboard"}),a.jsx("button",{onClick:()=>pr("refresh"),className:"px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl text-sm font-medium hover:shadow-md transition-all duration-300",title:"Refresh Data",children:"↻"})]})]})});if(s.submissions||s.clients)return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx(Pe,{size:"lg"})});const Av=({userRole:ae="superAdmin"})=>{const ve=Cd[ae]||Cd.superAdmin;return a.jsx("div",{className:"w-64 bg-white border-r border-gray-200 h-full",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:ve.title}),ve.sections.map((bt,hr)=>a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3",children:bt.title}),a.jsx("nav",{className:"space-y-1",children:bt.items.map((Ee,pr)=>a.jsxs("button",{onClick:()=>{Ee.path.includes("#/")?k.navigateToHash(Ee.path.replace("#/","")):k.navigateToPath(Ee.path)},className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-700 rounded-lg hover:bg-gray-100 transition-colors text-left",children:[a.jsx("span",{className:"text-gray-400",children:Ee.icon==="LayoutDashboard"?"📊":Ee.icon==="BarChart3"?"📈":Ee.icon==="Users"?"👥":Ee.icon==="Building"?"🏢":Ee.icon==="Shield"?"🛡️":Ee.icon==="Settings"?"⚙️":Ee.icon==="FileText"?"📄":Ee.icon==="Database"?"💾":"📋"}),Ee.label]},pr))})]},hr))]})})};return a.jsx(Eo,{show:!0,children:a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50 flex",children:[a.jsx(Av,{userRole:((jd=S==null?void 0:S.role)==null?void 0:jd.toLowerCase())||"superAdmin"}),a.jsx("div",{className:"flex-1",children:a.jsx(Ny,{title:"Super Admin Dashboard",subtitle:"Complete system oversight and control",icon:"🔥",showNotifications:!0,showProfile:!0,customActions:[{label:"Refresh All",onClick:()=>yt("refresh","all"),variant:"default"},{label:"Backup",onClick:()=>yt("backup","system"),variant:"default"},{label:"Settings",onClick:()=>We(!0),variant:"default"}]})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg border border-blue-200/50 p-6 hover:shadow-xl transition-all duration-300",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Total Users"}),a.jsx("p",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:he.totalEmployees})]}),a.jsx("div",{className:"w-14 h-14 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:a.jsx("span",{className:"text-white text-2xl",children:"👥"})})]})}),a.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl shadow-lg border border-green-200/50 p-6 hover:shadow-xl transition-all duration-300",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Active Dashboards"}),a.jsx("p",{className:"text-3xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:(x==null?void 0:x.length)||8})]}),a.jsx("div",{className:"w-14 h-14 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg",children:a.jsx("span",{className:"text-white text-2xl",children:"📊"})})]})}),a.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 rounded-2xl shadow-lg border border-purple-200/50 p-6 hover:shadow-xl transition-all duration-300",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"System Performance"}),a.jsxs("p",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-violet-600 bg-clip-text text-transparent",children:[((wd=he.averagePerformance)==null?void 0:wd.toFixed(1))||"8.5","/10"]})]}),a.jsx("div",{className:"w-14 h-14 bg-gradient-to-r from-purple-500 to-violet-600 rounded-xl flex items-center justify-center shadow-lg",children:a.jsx("span",{className:"text-white text-2xl",children:"⚡"})})]})}),a.jsx("div",{className:"bg-gradient-to-br from-red-50 to-pink-50 rounded-2xl shadow-lg border border-red-200/50 p-6 hover:shadow-xl transition-all duration-300",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Security Status"}),a.jsx("p",{className:"text-3xl font-bold bg-gradient-to-r from-red-600 to-pink-600 bg-clip-text text-transparent",children:"Secure"})]}),a.jsx("div",{className:"w-14 h-14 bg-gradient-to-r from-red-500 to-pink-600 rounded-xl flex items-center justify-center shadow-lg",children:a.jsx("span",{className:"text-white text-2xl",children:"🔒"})})]})})]}),a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex items-center mb-8",children:[a.jsx("div",{className:"w-1 h-8 bg-gradient-to-b from-blue-500 to-purple-600 rounded-full mr-4"}),a.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:"Core Dashboards"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(Mr,{title:"Employee Dashboard",icon:"👥",color:"from-blue-500 to-blue-600",stats:[{label:"Total Employees",value:he.totalEmployees},{label:"Active This Month",value:he.activeEmployees},{label:"Submissions",value:he.currentMonthSubmissions}],onNavigate:()=>e("employee"),onQuickAction:ae=>yt(ae,"employee")}),a.jsx(Mr,{title:"Agency Dashboard",icon:"🚀",color:"from-amber-500 to-amber-600",stats:[{label:"Active Users",value:O.agency},{label:"Total Clients",value:he.totalClients},{label:"Active Clients",value:he.activeClients}],onNavigate:()=>e("agency"),onQuickAction:ae=>yt(ae,"agency")}),a.jsx(Mr,{title:"Intern Dashboard",icon:"🎓",color:"from-orange-500 to-orange-600",stats:[{label:"Active Interns",value:(o==null?void 0:o.filter(ae=>ae.employee_type==="Intern"&&ae.status==="active").length)||0},{label:"Total Interns",value:P.intern.value,change:P.intern.change},{label:"Performance",value:"85%"}],onNavigate:()=>e("intern"),onQuickAction:ae=>yt(ae,"intern")}),a.jsx(Mr,{title:"Manager Dashboard",icon:"⚡",color:"from-purple-500 to-purple-600",stats:[{label:"Pending Reviews",value:he.pendingReviews},{label:"Team Performance",value:`${((Nd=he.averagePerformance)==null?void 0:Nd.toFixed(1))||"8.5"}/10`},{label:"Data Sync",value:he.dataSync}],onNavigate:()=>e("manager"),onQuickAction:ae=>yt(ae,"manager")})]})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Administrative Dashboards"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsx(Mr,{title:"Sales Dashboard",icon:"💰",color:"from-green-500 to-green-600",stats:[{label:"Revenue",value:P.sales.value,change:P.sales.change},{label:"Active Projects",value:D.activeProjects},{label:"Client Satisfaction",value:`${D.clientSatisfaction}%`}],onNavigate:()=>e("sales"),onQuickAction:ae=>yt(ae,"sales")}),a.jsx(Mr,{title:"HR Dashboard",icon:"👤",color:"from-pink-500 to-pink-600",stats:[{label:"Total Employees",value:P.hr.value,change:P.hr.change},{label:"Active Employees",value:D.totalEmployees},{label:"Pending Reviews",value:he.pendingReviews}],onNavigate:()=>e("hr"),onQuickAction:ae=>yt(ae,"hr")}),a.jsx(Mr,{title:"Finance Dashboard",icon:"📊",color:"from-indigo-500 to-indigo-600",stats:[{label:"Monthly Revenue",value:P.finance.value,change:P.finance.change},{label:"Total Revenue",value:D.monthlyRevenue},{label:"Profit Margin",value:"47%"}],onNavigate:()=>e("finance"),onQuickAction:ae=>yt(ae,"finance")})]})]}),a.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl shadow-lg text-white p-6 mb-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"📊 Monthly Analytics & Reports"}),a.jsx("p",{className:"text-indigo-100 text-sm",children:"Access comprehensive system-wide monthly reports and analytics"})]}),a.jsx("button",{onClick:()=>e("monthly-reports"),className:"px-4 py-2 bg-white text-indigo-600 rounded-lg hover:bg-indigo-50 transition-colors font-medium",children:"View Reports →"})]})}),a.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl shadow-lg text-white p-6 mb-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"📋 Form Tracking System"}),a.jsx("p",{className:"text-emerald-100 text-sm",children:"Monitor onboarding forms, submission status, and administrative oversight"})]}),a.jsx("button",{onClick:()=>e("form-tracking"),className:"px-4 py-2 bg-white text-emerald-600 rounded-lg hover:bg-emerald-50 transition-colors font-medium",children:"Track Forms →"})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6 mb-8",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"⚡ Quick Actions"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx("button",{onClick:()=>yt("refresh","all"),className:"flex items-center justify-center gap-2 bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors",children:"🔄 Refresh Data"}),a.jsx("button",{onClick:()=>yt("broadcast","system"),className:"flex items-center justify-center gap-2 bg-green-500 text-white py-2 px-4 rounded-lg hover:bg-green-600 transition-colors",children:"📢 Broadcast Message"}),a.jsx("button",{onClick:()=>yt("backup","system"),className:"flex items-center justify-center gap-2 bg-purple-500 text-white py-2 px-4 rounded-lg hover:bg-purple-600 transition-colors",children:"💾 Backup Data"}),a.jsx("button",{onClick:()=>We(!0),className:"flex items-center justify-center gap-2 bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600 transition-colors",children:"🔧 System Maintenance"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:a.jsx(Ay,{isManager:!0})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"🏆 Leaderboard"}),a.jsx(wD,{compact:!0})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"🔔 Notifications"}),a.jsx(my,{compact:!0})]})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Specialized Modules"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"🎮 Arcade Management"}),a.jsx(_D,{compact:!0})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"💼 Sales CRM"}),a.jsx(kD,{compact:!0})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"📈 SEO Appraisal"}),a.jsx(RD,{compact:!0})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Controls"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"🔐 Login History & Security"}),a.jsx(b5,{})]}),a.jsxs("button",{onClick:()=>Ne(!0),className:"w-full flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[a.jsxs("span",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-blue-600",children:"👥"}),a.jsx("span",{className:"font-medium",children:"User Management"})]}),a.jsx("span",{className:"text-gray-400",children:"→"})]}),a.jsxs("button",{onClick:()=>E(!0),className:"w-full flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[a.jsxs("span",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-green-600",children:"🔐"}),a.jsx("span",{className:"font-medium",children:"Access Control"})]}),a.jsx("span",{className:"text-gray-400",children:"→"})]}),a.jsxs("button",{onClick:()=>ee(!0),className:"w-full flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[a.jsxs("span",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-purple-600",children:"📋"}),a.jsx("span",{className:"font-medium",children:"Audit Logs"})]}),a.jsx("span",{className:"text-gray-400",children:"→"})]}),a.jsxs("button",{onClick:()=>We(!0),className:"w-full flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[a.jsxs("span",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-gray-600",children:"⚙️"}),a.jsx("span",{className:"font-medium",children:"System Settings"})]}),a.jsx("span",{className:"text-gray-400",children:"→"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent System Activity"}),a.jsx("div",{className:"space-y-3",children:(_==null?void 0:_.slice(0,5).map((ae,ve)=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:ae.action}),a.jsx("p",{className:"text-xs text-gray-600",children:ae.timestamp})]})]},ve)))||a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No recent activity"})})})]})]})]})]})})}class w5{constructor(){this.baseURL="/api/auth"}async makeRequest(t,r={}){const n=`${this.baseURL}${t}`,s={headers:{"Content-Type":"application/json",...r.headers},...r};try{const i=await fetch(n,s),o=await i.json();if(!i.ok)throw new Error(o.message||"Request failed");return o}catch(i){throw console.error(`API request failed: ${t}`,i),i}}async login(t,r){return this.makeRequest("/login",{method:"POST",body:JSON.stringify({phone:t,password:r})})}async setupPassword(t,r){return this.makeRequest("/setup-password",{method:"POST",headers:{Authorization:`Bearer ${r}`},body:JSON.stringify({newPassword:t})})}async verifySession(t){return this.makeRequest("/verify-session",{method:"POST",headers:{Authorization:`Bearer ${t}`}})}async logout(t){return this.makeRequest("/logout",{method:"POST",headers:{Authorization:`Bearer ${t}`}})}async createUserFromEmployee(t){return this.makeRequest("/create-from-employee",{method:"POST",body:JSON.stringify(t)})}async updateProfile(t,r){return this.makeRequest("/update-profile",{method:"PUT",headers:{Authorization:`Bearer ${r}`},body:JSON.stringify(t)})}async changePassword(t,r,n){return this.makeRequest("/change-password",{method:"POST",headers:{Authorization:`Bearer ${n}`},body:JSON.stringify({currentPassword:t,newPassword:r})})}async getProfile(t){return this.makeRequest("/profile",{method:"GET",headers:{Authorization:`Bearer ${t}`}})}async refreshSession(t){return this.makeRequest("/refresh-session",{method:"POST",headers:{Authorization:`Bearer ${t}`}})}}const N5=new w5,S5=["Full-time","Part-time","Remote","Intern","Consultant","Freelancer"],_5=["A+","A-","B+","B-","AB+","AB-","O+","O-"],P5=["ChatGPT","Claude","Gemini","Midjourney","DALL-E","Canva AI","Notion AI","GitHub Copilot","Jasper","Copy.ai","Grammarly","Other"],A5=["English","Hindi","Marathi","Gujarati","Tamil","Telugu","Bengali","Kannada","Malayalam","Punjabi","Other"],k5=["With Parents","With Spouse/Family","Alone","With Roommates","PG/Hostel","Other"],Rf=()=>{const{supabase:e}=kt(),{showToast:t}=at(),{showModal:r}=Vf(),[n,s]=p.useState({employeeName:"",department:"",role:[],employeeType:"",languages:[],aiTools:[],profilePictureUrl:"",documentsUrl:"",dateOfBirth:"",joiningDate:"",currentAddress:"",personalPhone:"",parentsAddress:"",parentsPhone:{father:"",mother:""},emailId:"",bloodGroup:"",educationCertificatesUrl:"",distanceFromOffice:"",livingSituation:"",linkedinProfile:"",favoriteFood:"",healthConditions:"",induction:{hrInductionDone:!1,companypoliciesRead:!1,offerLetterResponded:!1,deptTeamLeadInduction:!1,placeAllocated:!1,biometricSetup:!1,deviceDetails:{allocated:!1,simCard:"",macAddress:"",phoneIMEI:""},officialWhatsappAccess:{granted:!1,number:""},myzenInstalled:!1,razorpayOnboarding:{completed:!1,bankAccount:"",upiDetails:""},vehicleForMeetings:!1,roleClarity:!1,toolsAwareness:!1,monthlyGoals:"",quarterlyGoals:"",workAllocated:""},freelancerDetails:{paymentDetails:"",reportingSheetUrl:""},termsAndConditions:{ndaAccepted:!1,employmentBondAccepted:!1,companyGuidelineAccepted:!1,allTermsAccepted:!1}}),[i,o]=p.useState(!1),[l,d]=p.useState(!1),[u,c]=p.useState({searchPhone:"",searchEmail:""}),[m,f]=p.useState(!1),[h,g]=p.useState(null),x=(v,N)=>{if(v.includes(".")){const[_,A,k]=v.split(".");s(C=>({...C,[_]:{...C[_],[A]:k?{...C[_][A],[k]:N}:N}}))}else s(_=>({..._,[v]:N}))},b=()=>{const v=["employeeName","department","employeeType","dateOfBirth","joiningDate","currentAddress","personalPhone","emailId"];for(const k of v)if(!n[k])return t(`Please fill in ${k.replace(/([A-Z])/g," $1").toLowerCase()}`,"error"),!1;if(!n.role||n.role.length===0)return t("Please select at least one role","error"),!1;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.emailId))return t("Please enter a valid email address","error"),!1;if(!/^(\+91[\s\-]?)?[6-9]\d{9}$/.test(n.personalPhone.replace(/[\s\-]/g,"")))return t("Please enter a valid 10-digit Indian phone number","error"),!1;if(!n.termsAndConditions.allTermsAccepted)return t("Please accept all terms and conditions to proceed","error"),!1;if(n.employeeType==="Full-time"){if(!n.termsAndConditions.ndaAccepted)return t("Please accept the Non-Disclosure Agreement","error"),!1;if(!n.termsAndConditions.employmentBondAccepted)return t("Please accept the Employment Bond","error"),!1}return n.termsAndConditions.companyGuidelineAccepted?!0:(t("Please accept the Company Guidebook compliance","error"),!1)},y=async v=>{if(v.preventDefault(),!!b()){o(!0),g(null),f(!1);try{const{data:N,error:_}=await e.from("employees").select("id, name, phone, email").or(`phone.eq.${n.personalPhone},email.eq.${n.emailId}`).single();if(N&&!_){const T=`Employee already exists with ${N.phone===n.personalPhone?"phone number":"email address"}: ${N.name}`;g(T),t(T,"error"),o(!1);return}const A={name:n.employeeName,phone:n.personalPhone,email:n.emailId,department:n.department,role:n.role,employee_type:n.employeeType,date_of_birth:n.dateOfBirth,hire_date:n.joiningDate,status:"Active",profile_image_url:n.profilePictureUrl,address:{current:n.currentAddress,parents:n.parentsAddress},emergency_contact:{father_phone:n.parentsPhone.father,mother_phone:n.parentsPhone.mother},onboarding_data:{languages:n.languages,ai_tools:n.aiTools,blood_group:n.bloodGroup,distance_from_office:n.distanceFromOffice,living_situation:n.livingSituation,linkedin_profile:n.linkedinProfile,favorite_food:n.favoriteFood,health_conditions:n.healthConditions,documents_url:n.documentsUrl,education_certificates_url:n.educationCertificatesUrl,induction_checklist:n.induction,freelancer_details:n.freelancerDetails,terms_and_conditions:n.termsAndConditions},created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:k,error:C}=await e.from("employees").insert([A]).select();if(C){console.error("Error creating employee:",C),g("Failed to create employee record. Please try again."),t("Failed to create employee record","error");return}try{await N5.createUserFromOnboarding({employee_id:k[0].id,name:n.employeeName,email:n.emailId,phone:n.personalPhone,department:n.department,role:n.role,employee_type:n.employeeType})}catch(T){console.warn("User account creation failed:",T)}t("Employee onboarding completed successfully! Redirecting to employee directory...","success"),f(!0),setTimeout(()=>{window.location.href="/employee-directory"},2e3),s({employeeName:"",department:"",role:[],employeeType:"",languages:[],aiTools:[],profilePictureUrl:"",documentsUrl:"",dateOfBirth:"",joiningDate:"",currentAddress:"",personalPhone:"",parentsAddress:"",parentsPhone:{father:"",mother:""},emailId:"",bloodGroup:"",educationCertificatesUrl:"",distanceFromOffice:"",livingSituation:"",linkedinProfile:"",favoriteFood:"",healthConditions:"",induction:{hrInductionDone:!1,companypoliciesRead:!1,offerLetterResponded:!1,deptTeamLeadInduction:!1,placeAllocated:!1,biometricSetup:!1,deviceDetails:{allocated:!1,simCard:"",macAddress:"",phoneIMEI:""},officialWhatsappAccess:{granted:!1,number:""},myzenInstalled:!1,razorpayOnboarding:{completed:!1,bankAccount:"",upiDetails:""},vehicleForMeetings:!1,roleClarity:!1,toolsAwareness:!1,monthlyGoals:"",quarterlyGoals:"",workAllocated:""},freelancerDetails:{paymentDetails:"",reportingSheetUrl:""},termsAndConditions:{ndaAccepted:!1,employmentBondAccepted:!1,companyGuidelineAccepted:!1,allTermsAccepted:!1}})}catch(N){console.error("Submission error:",N),g("An unexpected error occurred during submission. Please try again."),t("An error occurred during submission","error")}finally{o(!1)}}},j=async()=>{var v,N,_,A,k,C,T,O,F,P,$,D,B,I,X,Z,se;if(!u.searchPhone&&!u.searchEmail){t("Please enter phone number or email to search","error");return}try{let G=e.from("employees").select("*");u.searchPhone?G=G.eq("phone",u.searchPhone):u.searchEmail&&(G=G.eq("email",u.searchEmail));const{data:H,error:J}=await G.single();if(J||!H){t("Employee not found","error");return}s({employeeName:H.name||"",department:H.department||"",role:H.role||[],employeeType:H.employee_type||"",languages:((v=H.onboarding_data)==null?void 0:v.languages)||[],aiTools:((N=H.onboarding_data)==null?void 0:N.ai_tools)||[],profilePictureUrl:H.profile_image_url||"",documentsUrl:((_=H.onboarding_data)==null?void 0:_.documents_url)||"",dateOfBirth:H.date_of_birth||"",joiningDate:H.hire_date||"",currentAddress:((A=H.address)==null?void 0:A.current)||"",personalPhone:H.phone||"",parentsAddress:((k=H.address)==null?void 0:k.parents)||"",parentsPhone:{father:((C=H.emergency_contact)==null?void 0:C.father_phone)||"",mother:((T=H.emergency_contact)==null?void 0:T.mother_phone)||""},emailId:H.email||"",bloodGroup:((O=H.onboarding_data)==null?void 0:O.blood_group)||"",educationCertificatesUrl:((F=H.onboarding_data)==null?void 0:F.education_certificates_url)||"",distanceFromOffice:((P=H.onboarding_data)==null?void 0:P.distance_from_office)||"",livingSituation:(($=H.onboarding_data)==null?void 0:$.living_situation)||"",linkedinProfile:((D=H.onboarding_data)==null?void 0:D.linkedin_profile)||"",favoriteFood:((B=H.onboarding_data)==null?void 0:B.favorite_food)||"",healthConditions:((I=H.onboarding_data)==null?void 0:I.health_conditions)||"",induction:((X=H.onboarding_data)==null?void 0:X.induction_checklist)||{hrInductionDone:!1,companypoliciesRead:!1,offerLetterResponded:!1,deptTeamLeadInduction:!1,placeAllocated:!1,biometricSetup:!1,deviceDetails:{allocated:!1,simCard:"",macAddress:"",phoneIMEI:""},officialWhatsappAccess:{granted:!1,number:""},myzenInstalled:!1,razorpayOnboarding:{completed:!1,bankAccount:"",upiDetails:""},vehicleForMeetings:!1,roleClarity:!1,toolsAwareness:!1,monthlyGoals:"",quarterlyGoals:"",workAllocated:""},freelancerDetails:((Z=H.onboarding_data)==null?void 0:Z.freelancer_details)||{paymentDetails:"",reportingSheetUrl:""},termsAndConditions:((se=H.onboarding_data)==null?void 0:se.terms_and_conditions)||{ndaAccepted:!1,employmentBondAccepted:!1,companyGuidelineAccepted:!1,allTermsAccepted:!1}}),t("Employee data loaded successfully","success")}catch(G){console.error("Search error:",G),t("Error searching for employee","error")}},w=()=>{const v=n.employeeType==="Full-time";return n.employeeType==="Freelancer"?a.jsxs(Te,{title:"Freelancer Setup",children:[a.jsx(we,{label:"Payment Details (Bank Account/UPI)",value:n.freelancerDetails.paymentDetails,onChange:_=>x("freelancerDetails.paymentDetails",_.target.value),placeholder:"Enter payment details"}),a.jsx(we,{label:"Reporting Google Sheet URL",value:n.freelancerDetails.reportingSheetUrl,onChange:_=>x("freelancerDetails.reportingSheetUrl",_.target.value),placeholder:"Enter Google Sheet URL for work reporting"})]}):a.jsx(Te,{title:"Day 0 Induction Checklist",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:n.induction.hrInductionDone,onChange:_=>x("induction.hrInductionDone",_.target.checked),className:"rounded"}),a.jsx("span",{children:"HR Induction Done"})]}),a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:n.induction.companypoliciesRead,onChange:_=>x("induction.companypoliciesRead",_.target.checked),className:"rounded"}),a.jsx("span",{children:"Company Policies Read"})]}),a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:n.induction.offerLetterResponded,onChange:_=>x("induction.offerLetterResponded",_.target.checked),className:"rounded"}),a.jsx("span",{children:"Offer Letter Responded"})]}),a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:n.induction.deptTeamLeadInduction,onChange:_=>x("induction.deptTeamLeadInduction",_.target.checked),className:"rounded"}),a.jsx("span",{children:"Department Team Lead Induction"})]}),v&&a.jsxs(a.Fragment,{children:[a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:n.induction.placeAllocated,onChange:_=>x("induction.placeAllocated",_.target.checked),className:"rounded"}),a.jsx("span",{children:"Place Allocated"})]}),a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:n.induction.biometricSetup,onChange:_=>x("induction.biometricSetup",_.target.checked),className:"rounded"}),a.jsx("span",{children:"Biometric Login Setup"})]}),a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:n.induction.vehicleForMeetings,onChange:_=>x("induction.vehicleForMeetings",_.target.checked),className:"rounded"}),a.jsx("span",{children:"Vehicle for Client Meetings"})]})]}),a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:n.induction.myzenInstalled,onChange:_=>x("induction.myzenInstalled",_.target.checked),className:"rounded"}),a.jsx("span",{children:"Myzen Installed"})]}),a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:n.induction.roleClarity,onChange:_=>x("induction.roleClarity",_.target.checked),className:"rounded"}),a.jsx("span",{children:"Role Clarity"})]}),a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:n.induction.toolsAwareness,onChange:_=>x("induction.toolsAwareness",_.target.checked),className:"rounded"}),a.jsx("span",{children:"Tools Awareness"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("input",{type:"checkbox",checked:n.induction.deviceDetails.allocated,onChange:_=>x("induction.deviceDetails.allocated",_.target.checked),className:"rounded"}),a.jsx("span",{children:"Device Allocated"})]}),n.induction.deviceDetails.allocated&&a.jsxs("div",{className:"ml-6 space-y-2",children:[a.jsx(we,{label:"SIM Card Number",value:n.induction.deviceDetails.simCard,onChange:_=>x("induction.deviceDetails.simCard",_.target.value),placeholder:"Enter SIM card number"}),a.jsx(we,{label:"MAC Address",value:n.induction.deviceDetails.macAddress,onChange:_=>x("induction.deviceDetails.macAddress",_.target.value),placeholder:"Enter MAC address"}),a.jsx(we,{label:"Phone IMEI",value:n.induction.deviceDetails.phoneIMEI,onChange:_=>x("induction.deviceDetails.phoneIMEI",_.target.value),placeholder:"Enter phone IMEI"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("input",{type:"checkbox",checked:n.induction.officialWhatsappAccess.granted,onChange:_=>x("induction.officialWhatsappAccess.granted",_.target.checked),className:"rounded"}),a.jsx("span",{children:"Official WhatsApp Access"})]}),n.induction.officialWhatsappAccess.granted&&a.jsx("div",{className:"ml-6",children:a.jsx(we,{label:"WhatsApp Number",value:n.induction.officialWhatsappAccess.number,onChange:_=>x("induction.officialWhatsappAccess.number",_.target.value),placeholder:"Enter WhatsApp number"})})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("input",{type:"checkbox",checked:n.induction.razorpayOnboarding.completed,onChange:_=>x("induction.razorpayOnboarding.completed",_.target.checked),className:"rounded"}),a.jsx("span",{children:"Razorpay Onboarding"})]}),n.induction.razorpayOnboarding.completed&&a.jsxs("div",{className:"ml-6 space-y-2",children:[a.jsx(we,{label:"Bank Account Details",value:n.induction.razorpayOnboarding.bankAccount,onChange:_=>x("induction.razorpayOnboarding.bankAccount",_.target.value),placeholder:"Enter bank account details"}),a.jsx(we,{label:"UPI Details",value:n.induction.razorpayOnboarding.upiDetails,onChange:_=>x("induction.razorpayOnboarding.upiDetails",_.target.value),placeholder:"Enter UPI details"})]})]}),a.jsx(un,{label:"Monthly Goals",value:n.induction.monthlyGoals,onChange:_=>x("induction.monthlyGoals",_.target.value),placeholder:"Enter monthly goals",rows:3}),a.jsx(un,{label:"Quarterly Goals",value:n.induction.quarterlyGoals,onChange:_=>x("induction.quarterlyGoals",_.target.value),placeholder:"Enter quarterly goals",rows:3}),a.jsx(un,{label:"Work Allocated",value:n.induction.workAllocated,onChange:_=>x("induction.workAllocated",_.target.value),placeholder:"Enter work allocated",rows:3})]})]})})},S=()=>{const v=n.employeeType==="Full-time";return a.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 p-8 rounded-2xl border border-gray-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Terms and Conditions"}),a.jsx("p",{className:"text-gray-600",children:"Please review and accept the following terms"})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 border border-amber-200 rounded-xl p-6 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center mr-3",children:a.jsx("svg",{className:"w-4 h-4 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("h3",{className:"text-lg font-semibold text-amber-800",children:"Important Legal Agreement"})]}),a.jsx("p",{className:"text-amber-700 text-sm leading-relaxed",children:"Please read and accept all terms and conditions below. These are legally binding agreements that govern your employment with Branding Pioneers."})]}),v&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h4",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[a.jsx("span",{className:"mr-2",children:"🔒"}),"1. Non-Disclosure Agreement (NDA)"]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:n.termsAndConditions.ndaAccepted,onChange:N=>x("termsAndConditions.ndaAccepted",N.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),a.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"I Accept"})]})]}),a.jsxs("div",{className:"space-y-4 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("h5",{className:"font-semibold text-gray-800 mb-2",children:"Non-Competition:"}),a.jsx("p",{children:"You agree not to engage in or start any business activities that compete directly with the core services and products of Branding Pioneers during your employment and for a period of one year after your employment ends. This restriction aims to protect the company's strategic interests and proprietary information."})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"font-semibold text-gray-800 mb-2",children:"Confidentiality:"}),a.jsx("p",{children:"You are obligated to protect and not disclose any confidential information acquired during your tenure at the company. This includes, but is not limited to, operational methodologies, client lists, pricing strategies, marketing plans, and any other sensitive information that is not publicly known."})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"font-semibold text-gray-800 mb-2",children:"No Personal Use:"}),a.jsx("p",{children:"Use of company resources, whether physical, digital, or intellectual, is restricted strictly to business-related activities. Personal use of these resources is prohibited to prevent any potential misuse that could harm the company's operational integrity."})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"font-semibold text-gray-800 mb-2",children:"Respectful Conduct:"}),a.jsx("p",{children:"You are expected to uphold and enhance the company's reputation both internally and externally. This includes abstaining from making derogatory comments or actions that could damage the company's standing with clients, partners, or the public."})]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h4",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[a.jsx("span",{className:"mr-2",children:"📋"}),"2. Employment Bond"]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:n.termsAndConditions.employmentBondAccepted,onChange:N=>x("termsAndConditions.employmentBondAccepted",N.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),a.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"I Accept"})]})]}),a.jsxs("div",{className:"space-y-4 text-sm text-gray-700",children:[a.jsx("p",{className:"font-medium text-gray-800",children:"Upon successful completion of your probationary period, or receipt of your official appointment letter, you enter into a one-year employment bond with Branding Pioneers:"}),a.jsxs("div",{children:[a.jsx("h5",{className:"font-semibold text-gray-800 mb-2",children:"Duration and Commitment:"}),a.jsx("p",{children:"This bond signifies your agreement to remain employed with Branding Pioneers for at least twelve months, ensuring your commitment to the company's long-term projects and team stability."})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"font-semibold text-gray-800 mb-2",children:"Consequences of Breaching the Bond:"}),a.jsx("p",{children:"If you decide to terminate your employment before fulfilling the bond period, you will face several penalties. These include the forfeiture of accumulated Retention Bonus Components (RBC), withholding of final salary payments, and retention of employment-related documents. Additionally, details of the breach may be communicated to external job platforms as part of a formal blacklist procedure."})]})]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h4",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[a.jsx("span",{className:"mr-2",children:"📖"}),v?"3. ":"","Compliance with Company Guidebook"]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:n.termsAndConditions.companyGuidelineAccepted,onChange:N=>x("termsAndConditions.companyGuidelineAccepted",N.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),a.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"I Accept"})]})]}),a.jsxs("div",{className:"space-y-4 text-sm text-gray-700",children:[a.jsx("p",{children:"All employees are required to adhere strictly to the guidelines outlined in the Branding Pioneers Company Guidebook:"}),a.jsxs("div",{children:[a.jsx("h5",{className:"font-semibold text-gray-800 mb-2",children:"Access to Policies:"}),a.jsxs("p",{children:["The guidebook, which details all operational, conduct, and employment policies, is available online at ",a.jsx("a",{href:"https://bit.ly/BP-BOOK",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"https://bit.ly/BP-BOOK"}),". You are encouraged to access this link regularly to stay updated on policy changes."]})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"font-semibold text-gray-800 mb-2",children:"Adaptation to Changes:"}),a.jsx("p",{children:"The company reserves the right to amend the guidebook. Changes may involve modifications to existing policies or the introduction of new policies. As an employee, you are expected to comply with these changes as they are officially communicated through company channels."})]})]})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h4",{className:"text-lg font-semibold text-blue-800 flex items-center",children:[a.jsx("span",{className:"mr-2",children:"✅"}),"Acknowledgment and Acceptance"]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:n.termsAndConditions.allTermsAccepted,onChange:N=>{const _=N.target.checked;if(_&&!(v?n.termsAndConditions.ndaAccepted&&n.termsAndConditions.employmentBondAccepted&&n.termsAndConditions.companyGuidelineAccepted:n.termsAndConditions.companyGuidelineAccepted)){t("Please accept all individual terms and conditions first","error");return}x("termsAndConditions.allTermsAccepted",_)},className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500",required:!0}),a.jsx("span",{className:"ml-2 text-sm font-medium text-blue-700",children:"I Accept All Terms and Conditions *"})]})]}),a.jsxs("div",{className:"text-sm text-blue-700",children:[a.jsx("p",{className:"font-medium mb-2",children:"By checking this box, you acknowledge that you have:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[a.jsx("li",{children:"Thoroughly reviewed and understood all terms outlined above"}),a.jsx("li",{children:"Agreed to comply with all terms as a condition of your employment"}),a.jsx("li",{children:"Understood that failure to comply may result in disciplinary actions, up to and including termination"}),a.jsx("li",{children:"Accessed and reviewed the Company Guidebook at the provided link"})]})]})]})]})]})};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 py-8",children:a.jsxs("div",{className:"max-w-5xl mx-auto px-4",children:[a.jsxs("div",{className:"text-center mb-10",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full mb-4",children:a.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),a.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent mb-2",children:"Employee Onboarding"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Welcome to Branding Pioneers! Let's get you set up."})]}),a.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:a.jsxs("div",{className:"p-8",children:[m&&a.jsx("div",{className:"mb-8 p-6 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl shadow-sm",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"Welcome to the team! 🎉"}),a.jsx("p",{className:"text-green-700",children:"Your onboarding has been completed successfully. You'll receive further instructions via email."})]})]})}),h&&a.jsx("div",{className:"mb-8 p-6 bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-xl shadow-sm",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-lg font-semibold text-red-800",children:"Submission Error"}),a.jsx("p",{className:"text-red-700",children:h})]})]})}),a.jsx(Te,{title:"Existing Employee Account Creation",children:a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Search Existing Employee"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(we,{label:"Phone Number",value:u.searchPhone,onChange:v=>c(N=>({...N,searchPhone:v.target.value})),placeholder:"Enter phone number"}),a.jsx(we,{label:"Email Address",value:u.searchEmail,onChange:v=>c(N=>({...N,searchEmail:v.target.value})),placeholder:"Enter email address"})]}),a.jsx("button",{type:"button",onClick:j,className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Search & Load Data"})]})}),a.jsxs("form",{onSubmit:y,className:"space-y-8",children:[a.jsx(Te,{title:"Basic Information",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(we,{label:"Employee Name *",value:n.employeeName,onChange:v=>x("employeeName",v.target.value),placeholder:"Enter full name",required:!0}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department *"}),a.jsxs("select",{value:n.department,onChange:v=>x("department",v.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"",children:"Select Department"}),fy.map(v=>a.jsx("option",{value:v,children:v},v))]})]}),a.jsx(qi,{label:"Role",value:n.role,onChange:v=>x("role",v),options:n.department?hy[n.department]||[]:[],placeholder:"Select roles"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee Type *"}),a.jsxs("select",{value:n.employeeType,onChange:v=>x("employeeType",v.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"",children:"Select Type"}),S5.map(v=>a.jsx("option",{value:v,children:v},v))]})]}),a.jsx(qi,{label:"Languages",value:n.languages,onChange:v=>x("languages",v),options:A5,placeholder:"Select languages"}),a.jsx(qi,{label:"AI Tools Known",value:n.aiTools,onChange:v=>x("aiTools",v),options:P5,placeholder:"Select AI tools"})]})}),a.jsx(Te,{title:"Profile & Documents",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"File Upload Instructions"}),a.jsxs("p",{className:"text-yellow-700 text-sm",children:["Please upload all files to Google Drive and share access with ",a.jsx("strong",{children:"brandingpioneers@gmail.com"}),". Then paste the shareable Google Drive links below."]})]}),a.jsx(we,{label:"Profile Picture (Google Drive Link)",value:n.profilePictureUrl,onChange:v=>x("profilePictureUrl",v.target.value),placeholder:"Paste Google Drive link for profile picture"}),a.jsx(we,{label:"Documents - PAN, AADHAR (Google Drive Link)",value:n.documentsUrl,onChange:v=>x("documentsUrl",v.target.value),placeholder:"Paste Google Drive link for PAN, AADHAR documents"})]})}),a.jsxs(Te,{title:"Personal Details",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(we,{label:"Date of Birth *",type:"date",value:n.dateOfBirth,onChange:v=>x("dateOfBirth",v.target.value),required:!0}),a.jsx(we,{label:"Joining Date *",type:"date",value:n.joiningDate,onChange:v=>x("joiningDate",v.target.value),required:!0}),a.jsx(we,{label:"Personal Phone Number *",value:n.personalPhone,onChange:v=>x("personalPhone",v.target.value),placeholder:"Enter phone number",required:!0}),a.jsx(we,{label:"Email ID *",type:"email",value:n.emailId,onChange:v=>x("emailId",v.target.value),placeholder:"Enter email address",required:!0}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blood Group"}),a.jsxs("select",{value:n.bloodGroup,onChange:v=>x("bloodGroup",v.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select Blood Group"}),_5.map(v=>a.jsx("option",{value:v,children:v},v))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Living Situation"}),a.jsxs("select",{value:n.livingSituation,onChange:v=>x("livingSituation",v.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select Living Situation"}),k5.map(v=>a.jsx("option",{value:v,children:v},v))]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(un,{label:"Current Address *",value:n.currentAddress,onChange:v=>x("currentAddress",v.target.value),placeholder:"Enter current address",rows:3,required:!0}),a.jsx(un,{label:"Parents/Guardians Address (Name and Full Address)",value:n.parentsAddress,onChange:v=>x("parentsAddress",v.target.value),placeholder:"Enter parents/guardians name and full address",rows:3}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(we,{label:"Father's Phone Number",value:n.parentsPhone.father,onChange:v=>x("parentsPhone.father",v.target.value),placeholder:"Enter father's phone number"}),a.jsx(we,{label:"Mother's Phone Number",value:n.parentsPhone.mother,onChange:v=>x("parentsPhone.mother",v.target.value),placeholder:"Enter mother's phone number"})]})]})]}),a.jsx(Te,{title:"Education & Professional",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx(we,{label:"Education Certificates (Google Drive Link)",value:n.educationCertificatesUrl,onChange:v=>x("educationCertificatesUrl",v.target.value),placeholder:"Paste Google Drive link for education certificates"}),a.jsx(we,{label:"Distance from Office & Living Situation Details",value:n.distanceFromOffice,onChange:v=>x("distanceFromOffice",v.target.value),placeholder:"e.g., 15 km from office, living with parents"}),a.jsx(we,{label:"LinkedIn Profile",value:n.linkedinProfile,onChange:v=>x("linkedinProfile",v.target.value),placeholder:"Enter LinkedIn profile URL"}),a.jsx(we,{label:"Favorite Food",value:n.favoriteFood,onChange:v=>x("favoriteFood",v.target.value),placeholder:"Enter favorite food"}),a.jsx(un,{label:"Any Existing Health Conditions",value:n.healthConditions,onChange:v=>x("healthConditions",v.target.value),placeholder:"Enter any existing health conditions or 'None'",rows:3})]})}),n.employeeType&&w(),n.employeeType&&S(),a.jsx("div",{className:"flex justify-center pt-8 pb-4",children:a.jsx("button",{type:"submit",disabled:i,className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-12 py-4 rounded-xl font-semibold text-lg hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transform transition-all duration-200 hover:scale-105 shadow-lg hover:shadow-xl",children:i?a.jsxs("div",{className:"flex items-center",children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting..."]}):a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{children:"Complete Onboarding"}),a.jsx("svg",{className:"ml-2 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})})]})]})})]})})},E5=()=>{const{user:e,hasPermission:t}=Bt(),{showToast:r}=at(),[n,s]=p.useState([]),[i,o]=p.useState([]),[l,d]=p.useState(!0),[u,c]=p.useState("client"),[m,f]=p.useState("all"),[h,g]=p.useState(""),[x,b]=p.useState("created_at"),[y,j]=p.useState("desc");p.useEffect(()=>{if(!e||!t("manage:onboarding")){r("Access denied. Admin permissions required.","error");return}w()},[e]);const w=async()=>{try{d(!0);const{data:P,error:$}=await re.from("client_onboarding").select("*").order("created_at",{ascending:!1});if($)throw $;const{data:D,error:B}=await re.from("employees").select("*").order("created_at",{ascending:!1});if(B)throw B;s(P||[]),o(D||[])}catch(P){console.error("Error loading form data:",P),r("Failed to load form tracking data","error")}finally{d(!1)}},S=async(P,$,D)=>{try{const B=D==="client"?"client_onboarding":"employees",I=D==="client"?"submission_status":"status",{error:X}=await re.from(B).update({[I]:$}).eq("id",P);if(X)throw X;r(`${D==="client"?"Client":"Employee"} form status updated successfully`,"success"),w()}catch(B){console.error("Error updating form status:",B),r("Failed to update form status","error")}},v=P=>{switch(P==null?void 0:P.toLowerCase()){case"submitted":case"active":return"bg-green-100 text-green-800";case"pending":case"draft":return"bg-yellow-100 text-yellow-800";case"reviewed":return"bg-blue-100 text-blue-800";case"approved":return"bg-purple-100 text-purple-800";case"inactive":case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},N=(P,$)=>{const D=new Date(P);return Math.floor((new Date-D)/(1e3*60*60*24))>7&&["pending","submitted","draft"].includes($==null?void 0:$.toLowerCase())},_=(P,$)=>{let D=P;return m!=="all"&&(m==="overdue"?D=D.filter(B=>{const I=$==="client"?B.submission_status:B.status;return N(B.created_at,I)}):D=D.filter(B=>{const I=$==="client"?B.submission_status:B.status;return(I==null?void 0:I.toLowerCase())===m})),h&&(D=D.filter(B=>{const I=$==="client"?B.client_name:B.name,X=B.email;return(I==null?void 0:I.toLowerCase().includes(h.toLowerCase()))||(X==null?void 0:X.toLowerCase().includes(h.toLowerCase()))})),D.sort((B,I)=>{let X=B[x],Z=I[x];return x==="created_at"&&(X=new Date(X),Z=new Date(Z)),y==="asc"?X>Z?1:-1:X<Z?1:-1}),D},A=(P,$)=>{const D=P.length,B=P.filter(Z=>{const se=$==="client"?Z.submission_status:Z.status;return["pending","submitted","draft"].includes(se==null?void 0:se.toLowerCase())}).length,I=P.filter(Z=>{const se=$==="client"?Z.submission_status:Z.status;return["approved","active"].includes(se==null?void 0:se.toLowerCase())}).length,X=P.filter(Z=>{const se=$==="client"?Z.submission_status:Z.status;return N(Z.created_at,se)}).length;return{total:D,pending:B,completed:I,overdue:X}},k=P=>a.jsxs("tr",{className:`hover:bg-gray-50 ${N(P.created_at,P.submission_status)?"bg-red-50":""}`,children:[a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.client_name}),a.jsx("div",{className:"text-sm text-gray-500",children:P.email})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:P.industry}),a.jsx("div",{className:"text-sm text-gray-500",children:P.company_size})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${v(P.submission_status)}`,children:P.submission_status||"Draft"}),N(P.created_at,P.submission_status)&&a.jsx("span",{className:"ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:"Overdue"})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(P.created_at).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P.assigned_team||"Unassigned"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("select",{value:P.submission_status||"draft",onChange:$=>S(P.id,$.target.value,"client"),className:"text-sm border border-gray-300 rounded px-2 py-1",children:[a.jsx("option",{value:"draft",children:"Draft"}),a.jsx("option",{value:"submitted",children:"Submitted"}),a.jsx("option",{value:"reviewed",children:"Reviewed"}),a.jsx("option",{value:"approved",children:"Approved"}),a.jsx("option",{value:"rejected",children:"Rejected"})]})})]},P.id),C=P=>a.jsxs("tr",{className:`hover:bg-gray-50 ${N(P.created_at,P.status)?"bg-red-50":""}`,children:[a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.name}),a.jsx("div",{className:"text-sm text-gray-500",children:P.email})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:P.department}),a.jsx("div",{className:"text-sm text-gray-500",children:P.employee_type})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${v(P.status)}`,children:P.status||"Pending"}),N(P.created_at,P.status)&&a.jsx("span",{className:"ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:"Overdue"})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(P.created_at).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P.hire_date?new Date(P.hire_date).toLocaleDateString():"Not set"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("select",{value:P.status||"pending",onChange:$=>S(P.id,$.target.value,"employee"),className:"text-sm border border-gray-300 rounded px-2 py-1",children:[a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"})]})})]},P.id);if(!e||!t("manage:onboarding"))return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),a.jsx("p",{className:"text-gray-600",children:"You don't have permission to access the form tracking dashboard."})]})});if(l)return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading form tracking data..."})]})});const T=u==="client"?n:i,O=_(T,u),F=A(T,u);return a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Form Tracking Dashboard"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Monitor and manage onboarding form submissions"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:F.total}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Forms"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:F.pending}),a.jsx("div",{className:"text-sm text-gray-600",children:"Pending Review"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:F.completed}),a.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:F.overdue}),a.jsx("div",{className:"text-sm text-gray-600",children:"Overdue"})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("nav",{className:"-mb-px flex",children:[a.jsxs("button",{onClick:()=>c("client"),className:`py-4 px-6 text-sm font-medium border-b-2 ${u==="client"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Client Onboarding (",n.length,")"]}),a.jsxs("button",{onClick:()=>c("employee"),className:`py-4 px-6 text-sm font-medium border-b-2 ${u==="employee"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Employee Onboarding (",i.length,")"]})]})}),a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsx("input",{type:"text",placeholder:"Search by name or email...",value:h,onChange:P=>g(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),a.jsx("div",{children:a.jsxs("select",{value:m,onChange:P=>f(P.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"submitted",children:"Submitted"}),a.jsx("option",{value:"reviewed",children:"Reviewed"}),a.jsx("option",{value:"approved",children:"Approved"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"overdue",children:"Overdue"})]})}),a.jsx("div",{children:a.jsxs("select",{value:x,onChange:P=>b(P.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"created_at",children:"Sort by Date"}),a.jsx("option",{value:"name",children:"Sort by Name"}),a.jsx("option",{value:"status",children:"Sort by Status"})]})}),a.jsx("div",{children:a.jsx("button",{onClick:()=>j(y==="asc"?"desc":"asc"),className:"px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:y==="asc"?"↑":"↓"})})]})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:u==="client"?"Client":"Employee"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:u==="client"?"Industry":"Department"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:u==="client"?"Assigned Team":"Hire Date"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:O.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"px-6 py-12 text-center text-gray-500",children:"No forms found matching your criteria"})}):O.map(P=>u==="client"?k(P):C(P))})]})})]})]})})};class ko{static async fetchUsers(){try{const{data:t,error:r}=await re.from("unified_users").select("*").eq("status","active").order("name",{ascending:!0});if(r)throw r;return t||[]}catch(t){throw console.error("Error fetching users:",t),t}}static async fetchMonthlySubmissions(t){if(!re)return console.warn("Supabase not available, returning empty array"),[];try{const[r,n]=t.split("-"),s=`${r}-${n}-01`,{data:i,error:o}=await re.from("monthly_form_submissions").select(`
          *,
          unified_users!user_id (
            id,
            name,
            email,
            phone,
            role,
            user_category,
            department
          )
        `).eq("submission_month",s);return o?(console.error("Error fetching monthly submissions:",o),[]):i||[]}catch(r){return console.error("Error in fetchMonthlySubmissions:",r),[]}}static async fetchLegacySubmissions(t){if(!re)return console.warn("Supabase not available, returning empty array"),[];try{const{data:r,error:n}=await re.from("submissions").select("*").eq("month_key",t);return n?(console.error("Error fetching legacy submissions:",n),[]):(r||[]).map(s=>({...s,unified_users:{name:s.employee_name,phone:s.employee_phone,department:s.department,role:Array.isArray(s.role)?s.role[0]:s.role,user_category:"employee"},form_data:{overall_score:s.overall_score,kpi_score:s.kpi_score,learning_score:s.learning_score,relationship_score:s.relationship_score,tasks_completed:s.tasks_completed,attendance_wfo:s.attendance_wfo,attendance_wfh:s.attendance_wfh}}))}catch(r){return console.error("Error in fetchLegacySubmissions:",r),[]}}static async getMonthlyReportData(t){try{const[r,n]=t.split("-").map(Number),s=t,[i,o,l]=await Promise.all([this.fetchUsers(),this.fetchMonthlySubmissions(r,n),this.fetchLegacySubmissions(s)]),d=[...o.map(u=>({...u,source:"monthly_form_submissions",employeeId:u.user_id,employee:u.user,performance_score:this.extractPerformanceScore(u),totalScore:this.extractPerformanceScore(u)})),...l.map(u=>({...u,source:"submissions",employeeId:u.employee_name,employee:u.unified_users,performance_score:this.extractPerformanceScore(u),totalScore:this.extractPerformanceScore(u)}))];return{users:i,submissions:d,monthKey:s,year:r,month:n}}catch(r){throw console.error("Error getting monthly report data:",r),r}}static extractPerformanceScore(t){const r=t.form_data||{},n=["overall_score","performance_score","total_score","kpi_score","average_score"];for(const o of n){const l=r[o];if(typeof l=="number"&&l>0)return l>10?l:l*10}for(const o of n){const l=t[o];if(typeof l=="number"&&l>0)return l>10?l:l*10}const s=[r.kpi_score,r.learning_score,r.relationship_score,r.discipline_score].filter(o=>typeof o=="number"&&o>0);if(s.length>0){const o=s.reduce((l,d)=>l+d,0)/s.length;return o>10?o:o*10}const i=[t.kpi_score,t.learning_score,t.relationship_score,t.overall_score].filter(o=>typeof o=="number"&&o>0);if(i.length>0){const o=i.reduce((l,d)=>l+d,0)/i.length;return o>10?o:o*10}return 0}static calculateDepartmentBreakdown(t,r){const n={};return t.forEach(s=>{const i=s.department||"Unknown";n[i]||(n[i]={employees:0,submissions:0,totalScore:0,scoreCount:0}),n[i].employees++}),r.forEach(s=>{var o;const i=((o=s.employee)==null?void 0:o.department)||s.department||"Unknown";if(n[i]){n[i].submissions++;const l=s.performance_score||s.totalScore||0;l>0&&(n[i].totalScore+=l,n[i].scoreCount++)}}),Object.entries(n).map(([s,i])=>({department:s,employees:i.employees,submissions:i.submissions,avgScore:i.scoreCount>0?(i.totalScore/i.scoreCount).toFixed(1):"0.0",submissionRate:i.employees>0?(i.submissions/i.employees*100).toFixed(1):"0.0"}))}static calculateMonthlyMetrics(t,r){const n=t.filter(c=>c.status==="active").length,s=r.length,i=new Set(r.map(c=>{var m;return c.employeeId||c.user_id||((m=c.employee)==null?void 0:m.name)})).size,o=n>0?(s/n).toFixed(1):"0.0",l=r.map(c=>c.performance_score||c.totalScore||0).filter(c=>c>0),d=l.length>0?(l.reduce((c,m)=>c+m,0)/l.length).toFixed(1):"0.0",u=n>0?(i/n*100).toFixed(1):"0.0";return{activeEmployees:n,totalSubmissions:s,uniqueSubmitters:i,avgSubmissionsPerEmployee:o,avgPerformance:d,submissionRate:u}}}function C5({onBack:e}){var T;const{user:t,role:r,hasDashboardAccess:n}=Bt(),{notify:s}=at(),{isMobile:i,gridConfig:o,spacing:l,text:d}=py(),[u,c]=p.useState({users:[],submissions:[],loading:!0,error:null}),[m,f]=p.useState(()=>{const O=new Date;return`${O.getFullYear()}-${String(O.getMonth()+1).padStart(2,"0")}`}),[h,g]=p.useState("summary"),[x,b]=p.useState("all");p.useEffect(()=>{(async()=>{try{c(P=>({...P,loading:!0,error:null}));const F=await ko.getMonthlyReportData(m);c({users:F.users,submissions:F.submissions,loading:!1,error:null})}catch(F){console.error("Error fetching report data:",F),c(P=>({...P,loading:!1,error:F.message})),s("Failed to load report data","error")}})()},[m,s]);const y=p.useMemo(()=>{const O=[],F=new Date;for(let P=0;P<12;P++){const $=new Date(F.getFullYear(),F.getMonth()-P,1),D=`${$.getFullYear()}-${String($.getMonth()+1).padStart(2,"0")}`,B=$.toLocaleDateString("en-US",{year:"numeric",month:"long"});O.push({value:D,label:B})}return O},[]),j=u.submissions,w=p.useMemo(()=>x==="all"?u.users:u.users.filter(O=>O.department===x),[u.users,x]),S=p.useMemo(()=>ko.calculateMonthlyMetrics(w,j),[w,j]),v=p.useMemo(()=>ko.calculateDepartmentBreakdown(w,j),[w,j]),N=["Super Admin","HR","Operations Head"].includes(r),_=["Super Admin","HR","Operations Head","Manager"].includes(r),[A,k]=p.useState("excel"),C=async()=>{var O;try{const F={title:"Monthly Performance Report",month:(O=y.find(D=>D.value===m))==null?void 0:O.label,metrics:S,departmentBreakdown:v,generatedBy:t==null?void 0:t.name,generatedAt:new Date().toISOString(),reportType:h,period:m,filterDepartment:x!=="all"?x:null},P=To.generateFilename(`monthly-report-${m}`),$=await Mo(F,A,"monthlyReport",P);$.success?s($.message,"success"):s($.message,"error")}catch(F){console.error("Export error:",F),s("Failed to export report","error")}};return u.loading?a.jsx("div",{className:"max-w-7xl mx-auto p-6",children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx(Pe,{size:"xl",showText:!0,text:"Loading monthly report data..."})})}):u.error?a.jsx("div",{className:"max-w-7xl mx-auto p-6",children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-red-600 text-lg font-medium mb-2",children:"Error Loading Report"}),a.jsx("div",{className:"text-gray-600 mb-4",children:u.error}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Retry"})]})})}):a.jsxs("div",{className:`max-w-7xl mx-auto ${l.container} px-4 sm:px-6`,children:[a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:`${d.title} font-bold text-gray-900 mb-2`,children:"📊 Monthly Report Dashboard"}),a.jsx("p",{className:"text-gray-600",children:"Comprehensive monthly performance and activity reports"})]}),a.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors flex items-center gap-2",children:"← Back"})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6 mb-8",children:a.jsxs("div",{className:`grid grid-cols-1 ${i?"":"md:grid-cols-4"} gap-4`,children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Month"}),a.jsx("select",{value:m,onChange:O=>f(O.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:y.map(O=>a.jsx("option",{value:O.value,children:O.label},O.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Type"}),a.jsxs("select",{value:h,onChange:O=>g(O.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"summary",children:"Summary Report"}),a.jsx("option",{value:"detailed",children:"Detailed Report"}),a.jsx("option",{value:"performance",children:"Performance Focus"}),a.jsx("option",{value:"department",children:"Department Analysis"})]})]}),N&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department Filter"}),a.jsxs("select",{value:x,onChange:O=>b(O.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Departments"}),a.jsx("option",{value:"Marketing",children:"Marketing"}),a.jsx("option",{value:"Technology",children:"Technology"}),a.jsx("option",{value:"Creative",children:"Creative"}),a.jsx("option",{value:"Operations",children:"Operations"}),a.jsx("option",{value:"Human Resources",children:"Human Resources"}),a.jsx("option",{value:"Finance",children:"Finance"})]})]}),_&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Export Format"}),a.jsxs("select",{value:A,onChange:O=>k(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[a.jsx("option",{value:"excel",children:"Excel (.xlsx)"}),a.jsx("option",{value:"pdf",children:"PDF Report"}),a.jsx("option",{value:"csv",children:"CSV Data"})]}),a.jsx("button",{onClick:C,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:"📥 Export Report"})]})]})}),a.jsxs("div",{className:`${o.metrics} gap-4 mb-8`,children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-blue-600 text-lg",children:"👥"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.activeEmployees}),a.jsx("p",{className:"text-sm text-gray-600",children:"Active Employees"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-green-600 text-lg",children:"📝"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.totalSubmissions}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total Submissions"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-purple-600 text-lg",children:"⭐"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.avgPerformance}),a.jsx("p",{className:"text-sm text-gray-600",children:"Avg Performance"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-orange-600 text-lg",children:"📊"})}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[S.submissionRate,"%"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Submission Rate"})]})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6 mb-8",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Department Performance"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200",children:[a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Department"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Employees"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Submissions"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Avg Score"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Rate"})]})}),a.jsx("tbody",{children:v.map((O,F)=>a.jsxs("tr",{className:F%2===0?"bg-gray-50":"bg-white",children:[a.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:O.department}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:O.employees}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:O.submissions}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${O.avgScore>=80?"bg-green-100 text-green-800":O.avgScore>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:O.avgScore})}),a.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[O.submissionRate,"%"]})]},O.department))})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Report Summary"}),a.jsxs("div",{className:"prose max-w-none",children:[a.jsxs("p",{className:"text-gray-700 mb-4",children:["This report covers the month of ",a.jsx("strong",{children:(T=y.find(O=>O.value===m))==null?void 0:T.label}),".",x!=="all"&&a.jsxs("span",{children:[" Filtered to show only ",a.jsx("strong",{children:x})," department."]})]}),a.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-4",children:[a.jsx("h4",{className:"font-medium text-blue-900",children:"Key Insights"}),a.jsxs("ul",{className:"mt-2 text-blue-800 text-sm space-y-1",children:[a.jsxs("li",{children:["• ",S.uniqueSubmitters," out of ",S.activeEmployees," employees submitted reports (",S.submissionRate,"% participation)"]}),a.jsxs("li",{children:["• Average of ",S.avgSubmissionsPerEmployee," submissions per employee"]}),a.jsxs("li",{children:["• Overall performance average: ",S.avgPerformance,"/100"]}),a.jsxs("li",{children:["• Report generated by ",t==null?void 0:t.name," on ",new Date().toLocaleDateString()]})]})]})]})]})]})}const Re=({title:e})=>a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:e}),a.jsx("p",{className:"text-gray-600",children:"This page is under development."})]})});function O5(){const e=Ol(),{authState:t}=Bt(),{user:r,isLoading:n}=t,[s,i]=mt.useState(!1);return p.useEffect(()=>{!n&&r&&!s&&(i(!0),e("/",{replace:!0}))},[r,n,e,s]),n?a.jsxs("div",{className:"min-h-screen flex items-center justify-center",children:[a.jsx(Pe,{size:"lg"}),a.jsx("p",{className:"text-gray-600 mt-4",children:"Checking authentication..."})]}):r&&!s?a.jsxs("div",{className:"min-h-screen flex items-center justify-center",children:[a.jsx(Pe,{size:"lg"}),a.jsx("p",{className:"text-gray-600 mt-4",children:"Redirecting..."})]}):a.jsx(Xy,{})}function T5(e){switch(e){case"Super Admin":return"/super-admin";case"Operations Head":case"Manager":case"HR":case"Accountant":case"Sales":return"/admin";case"SEO":case"Ads":case"Social Media":case"YouTube SEO":case"Web Developer":case"Graphic Designer":case"Freelancer":case"Intern":return"/employee";case"Client":return"/client";default:return"/dashboard"}}function M5(){const{authState:e}=Bt(),{isLoading:t}=e;return t?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx(Pe,{size:"lg"}),a.jsx("p",{className:"text-gray-600",children:"Loading application..."})]})}):a.jsx(gy,{children:a.jsxs(xy,{children:[a.jsx(te,{path:"/",element:a.jsx(Yy,{})}),a.jsx(te,{path:"/login",element:a.jsx(O5,{})}),a.jsx(te,{path:"/dashboard",element:a.jsx(Xf,{})}),a.jsx(te,{path:"/auth-redirect",element:a.jsx(Ze,{children:({user:r})=>{const n=Ol();return p.useEffect(()=>{const s=T5(r.role);n(s,{replace:!0})},[n,r]),a.jsx(Pe,{size:"lg"})}})}),a.jsx(te,{path:"/password-setup",element:a.jsx(Zy,{})}),a.jsx(te,{path:"/employee-onboarding",element:a.jsx(Rf,{})}),a.jsx(te,{path:"/client-onboarding",element:a.jsx(Rf,{})}),a.jsx(te,{path:"/policies",element:a.jsx(Re,{title:"Company Policies"})}),a.jsx(te,{path:"/form",element:a.jsx(Od,{})}),a.jsx(te,{path:"/monthly-form",element:a.jsx(Od,{})}),a.jsx(te,{path:"/leave-form",element:a.jsx(Sy,{})}),a.jsx(te,{path:"/add-client",element:a.jsx(vy,{})}),a.jsx(te,{path:"/master-tools",element:a.jsx(Re,{title:"Master Tools"})}),a.jsx(te,{path:"/monthly-reports",element:a.jsx(C5,{})}),a.jsx(te,{path:"/employee-directory",element:a.jsx(Re,{title:"Employee Directory"})}),a.jsx(te,{path:"/client-directory",element:a.jsx(Re,{title:"Client Directory"})}),a.jsx(te,{path:"/organization-chart",element:a.jsx(Re,{title:"Organization Chart"})}),a.jsx(te,{path:"/performance-scoring",element:a.jsx(Re,{title:"Performance Scoring"})}),a.jsx(te,{path:"/performance-concerns",element:a.jsx(Re,{title:"Performance Concerns"})}),a.jsx(te,{path:"/arcade",element:a.jsx(Re,{title:"Arcade"})}),a.jsx(te,{path:"/arcade-earn",element:a.jsx(Re,{title:"Arcade - Earn Points"})}),a.jsx(te,{path:"/arcade-redeem",element:a.jsx(Re,{title:"Arcade - Redeem Points"})}),a.jsx(te,{path:"/arcade-history",element:a.jsx(Re,{title:"Arcade - History"})}),a.jsx(te,{path:"/arcade-admin",element:a.jsx(Re,{title:"Arcade - Admin"})}),a.jsx(te,{path:"/profile",element:a.jsx(Re,{title:"Profile"})}),a.jsx(te,{path:"/profile-settings",element:a.jsx(Re,{title:"Profile Settings"})}),a.jsx(te,{path:"/employee-incentives",element:a.jsx(Re,{title:"Employee Incentives"})}),a.jsx(te,{path:"/hr-incentive-approval",element:a.jsx(Re,{title:"HR Incentive Approval"})}),a.jsx(te,{path:"/manager-incentive-reporting",element:a.jsx(Re,{title:"Manager Incentive Reporting"})}),a.jsx(te,{path:"/interactive-forms",element:a.jsx(Re,{title:"Interactive Forms"})}),a.jsx(te,{path:"/form-tracking",element:a.jsx(E5,{})}),a.jsx(te,{path:"/employee",element:a.jsx(Ze,{allowedRoles:["SEO","Ads","Social Media","YouTube SEO","Web Developer","Graphic Designer","Freelancer","Intern"],children:a.jsx(Dr,{})})}),a.jsx(te,{path:"/client",element:a.jsx(Ze,{allowedRoles:["Client"],children:a.jsx(yy,{})})}),a.jsx(te,{path:"/admin",element:a.jsx(Ze,{allowedRoles:["Operations Head","Manager","HR","Accountant","Sales"],children:a.jsx(qn,{})})}),a.jsx(te,{path:"/super-admin",element:a.jsx(Ze,{allowedRoles:["Super Admin"],children:a.jsx(j5,{})})}),a.jsx(te,{path:"/seo-dashboard",element:a.jsx(Ze,{requiredRole:"SEO",children:a.jsx(Dr,{dashboardType:"seo"})})}),a.jsx(te,{path:"/ads-dashboard",element:a.jsx(Ze,{requiredRole:"Ads",children:a.jsx(Dr,{dashboardType:"ads"})})}),a.jsx(te,{path:"/social-media-dashboard",element:a.jsx(Ze,{requiredRole:"Social Media",children:a.jsx(Dr,{dashboardType:"social"})})}),a.jsx(te,{path:"/youtube-seo-dashboard",element:a.jsx(Ze,{requiredRole:"YouTube SEO",children:a.jsx(Dr,{dashboardType:"youtube"})})}),a.jsx(te,{path:"/web-developer-dashboard",element:a.jsx(Ze,{requiredRole:"Web Developer",children:a.jsx(Dr,{dashboardType:"dev"})})}),a.jsx(te,{path:"/graphic-designer-dashboard",element:a.jsx(Ze,{requiredRole:"Graphic Designer",children:a.jsx(Dr,{dashboardType:"design"})})}),a.jsx(te,{path:"/operations-dashboard",element:a.jsx(Ze,{requiredRole:"Operations Head",children:a.jsx(qn,{dashboardType:"operations"})})}),a.jsx(te,{path:"/hr-dashboard",element:a.jsx(Ze,{requiredRole:"HR",children:a.jsx(qn,{dashboardType:"hr"})})}),a.jsx(te,{path:"/accountant-dashboard",element:a.jsx(Ze,{requiredRole:"Accountant",children:a.jsx(qn,{dashboardType:"accounting"})})}),a.jsx(te,{path:"/sales-dashboard",element:a.jsx(Ze,{requiredRole:"Sales",children:a.jsx(qn,{dashboardType:"sales"})})}),a.jsx(te,{path:"*",element:a.jsx(Co,{to:"/",replace:!0})})]})})}function D5(){return a.jsx(Hy,{children:a.jsx(M5,{})})}Do.createRoot(document.getElementById("root")).render(a.jsx(mt.StrictMode,{children:a.jsx(D5,{})}));
