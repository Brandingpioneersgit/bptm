var ey=Object.defineProperty;var ty=(e,t,n)=>t in e?ey(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Qn=(e,t,n)=>ty(e,typeof t!="symbol"?t+"":t,n);import{j as r,u as Oe,s as se,N as ry,O as ny,P as ay,Q as sy,U as iy,W as oy,X as ly,L as Ee,Y as Ho,Z as si,_ as cy,$ as Ko,a as Ie,S as Ae,x as sf,t as Kl,m as ln,p as of,a0 as Er,a1 as lf,a2 as cf,a3 as df,a4 as ii,a5 as Gl,a6 as uf,a7 as Go,a8 as ma,a9 as dy,aa as Ud,ab as oi,ac as uy,ad as mf,ae as my,af as hy,ag as On,ah as fy,ai as Pn,aj as hf,ak as py,al as gy,am as xy,an as by,ao as ff,ap as pf,aq as Wd,ar as gf,as as xs,at as bs,au as yy,av as vy,aw as jy,ax as wy,ay as Hd,az as Ny,aA as Sy,aB as Kd,aC as Ga,aD as _y,aE as ky,aF as Ay,k as Aa,aG as Py,v as Vl,aH as Cy,aI as Ey,aJ as Oy,aK as Ty,b as Dy,l as Gd,aL as Vd,aM as My,aN as Yd,T as de,D as xf,M as io,R as Iy,e as Yt,aO as Ry,aP as bf,aQ as Ly,aR as $y,aS as Fy,aT as ie,C as By,aU as qy,aV as ea}from"./manager-dashboard-DkJhgLpj.js";import{b as yf,r as p,R as jt,d as gr,a as zy}from"./react-vendor-z5qVsTvS.js";import{u as Ze,U as Uy}from"./auth-Bu1Z9VuU.js";import{u as vf,A as jf,F as oo,D as Wy,L as Hy}from"./agency-dashboard-BnYsx21k.js";import{m as Ky,S as Gy,n as wf,U as Vy,C as Nf,X as Yy,o as Xy,p as Ue,k as Sf,F as Jy,q as pe,r as dt,s as ut,t as ge,P as Xd,M as Jd,V as Zy,u as Qy,v as rr,j as ev,e as tv,x as rv,l as Zd,T as Qd,a as nv,h as av,y as sv,z as iv,D as _f,g as ys,A as ov,H as lv,E as cv,R as eu,J as dv,K as uv}from"./employee-dashboard-CW39i4a8.js";import{u as mv,a as Yl,E as tu}from"./forms-DyZFbFww.js";import{n as lo,Q as hv}from"./intern-dashboard-C1IrzOwk.js";import"./supabase-vendor-DJqG3OLk.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Vo={},ru=yf;Vo.createRoot=ru.createRoot,Vo.hydrateRoot=ru.hydrateRoot;const fv=p.createContext(),pv=({children:e})=>{const[t,n]=p.useState(()=>{const c=localStorage.getItem("theme");return c||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});p.useEffect(()=>{const c=window.document.documentElement;c.classList.remove("light","dark"),c.classList.add(t),localStorage.setItem("theme",t)},[t]),p.useEffect(()=>{const c=window.matchMedia("(prefers-color-scheme: dark)"),u=d=>{localStorage.getItem("theme")||n(d.matches?"dark":"light")};return c.addEventListener("change",u),()=>c.removeEventListener("change",u)},[]);const l={theme:t,toggleTheme:()=>{n(c=>c==="light"?"dark":"light")},setLightTheme:()=>n("light"),setDarkTheme:()=>n("dark"),setSystemTheme:()=>{localStorage.removeItem("theme");const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";n(c)},isDark:t==="dark",isLight:t==="light"};return r.jsx(fv.Provider,{value:l,children:e})},Yr={log:(...e)=>{},warn:(...e)=>{console.warn(...e)},error:(...e)=>{console.error(...e)},debug:(...e)=>{},info:(...e)=>{},force:(...e)=>{console.log(...e)},group:(e,t)=>{},table:e=>{}},nu=[{value:"bug",label:"Bug Report",icon:Ky,description:"Something is not working correctly"},{value:"feature",label:"Feature Request",icon:Gy,description:"Suggest a new feature or improvement"},{value:"help",label:"Help & Support",icon:wf,description:"Need help using the system"},{value:"account",label:"Account Issue",icon:Vy,description:"Problems with login or permissions"},{value:"other",label:"Other",icon:Nf,description:"Something else"}],gv=[{value:"low",label:"Low",color:"bg-green-100 text-green-800"},{value:"medium",label:"Medium",color:"bg-yellow-100 text-yellow-800"},{value:"high",label:"High",color:"bg-orange-100 text-orange-800"},{value:"urgent",label:"Urgent",color:"bg-red-100 text-red-800"}],xv=({isOpen:e,onClose:t,initialData:n={}})=>{const{user:a}=Ze(),{notify:s}=Oe(),i=vf(),[o,l]=p.useState(!1),[c,u]=p.useState({type:n.type||"help",priority:n.priority||"medium",subject:n.subject||"",description:n.description||"",steps_to_reproduce:"",expected_behavior:"",actual_behavior:"",browser_info:navigator.userAgent,url:window.location.href,attachments:[],contact_method:"email"}),d=g=>{const{name:w,value:j}=g.target;u(y=>({...y,[w]:j}))},m=g=>{u(w=>({...w,type:g}))},h=async g=>{var w;if(g.preventDefault(),!c.subject.trim()){i.showValidationError(["Subject is required"]);return}if(!c.description.trim()){i.showValidationError(["Description is required"]);return}l(!0);try{const j={user_id:a==null?void 0:a.id,user_email:a==null?void 0:a.email,user_name:((w=a==null?void 0:a.user_metadata)==null?void 0:w.full_name)||(a==null?void 0:a.email),type:c.type,priority:c.priority,subject:c.subject,description:c.description,steps_to_reproduce:c.steps_to_reproduce,expected_behavior:c.expected_behavior,actual_behavior:c.actual_behavior,browser_info:c.browser_info,url:c.url,contact_method:c.contact_method,status:"open",created_at:new Date().toISOString()},{error:y}=await se.from("support_tickets").insert([j]);if(y)throw y;i.showFormSuccess("Support ticket submitted successfully! We'll get back to you soon."),u({type:"help",priority:"medium",subject:"",description:"",steps_to_reproduce:"",expected_behavior:"",actual_behavior:"",browser_info:navigator.userAgent,url:window.location.href,attachments:[],contact_method:"email"}),t()}catch(j){console.error("Error submitting support ticket:",j),i.showFormError(j,"Failed to submit support ticket. Please try again.")}finally{l(!1)}};if(!e)return null;const f=nu.find(g=>g.value===c.type),x=(f==null?void 0:f.icon)||wf;return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-dark-600",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"p-2 bg-primary-100 dark:bg-primary-900 rounded-lg",children:r.jsx(x,{className:"w-6 h-6 text-primary-600 dark:text-primary-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Submit Support Ticket"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"We're here to help! Describe your issue and we'll get back to you."})]})]}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-dark-700 rounded-lg theme-transition",children:r.jsx(Yy,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("form",{onSubmit:h,className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"What type of issue are you experiencing?"}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:nu.map(g=>{const w=g.icon;return r.jsx("button",{type:"button",onClick:()=>m(g.value),className:`p-4 border-2 rounded-lg text-left theme-transition ${c.type===g.value?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-dark-600 hover:border-gray-300 dark:hover:border-dark-500"}`,children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(w,{className:`w-5 h-5 mt-0.5 ${c.type===g.value?"text-primary-600 dark:text-primary-400":"text-gray-400"}`}),r.jsxs("div",{children:[r.jsx("div",{className:`font-medium ${c.type===g.value?"text-primary-900 dark:text-primary-100":"text-gray-900 dark:text-gray-100"}`,children:g.label}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:g.description})]})]})},g.value)})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Priority Level"}),r.jsx("select",{name:"priority",value:c.priority,onChange:d,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-dark-700 text-gray-900 dark:text-gray-100",children:gv.map(g=>r.jsx("option",{value:g.value,children:g.label},g.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Subject *"}),r.jsx("input",{type:"text",name:"subject",value:c.subject,onChange:d,placeholder:"Brief description of the issue",className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-dark-700 text-gray-900 dark:text-gray-100",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description *"}),r.jsx("textarea",{name:"description",value:c.description,onChange:d,placeholder:"Please provide a detailed description of the issue...",rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-dark-700 text-gray-900 dark:text-gray-100",required:!0})]}),c.type==="bug"&&r.jsxs("div",{className:"space-y-4 p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[r.jsx("h4",{className:"font-medium text-red-900 dark:text-red-100",children:"Bug Report Details"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-2",children:"Steps to Reproduce"}),r.jsx("textarea",{name:"steps_to_reproduce",value:c.steps_to_reproduce,onChange:d,placeholder:"1. Go to...\\n2. Click on...\\n3. See error",rows:3,className:"w-full px-3 py-2 border border-red-300 dark:border-red-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 bg-white dark:bg-dark-700 text-gray-900 dark:text-gray-100"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-2",children:"Expected Behavior"}),r.jsx("textarea",{name:"expected_behavior",value:c.expected_behavior,onChange:d,placeholder:"What should have happened?",rows:2,className:"w-full px-3 py-2 border border-red-300 dark:border-red-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 bg-white dark:bg-dark-700 text-gray-900 dark:text-gray-100"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-2",children:"Actual Behavior"}),r.jsx("textarea",{name:"actual_behavior",value:c.actual_behavior,onChange:d,placeholder:"What actually happened?",rows:2,className:"w-full px-3 py-2 border border-red-300 dark:border-red-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 bg-white dark:bg-dark-700 text-gray-900 dark:text-gray-100"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preferred Contact Method"}),r.jsxs("select",{name:"contact_method",value:c.contact_method,onChange:d,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-dark-700 text-gray-900 dark:text-gray-100",children:[r.jsx("option",{value:"email",children:"Email"}),r.jsx("option",{value:"phone",children:"Phone"}),r.jsx("option",{value:"system",children:"In-system notification"})]})]}),r.jsxs("div",{className:"bg-gray-50 dark:bg-dark-700 p-4 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"System Information"}),r.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Current URL:"})," ",c.url]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Browser:"})," ",c.browser_info]}),r.jsxs("div",{children:[r.jsx("strong",{children:"User:"})," ",a==null?void 0:a.email]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-dark-600",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-700 rounded-lg theme-transition",children:"Cancel"}),r.jsxs("button",{type:"submit",disabled:o,className:"flex items-center space-x-2 px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed theme-transition",children:[o?r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):r.jsx(Xy,{className:"w-4 h-4"}),r.jsx("span",{children:o?"Submitting...":"Submit Ticket"})]})]})]})]})})};class bv extends p.Component{constructor(n){super(n);Qn(this,"handleRetry",()=>{this.setState({hasError:!1,errorId:null}),window.location.reload()});Qn(this,"handleReportIssue",()=>{this.setState({showTicketForm:!0})});this.state={hasError:!1,errorId:null,isProduction:!0,showTicketForm:!1}}static getDerivedStateFromError(n){return{hasError:!0,errorId:Date.now().toString(36)+Math.random().toString(36).substr(2)}}componentDidCatch(n,a){const s={error:n.toString(),stack:n.stack,componentStack:a.componentStack,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href,errorId:this.state.errorId};console.group("🚨 Global Error Handler"),Yr.error("Error:",n),Yr.error("Error Info:",a),Yr.error("Error Details:",s),console.groupEnd();try{const i=JSON.parse(localStorage.getItem("app_errors")||"[]");i.push(s),i.length>5&&i.splice(0,i.length-5),localStorage.setItem("app_errors",JSON.stringify(i))}catch(i){Yr.warn("Failed to save error to localStorage:",i)}window.reportError&&window.reportError(s)}render(){return this.state.hasError?r.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:r.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:r.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Something went wrong"}),r.jsx("p",{className:"text-sm text-gray-600 mb-6",children:this.state.isProduction?"We're sorry, but something unexpected happened. Our team has been notified and is working to fix this issue.":"An error occurred while loading the application. Please try refreshing the page."}),this.state.errorId&&r.jsxs("p",{className:"text-xs text-gray-400 mb-6",children:["Error ID: ",this.state.errorId]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:this.handleRetry,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Refresh Page"}),r.jsx("button",{onClick:this.handleReportIssue,className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Report Issue"}),r.jsx("button",{onClick:()=>window.location.assign("/"),className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Go to Home"})]}),!this.state.isProduction&&r.jsx("div",{className:"mt-6 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:r.jsxs("p",{className:"text-xs text-yellow-800",children:[r.jsx("strong",{children:"Development Mode:"})," Check the browser console for detailed error information."]})})]})})}),r.jsx(xv,{isOpen:this.state.showTicketForm,onClose:()=>this.setState({showTicketForm:!1}),initialData:{type:"bug",priority:"high",subject:`Application Error - ID: ${this.state.errorId}`,description:`An error occurred in the application.

Error ID: ${this.state.errorId}
Time: ${new Date().toISOString()}
Page: ${window.location.href}

Please describe what you were doing when this error occurred:`}})]}):this.props.children}}const yv=({children:e})=>(jt.useEffect(()=>{const t=a=>{Yr.error("Unhandled promise rejection:",a.reason),Yr.warn("An operation failed. Please try again.")},n=a=>{Yr.error("Global JavaScript error:",a.error),a.preventDefault()};return window.addEventListener("unhandledrejection",t),window.addEventListener("error",n),()=>{window.removeEventListener("unhandledrejection",t),window.removeEventListener("error",n)}},[]),r.jsx(bv,{children:e}));function vv({children:e}){return r.jsx(ry,{children:r.jsx(ny,{children:r.jsx(ay,{children:r.jsx(Uy,{children:r.jsx(sy,{children:r.jsx(iy,{children:r.jsx(oy,{children:r.jsx(ly,{children:r.jsx(pv,{children:r.jsx(yv,{children:e})})})})})})})})})})}const jv=()=>{const{authState:e}=Ze(),{user:t,isLoading:n}=e,[a,s]=p.useState(!1);p.useEffect(()=>{!n&&!t&&!a&&s(!0)},[n,t,a]),p.useMemo(()=>!!t,[t]),p.useMemo(()=>!t&&a,[t,a]),p.useMemo(()=>!t&&!a,[t,a]);const i=p.useCallback(()=>{console.log("Navigate to profile")},[]);return n?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:r.jsxs("div",{className:"text-center space-y-8 p-10 bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 max-w-md mx-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shadow-lg",children:r.jsx(Ee,{size:"lg",className:"text-white"})}),r.jsx("div",{className:"absolute inset-0 w-20 h-20 mx-auto bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full animate-ping opacity-20"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Loading Application"}),r.jsx("p",{className:"text-slate-600 font-medium",children:"Please wait while we prepare your workspace..."}),r.jsx("div",{className:"w-32 h-1 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full mx-auto animate-pulse"})]})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100",children:r.jsx(jf,{userType:t==null?void 0:t.role,currentUser:t,onNavigateToProfile:i})})},wv=jt.memo(jv);function Nv({onLoginSuccess:e,onCancel:t}){const{login:n,authState:a}=Ze(),{isLoading:s,loginError:i}=a,[o,l]=p.useState({firstName:"",phone:"",rememberMe:!1}),[c,u]=p.useState(!1);p.useEffect(()=>{if(i){const h=setTimeout(()=>{},5e3);return()=>clearTimeout(h)}},[i]);const d=h=>{const{name:f,value:x,type:g,checked:w}=h.target;l(j=>({...j,[f]:g==="checkbox"?w:x}))},m=async h=>{if(h.preventDefault(),!(!o.firstName||!o.phone)){u(!0);try{console.log("🔐 Submitting login form:",{firstName:o.firstName,phone:o.phone}),localStorage.setItem("bptm_remember_firstName",o.firstName),localStorage.setItem("bptm_remember_phone",o.phone);const f=await n({firstName:o.firstName,phone:o.phone});console.log("🔐 Login result:",{success:f==null?void 0:f.success}),f&&f.success&&(console.log("✅ Login successful, redirecting to dashboard"),e&&e(f.user),!e&&f.dashboardRoute&&(window.location.href=f.dashboardRoute))}catch(f){console.error("❌ Login submission error:",f)}finally{u(!1)}}};return p.useEffect(()=>{const h=localStorage.getItem("bptm_remember_firstName"),f=localStorage.getItem("bptm_remember_phone");h&&f&&l(x=>({...x,firstName:h,phone:f,rememberMe:!0}))},[]),s?r.jsx(Ho,{show:!0,children:r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:r.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:r.jsx(Ee,{size:"lg",showText:!0,text:"Authenticating..."})})})}):r.jsx(Ho,{show:!0,children:r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 px-4",children:r.jsxs("div",{className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-blue-100 mb-4",children:r.jsx("span",{className:"text-2xl font-bold text-blue-600",children:"🏢"})}),r.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),r.jsx("p",{className:"text-gray-600",children:"Sign in to your BPTM account"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 space-y-6",children:[i&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("span",{className:"text-red-500 text-xl mr-3",children:"⚠️"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-red-800 font-medium",children:"Authentication Error"}),r.jsx("p",{className:"text-red-700 text-sm mt-1",children:i})]})]})}),r.jsxs("form",{onSubmit:m,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),r.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,value:o.firstName,onChange:d,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your first name (e.g., John, Sarah, David)",disabled:c})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),r.jsx("input",{id:"phone",name:"phone",type:"tel",required:!0,value:o.phone,onChange:d,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter phone number (with or without +91 prefix)",disabled:c,inputMode:"numeric",autoComplete:"tel",pattern:"^(\\+91[\\-\\s]?)?[6-9][0-9]{9}$",title:"Enter 10 digits starting with 6-9, optionally prefixed with +91-, +91 , or +91 (e.g., 9876543210, +91-9876543210, or +91 9876543210)",onInput:h=>h.target.setCustomValidity(""),onInvalid:h=>h.target.setCustomValidity("Please enter 10 digits starting with 6-9, optionally prefixed with +91-, +91 , or +91 (e.g., 9876543210, +91-9876543210, or +91 9876543210)")})]}),r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{name:"rememberMe",type:"checkbox",checked:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:!0}),r.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Credentials autosaved for easier testing"})]})}),r.jsx("button",{type:"submit",disabled:c||!o.firstName||!o.phone,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?r.jsx(Ee,{size:"sm",color:"white"}):"Sign In"})]})]}),r.jsxs("div",{className:"text-center text-sm text-gray-600",children:[r.jsx("p",{children:"Need help? Contact your system administrator"}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"BPTM Employee Performance Management System"})]})]})})})}const Sv=()=>{const{setupPassword:e,user:t,getDashboardPath:n}=Ze(),a=si(),[s,i]=p.useState({newPassword:"",confirmPassword:""}),[o,l]=p.useState(""),[c,u]=p.useState(!1),[d,m]=p.useState(!1),h=N=>{const{name:S,value:b}=N.target;i(v=>({...v,[S]:b})),o&&l("")},f=N=>N.length<8?"Password must be at least 8 characters long":/(?=.*[a-z])/.test(N)?/(?=.*[A-Z])/.test(N)?/(?=.*\d)/.test(N)?null:"Password must contain at least one number":"Password must contain at least one uppercase letter":"Password must contain at least one lowercase letter",x=async N=>{if(N.preventDefault(),l(""),!s.newPassword||!s.confirmPassword){l("Please fill in both password fields");return}if(s.newPassword!==s.confirmPassword){l("Passwords do not match");return}const S=f(s.newPassword);if(S){l(S);return}u(!0);const b=await e(s.newPassword);u(!1),b.success?a(n()):l(b.error)},w=(N=>{let S=0;return N.length>=8&&S++,/(?=.*[a-z])/.test(N)&&S++,/(?=.*[A-Z])/.test(N)&&S++,/(?=.*\d)/.test(N)&&S++,/(?=.*[!@#$%^&*])/.test(N)&&S++,S})(s.newPassword),j=["bg-red-500","bg-orange-500","bg-yellow-500","bg-blue-500","bg-green-500"],y=["Very Weak","Weak","Fair","Good","Strong"];return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Set Up Your Password"}),r.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Welcome, ",t==null?void 0:t.full_name,"! Please create a secure password for your account."]})]}),r.jsxs("form",{className:"mt-8 space-y-6 bg-white p-8 rounded-xl shadow-lg",onSubmit:x,children:[o&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:o}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"newPassword",name:"newPassword",type:d?"text":"password",required:!0,className:"appearance-none relative block w-full px-3 py-3 pr-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm transition-colors",placeholder:"Enter your new password",value:s.newPassword,onChange:h}),r.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>m(!d),children:d?r.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):r.jsxs("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),s.newPassword&&r.jsxs("div",{className:"mt-2",children:[r.jsx("div",{className:"flex space-x-1 mb-1",children:[...Array(5)].map((N,S)=>r.jsx("div",{className:`h-2 w-full rounded ${S<w?j[w-1]:"bg-gray-200"}`},S))}),r.jsxs("p",{className:"text-xs text-gray-600",children:["Password strength: ",y[w-1]||"Very Weak"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),r.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:d?"text":"password",required:!0,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm transition-colors",placeholder:"Confirm your new password",value:s.confirmPassword,onChange:h}),s.confirmPassword&&s.newPassword!==s.confirmPassword&&r.jsx("p",{className:"mt-1 text-xs text-red-600",children:"Passwords do not match"})]})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Password Requirements:"}),r.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[r.jsxs("li",{className:`flex items-center ${s.newPassword.length>=8?"text-green-600":""}`,children:[r.jsx("span",{className:"mr-2",children:s.newPassword.length>=8?"✓":"•"}),"At least 8 characters long"]}),r.jsxs("li",{className:`flex items-center ${/(?=.*[a-z])/.test(s.newPassword)?"text-green-600":""}`,children:[r.jsx("span",{className:"mr-2",children:/(?=.*[a-z])/.test(s.newPassword)?"✓":"•"}),"One lowercase letter"]}),r.jsxs("li",{className:`flex items-center ${/(?=.*[A-Z])/.test(s.newPassword)?"text-green-600":""}`,children:[r.jsx("span",{className:"mr-2",children:/(?=.*[A-Z])/.test(s.newPassword)?"✓":"•"}),"One uppercase letter"]}),r.jsxs("li",{className:`flex items-center ${/(?=.*\d)/.test(s.newPassword)?"text-green-600":""}`,children:[r.jsx("span",{className:"mr-2",children:/(?=.*\d)/.test(s.newPassword)?"✓":"•"}),"One number"]})]})]}),r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:c||w<3,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?r.jsxs("div",{className:"flex items-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Setting up password..."]}):"Set Password & Continue"})})]})]})})},at=({children:e,requiredRole:t=null,requiredRoles:n=[],allowedRoles:a=[],redirectTo:s="/login",fallback:i=null})=>{const{authState:o}=Ze(),{user:l,isLoggedIn:c,isLoading:u}=o,d=cy();return u?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:r.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"}),r.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):!c||!l?r.jsx(Ko,{to:s,state:{from:d},replace:!0}):l.needs_password_setup&&d.pathname!=="/setup-password"?r.jsx(Ko,{to:"/setup-password",replace:!0}):t&&l.role!==t?(console.log("🔒 Access denied - required role not matched:",{userRole:l.role,requiredRole:t}),i||r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:r.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 15.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Access Denied"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"You don't have permission to access this page."}),r.jsx("div",{className:"mt-6",children:r.jsx("button",{onClick:()=>window.history.back(),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Go Back"})})]})})):n.length>0&&!n.includes(l.role)&&(console.log("🔒 Access denied - user role not in required roles list:",{userRole:l.role,requiredRoles:n}),i)?i:a.length>0&&!a.includes(l.role)?(console.log("🔒 Access denied - user role not in allowed roles list:",{userRole:l.role,allowedRoles:a}),i||r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:r.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 15.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Access Denied"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"You don't have permission to access this page."}),r.jsxs("p",{className:"mt-1 text-xs text-gray-400",children:["Required roles: ",n.join(", ")]}),r.jsx("div",{className:"mt-6",children:r.jsx("button",{onClick:()=>window.history.back(),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Go Back"})})]})})):e},_v=({count:e})=>r.jsxs("div",{className:"relative inline-flex items-center",children:[r.jsx("svg",{className:"w-8 h-8 text-yellow-500",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 7V9C15 10.1 15.9 11 17 11V12.5C17 13.6 16.1 14.5 15 14.5V16C17.2 16 19 14.2 19 12V11C20.1 11 21 10.1 21 9ZM9 11V12.5C9 13.6 8.1 14.5 7 14.5V16C9.2 16 11 14.2 11 12V11C12.1 11 13 10.1 13 9V7L7 7V9C7 10.1 7.9 11 9 11Z"})}),e>0&&r.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold",children:e})]}),kv=({value:e,onChange:t,error:n})=>{const[a,s]=p.useState(null),[i,o]=p.useState(!1),[l,c]=p.useState(""),u=async d=>{if(!d){s(null),c("");return}o(!0),c("");try{new URL(d);const m=new Image;m.onload=()=>{s(d),c(""),o(!1)},m.onerror=()=>{s(null),c("Invalid image URL or image cannot be loaded"),o(!1)},m.src=d}catch{s(null),c("Invalid URL format"),o(!1)}};return p.useEffect(()=>{const d=setTimeout(()=>{u(e)},500);return()=>clearTimeout(d)},[e]),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profile Image URL *"}),r.jsx("input",{type:"url",value:e||"",onChange:d=>t(d.target.value),placeholder:"https://drive.google.com/... or any public image URL",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${n||l?"border-red-500":"border-gray-300"}`}),(n||l)&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:n||l})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[i&&r.jsxs("div",{className:"flex items-center space-x-2 text-blue-600",children:[r.jsx(Ee,{size:"sm"}),r.jsx("span",{className:"text-sm",children:"Validating image..."})]}),a&&!i&&r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("img",{src:a,alt:"Profile preview",className:"w-16 h-16 rounded-full object-cover border-2 border-green-500"}),r.jsx("span",{className:"text-green-600 text-sm font-medium",children:"✓ Valid image"})]})]}),r.jsx("div",{className:"text-xs text-gray-500",children:"💡 Tip: For Google Drive images, make sure the link is public and use the direct image URL"})]})},co=({testimonials:e=[]})=>{const t=Math.floor(e.length/2);return r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Testimonial URLs Added: ",e.length]}),t>0&&r.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:t},(n,a)=>r.jsx(_v,{count:a+1},a))})]}),e.length>0&&e.length%2===1&&r.jsxs("div",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded",children:[2-e.length%2," more needed for next badge"]})]})},au=({items:e=[],onChange:t,placeholder:n,label:a,maxItems:s=10})=>{const i=()=>{e.length<s&&t([...e,""])},o=c=>{t(e.filter((u,d)=>d!==c))},l=(c,u)=>{const d=[...e];d[c]=u,t(d)};return r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:a}),e.map((c,u)=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"url",value:c,onChange:d=>l(u,d.target.value),placeholder:n,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("button",{type:"button",onClick:()=>o(u),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:"✕"})]},u)),e.length<s&&r.jsxs("button",{type:"button",onClick:i,className:"w-full px-4 py-2 border-2 border-dashed border-gray-300 text-gray-600 rounded-lg hover:border-blue-500 hover:text-blue-600 transition-colors",children:["+ Add ",a]})]})},Av=({employee:e,onUpdate:t,isEditing:n=!1})=>{var w,j;const a=Ie(),{notify:s}=Oe(),[i,o]=p.useState(!1),[l,c]=p.useState([]),[u,d]=p.useState([]),[m,h]=p.useState({name:"",email:"",phone:"",department:"",designation:"",hire_date:"",profile_image_url:"",current_projects:[],current_clients:[],key_skills:[],tools_assigned:[],testimonials:[],...e});p.useEffect(()=>{(async()=>{try{const{data:N,error:S}=await a.from("clients").select("id, name, company_name").eq("status","active");if(S)throw S;c(N||[]);const{data:b,error:v}=await a.from("tools").select("id, name, category").eq("status","active");if(v)throw v;d(b||[])}catch(N){console.error("Error fetching dropdown data:",N),s("Failed to load clients and tools data","error")}})()},[a,s]);const f=async()=>{o(!0);try{const{error:y}=await a.from("employees").upsert({...m,updated_at:new Date().toISOString()});if(y)throw y;s("Profile updated successfully!","success"),t&&t(m)}catch(y){console.error("Error saving profile:",y),s("Failed to save profile","error")}finally{o(!1)}},x=(y,N)=>{h(S=>({...S,[y]:N}))},g=Math.floor((((w=m.testimonials)==null?void 0:w.length)||0)/2);return n?r.jsx(Ae,{title:"✏️ Edit Profile",className:"bg-white",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),r.jsx("input",{type:"text",value:m.name||"",onChange:y=>x("name",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),r.jsx("input",{type:"email",value:m.email||"",onChange:y=>x("email",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone *"}),r.jsx("input",{type:"tel",value:m.phone||"",onChange:y=>x("phone",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department *"}),r.jsxs("select",{value:m.department||"",onChange:y=>x("department",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[r.jsx("option",{value:"",children:"Select Department"}),r.jsx("option",{value:"Web",children:"Web"}),r.jsx("option",{value:"Marketing",children:"Marketing"}),r.jsx("option",{value:"Operations",children:"Operations"}),r.jsx("option",{value:"HR",children:"HR"}),r.jsx("option",{value:"Sales",children:"Sales"}),r.jsx("option",{value:"Accounts",children:"Accounts"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Designation *"}),r.jsx("input",{type:"text",value:m.designation||"",onChange:y=>x("designation",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Senior Developer, Marketing Executive",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Joining Date"}),r.jsx("input",{type:"date",value:m.hire_date||"",onChange:y=>x("hire_date",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),r.jsx(kv,{value:m.profile_image_url,onChange:y=>x("profile_image_url",y)}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Clients"}),r.jsx("select",{multiple:!0,value:m.current_clients||[],onChange:y=>{const N=Array.from(y.target.selectedOptions,S=>S.value);x("current_clients",N)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 h-32",children:l.map(y=>r.jsxs("option",{value:y.id,children:[y.name," ",y.company_name&&`(${y.company_name})`]},y.id))}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hold Ctrl/Cmd to select multiple clients"})]}),r.jsx(au,{items:m.key_skills||[],onChange:y=>x("key_skills",y),placeholder:"e.g., React, SEO, Content Writing",label:"Key Skills",maxItems:10}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tools Assigned"}),r.jsx("select",{multiple:!0,value:m.tools_assigned||[],onChange:y=>{const N=Array.from(y.target.selectedOptions,S=>S.value);x("tools_assigned",N)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 h-32",children:u.map(y=>r.jsxs("option",{value:y.id,children:[y.name," ",y.category&&`(${y.category})`]},y.id))}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hold Ctrl/Cmd to select multiple tools"})]}),r.jsxs("div",{children:[r.jsx(au,{items:m.testimonials||[],onChange:y=>x("testimonials",y),placeholder:"https://youtube.com/watch?v=... (BrandingPioneers channel)",label:"Video Testimonials",maxItems:20}),r.jsx(co,{testimonials:m.testimonials||[]}),r.jsx("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-700",children:["💡 ",r.jsx("strong",{children:"Testimonial Badge Logic:"})," You earn 1 trophy badge for every 2 testimonials uploaded. Testimonials must be uploaded to the BrandingPioneers YouTube channel."]})})]}),r.jsx("div",{className:"flex justify-end space-x-3",children:r.jsxs("button",{type:"button",onClick:f,disabled:i,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[i&&r.jsx(Ee,{size:"sm"}),r.jsx("span",{children:i?"Saving...":"Save Profile"})]})})]})}):r.jsx(Ae,{title:"👤 Employee Profile",className:"bg-white",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"text-center space-y-4",children:[m.profile_image_url?r.jsx("img",{src:m.profile_image_url,alt:m.name,className:"w-32 h-32 rounded-full mx-auto object-cover border-4 border-blue-500 shadow-lg"}):r.jsx("div",{className:"w-32 h-32 rounded-full mx-auto bg-gray-200 flex items-center justify-center text-gray-500 text-4xl",children:"👤"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900",children:m.name}),r.jsx("p",{className:"text-gray-600",children:m.designation}),r.jsx("p",{className:"text-sm text-gray-500",children:m.department})]}),g>0&&r.jsx("div",{className:"flex justify-center",children:r.jsx(co,{testimonials:m.testimonials||[]})})]})}),r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),r.jsx("p",{className:"text-gray-900",children:m.email})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),r.jsx("p",{className:"text-gray-900",children:m.phone})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Joining Date"}),r.jsx("p",{className:"text-gray-900",children:m.hire_date?new Date(m.hire_date).toLocaleDateString():"N/A"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Current Clients"}),r.jsx("div",{className:"space-y-1",children:(m.current_clients||[]).map((y,N)=>{const S=l.find(b=>b.id===y);return r.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm mr-2 mb-1",children:(S==null?void 0:S.name)||y},N)})})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Key Skills & Tools"}),r.jsx("div",{className:"space-y-1",children:(m.key_skills||[]).map((y,N)=>r.jsx("span",{className:"inline-block bg-green-100 text-green-800 px-2 py-1 rounded text-sm mr-2 mb-1",children:y},N))})]})]}),(((j=m.testimonials)==null?void 0:j.length)||0)>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Video Testimonials"}),r.jsx(co,{testimonials:m.testimonials||[]}),r.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[m.testimonials.length," testimonial",m.testimonials.length!==1?"s":""," uploaded"]})]})]})]})})},Pv=({month:e,status:t,isSelected:n,onClick:a})=>{const s=()=>{switch(t){case"completed":return"bg-green-500";case"partial":return"bg-yellow-500";case"empty":return"bg-gray-300";default:return"bg-gray-300"}},i=()=>{switch(t){case"completed":return"✓";case"partial":return"◐";case"empty":return"○";default:return"○"}};return r.jsxs("button",{onClick:()=>a(e),className:`relative p-3 rounded-lg border-2 transition-all duration-200 hover:scale-105 ${n?"border-blue-500 bg-blue-50 shadow-lg":"border-gray-200 hover:border-blue-300"}`,children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:`w-4 h-4 rounded-full mx-auto mb-2 ${s()} flex items-center justify-center text-white text-xs font-bold`,children:i()}),r.jsx("div",{className:"text-sm font-medium text-gray-900",children:ln(e).split(" ")[0]}),r.jsx("div",{className:"text-xs text-gray-500",children:ln(e).split(" ")[1]})]}),r.jsx("div",{className:`absolute -top-1 -right-1 w-3 h-3 rounded-full ${s()}`})]})},Cv=({role:e,formData:t,onChange:n,clients:a=[]})=>{const s=()=>r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Operation Manager - Client Updates & Management"}),a.map((c,u)=>{var d,m,h,f;return r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:c.name}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client Updates"}),r.jsx("textarea",{value:((d=t.clientUpdates)==null?void 0:d[c.id])||"",onChange:x=>n("clientUpdates",{...t.clientUpdates,[c.id]:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Weekly updates, progress, issues..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Escalations"}),r.jsx("input",{type:"number",value:((m=t.escalations)==null?void 0:m[c.id])||0,onChange:x=>n("escalations",{...t.escalations,[c.id]:parseInt(x.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Appreciation Count"}),r.jsx("input",{type:"number",value:((h=t.appreciations)==null?void 0:h[c.id])||0,onChange:x=>n("appreciations",{...t.appreciations,[c.id]:parseInt(x.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]})]}),r.jsxs("div",{className:"mt-3",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Happiness Score (1-10)"}),r.jsx("input",{type:"number",value:((f=t.happinessScore)==null?void 0:f[c.id])||5,onChange:x=>n("happinessScore",{...t.happinessScore,[c.id]:parseInt(x.target.value)||5}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"10"})]})]},c.id||u)})]}),i=()=>r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Accountant - Payment & Compliance Tracking"}),a.map((c,u)=>{var d,m,h,f,x,g,w,j,y,N,S;return r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:c.name}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Status"}),r.jsxs("select",{value:((d=t.paymentStatus)==null?void 0:d[c.id])||"pending",onChange:b=>{var P;const v=b.target.value,_=((P=t.paymentProofUrl)==null?void 0:P[c.id])||"";if((v==="completed"||v==="partial")&&!_.trim()){alert(`Payment proof URL is required when marking payment as ${v}. Please add a proof URL first.`);return}if((v==="completed"||v==="partial")&&_&&!of(_)){alert("Payment proof must be a valid Google Drive URL.");return}n("paymentStatus",{...t.paymentStatus,[c.id]:v})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"partial",children:"Partial"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"overdue",children:"Overdue"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Date"}),r.jsx("input",{type:"date",value:((m=t.paymentDate)==null?void 0:m[c.id])||"",onChange:b=>n("paymentDate",{...t.paymentDate,[c.id]:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Compliance Status"}),r.jsxs("select",{value:((h=t.complianceStatus)==null?void 0:h[c.id])||"compliant",onChange:b=>n("complianceStatus",{...t.complianceStatus,[c.id]:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"compliant",children:"Compliant"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"non-compliant",children:"Non-Compliant"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monthly Expense (₹)"}),r.jsx("input",{type:"number",value:((f=t.monthlyExpense)==null?void 0:f[c.id])||0,onChange:b=>n("monthlyExpense",{...t.monthlyExpense,[c.id]:parseFloat(b.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01"})]})]}),r.jsxs("div",{className:"mt-3",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Payment Proof URL",(((x=t.paymentStatus)==null?void 0:x[c.id])==="completed"||((g=t.paymentStatus)==null?void 0:g[c.id])==="partial")&&r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"url",value:((w=t.paymentProofUrl)==null?void 0:w[c.id])||"",onChange:b=>{const v=b.target.value;n("paymentProofUrl",{...t.paymentProofUrl,[c.id]:v})},placeholder:"https://drive.google.com/...",className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${((j=t.paymentStatus)==null?void 0:j[c.id])==="completed"||((y=t.paymentStatus)==null?void 0:y[c.id])==="partial"?"border-red-300":"border-gray-300"}`}),(((N=t.paymentStatus)==null?void 0:N[c.id])==="completed"||((S=t.paymentStatus)==null?void 0:S[c.id])==="partial")&&r.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Required: Google Drive URL for payment proof"})]})]},c.id||u)})]}),o=()=>r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"Sales - CRM Pipeline Management"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"Lead Generation"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Leads"}),r.jsx("input",{type:"number",value:t.newLeads||0,onChange:c=>n("newLeads",parseInt(c.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lead Source"}),r.jsxs("select",{value:t.leadSource||"",onChange:c=>n("leadSource",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select Source"}),r.jsx("option",{value:"website",children:"Website"}),r.jsx("option",{value:"referral",children:"Referral"}),r.jsx("option",{value:"social-media",children:"Social Media"}),r.jsx("option",{value:"cold-calling",children:"Cold Calling"}),r.jsx("option",{value:"email-campaign",children:"Email Campaign"}),r.jsx("option",{value:"networking",children:"Networking"})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"Conversion Tracking"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Conversions"}),r.jsx("input",{type:"number",value:t.conversions||0,onChange:c=>n("conversions",parseInt(c.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Next Action"}),r.jsx("textarea",{value:t.nextAction||"",onChange:c=>n("nextAction",c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Follow-up actions, meetings scheduled..."})]})]})]})]})]}),l=()=>r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"HR - Employee Management & Hiring"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"Employee Management"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Onboarding Completed"}),r.jsx("input",{type:"number",value:t.onboardingCompleted||0,onChange:c=>n("onboardingCompleted",parseInt(c.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Compliance Issues"}),r.jsx("input",{type:"number",value:t.complianceIssues||0,onChange:c=>n("complianceIssues",parseInt(c.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]})]})]}),r.jsxs("div",{children:[r.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"Hiring Pipeline"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Candidates"}),r.jsx("input",{type:"number",value:t.newCandidates||0,onChange:c=>n("newCandidates",parseInt(c.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Interviews Conducted"}),r.jsx("input",{type:"number",value:t.interviewsConducted||0,onChange:c=>n("interviewsConducted",parseInt(c.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]})]})]})]})]});switch(e){case"Operations Head":case"Operation Manager":return s();case"Accountant":return i();case"Sales":return o();case"HR":return l();default:return r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("p",{children:"No specific accountability form for this role."}),r.jsx("p",{className:"text-sm",children:"Please contact your manager for role-specific requirements."})]})}},Ev=({role:e,formData:t,onChange:n,projects:a=[]})=>r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h4",{className:"font-medium text-gray-900",children:[e," - Project-based Accountability"]}),a.map((i,o)=>{var l,c,u,d,m;return r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:i.name}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Target"}),r.jsx("input",{type:"number",value:((l=t.projectTargets)==null?void 0:l[i.id])||0,onChange:h=>n("projectTargets",{...t.projectTargets,[i.id]:parseInt(h.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Completed"}),r.jsx("input",{type:"number",value:((c=t.projectCompleted)==null?void 0:c[i.id])||0,onChange:h=>n("projectCompleted",{...t.projectCompleted,[i.id]:parseInt(h.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Score"}),r.jsxs("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-center font-medium",children:[((u=t.projectTargets)==null?void 0:u[i.id])>0?Math.round((((d=t.projectCompleted)==null?void 0:d[i.id])||0)/t.projectTargets[i.id]*10):0,"/10"]})]})]}),r.jsxs("div",{className:"mt-3",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Progress Notes"}),r.jsx("textarea",{value:((m=t.projectNotes)==null?void 0:m[i.id])||"",onChange:h=>n("projectNotes",{...t.projectNotes,[i.id]:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Progress updates, challenges, achievements..."})]})]},i.id||o)}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("h5",{className:"font-medium text-blue-800 mb-2",children:"Overall Accountability Score"}),r.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[a.length>0?Math.round(a.reduce((i,o)=>{var u,d;const l=((u=t.projectTargets)==null?void 0:u[o.id])||0,c=((d=t.projectCompleted)==null?void 0:d[o.id])||0;return i+(l>0?c/l*10:0)},0)/a.length):0,"/10"]}),r.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Average score across all assigned projects"})]})]}),Ov=({employee:e,onSubmit:t})=>{var H,Y,z,G;const n=Ie(),{notify:a}=Oe(),s=vf(),[i,o]=p.useState(!1),[l,c]=p.useState(sf(Kl())),[u,d]=p.useState({}),[m,h]=p.useState({}),[f,x]=p.useState([]),[g,w]=p.useState([]),[j,y]=p.useState({}),[N,S]=p.useState(!1),[b,v]=p.useState(null),[_,P]=p.useState(!0),[O,D]=p.useState(!1),A=mv({name:e==null?void 0:e.name,phone:e==null?void 0:e.phone,monthKey:l,model:m,onRestore:V=>{V&&Object.keys(V).length>0&&(h(V),S(!1),v(new Date),s.showInfo(oo.DRAFT_LOAD_SUCCESS))}}),T=p.useRef(null),L=p.useRef(m);p.useEffect(()=>{L.current=m},[m]);const C=p.useMemo(()=>{const V=new Date().getFullYear();return Array.from({length:12},(Z,ue)=>{const E=ue+1;return`${V}-${E.toString().padStart(2,"0")}`})},[]);p.useEffect(()=>{(async()=>{if(e!=null&&e.id)try{const{data:Z,error:ue}=await n.from("submissions").select("month_key, id").eq("employee_name",e.name).in("month_key",C);if(ue)throw ue;const E={};C.forEach(B=>{const U=Z==null?void 0:Z.find(X=>X.month_key===B);E[B]=U?"completed":"empty"}),d(E)}catch(Z){console.error("Error fetching month statuses:",Z)}})()},[e,C,n]),p.useEffect(()=>{const V=async()=>{try{const{data:Z,error:ue}=await n.from("clients").select("*").eq("status","active");if(ue)throw ue;x(Z||[]),w([{id:"web-dev",name:"Web Development"},{id:"seo",name:"SEO Optimization"},{id:"content",name:"Content Creation"},{id:"ads",name:"Ad Campaigns"},{id:"social",name:"Social Media"}]);const{data:E,error:B}=await n.from("employee_targets").select("*").eq("employee_id",e==null?void 0:e.id);if(!B&&E){const U={};E.forEach(X=>{U[X.metric]=X.value}),y(U)}}catch(Z){console.error("Error fetching data:",Z)}};e!=null&&e.id&&V()},[e,n]),p.useEffect(()=>{(async()=>{if(!(!(e!=null&&e.name)||!l))try{const{data:Z,error:ue}=await n.from("submissions").select("*").eq("employee_name",e.name).eq("month_key",l).single();if(ue&&ue.code!=="PGRST116")throw ue;h(Z||{})}catch(Z){console.error("Error loading form data:",Z),h({})}})()},[e,l,n]);const F=p.useCallback(async()=>{if(!(!_||!(e!=null&&e.name)||!(e!=null&&e.phone)||!l||!Object.keys(L.current).some(Z=>{const ue=L.current[Z];return ue&&(typeof ue=="string"?ue.trim():!0)})))try{D(!0);const Z={...L.current,employee_name:e.name,employee_phone:e.phone,department:e.department,role:e.role,month_key:l,lastSaved:new Date().toISOString(),isDraft:!0};A.saveDraft(Z,{forceImmediate:N})&&(v(new Date),S(!1),s.showInfo(oo.DRAFT_SAVE_SUCCESS,{duration:2e3}))}catch(Z){console.error("Auto-save failed:",Z),s.showError(oo.DRAFT_SAVE_ERROR)}finally{D(!1)}},[_,e,l,N,A]);p.useEffect(()=>(N&&(T.current&&clearTimeout(T.current),T.current=setTimeout(()=>{F()},2e3)),()=>{T.current&&clearTimeout(T.current)}),[N,F]);const R=(V,Z)=>{h(ue=>({...ue,[V]:Z})),S(!0)},K=async()=>{o(!0);try{const V=[];if(m.paymentStatus&&m.paymentProofUrl&&Object.keys(m.paymentStatus).forEach(E=>{const B=m.paymentStatus[E],U=m.paymentProofUrl[E]||"",X=f.find(q=>q.id===E),ae=(X==null?void 0:X.name)||`Client ${E}`;(B==="completed"||B==="partial")&&(U.trim()?of(U)||V.push(`${ae}: Payment proof must be a valid Google Drive URL`):V.push(`${ae}: Payment proof URL is required for ${B} status`))}),V.length>0){s.showFormError(null,`Payment validation failed:
${V.join(`
`)}`);return}const Z={...m,employee_name:e.name,employee_phone:e.phone,department:e.department,role:e.role,month_key:l,updated_at:new Date().toISOString(),isDraft:!1},{error:ue}=await n.from("submissions").upsert(Z);if(ue)throw ue;try{A.deleteDraft({name:e.name,phone:e.phone,monthKey:l})}catch(E){console.warn("Failed to clear draft:",E)}s.showFormSuccess("Monthly form saved successfully!"),d(E=>({...E,[l]:"completed"})),S(!1),v(new Date),t&&t(Z)}catch(V){console.error("Error saving form:",V),s.showFormError(V,"Failed to save monthly form. Please try again.")}finally{o(!1)}},M=["Operations Head","Operation Manager","Accountant","Sales","HR"].includes((H=e==null?void 0:e.role)==null?void 0:H[0]),I=["Web Developer","SEO","Marketing","Ads","Social Media","Graphic Designer"].includes((Y=e==null?void 0:e.role)==null?void 0:Y[0]);return r.jsx(Ae,{title:"📅 Monthly Form & Accountability Workflow",className:"bg-white",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Month"}),r.jsx("div",{className:"grid grid-cols-6 md:grid-cols-12 gap-2",children:C.map(V=>r.jsx(Pv,{month:V,status:u[V]||"empty",isSelected:l===V,onClick:c},V))}),r.jsxs("div",{className:"mt-4 flex items-center space-x-6 text-sm",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsx("span",{children:"Completed"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),r.jsx("span",{children:"Partial"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-3 h-3 bg-gray-300 rounded-full"}),r.jsx("span",{children:"Empty"})]})]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("h4",{className:"font-medium text-blue-800",children:["📋 ",ln(l)," Accountability Form"]}),r.jsxs("div",{className:"flex items-center space-x-3 text-xs",children:[O&&r.jsxs("div",{className:"flex items-center space-x-1 text-blue-600",children:[r.jsx(Ee,{size:"xs"}),r.jsx("span",{children:"Saving..."})]}),N&&!O&&r.jsxs("div",{className:"flex items-center space-x-1 text-orange-600",children:[r.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-pulse"}),r.jsx("span",{children:"Unsaved changes"})]}),b&&!N&&!O&&r.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),r.jsxs("span",{children:["Saved ",b.toLocaleTimeString()]})]}),r.jsx("button",{onClick:()=>P(!_),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${_?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:_?"Auto-save enabled":"Auto-save disabled",children:_?"🔄 Auto-save ON":"⏸️ Auto-save OFF"})]})]}),r.jsxs("p",{className:"text-sm text-blue-700",children:["Complete your monthly accountability data for ",ln(l),".",u[l]==="completed"&&" (Previously submitted - you can update)",N&&" Your changes are being auto-saved."]})]}),M&&r.jsx(Cv,{role:(z=e==null?void 0:e.role)==null?void 0:z[0],formData:m,onChange:R,clients:f}),I&&r.jsx(Ev,{role:(G=e==null?void 0:e.role)==null?void 0:G[0],formData:m,onChange:R,projects:g}),!M&&!I&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("p",{children:"No specific accountability form configured for your role."}),r.jsx("p",{className:"text-sm",children:"Please contact your manager for role-specific requirements."})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("button",{type:"button",onClick:F,disabled:O||!N,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 text-sm",children:[O&&r.jsx(Ee,{size:"xs"}),r.jsx("span",{children:O?"Saving Draft...":"Save Draft"})]}),Object.keys(m).length>0&&r.jsx("span",{className:"text-xs text-gray-500",children:N?"Draft has unsaved changes":"Draft saved"})]}),r.jsx("div",{className:"flex space-x-3",children:r.jsxs("button",{type:"button",onClick:K,disabled:i||O,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[i&&r.jsx(Ee,{size:"sm"}),r.jsx("span",{children:i?"Submitting...":"Submit Monthly Form"})]})})]}),r.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[r.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"ℹ️ How it works"}),r.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[r.jsxs("p",{children:["• ",r.jsx("strong",{children:"Month Selection:"})," Choose any month to view/edit your accountability data"]}),r.jsxs("p",{children:["• ",r.jsx("strong",{children:"Visual Status:"})," Green = completed, Yellow = partial, Gray = empty"]}),r.jsxs("p",{children:["• ",r.jsx("strong",{children:"Role-based Forms:"})," Different accountability metrics based on your role"]}),r.jsxs("p",{children:["• ",r.jsx("strong",{children:"Auto-save & Drafts:"})," Your changes are automatically saved as drafts every 2 seconds"]}),r.jsxs("p",{children:["• ",r.jsx("strong",{children:"Progress Tracking:"})," See real-time indicators for unsaved changes and save status"]}),r.jsxs("p",{children:["• ",r.jsx("strong",{children:"Draft Recovery:"})," Resume your work from where you left off, even after browser refresh"]}),r.jsxs("p",{children:["• ",r.jsx("strong",{children:"Final Submission:"})," Use 'Submit Monthly Form' to finalize and clear drafts"]}),r.jsxs("p",{children:["• ",r.jsx("strong",{children:"DB-driven Scoring:"})," Scores are calculated automatically based on targets vs achievements"]})]})]})]})})};function kf(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=kf(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function be(){for(var e,t,n=0,a="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=kf(e))&&(a&&(a+=" "),a+=t);return a}var li={},Af={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(Af);var Xl={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(Xl);var Jl={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var a;return typeof n=="string"||typeof n=="symbol"?n:Object.is((a=n==null?void 0:n.valueOf)==null?void 0:a.call(n),-0)?"-0":String(n)}e.toKey=t})(Jl);var ci={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){const a=[],s=n.length;if(s===0)return a;let i=0,o="",l="",c=!1;for(n.charCodeAt(0)===46&&(a.push(""),i++);i<s;){const u=n[i];l?u==="\\"&&i+1<s?(i++,o+=n[i]):u===l?l="":o+=u:c?u==='"'||u==="'"?l=u:u==="]"?(c=!1,a.push(o),o=""):o+=u:u==="["?(c=!0,o&&(a.push(o),o="")):u==="."?o&&(a.push(o),o=""):o+=u,i++}return o&&a.push(o),a}e.toPath=t})(ci);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Af,n=Xl,a=Jl,s=ci;function i(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?n.isDeepKey(c)?i(l,s.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=a.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let m=0;m<c.length;m++){if(d==null||t.isUnsafeProperty(c[m]))return u;d=d[c[m]]}return d===void 0?u:d}e.get=i})(li);var Tv=li.get;const cn=gr(Tv);var Pf={exports:{}},we={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zl=Symbol.for("react.transitional.element"),Ql=Symbol.for("react.portal"),di=Symbol.for("react.fragment"),ui=Symbol.for("react.strict_mode"),mi=Symbol.for("react.profiler"),hi=Symbol.for("react.consumer"),fi=Symbol.for("react.context"),pi=Symbol.for("react.forward_ref"),gi=Symbol.for("react.suspense"),xi=Symbol.for("react.suspense_list"),bi=Symbol.for("react.memo"),yi=Symbol.for("react.lazy"),Dv=Symbol.for("react.view_transition"),Mv=Symbol.for("react.client.reference");function It(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Zl:switch(e=e.type,e){case di:case mi:case ui:case gi:case xi:case Dv:return e;default:switch(e=e&&e.$$typeof,e){case fi:case pi:case yi:case bi:return e;case hi:return e;default:return t}}case Ql:return t}}}we.ContextConsumer=hi;we.ContextProvider=fi;we.Element=Zl;we.ForwardRef=pi;we.Fragment=di;we.Lazy=yi;we.Memo=bi;we.Portal=Ql;we.Profiler=mi;we.StrictMode=ui;we.Suspense=gi;we.SuspenseList=xi;we.isContextConsumer=function(e){return It(e)===hi};we.isContextProvider=function(e){return It(e)===fi};we.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Zl};we.isForwardRef=function(e){return It(e)===pi};we.isFragment=function(e){return It(e)===di};we.isLazy=function(e){return It(e)===yi};we.isMemo=function(e){return It(e)===bi};we.isPortal=function(e){return It(e)===Ql};we.isProfiler=function(e){return It(e)===mi};we.isStrictMode=function(e){return It(e)===ui};we.isSuspense=function(e){return It(e)===gi};we.isSuspenseList=function(e){return It(e)===xi};we.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===di||e===mi||e===ui||e===gi||e===xi||typeof e=="object"&&e!==null&&(e.$$typeof===yi||e.$$typeof===bi||e.$$typeof===fi||e.$$typeof===hi||e.$$typeof===pi||e.$$typeof===Mv||e.getModuleId!==void 0)};we.typeOf=It;Pf.exports=we;var Iv=Pf.exports,mt=e=>e===0?0:e>0?1:-1,Nt=e=>typeof e=="number"&&e!=+e,Xr=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,te=e=>(typeof e=="number"||e instanceof Number)&&!Nt(e),Zt=e=>te(e)||typeof e=="string",Rv=0,ga=e=>{var t=++Rv;return"".concat(e||"").concat(t)},Kt=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!te(t)&&typeof t!="string")return a;var i;if(Xr(t)){if(n==null)return a;var o=t.indexOf("%");i=n*parseFloat(t.slice(0,o))/100}else i=+t;return Nt(i)&&(i=a),s&&n!=null&&i>n&&(i=n),i},Cf=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},a=0;a<t;a++)if(!n[e[a]])n[e[a]]=!0;else return!0;return!1};function zt(e,t,n){return te(e)&&te(t)?e+n*(t-e):t}function Ef(e,t,n){if(!(!e||!e.length))return e.find(a=>a&&(typeof t=="function"?t(a):cn(a,t))===n)}var Pe=e=>e===null||typeof e>"u",Pa=e=>Pe(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),Lv=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function ec(e){if(typeof e!="string")return!1;var t=Lv;return t.includes(e)}var $v=["viewBox","children"],su=["points","pathLength"],uo={svg:$v,polygon:su,polyline:su},tc=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(p.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(s=>{ec(s)&&(a[s]=i=>n[s](n,i))}),a},Fv=(e,t,n)=>a=>(e(t,n,a),null),rc=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(s=>{var i=e[s];ec(s)&&typeof i=="function"&&(a||(a={}),a[s]=Fv(i,t,n))}),a},Bv=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function Of(e){if(typeof e!="string")return!1;var t=Bv;return t.includes(e)}function gn(e){var t=Object.entries(e).filter(n=>{var[a]=n;return Of(a)});return Object.fromEntries(t)}var iu=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",ou=null,mo=null,Tf=e=>{if(e===ou&&Array.isArray(mo))return mo;var t=[];return p.Children.forEach(e,n=>{Pe(n)||(Iv.isFragment(n)?t=t.concat(Tf(n.props.children)):t.push(n))}),mo=t,ou=e,t};function nc(e,t){var n=[],a=[];return Array.isArray(t)?a=t.map(s=>iu(s)):a=[iu(t)],Tf(e).forEach(s=>{var i=cn(s,"type.displayName")||cn(s,"type.name");a.indexOf(i)!==-1&&n.push(s)}),n}var Df=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,qv=(e,t,n,a)=>{var s;if(typeof t=="symbol"||typeof t=="number")return!0;var i=(s=a&&(uo==null?void 0:uo[a]))!==null&&s!==void 0?s:[],o=t.startsWith("data-"),l=typeof e!="function"&&(!!a&&i.includes(t)||Of(t)),c=!!n&&ec(t);return o||l||c},Me=(e,t,n)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(p.isValidElement(e)&&(a=e.props),typeof a!="object"&&typeof a!="function")return null;var s={};return Object.keys(a).forEach(i=>{var o;qv((o=a)===null||o===void 0?void 0:o[i],i,t,n)&&(s[i]=a[i])}),s},zv=["children","width","height","viewBox","className","style","title","desc"];function Yo(){return Yo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Yo.apply(null,arguments)}function Uv(e,t){if(e==null)return{};var n,a,s=Wv(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Wv(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var Mf=p.forwardRef((e,t)=>{var{children:n,width:a,height:s,viewBox:i,className:o,style:l,title:c,desc:u}=e,d=Uv(e,zv),m=i||{width:a,height:s,x:0,y:0},h=be("recharts-surface",o);return p.createElement("svg",Yo({},Me(d,!0,"svg"),{className:h,width:a,height:s,style:l,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),ref:t}),p.createElement("title",null,c),p.createElement("desc",null,u),n)}),Hv=["children","className"];function Xo(){return Xo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xo.apply(null,arguments)}function Kv(e,t){if(e==null)return{};var n,a,s=Gv(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Gv(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var Gt=p.forwardRef((e,t)=>{var{children:n,className:a}=e,s=Kv(e,Hv),i=be("recharts-layer",a);return p.createElement("g",Xo({className:i},Me(s,!0),{ref:t}),n)}),Vv=p.createContext(null);function Se(e){return function(){return e}}const If=Math.cos,vs=Math.sin,Vt=Math.sqrt,js=Math.PI,vi=2*js,Jo=Math.PI,Zo=2*Jo,Hr=1e-6,Yv=Zo-Hr;function Rf(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Xv(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Rf;const n=10**t;return function(a){this._+=a[0];for(let s=1,i=a.length;s<i;++s)this._+=Math.round(arguments[s]*n)/n+a[s]}}class Jv{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Rf:Xv(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,a,s){this._append`Q${+t},${+n},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(t,n,a,s,i,o){this._append`C${+t},${+n},${+a},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,n,a,s,i){if(t=+t,n=+n,a=+a,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=a-t,u=s-n,d=o-t,m=l-n,h=d*d+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>Hr)if(!(Math.abs(m*c-u*d)>Hr)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let f=a-o,x=s-l,g=c*c+u*u,w=f*f+x*x,j=Math.sqrt(g),y=Math.sqrt(h),N=i*Math.tan((Jo-Math.acos((g+h-w)/(2*j*y)))/2),S=N/y,b=N/j;Math.abs(S-1)>Hr&&this._append`L${t+S*d},${n+S*m}`,this._append`A${i},${i},0,0,${+(m*f>d*x)},${this._x1=t+b*c},${this._y1=n+b*u}`}}arc(t,n,a,s,i,o){if(t=+t,n=+n,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(s),c=a*Math.sin(s),u=t+l,d=n+c,m=1^o,h=o?s-i:i-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Hr||Math.abs(this._y1-d)>Hr)&&this._append`L${u},${d}`,a&&(h<0&&(h=h%Zo+Zo),h>Yv?this._append`A${a},${a},0,1,${m},${t-l},${n-c}A${a},${a},0,1,${m},${this._x1=u},${this._y1=d}`:h>Hr&&this._append`A${a},${a},0,${+(h>=Jo)},${m},${this._x1=t+a*Math.cos(i)},${this._y1=n+a*Math.sin(i)}`)}rect(t,n,a,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}}function ac(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);t=a}return e},()=>new Jv(t)}function sc(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Lf(e){this._context=e}Lf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function ji(e){return new Lf(e)}function $f(e){return e[0]}function Ff(e){return e[1]}function Bf(e,t){var n=Se(!0),a=null,s=ji,i=null,o=ac(l);e=typeof e=="function"?e:e===void 0?$f:Se(e),t=typeof t=="function"?t:t===void 0?Ff:Se(t);function l(c){var u,d=(c=sc(c)).length,m,h=!1,f;for(a==null&&(i=s(f=o())),u=0;u<=d;++u)!(u<d&&n(m=c[u],u,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(m,u,c),+t(m,u,c));if(f)return i=null,f+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Se(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Se(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Se(!!c),l):n},l.curve=function(c){return arguments.length?(s=c,a!=null&&(i=s(a)),l):s},l.context=function(c){return arguments.length?(c==null?a=i=null:i=s(a=c),l):a},l}function Va(e,t,n){var a=null,s=Se(!0),i=null,o=ji,l=null,c=ac(u);e=typeof e=="function"?e:e===void 0?$f:Se(+e),t=typeof t=="function"?t:Se(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Ff:Se(+n);function u(m){var h,f,x,g=(m=sc(m)).length,w,j=!1,y,N=new Array(g),S=new Array(g);for(i==null&&(l=o(y=c())),h=0;h<=g;++h){if(!(h<g&&s(w=m[h],h,m))===j)if(j=!j)f=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),x=h-1;x>=f;--x)l.point(N[x],S[x]);l.lineEnd(),l.areaEnd()}j&&(N[h]=+e(w,h,m),S[h]=+t(w,h,m),l.point(a?+a(w,h,m):N[h],n?+n(w,h,m):S[h]))}if(y)return l=null,y+""||null}function d(){return Bf().defined(s).curve(o).context(i)}return u.x=function(m){return arguments.length?(e=typeof m=="function"?m:Se(+m),a=null,u):e},u.x0=function(m){return arguments.length?(e=typeof m=="function"?m:Se(+m),u):e},u.x1=function(m){return arguments.length?(a=m==null?null:typeof m=="function"?m:Se(+m),u):a},u.y=function(m){return arguments.length?(t=typeof m=="function"?m:Se(+m),n=null,u):t},u.y0=function(m){return arguments.length?(t=typeof m=="function"?m:Se(+m),u):t},u.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:Se(+m),u):n},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(n)},u.lineX1=function(){return d().x(a).y(t)},u.defined=function(m){return arguments.length?(s=typeof m=="function"?m:Se(!!m),u):s},u.curve=function(m){return arguments.length?(o=m,i!=null&&(l=o(i)),u):o},u.context=function(m){return arguments.length?(m==null?i=l=null:l=o(i=m),u):i},u}class qf{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Zv(e){return new qf(e,!0)}function Qv(e){return new qf(e,!1)}const ic={draw(e,t){const n=Vt(t/js);e.moveTo(n,0),e.arc(0,0,n,0,vi)}},ej={draw(e,t){const n=Vt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},zf=Vt(1/3),tj=zf*2,rj={draw(e,t){const n=Vt(t/tj),a=n*zf;e.moveTo(0,-n),e.lineTo(a,0),e.lineTo(0,n),e.lineTo(-a,0),e.closePath()}},nj={draw(e,t){const n=Vt(t),a=-n/2;e.rect(a,a,n,n)}},aj=.8908130915292852,Uf=vs(js/10)/vs(7*js/10),sj=vs(vi/10)*Uf,ij=-If(vi/10)*Uf,oj={draw(e,t){const n=Vt(t*aj),a=sj*n,s=ij*n;e.moveTo(0,-n),e.lineTo(a,s);for(let i=1;i<5;++i){const o=vi*i/5,l=If(o),c=vs(o);e.lineTo(c*n,-l*n),e.lineTo(l*a-c*s,c*a+l*s)}e.closePath()}},ho=Vt(3),lj={draw(e,t){const n=-Vt(t/(ho*3));e.moveTo(0,n*2),e.lineTo(-ho*n,-n),e.lineTo(ho*n,-n),e.closePath()}},Pt=-.5,Ct=Vt(3)/2,Qo=1/Vt(12),cj=(Qo/2+1)*3,dj={draw(e,t){const n=Vt(t/cj),a=n/2,s=n*Qo,i=a,o=n*Qo+n,l=-i,c=o;e.moveTo(a,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Pt*a-Ct*s,Ct*a+Pt*s),e.lineTo(Pt*i-Ct*o,Ct*i+Pt*o),e.lineTo(Pt*l-Ct*c,Ct*l+Pt*c),e.lineTo(Pt*a+Ct*s,Pt*s-Ct*a),e.lineTo(Pt*i+Ct*o,Pt*o-Ct*i),e.lineTo(Pt*l+Ct*c,Pt*c-Ct*l),e.closePath()}};function uj(e,t){let n=null,a=ac(s);e=typeof e=="function"?e:Se(e||ic),t=typeof t=="function"?t:Se(t===void 0?64:+t);function s(){let i;if(n||(n=i=a()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Se(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Se(+i),s):t},s.context=function(i){return arguments.length?(n=i??null,s):n},s}function ws(){}function Ns(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Wf(e){this._context=e}Wf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ns(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ns(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function mj(e){return new Wf(e)}function Hf(e){this._context=e}Hf.prototype={areaStart:ws,areaEnd:ws,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Ns(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function hj(e){return new Hf(e)}function Kf(e){this._context=e}Kf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:Ns(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function fj(e){return new Kf(e)}function Gf(e){this._context=e}Gf.prototype={areaStart:ws,areaEnd:ws,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function pj(e){return new Gf(e)}function lu(e){return e<0?-1:1}function cu(e,t,n){var a=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(a||s<0&&-0),o=(n-e._y1)/(s||a<0&&-0),l=(i*s+o*a)/(a+s);return(lu(i)+lu(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function du(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function fo(e,t,n){var a=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-a)/3;e._context.bezierCurveTo(a+l,s+l*t,i-l,o-l*n,i,o)}function Ss(e){this._context=e}Ss.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:fo(this,this._t0,du(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,fo(this,du(this,n=cu(this,e,t)),n);break;default:fo(this,this._t0,n=cu(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Vf(e){this._context=new Yf(e)}(Vf.prototype=Object.create(Ss.prototype)).point=function(e,t){Ss.prototype.point.call(this,t,e)};function Yf(e){this._context=e}Yf.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,a,s,i){this._context.bezierCurveTo(t,e,a,n,i,s)}};function gj(e){return new Ss(e)}function xj(e){return new Vf(e)}function Xf(e){this._context=e}Xf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var a=uu(e),s=uu(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(a[0][i],s[0][i],a[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function uu(e){var t,n=e.length-1,a,s=new Array(n),i=new Array(n),o=new Array(n);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[n-1]=2,i[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)a=s[t]/i[t-1],i[t]-=a,o[t]-=a*o[t-1];for(s[n-1]=o[n-1]/i[n-1],t=n-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[n-1]=(e[n]+s[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function bj(e){return new Xf(e)}function wi(e,t){this._context=e,this._t=t}wi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function yj(e){return new wi(e,.5)}function vj(e){return new wi(e,0)}function jj(e){return new wi(e,1)}function Mn(e,t){if((o=e.length)>1)for(var n=1,a,s,i=e[t[0]],o,l=i.length;n<o;++n)for(s=i,i=e[t[n]],a=0;a<l;++a)i[a][1]+=i[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]}function el(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function wj(e,t){return e[t]}function Nj(e){const t=[];return t.key=e,t}function Sj(){var e=Se([]),t=el,n=Mn,a=wj;function s(i){var o=Array.from(e.apply(this,arguments),Nj),l,c=o.length,u=-1,d;for(const m of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+a(m,o[l].key,u,i)]).data=m;for(l=0,d=sc(t(o));l<c;++l)o[d[l]].index=l;return n(o,d),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Se(Array.from(i)),s):e},s.value=function(i){return arguments.length?(a=typeof i=="function"?i:Se(+i),s):a},s.order=function(i){return arguments.length?(t=i==null?el:typeof i=="function"?i:Se(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(n=i??Mn,s):n},s}function _j(e,t){if((a=e.length)>0){for(var n,a,s=0,i=e[0].length,o;s<i;++s){for(o=n=0;n<a;++n)o+=e[n][s][1]||0;if(o)for(n=0;n<a;++n)e[n][s][1]/=o}Mn(e,t)}}function kj(e,t){if((s=e.length)>0){for(var n=0,a=e[t[0]],s,i=a.length;n<i;++n){for(var o=0,l=0;o<s;++o)l+=e[o][n][1]||0;a[n][1]+=a[n][0]=-l/2}Mn(e,t)}}function Aj(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var n=0,a=1,s,i,o;a<i;++a){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],m=d[a][1]||0,h=d[a-1][1]||0,f=(m-h)/2,x=0;x<l;++x){var g=e[t[x]],w=g[a][1]||0,j=g[a-1][1]||0;f+=w-j}c+=m,u+=f*m}s[a-1][1]+=s[a-1][0]=n,c&&(n-=u/c)}s[a-1][1]+=s[a-1][0]=n,Mn(e,t)}}var Pj=["type","size","sizeType"];function tl(){return tl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},tl.apply(null,arguments)}function mu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function hu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mu(Object(n),!0).forEach(function(a){Cj(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mu(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Cj(e,t,n){return(t=Ej(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ej(e){var t=Oj(e,"string");return typeof t=="symbol"?t:t+""}function Oj(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tj(e,t){if(e==null)return{};var n,a,s=Dj(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function Dj(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var Jf={symbolCircle:ic,symbolCross:ej,symbolDiamond:rj,symbolSquare:nj,symbolStar:oj,symbolTriangle:lj,symbolWye:dj},Mj=Math.PI/180,Ij=e=>{var t="symbol".concat(Pa(e));return Jf[t]||ic},Rj=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*Mj;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Lj=(e,t)=>{Jf["symbol".concat(Pa(e))]=t},Zf=e=>{var{type:t="circle",size:n=64,sizeType:a="area"}=e,s=Tj(e,Pj),i=hu(hu({},s),{},{type:t,size:n,sizeType:a}),o=()=>{var m=Ij(t),h=uj().type(m).size(Rj(n,a,t));return h()},{className:l,cx:c,cy:u}=i,d=Me(i,!0);return c===+c&&u===+u&&n===+n?p.createElement("path",tl({},d,{className:be("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:o()})):null};Zf.registerSymbol=Lj;var Qf={},ep={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a){const s=new Map;for(let i=0;i<n.length;i++){const o=n[i],l=a(o);s.has(l)||s.set(l,o)}return Array.from(s.values())}e.uniqBy=t})(ep);var oc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(oc);var tp={},Ni={},rp={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(rp);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rp;function n(a){return a!=null&&typeof a!="function"&&t.isLength(a.length)}e.isArrayLike=n})(Ni);var np={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(np);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ni,n=np;function a(s){return n.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=a})(tp);var ap={},sp={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=li;function n(a){return function(s){return t.get(s,a)}}e.property=n})(sp);var ip={},po={},go={},lc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(lc);var cc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(cc);var Si={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a){return n===a||Number.isNaN(n)&&Number.isNaN(a)}e.eq=t})(Si);var fu;function $j(){return fu||(fu=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dc(),n=lc,a=cc,s=Si;function i(m,h,f){return typeof f!="function"?t.isMatch(m,h):o(m,h,function x(g,w,j,y,N,S){const b=f(g,w,j,y,N,S);return b!==void 0?!!b:o(g,w,x,S)},new Map)}function o(m,h,f,x){if(h===m)return!0;switch(typeof h){case"object":return l(m,h,f,x);case"function":return Object.keys(h).length>0?o(m,{...h},f,x):s.eq(m,h);default:return n.isObject(m)?typeof h=="string"?h==="":!0:s.eq(m,h)}}function l(m,h,f,x){if(h==null)return!0;if(Array.isArray(h))return u(m,h,f,x);if(h instanceof Map)return c(m,h,f,x);if(h instanceof Set)return d(m,h,f,x);const g=Object.keys(h);if(m==null)return g.length===0;if(g.length===0)return!0;if(x&&x.has(h))return x.get(h)===m;x&&x.set(h,m);try{for(let w=0;w<g.length;w++){const j=g[w];if(!a.isPrimitive(m)&&!(j in m)||h[j]===void 0&&m[j]!==void 0||h[j]===null&&m[j]!==null||!f(m[j],h[j],j,m,h,x))return!1}return!0}finally{x&&x.delete(h)}}function c(m,h,f,x){if(h.size===0)return!0;if(!(m instanceof Map))return!1;for(const[g,w]of h.entries()){const j=m.get(g);if(f(j,w,g,m,h,x)===!1)return!1}return!0}function u(m,h,f,x){if(h.length===0)return!0;if(!Array.isArray(m))return!1;const g=new Set;for(let w=0;w<h.length;w++){const j=h[w];let y=!1;for(let N=0;N<m.length;N++){if(g.has(N))continue;const S=m[N];let b=!1;if(f(S,j,w,m,h,x)&&(b=!0),b){g.add(N),y=!0;break}}if(!y)return!1}return!0}function d(m,h,f,x){return h.size===0?!0:m instanceof Set?u([...m],[...h],f,x):!1}e.isMatchWith=i,e.isSetMatch=d}(go)),go}var pu;function dc(){return pu||(pu=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$j();function n(a,s){return t.isMatchWith(a,s,()=>{})}e.isMatch=n}(po)),po}var op={},uc={},mc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(a=>Object.prototype.propertyIsEnumerable.call(n,a))}e.getSymbols=t})(mc);var _i={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(_i);var ki={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",a="[object Number]",s="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",m="[object Function]",h="[object ArrayBuffer]",f="[object Object]",x="[object Error]",g="[object DataView]",w="[object Uint8Array]",j="[object Uint8ClampedArray]",y="[object Uint16Array]",N="[object Uint32Array]",S="[object BigUint64Array]",b="[object Int8Array]",v="[object Int16Array]",_="[object Int32Array]",P="[object BigInt64Array]",O="[object Float32Array]",D="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=P,e.bigUint64ArrayTag=S,e.booleanTag=s,e.dataViewTag=g,e.dateTag=l,e.errorTag=x,e.float32ArrayTag=O,e.float64ArrayTag=D,e.functionTag=m,e.int16ArrayTag=v,e.int32ArrayTag=_,e.int8ArrayTag=b,e.mapTag=c,e.numberTag=a,e.objectTag=f,e.regexpTag=t,e.setTag=u,e.stringTag=n,e.symbolTag=o,e.uint16ArrayTag=y,e.uint32ArrayTag=N,e.uint8ArrayTag=w,e.uint8ClampedArrayTag=j})(ki);var lp={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(lp);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mc,n=_i,a=ki,s=cc,i=lp;function o(d,m){return l(d,void 0,d,new Map,m)}function l(d,m,h,f=new Map,x=void 0){const g=x==null?void 0:x(d,m,h,f);if(g!==void 0)return g;if(s.isPrimitive(d))return d;if(f.has(d))return f.get(d);if(Array.isArray(d)){const w=new Array(d.length);f.set(d,w);for(let j=0;j<d.length;j++)w[j]=l(d[j],j,h,f,x);return Object.hasOwn(d,"index")&&(w.index=d.index),Object.hasOwn(d,"input")&&(w.input=d.input),w}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const w=new RegExp(d.source,d.flags);return w.lastIndex=d.lastIndex,w}if(d instanceof Map){const w=new Map;f.set(d,w);for(const[j,y]of d)w.set(j,l(y,j,h,f,x));return w}if(d instanceof Set){const w=new Set;f.set(d,w);for(const j of d)w.add(l(j,void 0,h,f,x));return w}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(i.isTypedArray(d)){const w=new(Object.getPrototypeOf(d)).constructor(d.length);f.set(d,w);for(let j=0;j<d.length;j++)w[j]=l(d[j],j,h,f,x);return w}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const w=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return f.set(d,w),c(w,d,h,f,x),w}if(typeof File<"u"&&d instanceof File){const w=new File([d],d.name,{type:d.type});return f.set(d,w),c(w,d,h,f,x),w}if(d instanceof Blob){const w=new Blob([d],{type:d.type});return f.set(d,w),c(w,d,h,f,x),w}if(d instanceof Error){const w=new d.constructor;return f.set(d,w),w.message=d.message,w.name=d.name,w.stack=d.stack,w.cause=d.cause,c(w,d,h,f,x),w}if(typeof d=="object"&&u(d)){const w=Object.create(Object.getPrototypeOf(d));return f.set(d,w),c(w,d,h,f,x),w}return d}function c(d,m,h=d,f,x){const g=[...Object.keys(m),...t.getSymbols(m)];for(let w=0;w<g.length;w++){const j=g[w],y=Object.getOwnPropertyDescriptor(d,j);(y==null||y.writable)&&(d[j]=l(m[j],j,h,f,x))}}function u(d){switch(n.getTag(d)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c})(uc);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uc;function n(a){return t.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=n})(op);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dc(),n=op;function a(s){return s=n.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=a})(ip);var cp={},dp={},up={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uc,n=ki;function a(s,i){return t.cloneDeepWith(s,(o,l,c,u)=>{const d=i==null?void 0:i(o,l,c,u);if(d!==void 0)return d;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case n.numberTag:case n.stringTag:case n.booleanTag:{const m=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(m,s),m}case n.argumentsTag:{const m={};return t.copyProperties(m,s),m.length=s.length,m[Symbol.iterator]=s[Symbol.iterator],m}default:return}})}e.cloneDeepWith=a})(up);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=up;function n(a){return t.cloneDeepWith(a)}e.cloneDeep=n})(dp);var mp={},hc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(a,s=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<s;case"symbol":return!1;case"string":return t.test(a)}}e.isIndex=n})(hc);var hp={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_i;function n(a){return a!==null&&typeof a=="object"&&t.getTag(a)==="[object Arguments]"}e.isArguments=n})(hp);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xl,n=hc,a=hp,s=ci;function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=s.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const m=c[d];if((u==null||!Object.hasOwn(u,m))&&!((Array.isArray(u)||a.isArguments(u))&&n.isIndex(m)&&m<u.length))return!1;u=u[m]}return!0}e.has=i})(mp);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dc(),n=Jl,a=dp,s=li,i=mp;function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=n.toKey(l);break}}return c=a.cloneDeep(c),function(u){const d=s.get(u,l);return d===void 0?i.has(u,l):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=o})(cp);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oc,n=sp,a=ip,s=cp;function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?s.matchesProperty(o[0],o[1]):a.matches(o);case"string":case"symbol":case"number":return n.property(o)}}e.iteratee=i})(ap);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ep,n=oc,a=tp,s=ap;function i(o,l=n.identity){return a.isArrayLikeObject(o)?t.uniqBy(Array.from(o),s.iteratee(l)):[]}e.uniqBy=i})(Qf);var Fj=Qf.uniqBy;const gu=gr(Fj);function Bj(e,t,n){return t===!0?gu(e,n):typeof t=="function"?gu(e,t):e}var fp={exports:{}},pp={},gp={exports:{}},xp={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var In=p;function qj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zj=typeof Object.is=="function"?Object.is:qj,Uj=In.useState,Wj=In.useEffect,Hj=In.useLayoutEffect,Kj=In.useDebugValue;function Gj(e,t){var n=t(),a=Uj({inst:{value:n,getSnapshot:t}}),s=a[0].inst,i=a[1];return Hj(function(){s.value=n,s.getSnapshot=t,xo(s)&&i({inst:s})},[e,n,t]),Wj(function(){return xo(s)&&i({inst:s}),e(function(){xo(s)&&i({inst:s})})},[e]),Kj(n),n}function xo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!zj(e,n)}catch{return!0}}function Vj(e,t){return t()}var Yj=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Vj:Gj;xp.useSyncExternalStore=In.useSyncExternalStore!==void 0?In.useSyncExternalStore:Yj;gp.exports=xp;var Xj=gp.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ai=p,Jj=Xj;function Zj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qj=typeof Object.is=="function"?Object.is:Zj,ew=Jj.useSyncExternalStore,tw=Ai.useRef,rw=Ai.useEffect,nw=Ai.useMemo,aw=Ai.useDebugValue;pp.useSyncExternalStoreWithSelector=function(e,t,n,a,s){var i=tw(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=nw(function(){function c(f){if(!u){if(u=!0,d=f,f=a(f),s!==void 0&&o.hasValue){var x=o.value;if(s(x,f))return m=x}return m=f}if(x=m,Qj(d,f))return x;var g=a(f);return s!==void 0&&s(x,g)?(d=f,x):(d=f,m=g)}var u=!1,d,m,h=n===void 0?null:n;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,n,a,s]);var l=ew(e,i[0],i[1]);return rw(function(){o.hasValue=!0,o.value=l},[l]),aw(l),l};fp.exports=pp;var sw=fp.exports,fc=p.createContext(null),iw=e=>e,Ke=()=>{var e=p.useContext(fc);return e?e.store.dispatch:iw},ps=()=>{},ow=()=>ps,lw=(e,t)=>e===t;function ne(e){var t=p.useContext(fc);return sw.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:ow,t?t.store.getState:ps,t?t.store.getState:ps,t?e:ps,lw)}function cw(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function dw(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function uw(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${n}]`)}}var xu=e=>Array.isArray(e)?e:[e];function mw(e){const t=Array.isArray(e[0])?e[0]:e;return uw(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function hw(e,t){const n=[],{length:a}=e;for(let s=0;s<a;s++)n.push(e[s].apply(null,t));return n}var fw=class{constructor(e){this.value=e}deref(){return this.value}},pw=typeof WeakRef<"u"?WeakRef:fw,gw=0,bu=1;function Ya(){return{s:gw,v:void 0,o:null,p:null}}function bp(e,t={}){let n=Ya();const{resultEqualityCheck:a}=t;let s,i=0;function o(){var m;let l=n;const{length:c}=arguments;for(let h=0,f=c;h<f;h++){const x=arguments[h];if(typeof x=="function"||typeof x=="object"&&x!==null){let g=l.o;g===null&&(l.o=g=new WeakMap);const w=g.get(x);w===void 0?(l=Ya(),g.set(x,l)):l=w}else{let g=l.p;g===null&&(l.p=g=new Map);const w=g.get(x);w===void 0?(l=Ya(),g.set(x,l)):l=w}}const u=l;let d;if(l.s===bu)d=l.v;else if(d=e.apply(null,arguments),i++,a){const h=((m=s==null?void 0:s.deref)==null?void 0:m.call(s))??s;h!=null&&a(h,d)&&(d=h,i!==0&&i--),s=typeof d=="object"&&d!==null||typeof d=="function"?new pw(d):d}return u.s=bu,u.v=d,d}return o.clearCache=()=>{n=Ya(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function xw(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...s)=>{let i=0,o=0,l,c={},u=s.pop();typeof u=="object"&&(c=u,u=s.pop()),cw(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...n,...c},{memoize:m,memoizeOptions:h=[],argsMemoize:f=bp,argsMemoizeOptions:x=[]}=d,g=xu(h),w=xu(x),j=mw(s),y=m(function(){return i++,u.apply(null,arguments)},...g),N=f(function(){o++;const b=hw(j,arguments);return l=y.apply(null,b),l},...w);return Object.assign(N,{resultFunc:u,memoizedResultFunc:y,dependencies:j,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:m,argsMemoize:f})};return Object.assign(a,{withTypes:()=>a}),a}var $=xw(bp),bw=Object.assign((e,t=$)=>{dw(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),a=n.map(i=>e[i]);return t(a,(...i)=>i.reduce((o,l,c)=>(o[n[c]]=l,o),{}))},{withTypes:()=>bw}),yp={},vp={},jp={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const n=(a,s,i)=>{if(a!==s){const o=t(a),l=t(s);if(o===l&&o===0){if(a<s)return i==="desc"?1:-1;if(a>s)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=n})(jp);var wp={},pc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(pc);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pc,n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function s(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(a.test(i)||!n.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=s})(wp);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jp,n=wp,a=ci;function s(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(f=>String(f));const u=(f,x)=>{let g=f;for(let w=0;w<x.length&&g!=null;++w)g=g[x[w]];return g},d=(f,x)=>x==null||f==null?x:typeof f=="object"&&"key"in f?Object.hasOwn(x,f.key)?x[f.key]:u(x,f.path):typeof f=="function"?f(x):Array.isArray(f)?u(x,f):typeof x=="object"?x[f]:x,m=o.map(f=>(Array.isArray(f)&&f.length===1&&(f=f[0]),f==null||typeof f=="function"||Array.isArray(f)||n.isKey(f)?f:{key:f,path:a.toPath(f)}));return i.map(f=>({original:f,criteria:m.map(x=>d(x,f))})).slice().sort((f,x)=>{for(let g=0;g<m.length;g++){const w=t.compareValues(f.criteria[g],x.criteria[g],l[g]);if(w!==0)return w}return 0}).map(f=>f.original)}e.orderBy=s})(vp);var Np={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a=1){const s=[],i=Math.floor(a),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<i?o(d,c+1):s.push(d)}};return o(n,0),s}e.flatten=t})(Np);var gc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hc,n=Ni,a=lc,s=Si;function i(o,l,c){return a.isObject(c)&&(typeof l=="number"&&n.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?s.eq(c[l],o):!1}e.isIterateeCall=i})(gc);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vp,n=Np,a=gc;function s(i,...o){const l=o.length;return l>1&&a.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&a.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,n.flatten(o),["asc"])}e.sortBy=s})(yp);var yw=yp.sortBy;const Pi=gr(yw);var Sp=e=>e.legend.settings,vw=e=>e.legend.size,jw=e=>e.legend.payload;$([jw,Sp],(e,t)=>{var{itemSorter:n}=t,a=e.flat(1);return n?Pi(a,n):a});var Xa=1;function ww(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=p.useState({height:0,left:0,top:0,width:0}),a=p.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>Xa||Math.abs(o.left-t.left)>Xa||Math.abs(o.top-t.top)>Xa||Math.abs(o.width-t.width)>Xa)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function Ye(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Nw=typeof Symbol=="function"&&Symbol.observable||"@@observable",yu=Nw,bo=()=>Math.random().toString(36).substring(7).split("").join("."),Sw={INIT:`@@redux/INIT${bo()}`,REPLACE:`@@redux/REPLACE${bo()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${bo()}`},_s=Sw;function xc(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function _p(e,t,n){if(typeof e!="function")throw new Error(Ye(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ye(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ye(1));return n(_p)(e,t)}let a=e,s=t,i=new Map,o=i,l=0,c=!1;function u(){o===i&&(o=new Map,i.forEach((w,j)=>{o.set(j,w)}))}function d(){if(c)throw new Error(Ye(3));return s}function m(w){if(typeof w!="function")throw new Error(Ye(4));if(c)throw new Error(Ye(5));let j=!0;u();const y=l++;return o.set(y,w),function(){if(j){if(c)throw new Error(Ye(6));j=!1,u(),o.delete(y),i=null}}}function h(w){if(!xc(w))throw new Error(Ye(7));if(typeof w.type>"u")throw new Error(Ye(8));if(typeof w.type!="string")throw new Error(Ye(17));if(c)throw new Error(Ye(9));try{c=!0,s=a(s,w)}finally{c=!1}return(i=o).forEach(y=>{y()}),w}function f(w){if(typeof w!="function")throw new Error(Ye(10));a=w,h({type:_s.REPLACE})}function x(){const w=m;return{subscribe(j){if(typeof j!="object"||j===null)throw new Error(Ye(11));function y(){const S=j;S.next&&S.next(d())}return y(),{unsubscribe:w(y)}},[yu](){return this}}}return h({type:_s.INIT}),{dispatch:h,subscribe:m,getState:d,replaceReducer:f,[yu]:x}}function _w(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:_s.INIT})>"u")throw new Error(Ye(12));if(typeof n(void 0,{type:_s.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ye(13))})}function kp(e){const t=Object.keys(e),n={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(n[o]=e[o])}const a=Object.keys(n);let s;try{_w(n)}catch(i){s=i}return function(o={},l){if(s)throw s;let c=!1;const u={};for(let d=0;d<a.length;d++){const m=a[d],h=n[m],f=o[m],x=h(f,l);if(typeof x>"u")throw l&&l.type,new Error(Ye(14));u[m]=x,c=c||x!==f}return c=c||a.length!==Object.keys(o).length,c?u:o}}function ks(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...a)=>t(n(...a)))}function kw(...e){return t=>(n,a)=>{const s=t(n,a);let i=()=>{throw new Error(Ye(15))};const o={getState:s.getState,dispatch:(c,...u)=>i(c,...u)},l=e.map(c=>c(o));return i=ks(...l)(s.dispatch),{...s,dispatch:i}}}function Ap(e){return xc(e)&&"type"in e&&typeof e.type=="string"}var Pp=Symbol.for("immer-nothing"),vu=Symbol.for("immer-draftable"),St=Symbol.for("immer-state");function Wt(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Rn=Object.getPrototypeOf;function dn(e){return!!e&&!!e[St]}function mr(e){var t;return e?Cp(e)||Array.isArray(e)||!!e[vu]||!!((t=e.constructor)!=null&&t[vu])||Ei(e)||Oi(e):!1}var Aw=Object.prototype.constructor.toString();function Cp(e){if(!e||typeof e!="object")return!1;const t=Rn(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Aw}function As(e,t){Ci(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,a)=>t(a,n,e))}function Ci(e){const t=e[St];return t?t.type_:Array.isArray(e)?1:Ei(e)?2:Oi(e)?3:0}function rl(e,t){return Ci(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ep(e,t,n){const a=Ci(e);a===2?e.set(t,n):a===3?e.add(n):e[t]=n}function Pw(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Ei(e){return e instanceof Map}function Oi(e){return e instanceof Set}function Kr(e){return e.copy_||e.base_}function nl(e,t){if(Ei(e))return new Map(e);if(Oi(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Cp(e);if(t===!0||t==="class_only"&&!n){const a=Object.getOwnPropertyDescriptors(e);delete a[St];let s=Reflect.ownKeys(a);for(let i=0;i<s.length;i++){const o=s[i],l=a[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(a[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(Rn(e),a)}else{const a=Rn(e);if(a!==null&&n)return{...e};const s=Object.create(a);return Object.assign(s,e)}}function bc(e,t=!1){return Ti(e)||dn(e)||!mr(e)||(Ci(e)>1&&(e.set=e.add=e.clear=e.delete=Cw),Object.freeze(e),t&&Object.entries(e).forEach(([n,a])=>bc(a,!0))),e}function Cw(){Wt(2)}function Ti(e){return Object.isFrozen(e)}var Ew={};function un(e){const t=Ew[e];return t||Wt(0,e),t}var xa;function Op(){return xa}function Ow(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ju(e,t){t&&(un("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function al(e){sl(e),e.drafts_.forEach(Tw),e.drafts_=null}function sl(e){e===xa&&(xa=e.parent_)}function wu(e){return xa=Ow(xa,e)}function Tw(e){const t=e[St];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Nu(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[St].modified_&&(al(t),Wt(4)),mr(e)&&(e=Ps(t,e),t.parent_||Cs(t,e)),t.patches_&&un("Patches").generateReplacementPatches_(n[St].base_,e,t.patches_,t.inversePatches_)):e=Ps(t,n,[]),al(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Pp?e:void 0}function Ps(e,t,n){if(Ti(t))return t;const a=t[St];if(!a)return As(t,(s,i)=>Su(e,a,t,s,i,n)),t;if(a.scope_!==e)return t;if(!a.modified_)return Cs(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let i=s,o=!1;a.type_===3&&(i=new Set(s),s.clear(),o=!0),As(i,(l,c)=>Su(e,a,s,l,c,n,o)),Cs(e,s,!1),n&&e.patches_&&un("Patches").generatePatches_(a,n,e.patches_,e.inversePatches_)}return a.copy_}function Su(e,t,n,a,s,i,o){if(dn(s)){const l=i&&t&&t.type_!==3&&!rl(t.assigned_,a)?i.concat(a):void 0,c=Ps(e,s,l);if(Ep(n,a,c),dn(c))e.canAutoFreeze_=!1;else return}else o&&n.add(s);if(mr(s)&&!Ti(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Ps(e,s),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,a)&&Cs(e,s)}}function Cs(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&bc(t,n)}function Dw(e,t){const n=Array.isArray(e),a={type_:n?1:0,scope_:t?t.scope_:Op(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=a,i=yc;n&&(s=[a],i=ba);const{revoke:o,proxy:l}=Proxy.revocable(s,i);return a.draft_=l,a.revoke_=o,l}var yc={get(e,t){if(t===St)return e;const n=Kr(e);if(!rl(n,t))return Mw(e,n,t);const a=n[t];return e.finalized_||!mr(a)?a:a===yo(e.base_,t)?(vo(e),e.copy_[t]=ol(a,e)):a},has(e,t){return t in Kr(e)},ownKeys(e){return Reflect.ownKeys(Kr(e))},set(e,t,n){const a=Tp(Kr(e),t);if(a!=null&&a.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const s=yo(Kr(e),t),i=s==null?void 0:s[St];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Pw(n,s)&&(n!==void 0||rl(e.base_,t)))return!0;vo(e),il(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return yo(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,vo(e),il(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Kr(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:n[t]}},defineProperty(){Wt(11)},getPrototypeOf(e){return Rn(e.base_)},setPrototypeOf(){Wt(12)}},ba={};As(yc,(e,t)=>{ba[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ba.deleteProperty=function(e,t){return ba.set.call(this,e,t,void 0)};ba.set=function(e,t,n){return yc.set.call(this,e[0],t,n,e[0])};function yo(e,t){const n=e[St];return(n?Kr(n):e)[t]}function Mw(e,t,n){var s;const a=Tp(t,n);return a?"value"in a?a.value:(s=a.get)==null?void 0:s.call(e.draft_):void 0}function Tp(e,t){if(!(t in e))return;let n=Rn(e);for(;n;){const a=Object.getOwnPropertyDescriptor(n,t);if(a)return a;n=Rn(n)}}function il(e){e.modified_||(e.modified_=!0,e.parent_&&il(e.parent_))}function vo(e){e.copy_||(e.copy_=nl(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Iw=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,a)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const o=this;return function(c=i,...u){return o.produce(c,d=>n.call(this,d,...u))}}typeof n!="function"&&Wt(6),a!==void 0&&typeof a!="function"&&Wt(7);let s;if(mr(t)){const i=wu(this),o=ol(t,void 0);let l=!0;try{s=n(o),l=!1}finally{l?al(i):sl(i)}return ju(i,a),Nu(s,i)}else if(!t||typeof t!="object"){if(s=n(t),s===void 0&&(s=t),s===Pp&&(s=void 0),this.autoFreeze_&&bc(s,!0),a){const i=[],o=[];un("Patches").generateReplacementPatches_(t,s,i,o),a(i,o)}return s}else Wt(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let a,s;return[this.produce(t,n,(o,l)=>{a=o,s=l}),a,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){mr(e)||Wt(8),dn(e)&&(e=dr(e));const t=wu(this),n=ol(e,void 0);return n[St].isManual_=!0,sl(t),n}finishDraft(e,t){const n=e&&e[St];(!n||!n.isManual_)&&Wt(9);const{scope_:a}=n;return ju(a,t),Nu(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const s=t[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(t=t.slice(n+1));const a=un("Patches").applyPatches_;return dn(e)?a(e,t):this.produce(e,s=>a(s,t))}};function ol(e,t){const n=Ei(e)?un("MapSet").proxyMap_(e,t):Oi(e)?un("MapSet").proxySet_(e,t):Dw(e,t);return(t?t.scope_:Op()).drafts_.push(n),n}function dr(e){return dn(e)||Wt(10,e),Dp(e)}function Dp(e){if(!mr(e)||Ti(e))return e;const t=e[St];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=nl(e,t.scope_.immer_.useStrictShallowCopy_)}else n=nl(e,!0);return As(n,(a,s)=>{Ep(n,a,Dp(s))}),t&&(t.finalized_=!1),n}var _t=new Iw,Mp=_t.produce;_t.produceWithPatches.bind(_t);_t.setAutoFreeze.bind(_t);_t.setUseStrictShallowCopy.bind(_t);_t.applyPatches.bind(_t);_t.createDraft.bind(_t);_t.finishDraft.bind(_t);function Ip(e){return({dispatch:n,getState:a})=>s=>i=>typeof i=="function"?i(n,a,e):s(i)}var Rw=Ip(),Lw=Ip,$w=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ks:ks.apply(null,arguments)};function Dt(e,t){function n(...a){if(t){let s=t(...a);if(!s)throw new Error(wt(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:a[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=a=>Ap(a)&&a.type===e,n}var Rp=class da extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,da.prototype)}static get[Symbol.species](){return da}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new da(...t[0].concat(this)):new da(...t.concat(this))}};function _u(e){return mr(e)?Mp(e,()=>{}):e}function Ja(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function Fw(e){return typeof e=="boolean"}var Bw=()=>function(t){const{thunk:n=!0,immutableCheck:a=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let o=new Rp;return n&&(Fw(n)?o.push(Rw):o.push(Lw(n.extraArgument))),o},qw="RTK_autoBatch",ku=e=>t=>{setTimeout(t,e)},zw=(e={type:"raf"})=>t=>(...n)=>{const a=t(...n);let s=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:ku(10):e.type==="callback"?e.queueNotification:ku(e.timeout),u=()=>{o=!1,i&&(i=!1,l.forEach(d=>d()))};return Object.assign({},a,{subscribe(d){const m=()=>s&&d(),h=a.subscribe(m);return l.add(d),()=>{h(),l.delete(d)}},dispatch(d){var m;try{return s=!((m=d==null?void 0:d.meta)!=null&&m[qw]),i=!s,i&&(o||(o=!0,c(u))),a.dispatch(d)}finally{s=!0}}})},Uw=e=>function(n){const{autoBatch:a=!0}=n??{};let s=new Rp(e);return a&&s.push(zw(typeof a=="object"?a:void 0)),s};function Ww(e){const t=Bw(),{reducer:n=void 0,middleware:a,devTools:s=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(xc(n))l=kp(n);else throw new Error(wt(1));let c;typeof a=="function"?c=a(t):c=t();let u=ks;s&&(u=$w({trace:!1,...typeof s=="object"&&s}));const d=kw(...c),m=Uw(d);let h=typeof o=="function"?o(m):m();const f=u(...h);return _p(l,i,f)}function Lp(e){const t={},n=[];let a;const s={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(wt(28));if(l in t)throw new Error(wt(29));return t[l]=o,s},addMatcher(i,o){return n.push({matcher:i,reducer:o}),s},addDefaultCase(i){return a=i,s}};return e(s),[t,n,a]}function Hw(e){return typeof e=="function"}function Kw(e,t){let[n,a,s]=Lp(t),i;if(Hw(e))i=()=>_u(e());else{const l=_u(e);i=()=>l}function o(l=i(),c){let u=[n[c.type],...a.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[s]),u.reduce((d,m)=>{if(m)if(dn(d)){const f=m(d,c);return f===void 0?d:f}else{if(mr(d))return Mp(d,h=>m(h,c));{const h=m(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},l)}return o.getInitialState=i,o}var Gw="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Vw=(e=21)=>{let t="",n=e;for(;n--;)t+=Gw[Math.random()*64|0];return t},Yw=Symbol.for("rtk-slice-createasyncthunk");function Xw(e,t){return`${e}/${t}`}function Jw({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Yw];return function(s){const{name:i,reducerPath:o=i}=s;if(!i)throw new Error(wt(11));const l=(typeof s.reducers=="function"?s.reducers(Qw()):s.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(S,b){const v=typeof S=="string"?S:S.type;if(!v)throw new Error(wt(12));if(v in u.sliceCaseReducersByType)throw new Error(wt(13));return u.sliceCaseReducersByType[v]=b,d},addMatcher(S,b){return u.sliceMatchers.push({matcher:S,reducer:b}),d},exposeAction(S,b){return u.actionCreators[S]=b,d},exposeCaseReducer(S,b){return u.sliceCaseReducersByName[S]=b,d}};c.forEach(S=>{const b=l[S],v={reducerName:S,type:Xw(i,S),createNotation:typeof s.reducers=="function"};tN(b)?nN(v,b,d,t):eN(v,b,d)});function m(){const[S={},b=[],v=void 0]=typeof s.extraReducers=="function"?Lp(s.extraReducers):[s.extraReducers],_={...S,...u.sliceCaseReducersByType};return Kw(s.initialState,P=>{for(let O in _)P.addCase(O,_[O]);for(let O of u.sliceMatchers)P.addMatcher(O.matcher,O.reducer);for(let O of b)P.addMatcher(O.matcher,O.reducer);v&&P.addDefaultCase(v)})}const h=S=>S,f=new Map,x=new WeakMap;let g;function w(S,b){return g||(g=m()),g(S,b)}function j(){return g||(g=m()),g.getInitialState()}function y(S,b=!1){function v(P){let O=P[S];return typeof O>"u"&&b&&(O=Ja(x,v,j)),O}function _(P=h){const O=Ja(f,b,()=>new WeakMap);return Ja(O,P,()=>{const D={};for(const[A,T]of Object.entries(s.selectors??{}))D[A]=Zw(T,P,()=>Ja(x,P,j),b);return D})}return{reducerPath:S,getSelectors:_,get selectors(){return _(v)},selectSlice:v}}const N={name:i,reducer:w,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:j,...y(o),injectInto(S,{reducerPath:b,...v}={}){const _=b??o;return S.inject({reducerPath:_,reducer:w},v),{...N,...y(_,!0)}}};return N}}function Zw(e,t,n,a){function s(i,...o){let l=t(i);return typeof l>"u"&&a&&(l=n()),e(l,...o)}return s.unwrapped=e,s}var At=Jw();function Qw(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function eN({type:e,reducerName:t,createNotation:n},a,s){let i,o;if("reducer"in a){if(n&&!rN(a))throw new Error(wt(17));i=a.reducer,o=a.prepare}else i=a;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?Dt(e,o):Dt(e))}function tN(e){return e._reducerDefinitionType==="asyncThunk"}function rN(e){return e._reducerDefinitionType==="reducerWithPrepare"}function nN({type:e,reducerName:t},n,a,s){if(!s)throw new Error(wt(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=n,m=s(e,i,d);a.exposeAction(t,m),o&&a.addCase(m.fulfilled,o),l&&a.addCase(m.pending,l),c&&a.addCase(m.rejected,c),u&&a.addMatcher(m.settled,u),a.exposeCaseReducer(t,{fulfilled:o||Za,pending:l||Za,rejected:c||Za,settled:u||Za})}function Za(){}var aN="task",$p="listener",Fp="completed",vc="cancelled",sN=`task-${vc}`,iN=`task-${Fp}`,ll=`${$p}-${vc}`,oN=`${$p}-${Fp}`,Di=class{constructor(e){Qn(this,"name","TaskAbortError");Qn(this,"message");this.code=e,this.message=`${aN} ${vc} (reason: ${e})`}},jc=(e,t)=>{if(typeof e!="function")throw new TypeError(wt(32))},Es=()=>{},Bp=(e,t=Es)=>(e.catch(t),e),qp=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),nn=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},an=e=>{if(e.aborted){const{reason:t}=e;throw new Di(t)}};function zp(e,t){let n=Es;return new Promise((a,s)=>{const i=()=>s(new Di(e.reason));if(e.aborted){i();return}n=qp(e,i),t.finally(()=>n()).then(a,s)}).finally(()=>{n=Es})}var lN=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof Di?"cancelled":"rejected",error:n}}finally{t==null||t()}},Os=e=>t=>Bp(zp(e,t).then(n=>(an(e),n))),Up=e=>{const t=Os(e);return n=>t(new Promise(a=>setTimeout(a,n)))},{assign:Tn}=Object,Au={},Mi="listenerMiddleware",cN=(e,t)=>{const n=a=>qp(e,()=>nn(a,e.reason));return(a,s)=>{jc(a);const i=new AbortController;n(i);const o=lN(async()=>{an(e),an(i.signal);const l=await a({pause:Os(i.signal),delay:Up(i.signal),signal:i.signal});return an(i.signal),l},()=>nn(i,iN));return s!=null&&s.autoJoin&&t.push(o.catch(Es)),{result:Os(e)(o),cancel(){nn(i,sN)}}}},dN=(e,t)=>{const n=async(a,s)=>{an(t);let i=()=>{};const l=[new Promise((c,u)=>{let d=e({predicate:a,effect:(m,h)=>{h.unsubscribe(),c([m,h.getState(),h.getOriginalState()])}});i=()=>{d(),u()}})];s!=null&&l.push(new Promise(c=>setTimeout(c,s,null)));try{const c=await zp(t,Promise.race(l));return an(t),c}finally{i()}};return(a,s)=>Bp(n(a,s))},Wp=e=>{let{type:t,actionCreator:n,matcher:a,predicate:s,effect:i}=e;if(t)s=Dt(t).match;else if(n)t=n.type,s=n.match;else if(a)s=a;else if(!s)throw new Error(wt(21));return jc(i),{predicate:s,type:t,effect:i}},Hp=Tn(e=>{const{type:t,predicate:n,effect:a}=Wp(e);return{id:Vw(),effect:a,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(wt(22))}}},{withTypes:()=>Hp}),Pu=(e,t)=>{const{type:n,effect:a,predicate:s}=Wp(t);return Array.from(e.values()).find(i=>(typeof n=="string"?i.type===n:i.predicate===s)&&i.effect===a)},cl=e=>{e.pending.forEach(t=>{nn(t,ll)})},uN=e=>()=>{e.forEach(cl),e.clear()},Cu=(e,t,n)=>{try{e(t,n)}catch(a){setTimeout(()=>{throw a},0)}},Kp=Tn(Dt(`${Mi}/add`),{withTypes:()=>Kp}),mN=Dt(`${Mi}/removeAll`),Gp=Tn(Dt(`${Mi}/remove`),{withTypes:()=>Gp}),hN=(...e)=>{console.error(`${Mi}/error`,...e)},Ca=(e={})=>{const t=new Map,{extra:n,onError:a=hN}=e;jc(a);const s=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),m=>{d.unsubscribe(),m!=null&&m.cancelActive&&cl(d)}),i=d=>{const m=Pu(t,d)??Hp(d);return s(m)};Tn(i,{withTypes:()=>i});const o=d=>{const m=Pu(t,d);return m&&(m.unsubscribe(),d.cancelActive&&cl(m)),!!m};Tn(o,{withTypes:()=>o});const l=async(d,m,h,f)=>{const x=new AbortController,g=dN(i,x.signal),w=[];try{d.pending.add(x),await Promise.resolve(d.effect(m,Tn({},h,{getOriginalState:f,condition:(j,y)=>g(j,y).then(Boolean),take:g,delay:Up(x.signal),pause:Os(x.signal),extra:n,signal:x.signal,fork:cN(x.signal,w),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((j,y,N)=>{j!==x&&(nn(j,ll),N.delete(j))})},cancel:()=>{nn(x,ll),d.pending.delete(x)},throwIfCancelled:()=>{an(x.signal)}})))}catch(j){j instanceof Di||Cu(a,j,{raisedBy:"effect"})}finally{await Promise.all(w),nn(x,oN),d.pending.delete(x)}},c=uN(t);return{middleware:d=>m=>h=>{if(!Ap(h))return m(h);if(Kp.match(h))return i(h.payload);if(mN.match(h)){c();return}if(Gp.match(h))return o(h.payload);let f=d.getState();const x=()=>{if(f===Au)throw new Error(wt(23));return f};let g;try{if(g=m(h),t.size>0){const w=d.getState(),j=Array.from(t.values());for(const y of j){let N=!1;try{N=y.predicate(h,w,f)}catch(S){N=!1,Cu(a,S,{raisedBy:"predicate"})}N&&l(y,h,d,x)}}}finally{f=Au}return g},startListening:i,stopListening:o,clearListeners:c}};function wt(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var fN={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Vp=At({name:"chartLayout",initialState:fN,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:pN,setLayout:gN,setChartSize:xN,setScale:bN}=Vp.actions,yN=Vp.reducer;function Eu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Ou(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Eu(Object(n),!0).forEach(function(a){vN(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eu(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function vN(e,t,n){return(t=jN(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jN(e){var t=wN(e,"string");return typeof t=="symbol"?t:t+""}function wN(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ts=Math.PI/180,NN=e=>e*180/Math.PI,Je=(e,t,n,a)=>({x:e+Math.cos(-Ts*a)*n,y:t+Math.sin(-Ts*a)*n}),SN=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(n-(a.top||0)-(a.bottom||0)))/2},_N=(e,t)=>{var{x:n,y:a}=e,{x:s,y:i}=t;return Math.sqrt((n-s)**2+(a-i)**2)},kN=(e,t)=>{var{x:n,y:a}=e,{cx:s,cy:i}=t,o=_N({x:n,y:a},{x:s,y:i});if(o<=0)return{radius:o,angle:0};var l=(n-s)/o,c=Math.acos(l);return a>i&&(c=2*Math.PI-c),{radius:o,angle:NN(c),angleInRadian:c}},AN=e=>{var{startAngle:t,endAngle:n}=e,a=Math.floor(t/360),s=Math.floor(n/360),i=Math.min(a,s);return{startAngle:t-i*360,endAngle:n-i*360}},PN=(e,t)=>{var{startAngle:n,endAngle:a}=t,s=Math.floor(n/360),i=Math.floor(a/360),o=Math.min(s,i);return e+o*360},CN=(e,t)=>{var{x:n,y:a}=e,{radius:s,angle:i}=kN({x:n,y:a},t),{innerRadius:o,outerRadius:l}=t;if(s<o||s>l||s===0)return null;var{startAngle:c,endAngle:u}=AN(t),d=i,m;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;m=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;m=d>=u&&d<=c}return m?Ou(Ou({},t),{},{radius:s,angle:PN(d,t)}):null};function Yp(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function Tu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Tu(Object(n),!0).forEach(function(a){EN(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tu(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function EN(e,t,n){return(t=ON(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ON(e){var t=TN(e,"string");return typeof t=="symbol"?t:t+""}function TN(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function He(e,t,n){return Pe(e)||Pe(t)?n:Zt(t)?cn(e,t,n):typeof t=="function"?t(e):n}var DN=(e,t,n,a,s)=>{var i,o=-1,l=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(l<=1||e==null)return 0;if(a==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var c=0;c<l;c++){var u=c>0?n[c-1].coordinate:n[l-1].coordinate,d=n[c].coordinate,m=c>=l-1?n[0].coordinate:n[c+1].coordinate,h=void 0;if(mt(d-u)!==mt(m-d)){var f=[];if(mt(m-d)===mt(s[1]-s[0])){h=m;var x=d+s[1]-s[0];f[0]=Math.min(x,(x+u)/2),f[1]=Math.max(x,(x+u)/2)}else{h=u;var g=m+s[1]-s[0];f[0]=Math.min(d,(g+d)/2),f[1]=Math.max(d,(g+d)/2)}var w=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>w[0]&&e<=w[1]||e>=f[0]&&e<=f[1]){({index:o}=n[c]);break}}else{var j=Math.min(u,m),y=Math.max(u,m);if(e>(j+d)/2&&e<=(y+d)/2){({index:o}=n[c]);break}}}else if(t){for(var N=0;N<l;N++)if(N===0&&e<=(t[N].coordinate+t[N+1].coordinate)/2||N>0&&N<l-1&&e>(t[N].coordinate+t[N-1].coordinate)/2&&e<=(t[N].coordinate+t[N+1].coordinate)/2||N===l-1&&e>(t[N].coordinate+t[N-1].coordinate)/2){({index:o}=t[N]);break}}return o},MN=(e,t,n)=>{if(t&&n){var{width:a,height:s}=n,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&te(e[i]))return Ot(Ot({},e),{},{[i]:e[i]+(a||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&te(e[o]))return Ot(Ot({},e),{},{[o]:e[o]+(s||0)})}return e},Dr=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Xp=(e,t,n,a)=>{if(a)return e.map(l=>l.coordinate);var s,i,o=e.map(l=>(l.coordinate===t&&(s=!0),l.coordinate===n&&(i=!0),l.coordinate));return s||o.push(t),i||o.push(n),o},Jp=(e,t,n)=>{if(!e)return null;var{duplicateDomain:a,type:s,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:m,niceTicks:h,axisType:f}=e;if(!o)return null;var x=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,g=s==="category"&&o.bandwidth?o.bandwidth()/x:0;if(g=f==="angleAxis"&&i&&i.length>=2?mt(i[0]-i[1])*2*g:g,m||h){var w=(m||h||[]).map((j,y)=>{var N=a?a.indexOf(j):j;return{coordinate:o(N)+g,value:j,offset:g,index:y}});return w.filter(j=>!Nt(j.coordinate))}return c&&u?u.map((j,y)=>({coordinate:o(j)+g,value:j,index:y,offset:g})):o.ticks&&d!=null?o.ticks(d).map((j,y)=>({coordinate:o(j)+g,value:j,offset:g,index:y})):o.domain().map((j,y)=>({coordinate:o(j)+g,value:a?a[j]:j,index:y,offset:g}))},Du=1e-4,IN=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,a=e.range(),s=Math.min(a[0],a[1])-Du,i=Math.max(a[0],a[1])+Du,o=e(t[0]),l=e(t[n-1]);(o<s||o>i||l<s||l>i)&&e.domain([t[0],t[n-1]])}},RN=(e,t)=>{if(!t||t.length!==2||!te(t[0])||!te(t[1]))return e;var n=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!te(e[0])||e[0]<n)&&(s[0]=n),(!te(e[1])||e[1]>a)&&(s[1]=a),s[0]>a&&(s[0]=a),s[1]<n&&(s[1]=n),s},LN=e=>{var t=e.length;if(!(t<=0))for(var n=0,a=e[0].length;n<a;++n)for(var s=0,i=0,o=0;o<t;++o){var l=Nt(e[o][n][1])?e[o][n][0]:e[o][n][1];l>=0?(e[o][n][0]=s,e[o][n][1]=s+l,s=e[o][n][1]):(e[o][n][0]=i,e[o][n][1]=i+l,i=e[o][n][1])}},$N=e=>{var t=e.length;if(!(t<=0))for(var n=0,a=e[0].length;n<a;++n)for(var s=0,i=0;i<t;++i){var o=Nt(e[i][n][1])?e[i][n][0]:e[i][n][1];o>=0?(e[i][n][0]=s,e[i][n][1]=s+o,s=e[i][n][1]):(e[i][n][0]=0,e[i][n][1]=0)}},FN={sign:LN,expand:_j,none:Mn,silhouette:kj,wiggle:Aj,positive:$N},BN=(e,t,n)=>{var a=FN[n],s=Sj().keys(t).value((i,o)=>+He(i,o,0)).order(el).offset(a);return s(e)};function qN(e){return e==null?void 0:String(e)}function Mu(e){var{axis:t,ticks:n,bandSize:a,entry:s,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Pe(s[t.dataKey])){var l=Ef(n,"value",s[t.dataKey]);if(l)return l.coordinate+a/2}return n[i]?n[i].coordinate+a/2:null}var c=He(s,Pe(o)?t.dataKey:o);return Pe(c)?null:t.scale(c)}var Iu=e=>{var{axis:t,ticks:n,offset:a,bandSize:s,entry:i,index:o}=e;if(t.type==="category")return n[o]?n[o].coordinate+a:null;var l=He(i,t.dataKey,t.scale.domain()[o]);return Pe(l)?null:t.scale(l)-s/2+a},zN=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var a=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]);return a<=0&&s>=0?0:s<0?s:a}return n[0]},UN=e=>{var t=e.flat(2).filter(te);return[Math.min(...t),Math.max(...t)]},WN=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],HN=(e,t,n)=>{if(e!=null)return WN(Object.keys(e).reduce((a,s)=>{var i=e[s],{stackedData:o}=i,l=o.reduce((c,u)=>{var d=Yp(u,t,n),m=UN(d);return[Math.min(c[0],m[0]),Math.max(c[1],m[1])]},[1/0,-1/0]);return[Math.min(l[0],a[0]),Math.max(l[1],a[1])]},[1/0,-1/0]))},Ru=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Lu=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ya=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&t&&t.length>=2){for(var s=Pi(t,d=>d.coordinate),i=1/0,o=1,l=s.length;o<l;o++){var c=s[o],u=s[o-1];i=Math.min((c.coordinate||0)-(u.coordinate||0),i)}return i===1/0?0:i}return n?void 0:0};function $u(e){var{tooltipEntrySettings:t,dataKey:n,payload:a,value:s,name:i}=e;return Ot(Ot({},t),{},{dataKey:n,payload:a,value:s,name:i})}function Ii(e,t){if(e)return String(e);if(typeof t=="string")return t}function KN(e,t,n,a,s){if(n==="horizontal"||n==="vertical"){var i=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return i?{x:e,y:t}:null}return a?CN({x:e,y:t},a):null}var GN=(e,t,n,a)=>{var s=t.find(u=>u&&u.index===n);if(s){if(e==="horizontal")return{x:s.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:s.coordinate};if(e==="centric"){var i=s.coordinate,{radius:o}=a;return Ot(Ot(Ot({},a),Je(a.cx,a.cy,o,i)),{},{angle:i,radius:o})}var l=s.coordinate,{angle:c}=a;return Ot(Ot(Ot({},a),Je(a.cx,a.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},VN=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,xr=e=>e.layout.width,br=e=>e.layout.height,YN=e=>e.layout.scale,Zp=e=>e.layout.margin,wc=$(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Nc=$(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),XN="data-recharts-item-index",JN="data-recharts-item-data-key",Ri=60;function Fu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function wr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fu(Object(n),!0).forEach(function(a){ZN(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fu(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function ZN(e,t,n){return(t=QN(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QN(e){var t=e1(e,"string");return typeof t=="symbol"?t:t+""}function e1(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var t1=e=>e.brush.height,Ge=$([xr,br,Zp,t1,wc,Nc,Sp,vw],(e,t,n,a,s,i,o,l)=>{var c=i.reduce((x,g)=>{var{orientation:w}=g;if(!g.mirror&&!g.hide){var j=typeof g.width=="number"?g.width:Ri;return wr(wr({},x),{},{[w]:x[w]+j})}return x},{left:n.left||0,right:n.right||0}),u=s.reduce((x,g)=>{var{orientation:w}=g;return!g.mirror&&!g.hide?wr(wr({},x),{},{[w]:cn(x,"".concat(w))+g.height}):x},{top:n.top||0,bottom:n.bottom||0}),d=wr(wr({},u),c),m=d.bottom;d.bottom+=a,d=MN(d,o,l);var h=e-d.left-d.right,f=t-d.top-d.bottom;return wr(wr({brushBottom:m},d),{},{width:Math.max(h,0),height:Math.max(f,0)})}),r1=$(Ge,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Qp=$(xr,br,(e,t)=>({x:0,y:0,width:e,height:t})),n1=p.createContext(null),ft=()=>p.useContext(n1)!=null,Li=e=>e.brush,$i=$([Li,Ge,Zp],(e,t,n)=>({height:e.height,x:te(e.x)?e.x:t.left,y:te(e.y)?e.y:t.top+t.height+t.brushBottom-((n==null?void 0:n.bottom)||0),width:te(e.width)?e.width:t.width})),Sc=()=>{var e,t=ft(),n=ne(r1),a=ne($i),s=(e=ne(Li))===null||e===void 0?void 0:e.padding;return!t||!a||!s?n:{width:a.width-s.left-s.right,height:a.height-s.top-s.bottom,x:s.left,y:s.top}},a1={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},eg=()=>{var e;return(e=ne(Ge))!==null&&e!==void 0?e:a1},tg=()=>ne(xr),rg=()=>ne(br),he=e=>e.layout.layoutType,Fi=()=>ne(he),s1={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},ng=At({name:"legend",initialState:s1,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=dr(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:BM,setLegendSettings:qM,addLegendPayload:i1,removeLegendPayload:o1}=ng.actions,l1=ng.reducer;function dl(){return dl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},dl.apply(null,arguments)}function Bu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function jo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Bu(Object(n),!0).forEach(function(a){c1(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bu(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function c1(e,t,n){return(t=d1(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d1(e){var t=u1(e,"string");return typeof t=="symbol"?t:t+""}function u1(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function m1(e){return Array.isArray(e)&&Zt(e[0])&&Zt(e[1])?e.join(" ~ "):e}var h1=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:a={},labelStyle:s={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:m,accessibilityLayer:h=!1}=e,f=()=>{if(i&&i.length){var b={padding:0,margin:0},v=(l?Pi(i,l):i).map((_,P)=>{if(_.type==="none")return null;var O=_.formatter||o||m1,{value:D,name:A}=_,T=D,L=A;if(O){var C=O(D,A,_,P,i);if(Array.isArray(C))[T,L]=C;else if(C!=null)T=C;else return null}var F=jo({display:"block",paddingTop:4,paddingBottom:4,color:_.color||"#000"},a);return p.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(P),style:F},Zt(L)?p.createElement("span",{className:"recharts-tooltip-item-name"},L):null,Zt(L)?p.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,p.createElement("span",{className:"recharts-tooltip-item-value"},T),p.createElement("span",{className:"recharts-tooltip-item-unit"},_.unit||""))});return p.createElement("ul",{className:"recharts-tooltip-item-list",style:b},v)}return null},x=jo({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),g=jo({margin:0},s),w=!Pe(d),j=w?d:"",y=be("recharts-default-tooltip",c),N=be("recharts-tooltip-label",u);w&&m&&i!==void 0&&i!==null&&(j=m(d,i));var S=h?{role:"status","aria-live":"assertive"}:{};return p.createElement("div",dl({className:y,style:x},S),p.createElement("p",{className:N,style:g},p.isValidElement(j)?j:"".concat(j)),f())},ta="recharts-tooltip-wrapper",f1={visibility:"hidden"};function p1(e){var{coordinate:t,translateX:n,translateY:a}=e;return be(ta,{["".concat(ta,"-right")]:te(n)&&t&&te(t.x)&&n>=t.x,["".concat(ta,"-left")]:te(n)&&t&&te(t.x)&&n<t.x,["".concat(ta,"-bottom")]:te(a)&&t&&te(t.y)&&a>=t.y,["".concat(ta,"-top")]:te(a)&&t&&te(t.y)&&a<t.y})}function qu(e){var{allowEscapeViewBox:t,coordinate:n,key:a,offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=e;if(i&&te(i[a]))return i[a];var d=n[a]-l-(s>0?s:0),m=n[a]+s;if(t[a])return o[a]?d:m;var h=c[a];if(h==null)return 0;if(o[a]){var f=d,x=h;return f<x?Math.max(m,h):Math.max(d,h)}if(u==null)return 0;var g=m+l,w=h+u;return g>w?Math.max(d,h):Math.max(m,h)}function g1(e){var{translateX:t,translateY:n,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function x1(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:a,position:s,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,u,d,m;return o.height>0&&o.width>0&&n?(d=qu({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),m=qu({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=g1({translateX:d,translateY:m,useTranslate3d:l})):u=f1,{cssProperties:u,cssClasses:p1({translateX:d,translateY:m,coordinate:n})}}function zu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Qa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zu(Object(n),!0).forEach(function(a){ul(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zu(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function ul(e,t,n){return(t=b1(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b1(e){var t=y1(e,"string");return typeof t=="symbol"?t:t+""}function y1(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class v1 extends p.PureComponent{constructor(){super(...arguments),ul(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),ul(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,a,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&n!==void 0?n:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:a,animationEasing:s,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:m,useTranslate3d:h,viewBox:f,wrapperStyle:x,lastBoundingBox:g,innerRef:w,hasPortalFromProps:j}=this.props,{cssClasses:y,cssProperties:N}=x1({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:m,tooltipBox:{height:g.height,width:g.width},useTranslate3d:h,viewBox:f}),S=j?{}:Qa(Qa({transition:c&&t?"transform ".concat(a,"ms ").concat(s):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),b=Qa(Qa({},S),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},x);return p.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:y,style:b,ref:w},i)}}var j1=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),zn={isSsr:j1()},ag=()=>ne(e=>e.rootProps.accessibilityLayer);function kt(e){return Number.isFinite(e)}function Ds(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function ml(){return ml=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ml.apply(null,arguments)}function Uu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Wu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Uu(Object(n),!0).forEach(function(a){w1(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uu(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function w1(e,t,n){return(t=N1(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N1(e){var t=S1(e,"string");return typeof t=="symbol"?t:t+""}function S1(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hu={curveBasisClosed:hj,curveBasisOpen:fj,curveBasis:mj,curveBumpX:Zv,curveBumpY:Qv,curveLinearClosed:pj,curveLinear:ji,curveMonotoneX:gj,curveMonotoneY:xj,curveNatural:bj,curveStep:yj,curveStepAfter:jj,curveStepBefore:vj},es=e=>kt(e.x)&&kt(e.y),ra=e=>e.x,na=e=>e.y,_1=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Pa(e));return(n==="curveMonotone"||n==="curveBump")&&t?Hu["".concat(n).concat(t==="vertical"?"Y":"X")]:Hu[n]||ji},k1=e=>{var{type:t="linear",points:n=[],baseLine:a,layout:s,connectNulls:i=!1}=e,o=_1(t,s),l=i?n.filter(es):n,c;if(Array.isArray(a)){var u=i?a.filter(m=>es(m)):a,d=l.map((m,h)=>Wu(Wu({},m),{},{base:u[h]}));return s==="vertical"?c=Va().y(na).x1(ra).x0(m=>m.base.x):c=Va().x(ra).y1(na).y0(m=>m.base.y),c.defined(es).curve(o),c(d)}return s==="vertical"&&te(a)?c=Va().y(na).x1(ra).x0(a):te(a)?c=Va().x(ra).y1(na).y0(a):c=Bf().x(ra).y(na),c.defined(es).curve(o),c(l)},sg=e=>{var{className:t,points:n,path:a,pathRef:s}=e;if((!n||!n.length)&&!a)return null;var i=n&&n.length?k1(e):a;return p.createElement("path",ml({},gn(e),tc(e),{className:be("recharts-curve",t),d:i===null?void 0:i,ref:s}))},A1=["x","y","top","left","width","height","className"];function hl(){return hl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},hl.apply(null,arguments)}function Ku(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function P1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ku(Object(n),!0).forEach(function(a){C1(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ku(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function C1(e,t,n){return(t=E1(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E1(e){var t=O1(e,"string");return typeof t=="symbol"?t:t+""}function O1(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function T1(e,t){if(e==null)return{};var n,a,s=D1(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function D1(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var M1=(e,t,n,a,s,i)=>"M".concat(e,",").concat(s,"v").concat(a,"M").concat(i,",").concat(t,"h").concat(n),I1=e=>{var{x:t=0,y:n=0,top:a=0,left:s=0,width:i=0,height:o=0,className:l}=e,c=T1(e,A1),u=P1({x:t,y:n,top:a,left:s,width:i,height:o},c);return!te(t)||!te(n)||!te(i)||!te(o)||!te(a)||!te(s)?null:p.createElement("path",hl({},Me(u,!0),{className:be("recharts-cross",l),d:M1(t,n,i,o,a,s)}))};function R1(e,t,n,a){var s=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-s,width:e==="horizontal"?a:n.width-1,height:e==="horizontal"?n.height-1:a}}function Gu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function L1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gu(Object(n),!0).forEach(function(a){$1(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gu(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function $1(e,t,n){return(t=F1(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F1(e){var t=B1(e,"string");return typeof t=="symbol"?t:t+""}function B1(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function er(e,t){var n=L1({},e),a=t,s=Object.keys(t),i=s.reduce((o,l)=>(o[l]===void 0&&a[l]!==void 0&&(o[l]=a[l]),o),n);return i}var ig={},og={},lg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(!n||typeof n!="object")return!1;const a=Object.getPrototypeOf(n);return a===null||a===Object.prototype||Object.getPrototypeOf(a)===null?Object.prototype.toString.call(n)==="[object Object]":!1}e.isPlainObject=t})(lg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lg,n=mc,a=_i,s=ki,i=Si;function o(u,d,m){return l(u,d,void 0,void 0,void 0,void 0,m)}function l(u,d,m,h,f,x,g){const w=g(u,d,m,h,f,x);if(w!==void 0)return w;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return c(u,d,x,g)}return c(u,d,x,g)}function c(u,d,m,h){if(Object.is(u,d))return!0;let f=a.getTag(u),x=a.getTag(d);if(f===s.argumentsTag&&(f=s.objectTag),x===s.argumentsTag&&(x=s.objectTag),f!==x)return!1;switch(f){case s.stringTag:return u.toString()===d.toString();case s.numberTag:{const j=u.valueOf(),y=d.valueOf();return i.eq(j,y)}case s.booleanTag:case s.dateTag:case s.symbolTag:return Object.is(u.valueOf(),d.valueOf());case s.regexpTag:return u.source===d.source&&u.flags===d.flags;case s.functionTag:return u===d}m=m??new Map;const g=m.get(u),w=m.get(d);if(g!=null&&w!=null)return g===d;m.set(u,d),m.set(d,u);try{switch(f){case s.mapTag:{if(u.size!==d.size)return!1;for(const[j,y]of u.entries())if(!d.has(j)||!l(y,d.get(j),j,u,d,m,h))return!1;return!0}case s.setTag:{if(u.size!==d.size)return!1;const j=Array.from(u.values()),y=Array.from(d.values());for(let N=0;N<j.length;N++){const S=j[N],b=y.findIndex(v=>l(S,v,void 0,u,d,m,h));if(b===-1)return!1;y.splice(b,1)}return!0}case s.arrayTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:case s.bigUint64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.bigInt64ArrayTag:case s.float32ArrayTag:case s.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let j=0;j<u.length;j++)if(!l(u[j],d[j],j,u,d,m,h))return!1;return!0}case s.arrayBufferTag:return u.byteLength!==d.byteLength?!1:c(new Uint8Array(u),new Uint8Array(d),m,h);case s.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:c(new Uint8Array(u),new Uint8Array(d),m,h);case s.errorTag:return u.name===d.name&&u.message===d.message;case s.objectTag:{if(!(c(u.constructor,d.constructor,m,h)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const y=[...Object.keys(u),...n.getSymbols(u)],N=[...Object.keys(d),...n.getSymbols(d)];if(y.length!==N.length)return!1;for(let S=0;S<y.length;S++){const b=y[S],v=u[b];if(!Object.hasOwn(d,b))return!1;const _=d[b];if(!l(v,_,b,u,d,m,h))return!1}return!0}default:return!1}}finally{m.delete(u),m.delete(d)}}e.isEqualWith=o})(og);var cg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t})(cg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=og,n=cg;function a(s,i){return t.isEqualWith(s,i,n.noop)}e.isEqual=a})(ig);var q1=ig.isEqual;const z1=gr(q1);var Ms=1e-4,dg=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],ug=(e,t)=>e.map((n,a)=>n*t**a).reduce((n,a)=>n+a),Vu=(e,t)=>n=>{var a=dg(e,t);return ug(a,n)},U1=(e,t)=>n=>{var a=dg(e,t),s=[...a.map((i,o)=>i*o).slice(1),0];return ug(s,n)},Yu=function(){for(var t,n,a,s,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[t,a,n,s]=[0,0,1,1];break;case"ease":[t,a,n,s]=[.25,.1,.25,1];break;case"ease-in":[t,a,n,s]=[.42,0,1,1];break;case"ease-out":[t,a,n,s]=[.42,0,.58,1];break;case"ease-in-out":[t,a,n,s]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,a,n,s]=c[1].split(")")[0].split(",").map(x=>parseFloat(x)))}}else o.length===4&&([t,a,n,s]=o);var u=Vu(t,n),d=Vu(a,s),m=U1(t,n),h=x=>x>1?1:x<0?0:x,f=x=>{for(var g=x>1?1:x,w=g,j=0;j<8;++j){var y=u(w)-g,N=m(w);if(Math.abs(y-g)<Ms||N<Ms)return d(w);w=h(w-y/N)}return d(w)};return f.isStepper=!1,f},W1=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:a=8,dt:s=17}=t,i=(o,l,c)=>{var u=-(o-l)*n,d=c*a,m=c+(u-d)*s/1e3,h=c*s/1e3+o;return Math.abs(h-l)<Ms&&Math.abs(m)<Ms?[l,0]:[h,m]};return i.isStepper=!0,i.dt=s,i},mg=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Yu(e);case"spring":return W1();default:if(e.split("(")[0]==="cubic-bezier")return Yu(e)}return typeof e=="function"?e:null};function Xu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Ju(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Xu(Object(n),!0).forEach(function(a){H1(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xu(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function H1(e,t,n){return(t=K1(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K1(e){var t=G1(e,"string");return typeof t=="symbol"?t:t+""}function G1(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var V1=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),Y1=(e,t,n)=>e.map(a=>"".concat(V1(a)," ").concat(t,"ms ").concat(n)).join(","),X1=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,a)=>n.filter(s=>a.includes(s))),va=(e,t)=>Object.keys(t).reduce((n,a)=>Ju(Ju({},n),{},{[a]:e(a,t[a])}),{});function Zu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Zu(Object(n),!0).forEach(function(a){J1(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zu(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function J1(e,t,n){return(t=Z1(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z1(e){var t=Q1(e,"string");return typeof t=="symbol"?t:t+""}function Q1(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Is=(e,t,n)=>e+(t-e)*n,fl=e=>{var{from:t,to:n}=e;return t!==n},hg=(e,t,n)=>{var a=va((s,i)=>{if(fl(i)){var[o,l]=e(i.from,i.to,i.velocity);return Xe(Xe({},i),{},{from:o,velocity:l})}return i},t);return n<1?va((s,i)=>fl(i)?Xe(Xe({},i),{},{velocity:Is(i.velocity,a[s].velocity,n),from:Is(i.from,a[s].from,n)}):i,t):hg(e,a,n-1)};function e2(e,t,n,a,s,i){var o,l=a.reduce((h,f)=>Xe(Xe({},h),{},{[f]:{from:e[f],velocity:0,to:t[f]}}),{}),c=()=>va((h,f)=>f.from,l),u=()=>!Object.values(l).filter(fl).length,d=null,m=h=>{o||(o=h);var f=h-o,x=f/n.dt;l=hg(n,l,x),s(Xe(Xe(Xe({},e),t),c())),o=h,u()||(d=i.setTimeout(m))};return()=>(d=i.setTimeout(m),()=>{d()})}function t2(e,t,n,a,s,i,o){var l=null,c=s.reduce((m,h)=>Xe(Xe({},m),{},{[h]:[e[h],t[h]]}),{}),u,d=m=>{u||(u=m);var h=(m-u)/a,f=va((g,w)=>Is(...w,n(h)),c);if(i(Xe(Xe(Xe({},e),t),f)),h<1)l=o.setTimeout(d);else{var x=va((g,w)=>Is(...w,n(1)),c);i(Xe(Xe(Xe({},e),t),x))}};return()=>(l=o.setTimeout(d),()=>{l()})}const fg=(e,t,n,a,s,i)=>{var o=X1(e,t);return n.isStepper===!0?e2(e,t,n,o,s,i):t2(e,t,n,a,o,s,i)};function r2(e){var t,n=()=>null,a=!1,s=null,i=o=>{if(!a){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){s=e.setTimeout(i.bind(null,u),c);return}i(c),s=e.setTimeout(i.bind(null,u));return}typeof o=="string"&&(t=o,n(t)),typeof o=="object"&&(t=o,n(t)),typeof o=="function"&&o()}};return{stop:()=>{a=!0},start:o=>{a=!1,s&&(s(),s=null),i(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>e}}class n2{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),s=null,i=o=>{o-a>=n?t(o):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{cancelAnimationFrame(s)}}}function a2(){return r2(new n2)}var s2=p.createContext(a2);function pg(e,t){var n=p.useContext(s2);return p.useMemo(()=>t??n(e),[e,t,n])}var i2=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function pl(){return pl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},pl.apply(null,arguments)}function o2(e,t){if(e==null)return{};var n,a,s=l2(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function l2(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function Qu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Nr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Qu(Object(n),!0).forEach(function(a){Jr(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qu(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Jr(e,t,n){return(t=c2(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c2(e){var t=d2(e,"string");return typeof t=="symbol"?t:t+""}function d2(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class _c extends p.PureComponent{constructor(t,n){super(t,n),Jr(this,"mounted",!1),Jr(this,"manager",void 0),Jr(this,"stopJSAnimation",null),Jr(this,"unSubscribe",null);var{isActive:a,attributeName:s,from:i,to:o,children:l,duration:c,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!a||c<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:o});return}if(i){if(typeof l=="function"){this.state={style:i};return}this.state={style:s?{[s]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:n}=this.props;this.mounted=!0,!(!t||!n)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:n,canBegin:a,attributeName:s,shouldReAnimate:i,to:o,from:l}=this.props,{style:c}=this.state;if(a){if(!n){var u={style:s?{[s]:o}:o};this.state&&c&&(s&&c[s]!==o||!s&&c!==o)&&this.setState(u);return}if(!(z1(t.to,o)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=d||i?l:t.to;if(this.state&&c){var h={style:s?{[s]:m}:m};(s&&c[s]!==m||!s&&c!==m)&&this.setState(h)}this.runAnimation(Nr(Nr({},this.props),{},{from:m,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:n,to:a,duration:s,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c}=t,u=fg(n,a,mg(i),s,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([c,o,d,s,l])}runAnimation(t){var{begin:n,duration:a,attributeName:s,to:i,easing:o,onAnimationStart:l,onAnimationEnd:c,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof u=="function"||o==="spring"){this.runJSAnimation(t);return}var d=s?{[s]:i}:i,m=Y1(Object.keys(d),a,o);this.manager.start([l,n,Nr(Nr({},d),{},{transition:m}),a,c])}render(){var t=this.props,{children:n,begin:a,duration:s,attributeName:i,easing:o,isActive:l,from:c,to:u,canBegin:d,onAnimationEnd:m,shouldReAnimate:h,onAnimationReStart:f,animationManager:x}=t,g=o2(t,i2),w=p.Children.count(n),j=this.state.style;if(typeof n=="function")return n(j);if(!l||w===0||s<=0)return n;var y=N=>{var{style:S={},className:b}=N.props,v=p.cloneElement(N,Nr(Nr({},g),{},{style:Nr(Nr({},S),j),className:b}));return v};return w===1?y(p.Children.only(n)):p.createElement("div",null,p.Children.map(n,N=>y(N)))}}Jr(_c,"displayName","Animate");Jr(_c,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function Rs(e){var t,n=pg((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return p.createElement(_c,pl({},e,{animationManager:n}))}function Ls(){return Ls=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ls.apply(null,arguments)}var em=(e,t,n,a,s)=>{var i=Math.min(Math.abs(n)/2,Math.abs(a)/2),o=a>=0?1:-1,l=n>=0?1:-1,c=a>=0&&n>=0||a<0&&n<0?1:0,u;if(i>0&&s instanceof Array){for(var d=[0,0,0,0],m=0,h=4;m<h;m++)d[m]=s[m]>i?i:s[m];u="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),u+="L ".concat(e+n-l*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+n,",").concat(t+o*d[1])),u+="L ".concat(e+n,",").concat(t+a-o*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+n-l*d[2],",").concat(t+a)),u+="L ".concat(e+l*d[3],",").concat(t+a),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+a-o*d[3])),u+="Z"}else if(i>0&&s===+s&&s>0){var f=Math.min(i,s);u="M ".concat(e,",").concat(t+o*f,`
            A `).concat(f,",").concat(f,",0,0,").concat(c,",").concat(e+l*f,",").concat(t,`
            L `).concat(e+n-l*f,",").concat(t,`
            A `).concat(f,",").concat(f,",0,0,").concat(c,",").concat(e+n,",").concat(t+o*f,`
            L `).concat(e+n,",").concat(t+a-o*f,`
            A `).concat(f,",").concat(f,",0,0,").concat(c,",").concat(e+n-l*f,",").concat(t+a,`
            L `).concat(e+l*f,",").concat(t+a,`
            A `).concat(f,",").concat(f,",0,0,").concat(c,",").concat(e,",").concat(t+a-o*f," Z")}else u="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return u},u2={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},gg=e=>{var t=er(e,u2),n=p.useRef(null),[a,s]=p.useState(-1);p.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var j=n.current.getTotalLength();j&&s(j)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:u,className:d}=t,{animationEasing:m,animationDuration:h,animationBegin:f,isAnimationActive:x,isUpdateAnimationActive:g}=t;if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var w=be("recharts-rectangle",d);return g?p.createElement(Rs,{canBegin:a>0,from:{width:l,height:c,x:i,y:o},to:{width:l,height:c,x:i,y:o},duration:h,animationEasing:m,isActive:g},j=>{var{width:y,height:N,x:S,y:b}=j;return p.createElement(Rs,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:f,duration:h,isActive:x,easing:m},p.createElement("path",Ls({},Me(t,!0),{className:w,d:em(S,b,y,N,u),ref:n})))}):p.createElement("path",Ls({},Me(t,!0),{className:w,d:em(i,o,l,c,u)}))};function xg(e){var{cx:t,cy:n,radius:a,startAngle:s,endAngle:i}=e,o=Je(t,n,a,s),l=Je(t,n,a,i);return{points:[o,l],cx:t,cy:n,radius:a,startAngle:s,endAngle:i}}function gl(){return gl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},gl.apply(null,arguments)}var m2=(e,t)=>{var n=mt(t-e),a=Math.min(Math.abs(t-e),359.999);return n*a},ts=e=>{var{cx:t,cy:n,radius:a,angle:s,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,u=l*(o?1:-1)+a,d=Math.asin(l/u)/Ts,m=c?s:s+i*d,h=Je(t,n,u,m),f=Je(t,n,a,m),x=c?s-i*d:s,g=Je(t,n,u*Math.cos(d*Ts),x);return{center:h,circleTangency:f,lineTangency:g,theta:d}},bg=e=>{var{cx:t,cy:n,innerRadius:a,outerRadius:s,startAngle:i,endAngle:o}=e,l=m2(i,o),c=i+l,u=Je(t,n,s,i),d=Je(t,n,s,c),m="M ".concat(u.x,",").concat(u.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(a>0){var h=Je(t,n,a,i),f=Je(t,n,a,c);m+="L ".concat(f.x,",").concat(f.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else m+="L ".concat(t,",").concat(n," Z");return m},h2=e=>{var{cx:t,cy:n,innerRadius:a,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=e,d=mt(u-c),{circleTangency:m,lineTangency:h,theta:f}=ts({cx:t,cy:n,radius:s,angle:c,sign:d,cornerRadius:i,cornerIsExternal:l}),{circleTangency:x,lineTangency:g,theta:w}=ts({cx:t,cy:n,radius:s,angle:u,sign:-d,cornerRadius:i,cornerIsExternal:l}),j=l?Math.abs(c-u):Math.abs(c-u)-f-w;if(j<0)return o?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):bg({cx:t,cy:n,innerRadius:a,outerRadius:s,startAngle:c,endAngle:u});var y="M ".concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(j>180),",").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
  `);if(a>0){var{circleTangency:N,lineTangency:S,theta:b}=ts({cx:t,cy:n,radius:a,angle:c,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:v,lineTangency:_,theta:P}=ts({cx:t,cy:n,radius:a,angle:u,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),O=l?Math.abs(c-u):Math.abs(c-u)-b-P;if(O<0&&i===0)return"".concat(y,"L").concat(t,",").concat(n,"Z");y+="L".concat(_.x,",").concat(_.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(O>180),",").concat(+(d>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(S.x,",").concat(S.y,"Z")}else y+="L".concat(t,",").concat(n,"Z");return y},f2={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},yg=e=>{var t=er(e,f2),{cx:n,cy:a,innerRadius:s,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:m}=t;if(i<s||u===d)return null;var h=be("recharts-sector",m),f=i-s,x=Kt(o,f,0,!0),g;return x>0&&Math.abs(u-d)<360?g=h2({cx:n,cy:a,innerRadius:s,outerRadius:i,cornerRadius:Math.min(x,f/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):g=bg({cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:u,endAngle:d}),p.createElement("path",gl({},Me(t,!0),{className:h,d:g}))};function p2(e,t,n){var a,s,i,o;if(e==="horizontal")a=t.x,i=a,s=n.top,o=n.top+n.height;else if(e==="vertical")s=t.y,o=s,a=n.left,i=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:c,innerRadius:u,outerRadius:d,angle:m}=t,h=Je(l,c,u,m),f=Je(l,c,d,m);a=h.x,s=h.y,i=f.x,o=f.y}else return xg(t);return[{x:a,y:s},{x:i,y:o}]}var vg={},jg={},wg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pc;function n(a){return t.isSymbol(a)?NaN:Number(a)}e.toNumber=n})(wg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wg;function n(a){return a?(a=t.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=n})(jg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gc,n=jg;function a(s,i,o){o&&typeof o!="number"&&t.isIterateeCall(s,i,o)&&(i=o=void 0),s=n.toFinite(s),i===void 0?(i=s,s=0):i=n.toFinite(i),o=o===void 0?s<i?1:-1:n.toFinite(o);const l=Math.max(Math.ceil((i-s)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=s,s+=o;return c}e.range=a})(vg);var g2=vg.range;const Ng=gr(g2);function Pr(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function x2(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function kc(e){let t,n,a;e.length!==2?(t=Pr,n=(l,c)=>Pr(e(l),c),a=(l,c)=>e(l)-c):(t=e===Pr||e===x2?e:b2,n=e,a=e);function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const m=u+d>>>1;n(l[m],c)<0?u=m+1:d=m}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const m=u+d>>>1;n(l[m],c)<=0?u=m+1:d=m}while(u<d)}return u}function o(l,c,u=0,d=l.length){const m=s(l,c,u,d-1);return m>u&&a(l[m-1],c)>-a(l[m],c)?m-1:m}return{left:s,center:o,right:i}}function b2(){return 0}function Sg(e){return e===null?NaN:+e}function*y2(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const v2=kc(Pr),Ea=v2.right;kc(Sg).center;class tm extends Map{constructor(t,n=N2){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[a,s]of t)this.set(a,s)}get(t){return super.get(rm(this,t))}has(t){return super.has(rm(this,t))}set(t,n){return super.set(j2(this,t),n)}delete(t){return super.delete(w2(this,t))}}function rm({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):n}function j2({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):(e.set(a,n),n)}function w2({_intern:e,_key:t},n){const a=t(n);return e.has(a)&&(n=e.get(a),e.delete(a)),n}function N2(e){return e!==null&&typeof e=="object"?e.valueOf():e}function S2(e=Pr){if(e===Pr)return _g;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const a=e(t,n);return a||a===0?a:(e(n,n)===0)-(e(t,t)===0)}}function _g(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const _2=Math.sqrt(50),k2=Math.sqrt(10),A2=Math.sqrt(2);function $s(e,t,n){const a=(t-e)/Math.max(0,n),s=Math.floor(Math.log10(a)),i=a/Math.pow(10,s),o=i>=_2?10:i>=k2?5:i>=A2?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,s)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=n&&n<2?$s(e,t,n*2):[l,c,u]}function xl(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const a=t<e,[s,i,o]=a?$s(t,e,n):$s(e,t,n);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(a)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(s+u)/-o;else for(let u=0;u<l;++u)c[u]=(s+u)*o;return c}function bl(e,t,n){return t=+t,e=+e,n=+n,$s(e,t,n)[2]}function yl(e,t,n){t=+t,e=+e,n=+n;const a=t<e,s=a?bl(t,e,n):bl(e,t,n);return(a?-1:1)*(s<0?1/-s:s)}function nm(e,t){let n;for(const a of e)a!=null&&(n<a||n===void 0&&a>=a)&&(n=a);return n}function am(e,t){let n;for(const a of e)a!=null&&(n>a||n===void 0&&a>=a)&&(n=a);return n}function kg(e,t,n=0,a=1/0,s){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(e.length-1,a)),!(n<=t&&t<=a))return e;for(s=s===void 0?_g:S2(s);a>n;){if(a-n>600){const c=a-n+1,u=t-n+1,d=Math.log(c),m=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*m*(c-m)/c)*(u-c/2<0?-1:1),f=Math.max(n,Math.floor(t-u*m/c+h)),x=Math.min(a,Math.floor(t+(c-u)*m/c+h));kg(e,t,f,x,s)}const i=e[t];let o=n,l=a;for(aa(e,n,t),s(e[a],i)>0&&aa(e,n,a);o<l;){for(aa(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[n],i)===0?aa(e,n,l):(++l,aa(e,l,a)),l<=t&&(n=l+1),t<=l&&(a=l-1)}return e}function aa(e,t,n){const a=e[t];e[t]=e[n],e[n]=a}function P2(e,t,n){if(e=Float64Array.from(y2(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return am(e);if(t>=1)return nm(e);var a,s=(a-1)*t,i=Math.floor(s),o=nm(kg(e,i).subarray(0,i+1)),l=am(e.subarray(i+1));return o+(l-o)*(s-i)}}function C2(e,t,n=Sg){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+n(e[0],0,e);if(t>=1)return+n(e[a-1],a-1,e);var a,s=(a-1)*t,i=Math.floor(s),o=+n(e[i],i,e),l=+n(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function E2(e,t,n){e=+e,t=+t,n=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+n;for(var a=-1,s=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(s);++a<s;)i[a]=e+a*n;return i}function Rt(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function yr(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const vl=Symbol("implicit");function Ac(){var e=new tm,t=[],n=[],a=vl;function s(i){let o=e.get(i);if(o===void 0){if(a!==vl)return a;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new tm;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(n=Array.from(i),s):n.slice()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return Ac(t,n).unknown(a)},Rt.apply(s,arguments),s}function Pc(){var e=Ac().unknown(void 0),t=e.domain,n=e.range,a=0,s=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function m(){var h=t().length,f=s<a,x=f?s:a,g=f?a:s;i=(g-x)/Math.max(1,h-c+u*2),l&&(i=Math.floor(i)),x+=(g-x-i*(h-c))*d,o=i*(1-c),l&&(x=Math.round(x),o=Math.round(o));var w=E2(h).map(function(j){return x+i*j});return n(f?w.reverse():w)}return e.domain=function(h){return arguments.length?(t(h),m()):t()},e.range=function(h){return arguments.length?([a,s]=h,a=+a,s=+s,m()):[a,s]},e.rangeRound=function(h){return[a,s]=h,a=+a,s=+s,l=!0,m()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(l=!!h,m()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),m()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),m()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,m()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),m()):d},e.copy=function(){return Pc(t(),[a,s]).round(l).paddingInner(c).paddingOuter(u).align(d)},Rt.apply(m(),arguments)}function Ag(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Ag(t())},e}function O2(){return Ag(Pc.apply(null,arguments).paddingInner(1))}function Cc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Pg(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function Oa(){}var ja=.7,Fs=1/ja,Dn="\\s*([+-]?\\d+)\\s*",wa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Jt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",T2=/^#([0-9a-f]{3,8})$/,D2=new RegExp(`^rgb\\(${Dn},${Dn},${Dn}\\)$`),M2=new RegExp(`^rgb\\(${Jt},${Jt},${Jt}\\)$`),I2=new RegExp(`^rgba\\(${Dn},${Dn},${Dn},${wa}\\)$`),R2=new RegExp(`^rgba\\(${Jt},${Jt},${Jt},${wa}\\)$`),L2=new RegExp(`^hsl\\(${wa},${Jt},${Jt}\\)$`),$2=new RegExp(`^hsla\\(${wa},${Jt},${Jt},${wa}\\)$`),sm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Cc(Oa,Na,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:im,formatHex:im,formatHex8:F2,formatHsl:B2,formatRgb:om,toString:om});function im(){return this.rgb().formatHex()}function F2(){return this.rgb().formatHex8()}function B2(){return Cg(this).formatHsl()}function om(){return this.rgb().formatRgb()}function Na(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=T2.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?lm(t):n===3?new ht(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?rs(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?rs(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=D2.exec(e))?new ht(t[1],t[2],t[3],1):(t=M2.exec(e))?new ht(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=I2.exec(e))?rs(t[1],t[2],t[3],t[4]):(t=R2.exec(e))?rs(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=L2.exec(e))?um(t[1],t[2]/100,t[3]/100,1):(t=$2.exec(e))?um(t[1],t[2]/100,t[3]/100,t[4]):sm.hasOwnProperty(e)?lm(sm[e]):e==="transparent"?new ht(NaN,NaN,NaN,0):null}function lm(e){return new ht(e>>16&255,e>>8&255,e&255,1)}function rs(e,t,n,a){return a<=0&&(e=t=n=NaN),new ht(e,t,n,a)}function q2(e){return e instanceof Oa||(e=Na(e)),e?(e=e.rgb(),new ht(e.r,e.g,e.b,e.opacity)):new ht}function jl(e,t,n,a){return arguments.length===1?q2(e):new ht(e,t,n,a??1)}function ht(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}Cc(ht,jl,Pg(Oa,{brighter(e){return e=e==null?Fs:Math.pow(Fs,e),new ht(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ja:Math.pow(ja,e),new ht(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ht(sn(this.r),sn(this.g),sn(this.b),Bs(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cm,formatHex:cm,formatHex8:z2,formatRgb:dm,toString:dm}));function cm(){return`#${Zr(this.r)}${Zr(this.g)}${Zr(this.b)}`}function z2(){return`#${Zr(this.r)}${Zr(this.g)}${Zr(this.b)}${Zr((isNaN(this.opacity)?1:this.opacity)*255)}`}function dm(){const e=Bs(this.opacity);return`${e===1?"rgb(":"rgba("}${sn(this.r)}, ${sn(this.g)}, ${sn(this.b)}${e===1?")":`, ${e})`}`}function Bs(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function sn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Zr(e){return e=sn(e),(e<16?"0":"")+e.toString(16)}function um(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ht(e,t,n,a)}function Cg(e){if(e instanceof Ht)return new Ht(e.h,e.s,e.l,e.opacity);if(e instanceof Oa||(e=Na(e)),!e)return new Ht;if(e instanceof Ht)return e;e=e.rgb();var t=e.r/255,n=e.g/255,a=e.b/255,s=Math.min(t,n,a),i=Math.max(t,n,a),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(n-a)/l+(n<a)*6:n===i?o=(a-t)/l+2:o=(t-n)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new Ht(o,l,c,e.opacity)}function U2(e,t,n,a){return arguments.length===1?Cg(e):new Ht(e,t,n,a??1)}function Ht(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}Cc(Ht,U2,Pg(Oa,{brighter(e){return e=e==null?Fs:Math.pow(Fs,e),new Ht(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ja:Math.pow(ja,e),new Ht(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,s=2*n-a;return new ht(wo(e>=240?e-240:e+120,s,a),wo(e,s,a),wo(e<120?e+240:e-120,s,a),this.opacity)},clamp(){return new Ht(mm(this.h),ns(this.s),ns(this.l),Bs(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Bs(this.opacity);return`${e===1?"hsl(":"hsla("}${mm(this.h)}, ${ns(this.s)*100}%, ${ns(this.l)*100}%${e===1?")":`, ${e})`}`}}));function mm(e){return e=(e||0)%360,e<0?e+360:e}function ns(e){return Math.max(0,Math.min(1,e||0))}function wo(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ec=e=>()=>e;function W2(e,t){return function(n){return e+n*t}}function H2(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(a){return Math.pow(e+a*t,n)}}function K2(e){return(e=+e)==1?Eg:function(t,n){return n-t?H2(t,n,e):Ec(isNaN(t)?n:t)}}function Eg(e,t){var n=t-e;return n?W2(e,n):Ec(isNaN(e)?t:e)}const hm=function e(t){var n=K2(t);function a(s,i){var o=n((s=jl(s)).r,(i=jl(i)).r),l=n(s.g,i.g),c=n(s.b,i.b),u=Eg(s.opacity,i.opacity);return function(d){return s.r=o(d),s.g=l(d),s.b=c(d),s.opacity=u(d),s+""}}return a.gamma=e,a}(1);function G2(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,a=t.slice(),s;return function(i){for(s=0;s<n;++s)a[s]=e[s]*(1-i)+t[s]*i;return a}}function V2(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Y2(e,t){var n=t?t.length:0,a=e?Math.min(n,e.length):0,s=new Array(a),i=new Array(n),o;for(o=0;o<a;++o)s[o]=Un(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(l){for(o=0;o<a;++o)i[o]=s[o](l);return i}}function X2(e,t){var n=new Date;return e=+e,t=+t,function(a){return n.setTime(e*(1-a)+t*a),n}}function qs(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function J2(e,t){var n={},a={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=Un(e[s],t[s]):a[s]=t[s];return function(i){for(s in n)a[s]=n[s](i);return a}}var wl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,No=new RegExp(wl.source,"g");function Z2(e){return function(){return e}}function Q2(e){return function(t){return e(t)+""}}function eS(e,t){var n=wl.lastIndex=No.lastIndex=0,a,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(a=wl.exec(e))&&(s=No.exec(t));)(i=s.index)>n&&(i=t.slice(n,i),l[o]?l[o]+=i:l[++o]=i),(a=a[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:qs(a,s)})),n=No.lastIndex;return n<t.length&&(i=t.slice(n),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?Q2(c[0].x):Z2(t):(t=c.length,function(u){for(var d=0,m;d<t;++d)l[(m=c[d]).i]=m.x(u);return l.join("")})}function Un(e,t){var n=typeof t,a;return t==null||n==="boolean"?Ec(t):(n==="number"?qs:n==="string"?(a=Na(t))?(t=a,hm):eS:t instanceof Na?hm:t instanceof Date?X2:V2(t)?G2:Array.isArray(t)?Y2:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?J2:qs)(e,t)}function Oc(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function tS(e,t){t===void 0&&(t=e,e=Un);for(var n=0,a=t.length-1,s=t[0],i=new Array(a<0?0:a);n<a;)i[n]=e(s,s=t[++n]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return i[l](o-l)}}function rS(e){return function(){return e}}function zs(e){return+e}var fm=[0,1];function st(e){return e}function Nl(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:rS(isNaN(t)?NaN:.5)}function nS(e,t){var n;return e>t&&(n=e,e=t,t=n),function(a){return Math.max(e,Math.min(t,a))}}function aS(e,t,n){var a=e[0],s=e[1],i=t[0],o=t[1];return s<a?(a=Nl(s,a),i=n(o,i)):(a=Nl(a,s),i=n(i,o)),function(l){return i(a(l))}}function sS(e,t,n){var a=Math.min(e.length,t.length)-1,s=new Array(a),i=new Array(a),o=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<a;)s[o]=Nl(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(l){var c=Ea(e,l,1,a)-1;return i[c](s[c](l))}}function Ta(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Bi(){var e=fm,t=fm,n=Un,a,s,i,o=st,l,c,u;function d(){var h=Math.min(e.length,t.length);return o!==st&&(o=nS(e[0],e[h-1])),l=h>2?sS:aS,c=u=null,m}function m(h){return h==null||isNaN(h=+h)?i:(c||(c=l(e.map(a),t,n)))(a(o(h)))}return m.invert=function(h){return o(s((u||(u=l(t,e.map(a),qs)))(h)))},m.domain=function(h){return arguments.length?(e=Array.from(h,zs),d()):e.slice()},m.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},m.rangeRound=function(h){return t=Array.from(h),n=Oc,d()},m.clamp=function(h){return arguments.length?(o=h?!0:st,d()):o!==st},m.interpolate=function(h){return arguments.length?(n=h,d()):n},m.unknown=function(h){return arguments.length?(i=h,m):i},function(h,f){return a=h,s=f,d()}}function Tc(){return Bi()(st,st)}function iS(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Us(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,a=e.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+e.slice(n+1)]}function Ln(e){return e=Us(Math.abs(e)),e?e[1]:NaN}function oS(e,t){return function(n,a){for(var s=n.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>a&&(l=Math.max(1,a-c)),i.push(n.substring(s-=l,s+l)),!((c+=l+1)>a));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function lS(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var cS=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Sa(e){if(!(t=cS.exec(e)))throw new Error("invalid format: "+e);var t;return new Dc({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Sa.prototype=Dc.prototype;function Dc(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Dc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function dS(e){e:for(var t=e.length,n=1,a=-1,s;n<t;++n)switch(e[n]){case".":a=s=n;break;case"0":a===0&&(a=n),s=n;break;default:if(!+e[n])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(s+1):e}var Og;function uS(e,t){var n=Us(e,t);if(!n)return e+"";var a=n[0],s=n[1],i=s-(Og=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=a.length;return i===o?a:i>o?a+new Array(i-o+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+Us(e,Math.max(0,t+i-1))[0]}function pm(e,t){var n=Us(e,t);if(!n)return e+"";var a=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+a:a.length>s+1?a.slice(0,s+1)+"."+a.slice(s+1):a+new Array(s-a.length+2).join("0")}const gm={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:iS,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>pm(e*100,t),r:pm,s:uS,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function xm(e){return e}var bm=Array.prototype.map,ym=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function mS(e){var t=e.grouping===void 0||e.thousands===void 0?xm:oS(bm.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?xm:lS(bm.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(m){m=Sa(m);var h=m.fill,f=m.align,x=m.sign,g=m.symbol,w=m.zero,j=m.width,y=m.comma,N=m.precision,S=m.trim,b=m.type;b==="n"?(y=!0,b="g"):gm[b]||(N===void 0&&(N=12),S=!0,b="g"),(w||h==="0"&&f==="=")&&(w=!0,h="0",f="=");var v=g==="$"?n:g==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",_=g==="$"?a:/[%p]/.test(b)?o:"",P=gm[b],O=/[defgprs%]/.test(b);N=N===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function D(A){var T=v,L=_,C,F,R;if(b==="c")L=P(A)+L,A="";else{A=+A;var K=A<0||1/A<0;if(A=isNaN(A)?c:P(Math.abs(A),N),S&&(A=dS(A)),K&&+A==0&&x!=="+"&&(K=!1),T=(K?x==="("?x:l:x==="-"||x==="("?"":x)+T,L=(b==="s"?ym[8+Og/3]:"")+L+(K&&x==="("?")":""),O){for(C=-1,F=A.length;++C<F;)if(R=A.charCodeAt(C),48>R||R>57){L=(R===46?s+A.slice(C+1):A.slice(C))+L,A=A.slice(0,C);break}}}y&&!w&&(A=t(A,1/0));var M=T.length+A.length+L.length,I=M<j?new Array(j-M+1).join(h):"";switch(y&&w&&(A=t(I+A,I.length?j-L.length:1/0),I=""),f){case"<":A=T+A+L+I;break;case"=":A=T+I+A+L;break;case"^":A=I.slice(0,M=I.length>>1)+T+A+L+I.slice(M);break;default:A=I+T+A+L;break}return i(A)}return D.toString=function(){return m+""},D}function d(m,h){var f=u((m=Sa(m),m.type="f",m)),x=Math.max(-8,Math.min(8,Math.floor(Ln(h)/3)))*3,g=Math.pow(10,-x),w=ym[8+x/3];return function(j){return f(g*j)+w}}return{format:u,formatPrefix:d}}var as,Mc,Tg;hS({thousands:",",grouping:[3],currency:["$",""]});function hS(e){return as=mS(e),Mc=as.format,Tg=as.formatPrefix,as}function fS(e){return Math.max(0,-Ln(Math.abs(e)))}function pS(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ln(t)/3)))*3-Ln(Math.abs(e)))}function gS(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ln(t)-Ln(e))+1}function Dg(e,t,n,a){var s=yl(e,t,n),i;switch(a=Sa(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(i=pS(s,o))&&(a.precision=i),Tg(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=gS(s,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=fS(s))&&(a.precision=i-(a.type==="%")*2);break}}return Mc(a)}function Mr(e){var t=e.domain;return e.ticks=function(n){var a=t();return xl(a[0],a[a.length-1],n??10)},e.tickFormat=function(n,a){var s=t();return Dg(s[0],s[s.length-1],n??10,a)},e.nice=function(n){n==null&&(n=10);var a=t(),s=0,i=a.length-1,o=a[s],l=a[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=s,s=i,i=u);d-- >0;){if(u=bl(o,l,n),u===c)return a[s]=o,a[i]=l,t(a);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function Mg(){var e=Tc();return e.copy=function(){return Ta(e,Mg())},Rt.apply(e,arguments),Mr(e)}function Ig(e){var t;function n(a){return a==null||isNaN(a=+a)?t:a}return n.invert=n,n.domain=n.range=function(a){return arguments.length?(e=Array.from(a,zs),n):e.slice()},n.unknown=function(a){return arguments.length?(t=a,n):t},n.copy=function(){return Ig(e).unknown(t)},e=arguments.length?Array.from(e,zs):[0,1],Mr(n)}function Rg(e,t){e=e.slice();var n=0,a=e.length-1,s=e[n],i=e[a],o;return i<s&&(o=n,n=a,a=o,o=s,s=i,i=o),e[n]=t.floor(s),e[a]=t.ceil(i),e}function vm(e){return Math.log(e)}function jm(e){return Math.exp(e)}function xS(e){return-Math.log(-e)}function bS(e){return-Math.exp(-e)}function yS(e){return isFinite(e)?+("1e"+e):e<0?0:e}function vS(e){return e===10?yS:e===Math.E?Math.exp:t=>Math.pow(e,t)}function jS(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function wm(e){return(t,n)=>-e(-t,n)}function Ic(e){const t=e(vm,jm),n=t.domain;let a=10,s,i;function o(){return s=jS(a),i=vS(a),n()[0]<0?(s=wm(s),i=wm(i),e(xS,bS)):e(vm,jm),t}return t.base=function(l){return arguments.length?(a=+l,o()):a},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let u=c[0],d=c[c.length-1];const m=d<u;m&&([u,d]=[d,u]);let h=s(u),f=s(d),x,g;const w=l==null?10:+l;let j=[];if(!(a%1)&&f-h<w){if(h=Math.floor(h),f=Math.ceil(f),u>0){for(;h<=f;++h)for(x=1;x<a;++x)if(g=h<0?x/i(-h):x*i(h),!(g<u)){if(g>d)break;j.push(g)}}else for(;h<=f;++h)for(x=a-1;x>=1;--x)if(g=h>0?x/i(-h):x*i(h),!(g<u)){if(g>d)break;j.push(g)}j.length*2<w&&(j=xl(u,d,w))}else j=xl(h,f,Math.min(f-h,w)).map(i);return m?j.reverse():j},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=a===10?"s":","),typeof c!="function"&&(!(a%1)&&(c=Sa(c)).precision==null&&(c.trim=!0),c=Mc(c)),l===1/0)return c;const u=Math.max(1,a*l/t.ticks().length);return d=>{let m=d/i(Math.round(s(d)));return m*a<a-.5&&(m*=a),m<=u?c(d):""}},t.nice=()=>n(Rg(n(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function Lg(){const e=Ic(Bi()).domain([1,10]);return e.copy=()=>Ta(e,Lg()).base(e.base()),Rt.apply(e,arguments),e}function Nm(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Sm(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Rc(e){var t=1,n=e(Nm(t),Sm(t));return n.constant=function(a){return arguments.length?e(Nm(t=+a),Sm(t)):t},Mr(n)}function $g(){var e=Rc(Bi());return e.copy=function(){return Ta(e,$g()).constant(e.constant())},Rt.apply(e,arguments)}function _m(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function wS(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function NS(e){return e<0?-e*e:e*e}function Lc(e){var t=e(st,st),n=1;function a(){return n===1?e(st,st):n===.5?e(wS,NS):e(_m(n),_m(1/n))}return t.exponent=function(s){return arguments.length?(n=+s,a()):n},Mr(t)}function $c(){var e=Lc(Bi());return e.copy=function(){return Ta(e,$c()).exponent(e.exponent())},Rt.apply(e,arguments),e}function SS(){return $c.apply(null,arguments).exponent(.5)}function km(e){return Math.sign(e)*e*e}function _S(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Fg(){var e=Tc(),t=[0,1],n=!1,a;function s(i){var o=_S(e(i));return isNaN(o)?a:n?Math.round(o):o}return s.invert=function(i){return e.invert(km(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,zs)).map(km)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(n=!!i,s):n},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return Fg(e.domain(),t).round(n).clamp(e.clamp()).unknown(a)},Rt.apply(s,arguments),Mr(s)}function Bg(){var e=[],t=[],n=[],a;function s(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=C2(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?a:t[Ea(n,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Pr),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(a=o,i):a},i.quantiles=function(){return n.slice()},i.copy=function(){return Bg().domain(e).range(t).unknown(a)},Rt.apply(i,arguments)}function qg(){var e=0,t=1,n=1,a=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[Ea(a,c,0,n)]:i}function l(){var c=-1;for(a=new Array(n);++c<n;)a[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,a[0]]:u>=n?[a[n-1],t]:[a[u-1],a[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return a.slice()},o.copy=function(){return qg().domain([e,t]).range(s).unknown(i)},Rt.apply(Mr(o),arguments)}function zg(){var e=[.5],t=[0,1],n,a=1;function s(i){return i!=null&&i<=i?t[Ea(e,i,0,a)]:n}return s.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),a=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return zg().domain(e).range(t).unknown(n)},Rt.apply(s,arguments)}const So=new Date,_o=new Date;function Be(e,t,n,a){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},s.filter=i=>Be(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),n&&(s.count=(i,o)=>(So.setTime(+i),_o.setTime(+o),e(So),e(_o),Math.floor(n(So,_o))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(a?o=>a(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const Ws=Be(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Ws.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Be(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Ws);Ws.range;const sr=1e3,Tt=sr*60,ir=Tt*60,hr=ir*24,Fc=hr*7,Am=hr*30,ko=hr*365,Qr=Be(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*sr)},(e,t)=>(t-e)/sr,e=>e.getUTCSeconds());Qr.range;const Bc=Be(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*sr)},(e,t)=>{e.setTime(+e+t*Tt)},(e,t)=>(t-e)/Tt,e=>e.getMinutes());Bc.range;const qc=Be(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Tt)},(e,t)=>(t-e)/Tt,e=>e.getUTCMinutes());qc.range;const zc=Be(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*sr-e.getMinutes()*Tt)},(e,t)=>{e.setTime(+e+t*ir)},(e,t)=>(t-e)/ir,e=>e.getHours());zc.range;const Uc=Be(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ir)},(e,t)=>(t-e)/ir,e=>e.getUTCHours());Uc.range;const Da=Be(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Tt)/hr,e=>e.getDate()-1);Da.range;const qi=Be(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/hr,e=>e.getUTCDate()-1);qi.range;const Ug=Be(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/hr,e=>Math.floor(e/hr));Ug.range;function xn(e){return Be(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Tt)/Fc)}const zi=xn(0),Hs=xn(1),kS=xn(2),AS=xn(3),$n=xn(4),PS=xn(5),CS=xn(6);zi.range;Hs.range;kS.range;AS.range;$n.range;PS.range;CS.range;function bn(e){return Be(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Fc)}const Ui=bn(0),Ks=bn(1),ES=bn(2),OS=bn(3),Fn=bn(4),TS=bn(5),DS=bn(6);Ui.range;Ks.range;ES.range;OS.range;Fn.range;TS.range;DS.range;const Wc=Be(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Wc.range;const Hc=Be(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Hc.range;const fr=Be(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());fr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Be(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});fr.range;const pr=Be(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());pr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Be(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});pr.range;function Wg(e,t,n,a,s,i){const o=[[Qr,1,sr],[Qr,5,5*sr],[Qr,15,15*sr],[Qr,30,30*sr],[i,1,Tt],[i,5,5*Tt],[i,15,15*Tt],[i,30,30*Tt],[s,1,ir],[s,3,3*ir],[s,6,6*ir],[s,12,12*ir],[a,1,hr],[a,2,2*hr],[n,1,Fc],[t,1,Am],[t,3,3*Am],[e,1,ko]];function l(u,d,m){const h=d<u;h&&([u,d]=[d,u]);const f=m&&typeof m.range=="function"?m:c(u,d,m),x=f?f.range(u,+d+1):[];return h?x.reverse():x}function c(u,d,m){const h=Math.abs(d-u)/m,f=kc(([,,w])=>w).right(o,h);if(f===o.length)return e.every(yl(u/ko,d/ko,m));if(f===0)return Ws.every(Math.max(yl(u,d,m),1));const[x,g]=o[h/o[f-1][2]<o[f][2]/h?f-1:f];return x.every(g)}return[l,c]}const[MS,IS]=Wg(pr,Hc,Ui,Ug,Uc,qc),[RS,LS]=Wg(fr,Wc,zi,Da,zc,Bc);function Ao(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Po(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function sa(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function $S(e){var t=e.dateTime,n=e.date,a=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=ia(s),d=oa(s),m=ia(i),h=oa(i),f=ia(o),x=oa(o),g=ia(l),w=oa(l),j=ia(c),y=oa(c),N={a:K,A:M,b:I,B:H,c:null,d:Dm,e:Dm,f:o_,g:x_,G:y_,H:a_,I:s_,j:i_,L:Hg,m:l_,M:c_,p:Y,q:z,Q:Rm,s:Lm,S:d_,u:u_,U:m_,V:h_,w:f_,W:p_,x:null,X:null,y:g_,Y:b_,Z:v_,"%":Im},S={a:G,A:V,b:Z,B:ue,c:null,d:Mm,e:Mm,f:S_,g:M_,G:R_,H:j_,I:w_,j:N_,L:Gg,m:__,M:k_,p:E,q:B,Q:Rm,s:Lm,S:A_,u:P_,U:C_,V:E_,w:O_,W:T_,x:null,X:null,y:D_,Y:I_,Z:L_,"%":Im},b={a:D,A,b:T,B:L,c:C,d:Om,e:Om,f:e_,g:Em,G:Cm,H:Tm,I:Tm,j:XS,L:QS,m:YS,M:JS,p:O,q:VS,Q:r_,s:n_,S:ZS,u:US,U:WS,V:HS,w:zS,W:KS,x:F,X:R,y:Em,Y:Cm,Z:GS,"%":t_};N.x=v(n,N),N.X=v(a,N),N.c=v(t,N),S.x=v(n,S),S.X=v(a,S),S.c=v(t,S);function v(U,X){return function(ae){var q=[],ve=-1,le=0,Ne=U.length,fe,Lt,Fr;for(ae instanceof Date||(ae=new Date(+ae));++ve<Ne;)U.charCodeAt(ve)===37&&(q.push(U.slice(le,ve)),(Lt=Pm[fe=U.charAt(++ve)])!=null?fe=U.charAt(++ve):Lt=fe==="e"?" ":"0",(Fr=X[fe])&&(fe=Fr(ae,Lt)),q.push(fe),le=ve+1);return q.push(U.slice(le,ve)),q.join("")}}function _(U,X){return function(ae){var q=sa(1900,void 0,1),ve=P(q,U,ae+="",0),le,Ne;if(ve!=ae.length)return null;if("Q"in q)return new Date(q.Q);if("s"in q)return new Date(q.s*1e3+("L"in q?q.L:0));if(X&&!("Z"in q)&&(q.Z=0),"p"in q&&(q.H=q.H%12+q.p*12),q.m===void 0&&(q.m="q"in q?q.q:0),"V"in q){if(q.V<1||q.V>53)return null;"w"in q||(q.w=1),"Z"in q?(le=Po(sa(q.y,0,1)),Ne=le.getUTCDay(),le=Ne>4||Ne===0?Ks.ceil(le):Ks(le),le=qi.offset(le,(q.V-1)*7),q.y=le.getUTCFullYear(),q.m=le.getUTCMonth(),q.d=le.getUTCDate()+(q.w+6)%7):(le=Ao(sa(q.y,0,1)),Ne=le.getDay(),le=Ne>4||Ne===0?Hs.ceil(le):Hs(le),le=Da.offset(le,(q.V-1)*7),q.y=le.getFullYear(),q.m=le.getMonth(),q.d=le.getDate()+(q.w+6)%7)}else("W"in q||"U"in q)&&("w"in q||(q.w="u"in q?q.u%7:"W"in q?1:0),Ne="Z"in q?Po(sa(q.y,0,1)).getUTCDay():Ao(sa(q.y,0,1)).getDay(),q.m=0,q.d="W"in q?(q.w+6)%7+q.W*7-(Ne+5)%7:q.w+q.U*7-(Ne+6)%7);return"Z"in q?(q.H+=q.Z/100|0,q.M+=q.Z%100,Po(q)):Ao(q)}}function P(U,X,ae,q){for(var ve=0,le=X.length,Ne=ae.length,fe,Lt;ve<le;){if(q>=Ne)return-1;if(fe=X.charCodeAt(ve++),fe===37){if(fe=X.charAt(ve++),Lt=b[fe in Pm?X.charAt(ve++):fe],!Lt||(q=Lt(U,ae,q))<0)return-1}else if(fe!=ae.charCodeAt(q++))return-1}return q}function O(U,X,ae){var q=u.exec(X.slice(ae));return q?(U.p=d.get(q[0].toLowerCase()),ae+q[0].length):-1}function D(U,X,ae){var q=f.exec(X.slice(ae));return q?(U.w=x.get(q[0].toLowerCase()),ae+q[0].length):-1}function A(U,X,ae){var q=m.exec(X.slice(ae));return q?(U.w=h.get(q[0].toLowerCase()),ae+q[0].length):-1}function T(U,X,ae){var q=j.exec(X.slice(ae));return q?(U.m=y.get(q[0].toLowerCase()),ae+q[0].length):-1}function L(U,X,ae){var q=g.exec(X.slice(ae));return q?(U.m=w.get(q[0].toLowerCase()),ae+q[0].length):-1}function C(U,X,ae){return P(U,t,X,ae)}function F(U,X,ae){return P(U,n,X,ae)}function R(U,X,ae){return P(U,a,X,ae)}function K(U){return o[U.getDay()]}function M(U){return i[U.getDay()]}function I(U){return c[U.getMonth()]}function H(U){return l[U.getMonth()]}function Y(U){return s[+(U.getHours()>=12)]}function z(U){return 1+~~(U.getMonth()/3)}function G(U){return o[U.getUTCDay()]}function V(U){return i[U.getUTCDay()]}function Z(U){return c[U.getUTCMonth()]}function ue(U){return l[U.getUTCMonth()]}function E(U){return s[+(U.getUTCHours()>=12)]}function B(U){return 1+~~(U.getUTCMonth()/3)}return{format:function(U){var X=v(U+="",N);return X.toString=function(){return U},X},parse:function(U){var X=_(U+="",!1);return X.toString=function(){return U},X},utcFormat:function(U){var X=v(U+="",S);return X.toString=function(){return U},X},utcParse:function(U){var X=_(U+="",!0);return X.toString=function(){return U},X}}}var Pm={"-":"",_:" ",0:"0"},Ve=/^\s*\d+/,FS=/^%/,BS=/[\\^$*+?|[\]().{}]/g;function me(e,t,n){var a=e<0?"-":"",s=(a?-e:e)+"",i=s.length;return a+(i<n?new Array(n-i+1).join(t)+s:s)}function qS(e){return e.replace(BS,"\\$&")}function ia(e){return new RegExp("^(?:"+e.map(qS).join("|")+")","i")}function oa(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function zS(e,t,n){var a=Ve.exec(t.slice(n,n+1));return a?(e.w=+a[0],n+a[0].length):-1}function US(e,t,n){var a=Ve.exec(t.slice(n,n+1));return a?(e.u=+a[0],n+a[0].length):-1}function WS(e,t,n){var a=Ve.exec(t.slice(n,n+2));return a?(e.U=+a[0],n+a[0].length):-1}function HS(e,t,n){var a=Ve.exec(t.slice(n,n+2));return a?(e.V=+a[0],n+a[0].length):-1}function KS(e,t,n){var a=Ve.exec(t.slice(n,n+2));return a?(e.W=+a[0],n+a[0].length):-1}function Cm(e,t,n){var a=Ve.exec(t.slice(n,n+4));return a?(e.y=+a[0],n+a[0].length):-1}function Em(e,t,n){var a=Ve.exec(t.slice(n,n+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function GS(e,t,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function VS(e,t,n){var a=Ve.exec(t.slice(n,n+1));return a?(e.q=a[0]*3-3,n+a[0].length):-1}function YS(e,t,n){var a=Ve.exec(t.slice(n,n+2));return a?(e.m=a[0]-1,n+a[0].length):-1}function Om(e,t,n){var a=Ve.exec(t.slice(n,n+2));return a?(e.d=+a[0],n+a[0].length):-1}function XS(e,t,n){var a=Ve.exec(t.slice(n,n+3));return a?(e.m=0,e.d=+a[0],n+a[0].length):-1}function Tm(e,t,n){var a=Ve.exec(t.slice(n,n+2));return a?(e.H=+a[0],n+a[0].length):-1}function JS(e,t,n){var a=Ve.exec(t.slice(n,n+2));return a?(e.M=+a[0],n+a[0].length):-1}function ZS(e,t,n){var a=Ve.exec(t.slice(n,n+2));return a?(e.S=+a[0],n+a[0].length):-1}function QS(e,t,n){var a=Ve.exec(t.slice(n,n+3));return a?(e.L=+a[0],n+a[0].length):-1}function e_(e,t,n){var a=Ve.exec(t.slice(n,n+6));return a?(e.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function t_(e,t,n){var a=FS.exec(t.slice(n,n+1));return a?n+a[0].length:-1}function r_(e,t,n){var a=Ve.exec(t.slice(n));return a?(e.Q=+a[0],n+a[0].length):-1}function n_(e,t,n){var a=Ve.exec(t.slice(n));return a?(e.s=+a[0],n+a[0].length):-1}function Dm(e,t){return me(e.getDate(),t,2)}function a_(e,t){return me(e.getHours(),t,2)}function s_(e,t){return me(e.getHours()%12||12,t,2)}function i_(e,t){return me(1+Da.count(fr(e),e),t,3)}function Hg(e,t){return me(e.getMilliseconds(),t,3)}function o_(e,t){return Hg(e,t)+"000"}function l_(e,t){return me(e.getMonth()+1,t,2)}function c_(e,t){return me(e.getMinutes(),t,2)}function d_(e,t){return me(e.getSeconds(),t,2)}function u_(e){var t=e.getDay();return t===0?7:t}function m_(e,t){return me(zi.count(fr(e)-1,e),t,2)}function Kg(e){var t=e.getDay();return t>=4||t===0?$n(e):$n.ceil(e)}function h_(e,t){return e=Kg(e),me($n.count(fr(e),e)+(fr(e).getDay()===4),t,2)}function f_(e){return e.getDay()}function p_(e,t){return me(Hs.count(fr(e)-1,e),t,2)}function g_(e,t){return me(e.getFullYear()%100,t,2)}function x_(e,t){return e=Kg(e),me(e.getFullYear()%100,t,2)}function b_(e,t){return me(e.getFullYear()%1e4,t,4)}function y_(e,t){var n=e.getDay();return e=n>=4||n===0?$n(e):$n.ceil(e),me(e.getFullYear()%1e4,t,4)}function v_(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+me(t/60|0,"0",2)+me(t%60,"0",2)}function Mm(e,t){return me(e.getUTCDate(),t,2)}function j_(e,t){return me(e.getUTCHours(),t,2)}function w_(e,t){return me(e.getUTCHours()%12||12,t,2)}function N_(e,t){return me(1+qi.count(pr(e),e),t,3)}function Gg(e,t){return me(e.getUTCMilliseconds(),t,3)}function S_(e,t){return Gg(e,t)+"000"}function __(e,t){return me(e.getUTCMonth()+1,t,2)}function k_(e,t){return me(e.getUTCMinutes(),t,2)}function A_(e,t){return me(e.getUTCSeconds(),t,2)}function P_(e){var t=e.getUTCDay();return t===0?7:t}function C_(e,t){return me(Ui.count(pr(e)-1,e),t,2)}function Vg(e){var t=e.getUTCDay();return t>=4||t===0?Fn(e):Fn.ceil(e)}function E_(e,t){return e=Vg(e),me(Fn.count(pr(e),e)+(pr(e).getUTCDay()===4),t,2)}function O_(e){return e.getUTCDay()}function T_(e,t){return me(Ks.count(pr(e)-1,e),t,2)}function D_(e,t){return me(e.getUTCFullYear()%100,t,2)}function M_(e,t){return e=Vg(e),me(e.getUTCFullYear()%100,t,2)}function I_(e,t){return me(e.getUTCFullYear()%1e4,t,4)}function R_(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Fn(e):Fn.ceil(e),me(e.getUTCFullYear()%1e4,t,4)}function L_(){return"+0000"}function Im(){return"%"}function Rm(e){return+e}function Lm(e){return Math.floor(+e/1e3)}var jn,Yg,Xg;$_({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function $_(e){return jn=$S(e),Yg=jn.format,jn.parse,Xg=jn.utcFormat,jn.utcParse,jn}function F_(e){return new Date(e)}function B_(e){return e instanceof Date?+e:+new Date(+e)}function Kc(e,t,n,a,s,i,o,l,c,u){var d=Tc(),m=d.invert,h=d.domain,f=u(".%L"),x=u(":%S"),g=u("%I:%M"),w=u("%I %p"),j=u("%a %d"),y=u("%b %d"),N=u("%B"),S=u("%Y");function b(v){return(c(v)<v?f:l(v)<v?x:o(v)<v?g:i(v)<v?w:a(v)<v?s(v)<v?j:y:n(v)<v?N:S)(v)}return d.invert=function(v){return new Date(m(v))},d.domain=function(v){return arguments.length?h(Array.from(v,B_)):h().map(F_)},d.ticks=function(v){var _=h();return e(_[0],_[_.length-1],v??10)},d.tickFormat=function(v,_){return _==null?b:u(_)},d.nice=function(v){var _=h();return(!v||typeof v.range!="function")&&(v=t(_[0],_[_.length-1],v??10)),v?h(Rg(_,v)):d},d.copy=function(){return Ta(d,Kc(e,t,n,a,s,i,o,l,c,u))},d}function q_(){return Rt.apply(Kc(RS,LS,fr,Wc,zi,Da,zc,Bc,Qr,Yg).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function z_(){return Rt.apply(Kc(MS,IS,pr,Hc,Ui,qi,Uc,qc,Qr,Xg).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Wi(){var e=0,t=1,n,a,s,i,o=st,l=!1,c;function u(m){return m==null||isNaN(m=+m)?c:o(s===0?.5:(m=(i(m)-n)*s,l?Math.max(0,Math.min(1,m)):m))}u.domain=function(m){return arguments.length?([e,t]=m,n=i(e=+e),a=i(t=+t),s=n===a?0:1/(a-n),u):[e,t]},u.clamp=function(m){return arguments.length?(l=!!m,u):l},u.interpolator=function(m){return arguments.length?(o=m,u):o};function d(m){return function(h){var f,x;return arguments.length?([f,x]=h,o=m(f,x),u):[o(0),o(1)]}}return u.range=d(Un),u.rangeRound=d(Oc),u.unknown=function(m){return arguments.length?(c=m,u):c},function(m){return i=m,n=m(e),a=m(t),s=n===a?0:1/(a-n),u}}function Ir(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Jg(){var e=Mr(Wi()(st));return e.copy=function(){return Ir(e,Jg())},yr.apply(e,arguments)}function Zg(){var e=Ic(Wi()).domain([1,10]);return e.copy=function(){return Ir(e,Zg()).base(e.base())},yr.apply(e,arguments)}function Qg(){var e=Rc(Wi());return e.copy=function(){return Ir(e,Qg()).constant(e.constant())},yr.apply(e,arguments)}function Gc(){var e=Lc(Wi());return e.copy=function(){return Ir(e,Gc()).exponent(e.exponent())},yr.apply(e,arguments)}function U_(){return Gc.apply(null,arguments).exponent(.5)}function ex(){var e=[],t=st;function n(a){if(a!=null&&!isNaN(a=+a))return t((Ea(e,a,1)-1)/(e.length-1))}return n.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Pr),n},n.interpolator=function(a){return arguments.length?(t=a,n):t},n.range=function(){return e.map((a,s)=>t(s/(e.length-1)))},n.quantiles=function(a){return Array.from({length:a+1},(s,i)=>P2(e,i/a))},n.copy=function(){return ex(t).domain(e)},yr.apply(n,arguments)}function Hi(){var e=0,t=.5,n=1,a=1,s,i,o,l,c,u=st,d,m=!1,h;function f(g){return isNaN(g=+g)?h:(g=.5+((g=+d(g))-i)*(a*g<a*i?l:c),u(m?Math.max(0,Math.min(1,g)):g))}f.domain=function(g){return arguments.length?([e,t,n]=g,s=d(e=+e),i=d(t=+t),o=d(n=+n),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),a=i<s?-1:1,f):[e,t,n]},f.clamp=function(g){return arguments.length?(m=!!g,f):m},f.interpolator=function(g){return arguments.length?(u=g,f):u};function x(g){return function(w){var j,y,N;return arguments.length?([j,y,N]=w,u=tS(g,[j,y,N]),f):[u(0),u(.5),u(1)]}}return f.range=x(Un),f.rangeRound=x(Oc),f.unknown=function(g){return arguments.length?(h=g,f):h},function(g){return d=g,s=g(e),i=g(t),o=g(n),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),a=i<s?-1:1,f}}function tx(){var e=Mr(Hi()(st));return e.copy=function(){return Ir(e,tx())},yr.apply(e,arguments)}function rx(){var e=Ic(Hi()).domain([.1,1,10]);return e.copy=function(){return Ir(e,rx()).base(e.base())},yr.apply(e,arguments)}function nx(){var e=Rc(Hi());return e.copy=function(){return Ir(e,nx()).constant(e.constant())},yr.apply(e,arguments)}function Vc(){var e=Lc(Hi());return e.copy=function(){return Ir(e,Vc()).exponent(e.exponent())},yr.apply(e,arguments)}function W_(){return Vc.apply(null,arguments).exponent(.5)}const ua=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Pc,scaleDiverging:tx,scaleDivergingLog:rx,scaleDivergingPow:Vc,scaleDivergingSqrt:W_,scaleDivergingSymlog:nx,scaleIdentity:Ig,scaleImplicit:vl,scaleLinear:Mg,scaleLog:Lg,scaleOrdinal:Ac,scalePoint:O2,scalePow:$c,scaleQuantile:Bg,scaleQuantize:qg,scaleRadial:Fg,scaleSequential:Jg,scaleSequentialLog:Zg,scaleSequentialPow:Gc,scaleSequentialQuantile:ex,scaleSequentialSqrt:U_,scaleSequentialSymlog:Qg,scaleSqrt:SS,scaleSymlog:$g,scaleThreshold:zg,scaleTime:q_,scaleUtc:z_,tickFormat:Dg},Symbol.toStringTag,{value:"Module"}));var Rr=e=>e.chartData,H_=$([Rr],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Ki=(e,t,n,a)=>a?H_(e):Rr(e);function Bn(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(kt(t)&&kt(n))return!0}return!1}function $m(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function K_(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,a]=e,s,i;if(kt(n))s=n;else if(typeof n=="function")return;if(kt(a))i=a;else if(typeof a=="function")return;var o=[s,i];if(Bn(o))return o}}function G_(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var a=e(t,n);if(Bn(a))return $m(a,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,o,l;if(s==="auto")t!=null&&(o=Math.min(...t));else if(te(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&Ru.test(s)){var c=Ru.exec(s);if(c==null||t==null)o=void 0;else{var u=+c[1];o=t[0]-u}}else o=t==null?void 0:t[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(te(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&Lu.test(i)){var d=Lu.exec(i);if(d==null||t==null)l=void 0;else{var m=+d[1];l=t[1]+m}}else l=t==null?void 0:t[1];var h=[o,l];if(Bn(h))return t==null?h:$m(h,t,n)}}}var Wn=1e9,V_={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Xc,Ce=!0,Mt="[DecimalError] ",on=Mt+"Invalid argument: ",Yc=Mt+"Exponent out of range: ",Hn=Math.floor,Gr=Math.pow,Y_=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,vt,We=1e7,ke=7,ax=9007199254740991,Gs=Hn(ax/ke),J={};J.absoluteValue=J.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};J.comparedTo=J.cmp=function(e){var t,n,a,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(a=i.d.length,s=e.d.length,t=0,n=a<s?a:s;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return a===s?0:a>s^i.s<0?1:-1};J.decimalPlaces=J.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*ke;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};J.dividedBy=J.div=function(e){return ur(this,new this.constructor(e))};J.dividedToIntegerBy=J.idiv=function(e){var t=this,n=t.constructor;return je(ur(t,new n(e),0,1),n.precision)};J.equals=J.eq=function(e){return!this.cmp(e)};J.exponent=function(){return Re(this)};J.greaterThan=J.gt=function(e){return this.cmp(e)>0};J.greaterThanOrEqualTo=J.gte=function(e){return this.cmp(e)>=0};J.isInteger=J.isint=function(){return this.e>this.d.length-2};J.isNegative=J.isneg=function(){return this.s<0};J.isPositive=J.ispos=function(){return this.s>0};J.isZero=function(){return this.s===0};J.lessThan=J.lt=function(e){return this.cmp(e)<0};J.lessThanOrEqualTo=J.lte=function(e){return this.cmp(e)<1};J.logarithm=J.log=function(e){var t,n=this,a=n.constructor,s=a.precision,i=s+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(vt))throw Error(Mt+"NaN");if(n.s<1)throw Error(Mt+(n.s?"NaN":"-Infinity"));return n.eq(vt)?new a(0):(Ce=!1,t=ur(_a(n,i),_a(e,i),i),Ce=!0,je(t,s))};J.minus=J.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?ox(t,e):sx(t,(e.s=-e.s,e))};J.modulo=J.mod=function(e){var t,n=this,a=n.constructor,s=a.precision;if(e=new a(e),!e.s)throw Error(Mt+"NaN");return n.s?(Ce=!1,t=ur(n,e,0,1).times(e),Ce=!0,n.minus(t)):je(new a(n),s)};J.naturalExponential=J.exp=function(){return ix(this)};J.naturalLogarithm=J.ln=function(){return _a(this)};J.negated=J.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};J.plus=J.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?sx(t,e):ox(t,(e.s=-e.s,e))};J.precision=J.sd=function(e){var t,n,a,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(on+e);if(t=Re(s)+1,a=s.d.length-1,n=a*ke+1,a=s.d[a],a){for(;a%10==0;a/=10)n--;for(a=s.d[0];a>=10;a/=10)n++}return e&&t>n?t:n};J.squareRoot=J.sqrt=function(){var e,t,n,a,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Mt+"NaN")}for(e=Re(l),Ce=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Xt(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Hn((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new c(t)):a=new c(s.toString()),n=c.precision,s=o=n+3;;)if(i=a,a=i.plus(ur(l,i,o+2)).times(.5),Xt(i.d).slice(0,o)===(t=Xt(a.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(je(i,n+1,0),i.times(i).eq(l)){a=i;break}}else if(t!="9999")break;o+=4}return Ce=!0,je(a,n)};J.times=J.mul=function(e){var t,n,a,s,i,o,l,c,u,d=this,m=d.constructor,h=d.d,f=(e=new m(e)).d;if(!d.s||!e.s)return new m(0);for(e.s*=d.s,n=d.e+e.e,c=h.length,u=f.length,c<u&&(i=h,h=f,f=i,o=c,c=u,u=o),i=[],o=c+u,a=o;a--;)i.push(0);for(a=u;--a>=0;){for(t=0,s=c+a;s>a;)l=i[s]+f[a]*h[s-a-1]+t,i[s--]=l%We|0,t=l/We|0;i[s]=(i[s]+t)%We|0}for(;!i[--o];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,Ce?je(e,m.precision):e};J.toDecimalPlaces=J.todp=function(e,t){var n=this,a=n.constructor;return n=new a(n),e===void 0?n:(Qt(e,0,Wn),t===void 0?t=a.rounding:Qt(t,0,8),je(n,e+Re(n)+1,t))};J.toExponential=function(e,t){var n,a=this,s=a.constructor;return e===void 0?n=mn(a,!0):(Qt(e,0,Wn),t===void 0?t=s.rounding:Qt(t,0,8),a=je(new s(a),e+1,t),n=mn(a,!0,e+1)),n};J.toFixed=function(e,t){var n,a,s=this,i=s.constructor;return e===void 0?mn(s):(Qt(e,0,Wn),t===void 0?t=i.rounding:Qt(t,0,8),a=je(new i(s),e+Re(s)+1,t),n=mn(a.abs(),!1,e+Re(a)+1),s.isneg()&&!s.isZero()?"-"+n:n)};J.toInteger=J.toint=function(){var e=this,t=e.constructor;return je(new t(e),Re(e)+1,t.rounding)};J.toNumber=function(){return+this};J.toPower=J.pow=function(e){var t,n,a,s,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(vt);if(l=new c(l),!l.s){if(e.s<1)throw Error(Mt+"Infinity");return l}if(l.eq(vt))return l;if(a=c.precision,e.eq(vt))return je(l,a);if(t=e.e,n=e.d.length-1,o=t>=n,i=l.s,o){if((n=d<0?-d:d)<=ax){for(s=new c(vt),t=Math.ceil(a/ke+4),Ce=!1;n%2&&(s=s.times(l),Bm(s.d,t)),n=Hn(n/2),n!==0;)l=l.times(l),Bm(l.d,t);return Ce=!0,e.s<0?new c(vt).div(s):je(s,a)}}else if(i<0)throw Error(Mt+"NaN");return i=i<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,Ce=!1,s=e.times(_a(l,a+u)),Ce=!0,s=ix(s),s.s=i,s};J.toPrecision=function(e,t){var n,a,s=this,i=s.constructor;return e===void 0?(n=Re(s),a=mn(s,n<=i.toExpNeg||n>=i.toExpPos)):(Qt(e,1,Wn),t===void 0?t=i.rounding:Qt(t,0,8),s=je(new i(s),e,t),n=Re(s),a=mn(s,e<=n||n<=i.toExpNeg,e)),a};J.toSignificantDigits=J.tosd=function(e,t){var n=this,a=n.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Qt(e,1,Wn),t===void 0?t=a.rounding:Qt(t,0,8)),je(new a(n),e,t)};J.toString=J.valueOf=J.val=J.toJSON=J[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Re(e),n=e.constructor;return mn(e,t<=n.toExpNeg||t>=n.toExpPos)};function sx(e,t){var n,a,s,i,o,l,c,u,d=e.constructor,m=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Ce?je(t,m):t;if(c=e.d,u=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(a=c,i=-i,l=u.length):(a=u,s=o,l=c.length),o=Math.ceil(m/ke),l=o>l?o+1:l+1,i>l&&(i=l,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,a=u,u=c,c=a),n=0;i;)n=(c[--i]=c[i]+u[i]+n)/We|0,c[i]%=We;for(n&&(c.unshift(n),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,Ce?je(t,m):t}function Qt(e,t,n){if(e!==~~e||e<t||e>n)throw Error(on+e)}function Xt(e){var t,n,a,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)a=e[t]+"",n=ke-a.length,n&&(i+=_r(n)),i+=a;o=e[t],a=o+"",n=ke-a.length,n&&(i+=_r(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var ur=function(){function e(a,s){var i,o=0,l=a.length;for(a=a.slice();l--;)i=a[l]*s+o,a[l]=i%We|0,o=i/We|0;return o&&a.unshift(o),a}function t(a,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(a[l]!=s[l]){c=a[l]>s[l]?1:-1;break}return c}function n(a,s,i){for(var o=0;i--;)a[i]-=o,o=a[i]<s[i]?1:0,a[i]=o*We+a[i]-s[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,s,i,o){var l,c,u,d,m,h,f,x,g,w,j,y,N,S,b,v,_,P,O=a.constructor,D=a.s==s.s?1:-1,A=a.d,T=s.d;if(!a.s)return new O(a);if(!s.s)throw Error(Mt+"Division by zero");for(c=a.e-s.e,_=T.length,b=A.length,f=new O(D),x=f.d=[],u=0;T[u]==(A[u]||0);)++u;if(T[u]>(A[u]||0)&&--c,i==null?y=i=O.precision:o?y=i+(Re(a)-Re(s))+1:y=i,y<0)return new O(0);if(y=y/ke+2|0,u=0,_==1)for(d=0,T=T[0],y++;(u<b||d)&&y--;u++)N=d*We+(A[u]||0),x[u]=N/T|0,d=N%T|0;else{for(d=We/(T[0]+1)|0,d>1&&(T=e(T,d),A=e(A,d),_=T.length,b=A.length),S=_,g=A.slice(0,_),w=g.length;w<_;)g[w++]=0;P=T.slice(),P.unshift(0),v=T[0],T[1]>=We/2&&++v;do d=0,l=t(T,g,_,w),l<0?(j=g[0],_!=w&&(j=j*We+(g[1]||0)),d=j/v|0,d>1?(d>=We&&(d=We-1),m=e(T,d),h=m.length,w=g.length,l=t(m,g,h,w),l==1&&(d--,n(m,_<h?P:T,h))):(d==0&&(l=d=1),m=T.slice()),h=m.length,h<w&&m.unshift(0),n(g,m,w),l==-1&&(w=g.length,l=t(T,g,_,w),l<1&&(d++,n(g,_<w?P:T,w))),w=g.length):l===0&&(d++,g=[0]),x[u++]=d,l&&g[0]?g[w++]=A[S]||0:(g=[A[S]],w=1);while((S++<b||g[0]!==void 0)&&y--)}return x[0]||x.shift(),f.e=c,je(f,o?i+Re(f)+1:i)}}();function ix(e,t){var n,a,s,i,o,l,c=0,u=0,d=e.constructor,m=d.precision;if(Re(e)>16)throw Error(Yc+Re(e));if(!e.s)return new d(vt);for(Ce=!1,l=m,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(a=Math.log(Gr(2,u))/Math.LN10*2+5|0,l+=a,n=s=i=new d(vt),d.precision=l;;){if(s=je(s.times(e),l),n=n.times(++c),o=i.plus(ur(s,n,l)),Xt(o.d).slice(0,l)===Xt(i.d).slice(0,l)){for(;u--;)i=je(i.times(i),l);return d.precision=m,t==null?(Ce=!0,je(i,m)):i}i=o}}function Re(e){for(var t=e.e*ke,n=e.d[0];n>=10;n/=10)t++;return t}function Co(e,t,n){if(t>e.LN10.sd())throw Ce=!0,n&&(e.precision=n),Error(Mt+"LN10 precision limit exceeded");return je(new e(e.LN10),t)}function _r(e){for(var t="";e--;)t+="0";return t}function _a(e,t){var n,a,s,i,o,l,c,u,d,m=1,h=10,f=e,x=f.d,g=f.constructor,w=g.precision;if(f.s<1)throw Error(Mt+(f.s?"NaN":"-Infinity"));if(f.eq(vt))return new g(0);if(t==null?(Ce=!1,u=w):u=t,f.eq(10))return t==null&&(Ce=!0),Co(g,u);if(u+=h,g.precision=u,n=Xt(x),a=n.charAt(0),i=Re(f),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)f=f.times(e),n=Xt(f.d),a=n.charAt(0),m++;i=Re(f),a>1?(f=new g("0."+n),i++):f=new g(a+"."+n.slice(1))}else return c=Co(g,u+2,w).times(i+""),f=_a(new g(a+"."+n.slice(1)),u-h).plus(c),g.precision=w,t==null?(Ce=!0,je(f,w)):f;for(l=o=f=ur(f.minus(vt),f.plus(vt),u),d=je(f.times(f),u),s=3;;){if(o=je(o.times(d),u),c=l.plus(ur(o,new g(s),u)),Xt(c.d).slice(0,u)===Xt(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(Co(g,u+2,w).times(i+""))),l=ur(l,new g(m),u),g.precision=w,t==null?(Ce=!0,je(l,w)):l;l=c,s+=2}}function Fm(e,t){var n,a,s;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(n<0&&(n=a),n+=+t.slice(a+1),t=t.substring(0,a)):n<0&&(n=t.length),a=0;t.charCodeAt(a)===48;)++a;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(a,s),t){if(s-=a,n=n-a-1,e.e=Hn(n/ke),e.d=[],a=(n+1)%ke,n<0&&(a+=ke),a<s){for(a&&e.d.push(+t.slice(0,a)),s-=ke;a<s;)e.d.push(+t.slice(a,a+=ke));t=t.slice(a),a=ke-t.length}else a-=s;for(;a--;)t+="0";if(e.d.push(+t),Ce&&(e.e>Gs||e.e<-Gs))throw Error(Yc+n)}else e.s=0,e.e=0,e.d=[0];return e}function je(e,t,n){var a,s,i,o,l,c,u,d,m=e.d;for(o=1,i=m[0];i>=10;i/=10)o++;if(a=t-o,a<0)a+=ke,s=t,u=m[d=0];else{if(d=Math.ceil((a+1)/ke),i=m.length,d>=i)return e;for(u=i=m[d],o=1;i>=10;i/=10)o++;a%=ke,s=a-ke+o}if(n!==void 0&&(i=Gr(10,o-s-1),l=u/i%10|0,c=t<0||m[d+1]!==void 0||u%i,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(a>0?s>0?u/Gr(10,o-s):0:m[d-1])%10&1||n==(e.s<0?8:7))),t<1||!m[0])return c?(i=Re(e),m.length=1,t=t-i-1,m[0]=Gr(10,(ke-t%ke)%ke),e.e=Hn(-t/ke)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(a==0?(m.length=d,i=1,d--):(m.length=d+1,i=Gr(10,ke-a),m[d]=s>0?(u/Gr(10,o-s)%Gr(10,s)|0)*i:0),c)for(;;)if(d==0){(m[0]+=i)==We&&(m[0]=1,++e.e);break}else{if(m[d]+=i,m[d]!=We)break;m[d--]=0,i=1}for(a=m.length;m[--a]===0;)m.pop();if(Ce&&(e.e>Gs||e.e<-Gs))throw Error(Yc+Re(e));return e}function ox(e,t){var n,a,s,i,o,l,c,u,d,m,h=e.constructor,f=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Ce?je(t,f):t;if(c=e.d,m=t.d,a=t.e,u=e.e,c=c.slice(),o=u-a,o){for(d=o<0,d?(n=c,o=-o,l=m.length):(n=m,a=u,l=c.length),s=Math.max(Math.ceil(f/ke),l)+2,o>s&&(o=s,n.length=1),n.reverse(),s=o;s--;)n.push(0);n.reverse()}else{for(s=c.length,l=m.length,d=s<l,d&&(l=s),s=0;s<l;s++)if(c[s]!=m[s]){d=c[s]<m[s];break}o=0}for(d&&(n=c,c=m,m=n,t.s=-t.s),l=c.length,s=m.length-l;s>0;--s)c[l++]=0;for(s=m.length;s>o;){if(c[--s]<m[s]){for(i=s;i&&c[--i]===0;)c[i]=We-1;--c[i],c[s]+=We}c[s]-=m[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--a;return c[0]?(t.d=c,t.e=a,Ce?je(t,f):t):new h(0)}function mn(e,t,n){var a,s=Re(e),i=Xt(e.d),o=i.length;return t?(n&&(a=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+_r(a):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+_r(-s-1)+i,n&&(a=n-o)>0&&(i+=_r(a))):s>=o?(i+=_r(s+1-o),n&&(a=n-s-1)>0&&(i=i+"."+_r(a))):((a=s+1)<o&&(i=i.slice(0,a)+"."+i.slice(a)),n&&(a=n-o)>0&&(s+1===o&&(i+="."),i+=_r(a))),e.s<0?"-"+i:i}function Bm(e,t){if(e.length>t)return e.length=t,!0}function lx(e){var t,n,a;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(on+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return Fm(o,i.toString())}else if(typeof i!="string")throw Error(on+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Y_.test(i))Fm(o,i);else throw Error(on+i)}if(s.prototype=J,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=lx,s.config=s.set=X_,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(n=a[t++])||(e[n]=this[n]);return s.config(e),s}function X_(e){if(!e||typeof e!="object")throw Error(Mt+"Object expected");var t,n,a,s=["precision",1,Wn,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((a=e[n=s[t]])!==void 0)if(Hn(a)===a&&a>=s[t+1]&&a<=s[t+2])this[n]=a;else throw Error(on+n+": "+a);if((a=e[n="LN10"])!==void 0)if(a==Math.LN10)this[n]=new this(a);else throw Error(on+n+": "+a);return this}var Xc=lx(V_);vt=new Xc(1);const xe=Xc;var J_=e=>e,cx={},dx=e=>e===cx,qm=e=>function t(){return arguments.length===0||arguments.length===1&&dx(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},ux=(e,t)=>e===1?t:qm(function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];var i=a.filter(o=>o!==cx).length;return i>=e?t(...a):ux(e-i,qm(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=a.map(d=>dx(d)?l.shift():d);return t(...u,...l)}))}),Gi=e=>ux(e.length,e),Sl=(e,t)=>{for(var n=[],a=e;a<t;++a)n[a-e]=a;return n},Z_=Gi((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),Q_=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(!n.length)return J_;var s=n.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}},_l=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),mx=e=>{var t=null,n=null;return function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return t&&s.every((o,l)=>{var c;return o===((c=t)===null||c===void 0?void 0:c[l])})||(t=s,n=e(...s)),n}};function hx(e){var t;return e===0?t=1:t=Math.floor(new xe(e).abs().log(10).toNumber())+1,t}function fx(e,t,n){for(var a=new xe(e),s=0,i=[];a.lt(t)&&s<1e5;)i.push(a.toNumber()),a=a.add(n),s++;return i}Gi((e,t,n)=>{var a=+e,s=+t;return a+n*(s-a)});Gi((e,t,n)=>{var a=t-+e;return a=a||1/0,(n-e)/a});Gi((e,t,n)=>{var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(n-e)/a))});var px=e=>{var[t,n]=e,[a,s]=[t,n];return t>n&&([a,s]=[n,t]),[a,s]},gx=(e,t,n)=>{if(e.lte(0))return new xe(0);var a=hx(e.toNumber()),s=new xe(10).pow(a),i=e.div(s),o=a!==1?.05:.1,l=new xe(Math.ceil(i.div(o).toNumber())).add(n).mul(o),c=l.mul(s);return t?new xe(c.toNumber()):new xe(Math.ceil(c.toNumber()))},ek=(e,t,n)=>{var a=new xe(1),s=new xe(e);if(!s.isint()&&n){var i=Math.abs(e);i<1?(a=new xe(10).pow(hx(e)-1),s=new xe(Math.floor(s.div(a).toNumber())).mul(a)):i>1&&(s=new xe(Math.floor(e)))}else e===0?s=new xe(Math.floor((t-1)/2)):n||(s=new xe(Math.floor(e)));var o=Math.floor((t-1)/2),l=Q_(Z_(c=>s.add(new xe(c-o).mul(a)).toNumber()),Sl);return l(0,t)},xx=function(t,n,a,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(a-1)))return{step:new xe(0),tickMin:new xe(0),tickMax:new xe(0)};var o=gx(new xe(n).sub(t).div(a-1),s,i),l;t<=0&&n>=0?l=new xe(0):(l=new xe(t).add(n).div(2),l=l.sub(new xe(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),u=Math.ceil(new xe(n).sub(l).div(o).toNumber()),d=c+u+1;return d>a?xx(t,n,a,s,i+1):(d<a&&(u=n>0?u+(a-d):u,c=n>0?c:c+(a-d)),{step:o,tickMin:l.sub(new xe(c).mul(o)),tickMax:l.add(new xe(u).mul(o))})};function tk(e){var[t,n]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(a,2),[o,l]=px([t,n]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...Sl(0,a-1).map(()=>1/0)]:[...Sl(0,a-1).map(()=>-1/0),l];return t>n?_l(c):c}if(o===l)return ek(o,a,s);var{step:u,tickMin:d,tickMax:m}=xx(o,l,i,s,0),h=fx(d,m.add(new xe(.1).mul(u)),u);return t>n?_l(h):h}function rk(e,t){var[n,a]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=px([n,a]);if(i===-1/0||o===1/0)return[n,a];if(i===o)return[i];var l=Math.max(t,2),c=gx(new xe(o).sub(i).div(l-1),s,0),u=[...fx(new xe(i),new xe(o),c),o];return s===!1&&(u=u.map(d=>Math.round(d))),n>a?_l(u):u}var nk=mx(tk),ak=mx(rk),bx=e=>e.rootProps.maxBarSize,sk=e=>e.rootProps.barGap,yx=e=>e.rootProps.barCategoryGap,ik=e=>e.rootProps.barSize,Vi=e=>e.rootProps.stackOffset,Jc=e=>e.options.chartName,Zc=e=>e.rootProps.syncId,vx=e=>e.rootProps.syncMethod,Qc=e=>e.options.eventEmitter,nr={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},bt={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Yi=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},ok={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:nr.angleAxisId,includeHidden:!1,name:void 0,reversed:nr.reversed,scale:nr.scale,tick:nr.tick,tickCount:void 0,ticks:void 0,type:nr.type,unit:void 0},lk={allowDataOverflow:bt.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:bt.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:bt.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:bt.scale,tick:bt.tick,tickCount:bt.tickCount,ticks:void 0,type:bt.type,unit:void 0},ck={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:nr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:nr.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:nr.scale,tick:nr.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},dk={allowDataOverflow:bt.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:bt.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:bt.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:bt.scale,tick:bt.tick,tickCount:bt.tickCount,ticks:void 0,type:"category",unit:void 0},ed=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?ck:ok,td=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?dk:lk,Xi=e=>e.polarOptions,rd=$([xr,br,Ge],SN),jx=$([Xi,rd],(e,t)=>{if(e!=null)return Kt(e.innerRadius,t,0)}),wx=$([Xi,rd],(e,t)=>{if(e!=null)return Kt(e.outerRadius,t,t*.8)}),uk=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},Nx=$([Xi],uk);$([ed,Nx],Yi);var Sx=$([rd,jx,wx],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});$([td,Sx],Yi);var _x=$([he,Xi,jx,wx,xr,br],(e,t,n,a,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||a==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=t;return{cx:Kt(o,s,s/2),cy:Kt(l,i,i/2),innerRadius:n,outerRadius:a,startAngle:c,endAngle:u,clockWise:!1}}}),Le=(e,t)=>t,Ji=(e,t,n)=>n;function nd(e){return e==null?void 0:e.id}var qe=e=>{var t=he(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Kn=e=>e.tooltip.settings.axisId,ze=e=>{var t=qe(e),n=Kn(e);return Ma(e,t,n)};function kx(e,t,n){var{chartData:a=[]}=t,s=n==null?void 0:n.dataKey,i=new Map;return e.forEach(o=>{var l,c=(l=o.data)!==null&&l!==void 0?l:a;if(!(c==null||c.length===0)){var u=nd(o);c.forEach((d,m)=>{var h=s==null?m:String(He(d,s,null)),f=He(d,o.dataKey,0),x;i.has(h)?x=i.get(h):x={},Object.assign(x,{[u]:f}),i.set(h,x)})}}),Array.from(i.values())}function Zi(e){return e.stackId!=null&&e.dataKey!=null}function zm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Vs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zm(Object(n),!0).forEach(function(a){mk(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zm(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function mk(e,t,n){return(t=hk(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hk(e){var t=fk(e,"string");return typeof t=="symbol"?t:t+""}function fk(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kl=[0,"auto"],gt={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},vr=(e,t)=>{var n=e.cartesianAxis.xAxis[t];return n??gt},xt={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:kl,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Ri},Lr=(e,t)=>{var n=e.cartesianAxis.yAxis[t];return n??xt},pk={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},ad=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??pk},pt=(e,t,n)=>{switch(t){case"xAxis":return vr(e,n);case"yAxis":return Lr(e,n);case"zAxis":return ad(e,n);case"angleAxis":return ed(e,n);case"radiusAxis":return td(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},gk=(e,t,n)=>{switch(t){case"xAxis":return vr(e,n);case"yAxis":return Lr(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Ma=(e,t,n)=>{switch(t){case"xAxis":return vr(e,n);case"yAxis":return Lr(e,n);case"angleAxis":return ed(e,n);case"radiusAxis":return td(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Ax=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function Px(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var Qi=e=>e.graphicalItems.cartesianItems,xk=$([Le,Ji],Px),Cx=(e,t,n)=>e.filter(n).filter(a=>(t==null?void 0:t.includeHidden)===!0?!0:!a.hide),Ia=$([Qi,pt,xk],Cx),Ex=$([Ia],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Zi)),Ox=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Tx=$([Ia],Ox),Dx=e=>e.map(t=>t.data).filter(Boolean).flat(1),bk=$([Ia],Dx),Mx=(e,t)=>{var{chartData:n=[],dataStartIndex:a,dataEndIndex:s}=t;return e.length>0?e:n.slice(a,s+1)},sd=$([bk,Ki],Mx),Ix=(e,t,n)=>(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:He(a,t.dataKey)})):n.length>0?n.map(a=>a.dataKey).flatMap(a=>e.map(s=>({value:He(s,a)}))):e.map(a=>({value:a})),eo=$([sd,pt,Ia],Ix);function Rx(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function yn(e){return e.filter(t=>Zt(t)||t instanceof Date).map(Number).filter(t=>Nt(t)===!1)}function yk(e,t,n){return!n||typeof t!="number"||Nt(t)?[]:n.length?yn(n.flatMap(a=>{var s=He(e,a.dataKey),i,o;if(Array.isArray(s)?[i,o]=s:i=o=s,!(!kt(i)||!kt(o)))return[t-i,t+o]})):[]}var vk=$([Ex,Ki,ze],kx),Lx=(e,t,n)=>{var a={},s=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),a);return Object.fromEntries(Object.entries(s).map(i=>{var[o,l]=i,c=l.map(nd);return[o,{stackedData:BN(e,c,n),graphicalItems:l}]}))},Al=$([vk,Ex,Vi],Lx),$x=(e,t,n)=>{var{dataStartIndex:a,dataEndIndex:s}=t;if(n!=="zAxis"){var i=HN(e,a,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},jk=$([Al,Rr,Le],$x),Fx=(e,t,n,a,s)=>n.length>0?e.flatMap(i=>n.flatMap(o=>{var l,c,u=(l=a[o.id])===null||l===void 0?void 0:l.filter(m=>Rx(s,m)),d=He(i,(c=t.dataKey)!==null&&c!==void 0?c:o.dataKey);return{value:d,errorDomain:yk(i,d,u)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(i=>({value:He(i,t.dataKey),errorDomain:[]})):e.map(i=>({value:i,errorDomain:[]})),to=e=>e.errorBars,Bx=(e,t,n)=>e.flatMap(a=>t[a.id]).filter(Boolean).filter(a=>Rx(n,a));$([Tx,to,Le],Bx);var wk=$([sd,pt,Tx,to,Le],Fx);function Nk(e){var{value:t}=e;if(Zt(t)||t instanceof Date)return t}var Um=e=>{var t=e.flatMap(a=>[a.value,a.errorDomain]).flat(1),n=yn(t);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Sk=(e,t,n)=>{var a=e.map(Nk).filter(s=>s!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&Cf(a))?Ng(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))},id=e=>{var t;if(e==null||!("domain"in e))return kl;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=yn(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:kl},Ys=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var s=n.filter(Boolean);if(s.length!==0){var i=s.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},qx=e=>e.referenceElements.dots,Gn=(e,t,n)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>t==="xAxis"?a.xAxisId===n:a.yAxisId===n),_k=$([qx,Le,Ji],Gn),zx=e=>e.referenceElements.areas,kk=$([zx,Le,Ji],Gn),Ux=e=>e.referenceElements.lines,Ak=$([Ux,Le,Ji],Gn),Wx=(e,t)=>{var n=yn(e.map(a=>t==="xAxis"?a.x:a.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Pk=$(_k,Le,Wx),Hx=(e,t)=>{var n=yn(e.flatMap(a=>[t==="xAxis"?a.x1:a.y1,t==="xAxis"?a.x2:a.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Ck=$([kk,Le],Hx),Kx=(e,t)=>{var n=yn(e.map(a=>t==="xAxis"?a.x:a.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Ek=$(Ak,Le,Kx),Ok=$(Pk,Ek,Ck,(e,t,n)=>Ys(e,n,t)),Tk=$([pt],id),Gx=(e,t,n,a,s,i,o)=>{var l=K_(t,e.allowDataOverflow);if(l!=null)return l;var c=i==="vertical"&&o==="xAxis"||i==="horizontal"&&o==="yAxis",u=c?Ys(n,s,Um(a)):Ys(s,Um(a));return G_(t,u,e.allowDataOverflow)},Dk=$([pt,Tk,jk,wk,Ok,he,Le],Gx),Mk=[0,1],Vx=(e,t,n,a,s,i,o)=>{if(!((e==null||n==null||n.length===0)&&o===void 0)){var{dataKey:l,type:c}=e,u=Dr(t,i);return u&&l==null?Ng(0,n.length):c==="category"?Sk(a,e,u):s==="expand"?Mk:o}},od=$([pt,he,sd,eo,Vi,Le,Dk],Vx),Yx=(e,t,n,a,s)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":o==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!n)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(Pa(i));return l in ua?l:"point"}}},Ra=$([pt,he,Ax,Jc,Le],Yx);function Ik(e){if(e!=null){if(e in ua)return ua[e]();var t="scale".concat(Pa(e));if(t in ua)return ua[t]()}}function ld(e,t,n,a){if(!(n==null||a==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(a);var s=Ik(t);if(s!=null){var i=s.domain(n).range(a);return IN(i),i}}}var Xx=(e,t,n)=>{var a=id(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&Bn(e))return nk(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Bn(e))return ak(e,t.tickCount,t.allowDecimals)}},cd=$([od,Ma,Ra],Xx),Jx=(e,t,n,a)=>{if(a!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Bn(t)&&Array.isArray(n)&&n.length>0){var s=t[0],i=n[0],o=t[1],l=n[n.length-1];return[Math.min(s,i),Math.max(o,l)]}return t},Rk=$([pt,od,cd,Le],Jx),Lk=$(eo,pt,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,a=Array.from(yn(e.map(l=>l.value))).sort((l,c)=>l-c);if(a.length<2)return 1/0;var s=a[a.length-1]-a[0];if(s===0)return 1/0;for(var i=0;i<a.length-1;i++){var o=a[i+1]-a[i];n=Math.min(n,o)}return n/s}}),Zx=$(Lk,he,yx,Ge,(e,t,n,a)=>a,(e,t,n,a,s)=>{if(!kt(e))return 0;var i=t==="vertical"?a.height:a.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var o=Kt(n,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),$k=(e,t)=>{var n=vr(e,t);return n==null||typeof n.padding!="string"?0:Zx(e,"xAxis",t,n.padding)},Fk=(e,t)=>{var n=Lr(e,t);return n==null||typeof n.padding!="string"?0:Zx(e,"yAxis",t,n.padding)},Bk=$(vr,$k,(e,t)=>{var n,a;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((n=s.left)!==null&&n!==void 0?n:0)+t,right:((a=s.right)!==null&&a!==void 0?a:0)+t}}),qk=$(Lr,Fk,(e,t)=>{var n,a;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((n=s.top)!==null&&n!==void 0?n:0)+t,bottom:((a=s.bottom)!==null&&a!==void 0?a:0)+t}}),zk=$([Ge,Bk,$i,Li,(e,t,n)=>n],(e,t,n,a,s)=>{var{padding:i}=a;return s?[i.left,n.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),Uk=$([Ge,he,qk,$i,Li,(e,t,n)=>n],(e,t,n,a,s,i)=>{var{padding:o}=s;return i?[a.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),La=(e,t,n,a)=>{var s;switch(t){case"xAxis":return zk(e,n,a);case"yAxis":return Uk(e,n,a);case"zAxis":return(s=ad(e,n))===null||s===void 0?void 0:s.range;case"angleAxis":return Nx(e);case"radiusAxis":return Sx(e,n);default:return}},Qx=$([pt,La],Yi),Vn=$([pt,Ra,Rk,Qx],ld);$([Ia,to,Le],Bx);function e0(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var ro=(e,t)=>t,no=(e,t,n)=>n,Wk=$(wc,ro,no,(e,t,n)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===n).sort(e0)),Hk=$(Nc,ro,no,(e,t,n)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===n).sort(e0)),t0=(e,t)=>({width:e.width,height:t.height}),Kk=(e,t)=>{var n=typeof t.width=="number"?t.width:Ri;return{width:n,height:e.height}},r0=$(Ge,vr,t0),Gk=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},Vk=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},Yk=$(br,Ge,Wk,ro,no,(e,t,n,a,s)=>{var i={},o;return n.forEach(l=>{var c=t0(t,l);o==null&&(o=Gk(t,a,e));var u=a==="top"&&!s||a==="bottom"&&s;i[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),i}),Xk=$(xr,Ge,Hk,ro,no,(e,t,n,a,s)=>{var i={},o;return n.forEach(l=>{var c=Kk(t,l);o==null&&(o=Vk(t,a,e));var u=a==="left"&&!s||a==="right"&&s;i[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),i}),Jk=(e,t)=>{var n=Ge(e),a=vr(e,t);if(a!=null){var s=Yk(e,a.orientation,a.mirror),i=s[t];return i==null?{x:n.left,y:0}:{x:n.left,y:i}}},Zk=(e,t)=>{var n=Ge(e),a=Lr(e,t);if(a!=null){var s=Xk(e,a.orientation,a.mirror),i=s[t];return i==null?{x:0,y:n.top}:{x:i,y:n.top}}},n0=$(Ge,Lr,(e,t)=>{var n=typeof t.width=="number"?t.width:Ri;return{width:n,height:e.height}}),Wm=(e,t,n)=>{switch(t){case"xAxis":return r0(e,n).width;case"yAxis":return n0(e,n).height;default:return}},a0=(e,t,n,a)=>{if(n!=null){var{allowDuplicatedCategory:s,type:i,dataKey:o}=n,l=Dr(e,a),c=t.map(u=>u.value);if(o&&l&&i==="category"&&s&&Cf(c))return c}},dd=$([he,eo,pt,Le],a0),s0=(e,t,n,a)=>{if(!(n==null||n.dataKey==null)){var{type:s,scale:i}=n,o=Dr(e,a);if(o&&(s==="number"||i!=="auto"))return t.map(l=>l.value)}},ud=$([he,eo,Ma,Le],s0),Hm=$([he,gk,Ra,Vn,dd,ud,La,cd,Le],(e,t,n,a,s,i,o,l,c)=>{if(t==null)return null;var u=Dr(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:s,isCategorical:u,niceTicks:l,range:o,realScaleType:n,scale:a}}),Qk=(e,t,n,a,s,i,o,l,c)=>{if(!(t==null||a==null)){var u=Dr(e,c),{type:d,ticks:m,tickCount:h}=t,f=n==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,x=d==="category"&&a.bandwidth?a.bandwidth()/f:0;x=c==="angleAxis"&&i!=null&&i.length>=2?mt(i[0]-i[1])*2*x:x;var g=m||s;if(g){var w=g.map((j,y)=>{var N=o?o.indexOf(j):j;return{index:y,coordinate:a(N)+x,value:j,offset:x}});return w.filter(j=>!Nt(j.coordinate))}return u&&l?l.map((j,y)=>({coordinate:a(j)+x,value:j,index:y,offset:x})):a.ticks?a.ticks(h).map(j=>({coordinate:a(j)+x,value:j,offset:x})):a.domain().map((j,y)=>({coordinate:a(j)+x,value:o?o[j]:j,index:y,offset:x}))}},i0=$([he,Ma,Ra,Vn,cd,La,dd,ud,Le],Qk),eA=(e,t,n,a,s,i,o)=>{if(!(t==null||n==null||a==null||a[0]===a[1])){var l=Dr(e,o),{tickCount:c}=t,u=0;return u=o==="angleAxis"&&(a==null?void 0:a.length)>=2?mt(a[0]-a[1])*2*u:u,l&&i?i.map((d,m)=>({coordinate:n(d)+u,value:d,index:m,offset:u})):n.ticks?n.ticks(c).map(d=>({coordinate:n(d)+u,value:d,offset:u})):n.domain().map((d,m)=>({coordinate:n(d)+u,value:s?s[d]:d,index:m,offset:u}))}},Or=$([he,Ma,Vn,La,dd,ud,Le],eA),Tr=$(pt,Vn,(e,t)=>{if(!(e==null||t==null))return Vs(Vs({},e),{},{scale:t})}),tA=$([pt,Ra,od,Qx],ld);$((e,t,n)=>ad(e,n),tA,(e,t)=>{if(!(e==null||t==null))return Vs(Vs({},e),{},{scale:t})});var rA=$([he,wc,Nc],(e,t,n)=>{switch(e){case"horizontal":return t.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),o0=e=>e.options.defaultTooltipEventType,l0=e=>e.options.validateTooltipEventTypes;function c0(e,t,n){if(e==null)return t;var a=e?"axis":"item";return n==null?t:n.includes(a)?a:t}function md(e,t){var n=o0(e),a=l0(e);return c0(t,n,a)}function nA(e){return ne(t=>md(t,e))}var d0=(e,t)=>{var n,a=Number(t);if(!(Nt(a)||t==null))return a>=0?e==null||(n=e[a])===null||n===void 0?void 0:n.value:void 0},aA=e=>e.tooltip.settings,kr={active:!1,index:null,dataKey:void 0,coordinate:void 0},sA={itemInteraction:{click:kr,hover:kr},axisInteraction:{click:kr,hover:kr},keyboardInteraction:kr,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},u0=At({name:"tooltip",initialState:sA,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=dr(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:iA,removeTooltipEntrySettings:oA,setTooltipSettingsState:lA,setActiveMouseOverItemIndex:m0,mouseLeaveItem:cA,mouseLeaveChart:h0,setActiveClickItemIndex:dA,setMouseOverAxisIndex:f0,setMouseClickAxisIndex:uA,setSyncInteraction:Pl,setKeyboardInteraction:Cl}=u0.actions,mA=u0.reducer;function Km(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function ss(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Km(Object(n),!0).forEach(function(a){hA(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Km(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function hA(e,t,n){return(t=fA(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fA(e){var t=pA(e,"string");return typeof t=="symbol"?t:t+""}function pA(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gA(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function xA(e){return e.index!=null}var p0=(e,t,n,a)=>{if(t==null)return kr;var s=gA(e,t,n);if(s==null)return kr;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(xA(s)){if(i)return ss(ss({},s),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a};return ss(ss({},kr),{},{coordinate:s.coordinate})},hd=(e,t)=>{var n=e==null?void 0:e.index;if(n==null)return null;var a=Number(n);if(!kt(a))return n;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(a,i)))},g0=(e,t,n,a,s,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,i);if(u!=null)return u;var d=s==null?void 0:s[Number(i)];if(d)switch(n){case"horizontal":return{x:d.coordinate,y:(a.top+t)/2};default:return{x:(a.left+e)/2,y:d.coordinate}}}},x0=(e,t,n,a)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return n==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&a!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===s})},$a=e=>e.options.tooltipPayloadSearcher,Yn=e=>e.tooltip;function Gm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Vm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gm(Object(n),!0).forEach(function(a){bA(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gm(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function bA(e,t,n){return(t=yA(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yA(e){var t=vA(e,"string");return typeof t=="symbol"?t:t+""}function vA(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jA(e,t){return e??t}var b0=(e,t,n,a,s,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=n,m=[];return e.reduce((h,f)=>{var x,{dataDefinedOnItem:g,settings:w}=f,j=jA(g,l),y=Array.isArray(j)?Yp(j,u,d):j,N=(x=w==null?void 0:w.dataKey)!==null&&x!==void 0?x:a==null?void 0:a.dataKey,S=w==null?void 0:w.nameKey,b;if(a!=null&&a.dataKey&&Array.isArray(y)&&!Array.isArray(y[0])&&o==="axis"?b=Ef(y,a.dataKey,s):b=i(y,t,c,S),Array.isArray(b))b.forEach(_=>{var P=Vm(Vm({},w),{},{name:_.name,unit:_.unit,color:void 0,fill:void 0});h.push($u({tooltipEntrySettings:P,dataKey:_.dataKey,payload:_.payload,value:He(_.payload,_.dataKey),name:_.name}))});else{var v;h.push($u({tooltipEntrySettings:w,dataKey:N,payload:b,value:He(b,N),name:(v=He(b,S))!==null&&v!==void 0?v:w==null?void 0:w.name}))}return h},m)}},fd=$([ze,he,Ax,Jc,qe],Yx),wA=$([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),NA=$([qe,Kn],Px),Fa=$([wA,ze,NA],Cx),SA=$([Fa],e=>e.filter(Zi)),_A=$([Fa],Dx),Xn=$([_A,Rr],Mx),kA=$([SA,Rr,ze],kx),pd=$([Xn,ze,Fa],Ix),AA=$([ze],id),PA=$([Fa],e=>e.filter(Zi)),CA=$([kA,PA,Vi],Lx),EA=$([CA,Rr,qe],$x),OA=$([Fa],Ox),TA=$([Xn,ze,OA,to,qe],Fx),DA=$([qx,qe,Kn],Gn),MA=$([DA,qe],Wx),IA=$([zx,qe,Kn],Gn),RA=$([IA,qe],Hx),LA=$([Ux,qe,Kn],Gn),$A=$([LA,qe],Kx),FA=$([MA,$A,RA],Ys),BA=$([ze,AA,EA,TA,FA,he,qe],Gx),y0=$([ze,he,Xn,pd,Vi,qe,BA],Vx),qA=$([y0,ze,fd],Xx),zA=$([ze,y0,qA,qe],Jx),v0=e=>{var t=qe(e),n=Kn(e),a=!1;return La(e,t,n,a)},j0=$([ze,v0],Yi),w0=$([ze,fd,zA,j0],ld),UA=$([he,pd,ze,qe],a0),WA=$([he,pd,ze,qe],s0),HA=(e,t,n,a,s,i,o,l)=>{if(t){var{type:c}=t,u=Dr(e,l);if(a){var d=n==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,m=c==="category"&&a.bandwidth?a.bandwidth()/d:0;return m=l==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?mt(s[0]-s[1])*2*m:m,u&&o?o.map((h,f)=>({coordinate:a(h)+m,value:h,index:f,offset:m})):a.domain().map((h,f)=>({coordinate:a(h)+m,value:i?i[h]:h,index:f,offset:m}))}}},jr=$([he,ze,fd,w0,v0,UA,WA,qe],HA),gd=$([o0,l0,aA],(e,t,n)=>c0(n.shared,e,t)),N0=e=>e.tooltip.settings.trigger,xd=e=>e.tooltip.settings.defaultIndex,ao=$([Yn,gd,N0,xd],p0),hn=$([ao,Xn],hd),S0=$([jr,hn],d0),_0=$([ao],e=>{if(e)return e.dataKey}),k0=$([Yn,gd,N0,xd],x0),KA=$([xr,br,he,Ge,jr,xd,k0,$a],g0),GA=$([ao,KA],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),VA=$([ao],e=>e.active),YA=$([k0,hn,Rr,ze,S0,$a,gd],b0),XA=$([YA],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function Ym(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Xm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ym(Object(n),!0).forEach(function(a){JA(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ym(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function JA(e,t,n){return(t=ZA(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZA(e){var t=QA(e,"string");return typeof t=="symbol"?t:t+""}function QA(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eP=()=>ne(ze),tP=()=>{var e=eP(),t=ne(jr),n=ne(w0);return ya(Xm(Xm({},e),{},{scale:n}),t)},rP=()=>ne(Jc),bd=(e,t)=>t,A0=(e,t,n)=>n,yd=(e,t,n,a)=>a,nP=$(jr,e=>Pi(e,t=>t.coordinate)),vd=$([Yn,bd,A0,yd],p0),P0=$([vd,Xn],hd),aP=(e,t,n)=>{if(t!=null){var a=Yn(e);return t==="axis"?n==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:n==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},C0=$([Yn,bd,A0,yd],x0),Xs=$([xr,br,he,Ge,jr,yd,C0,$a],g0),sP=$([vd,Xs],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),E0=$(jr,P0,d0),iP=$([C0,P0,Rr,ze,E0,$a,bd],b0),oP=$([vd],e=>({isActive:e.active,activeIndex:e.index})),lP=(e,t,n,a,s,i,o,l)=>{if(!(!e||!t||!a||!s||!i)){var c=KN(e.chartX,e.chartY,t,n,l);if(c){var u=VN(c,t),d=DN(u,o,i,a,s),m=GN(t,i,d,c);return{activeIndex:String(d),activeCoordinate:m}}}};function El(){return El=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},El.apply(null,arguments)}function Jm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function is(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Jm(Object(n),!0).forEach(function(a){cP(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jm(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function cP(e,t,n){return(t=dP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dP(e){var t=uP(e,"string");return typeof t=="symbol"?t:t+""}function uP(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mP(e){var{coordinate:t,payload:n,index:a,offset:s,tooltipAxisBandSize:i,layout:o,cursor:l,tooltipEventType:c,chartName:u}=e,d=t,m=n,h=a;if(!l||!d||u!=="ScatterChart"&&c!=="axis")return null;var f,x;if(u==="ScatterChart")f=d,x=I1;else if(u==="BarChart")f=R1(o,d,s,i),x=gg;else if(o==="radial"){var{cx:g,cy:w,radius:j,startAngle:y,endAngle:N}=xg(d);f={cx:g,cy:w,startAngle:y,endAngle:N,innerRadius:j,outerRadius:j},x=yg}else f={points:p2(o,d,s)},x=sg;var S=typeof l=="object"&&"className"in l?l.className:void 0,b=is(is(is(is({stroke:"#ccc",pointerEvents:"none"},s),f),Me(l,!1)),{},{payload:m,payloadIndex:h,className:be("recharts-tooltip-cursor",S)});return p.isValidElement(l)?p.cloneElement(l,b):p.createElement(x,b)}function hP(e){var t=tP(),n=eg(),a=Fi(),s=rP();return p.createElement(mP,El({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:a,tooltipAxisBandSize:t,chartName:s}))}var O0=p.createContext(null),fP=()=>p.useContext(O0),T0={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,m,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var f=new s(d,m||c,h),x=n?n+u:u;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],f]:c._events[x].push(f):(c._events[x]=f,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new a:delete c._events[u]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,m;if(this._eventsCount===0)return u;for(m in d=this._events)t.call(d,m)&&u.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=n?n+u:u,m=this._events[d];if(!m)return[];if(m.fn)return[m.fn];for(var h=0,f=m.length,x=new Array(f);h<f;h++)x[h]=m[h].fn;return x},l.prototype.listenerCount=function(u){var d=n?n+u:u,m=this._events[d];return m?m.fn?1:m.length:0},l.prototype.emit=function(u,d,m,h,f,x){var g=n?n+u:u;if(!this._events[g])return!1;var w=this._events[g],j=arguments.length,y,N;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),j){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,d),!0;case 3:return w.fn.call(w.context,d,m),!0;case 4:return w.fn.call(w.context,d,m,h),!0;case 5:return w.fn.call(w.context,d,m,h,f),!0;case 6:return w.fn.call(w.context,d,m,h,f,x),!0}for(N=1,y=new Array(j-1);N<j;N++)y[N-1]=arguments[N];w.fn.apply(w.context,y)}else{var S=w.length,b;for(N=0;N<S;N++)switch(w[N].once&&this.removeListener(u,w[N].fn,void 0,!0),j){case 1:w[N].fn.call(w[N].context);break;case 2:w[N].fn.call(w[N].context,d);break;case 3:w[N].fn.call(w[N].context,d,m);break;case 4:w[N].fn.call(w[N].context,d,m,h);break;default:if(!y)for(b=1,y=new Array(j-1);b<j;b++)y[b-1]=arguments[b];w[N].fn.apply(w[N].context,y)}}return!0},l.prototype.on=function(u,d,m){return i(this,u,d,m,!1)},l.prototype.once=function(u,d,m){return i(this,u,d,m,!0)},l.prototype.removeListener=function(u,d,m,h){var f=n?n+u:u;if(!this._events[f])return this;if(!d)return o(this,f),this;var x=this._events[f];if(x.fn)x.fn===d&&(!h||x.once)&&(!m||x.context===m)&&o(this,f);else{for(var g=0,w=[],j=x.length;g<j;g++)(x[g].fn!==d||h&&!x[g].once||m&&x[g].context!==m)&&w.push(x[g]);w.length?this._events[f]=w.length===1?w[0]:w:o(this,f)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&o(this,d)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(T0);var pP=T0.exports;const gP=gr(pP);var ka=new gP,Ol="recharts.syncEvent.tooltip",Zm="recharts.syncEvent.brush";function D0(e,t){if(t){var n=Number.parseInt(t,10);if(!Nt(n))return e==null?void 0:e[n]}}var xP={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},M0=At({name:"options",initialState:xP,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),bP=M0.reducer,{createEventEmitter:yP}=M0.actions;function vP(e){return e.tooltip.syncInteraction}var jP={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},I0=At({name:"chartData",initialState:jP,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:a}=t.payload;n!=null&&(e.dataStartIndex=n),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:Qm,setDataStartEndIndexes:wP,setComputedData:zM}=I0.actions,NP=I0.reducer,R0=()=>{};function SP(){var e=ne(Zc),t=ne(Qc),n=Ke(),a=ne(vx),s=ne(jr),i=Fi(),o=Sc(),l=ne(c=>c.rootProps.className);p.useEffect(()=>{if(e==null)return R0;var c=(u,d,m)=>{if(t!==m&&e===u){if(a==="index"){n(d);return}if(s!=null){var h;if(typeof a=="function"){var f={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},x=a(s,f);h=s[x]}else a==="value"&&(h=s.find(v=>String(v.value)===d.payload.label));var{coordinate:g}=d.payload;if(h==null||d.payload.active===!1||g==null||o==null){n(Pl({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:w,y:j}=g,y=Math.min(w,o.x+o.width),N=Math.min(j,o.y+o.height),S={x:i==="horizontal"?h.coordinate:y,y:i==="horizontal"?N:h.coordinate},b=Pl({active:d.payload.active,coordinate:S,dataKey:d.payload.dataKey,index:String(h.index),label:d.payload.label});n(b)}}};return ka.on(Ol,c),()=>{ka.off(Ol,c)}},[l,n,t,e,a,s,i,o])}function _P(){var e=ne(Zc),t=ne(Qc),n=Ke();p.useEffect(()=>{if(e==null)return R0;var a=(s,i,o)=>{t!==o&&e===s&&n(wP(i))};return ka.on(Zm,a),()=>{ka.off(Zm,a)}},[n,t,e])}function kP(){var e=Ke();p.useEffect(()=>{e(yP())},[e]),SP(),_P()}function AP(e,t,n,a,s,i){var o=ne(h=>aP(h,e,t)),l=ne(Qc),c=ne(Zc),u=ne(vx),d=ne(vP),m=d==null?void 0:d.active;p.useEffect(()=>{if(!m&&c!=null&&l!=null){var h=Pl({active:i,coordinate:n,dataKey:o,index:s,label:typeof a=="number"?String(a):a});ka.emit(Ol,c,h,l)}},[m,n,o,s,a,l,c,u,i])}function eh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function th(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eh(Object(n),!0).forEach(function(a){PP(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eh(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function PP(e,t,n){return(t=CP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CP(e){var t=EP(e,"string");return typeof t=="symbol"?t:t+""}function EP(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OP(e){return e.dataKey}function TP(e,t){return p.isValidElement(e)?p.cloneElement(e,t):typeof e=="function"?p.createElement(e,t):p.createElement(h1,t)}var rh=[],DP={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!zn.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function en(e){var t=er(e,DP),{active:n,allowEscapeViewBox:a,animationDuration:s,animationEasing:i,content:o,filterNull:l,isAnimationActive:c,offset:u,payloadUniqBy:d,position:m,reverseDirection:h,useTranslate3d:f,wrapperStyle:x,cursor:g,shared:w,trigger:j,defaultIndex:y,portal:N,axisId:S}=t,b=Ke(),v=typeof y=="number"?String(y):y;p.useEffect(()=>{b(lA({shared:w,trigger:j,axisId:S,active:n,defaultIndex:v}))},[b,w,j,S,n,v]);var _=Sc(),P=ag(),O=nA(w),{activeIndex:D,isActive:A}=ne(Z=>oP(Z,O,j,v)),T=ne(Z=>iP(Z,O,j,v)),L=ne(Z=>E0(Z,O,j,v)),C=ne(Z=>sP(Z,O,j,v)),F=T,R=fP(),K=n??A,[M,I]=ww([F,K]),H=O==="axis"?L:void 0;AP(O,j,C,H,D,K);var Y=N??R;if(Y==null)return null;var z=F??rh;K||(z=rh),l&&z.length&&(z=Bj(F.filter(Z=>Z.value!=null&&(Z.hide!==!0||t.includeHidden)),d,OP));var G=z.length>0,V=p.createElement(v1,{allowEscapeViewBox:a,animationDuration:s,animationEasing:i,isAnimationActive:c,active:K,coordinate:C,hasPayload:G,offset:u,position:m,reverseDirection:h,useTranslate3d:f,viewBox:_,wrapperStyle:x,lastBoundingBox:M,innerRef:I,hasPortalFromProps:!!N},TP(o,th(th({},t),{},{payload:z,label:H,active:K,coordinate:C,accessibilityLayer:P})));return p.createElement(p.Fragment,null,yf.createPortal(V,Y),K&&p.createElement(hP,{cursor:g,tooltipEventType:O,coordinate:C,payload:F,index:D}))}var L0={},$0={},F0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a,{signal:s,edges:i}={}){let o,l=null;const c=i!=null&&i.includes("leading"),u=i==null||i.includes("trailing"),d=()=>{l!==null&&(n.apply(o,l),o=void 0,l=null)},m=()=>{u&&d(),g()};let h=null;const f=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,m()},a)},x=()=>{h!==null&&(clearTimeout(h),h=null)},g=()=>{x(),o=void 0,l=null},w=()=>{d()},j=function(...y){if(s!=null&&s.aborted)return;o=this,l=y;const N=h==null;f(),c&&N&&d()};return j.schedule=f,j.cancel=g,j.flush=w,s==null||s.addEventListener("abort",g,{once:!0}),j}e.debounce=t})(F0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=F0;function n(a,s=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:l=!0,maxWait:c}=i,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let d,m=null;const h=t.debounce(function(...g){d=a.apply(this,g),m=null},s,{edges:u}),f=function(...g){return c!=null&&(m===null&&(m=Date.now()),Date.now()-m>=c)?(d=a.apply(this,g),m=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,g),d)},x=()=>(h.flush(),d);return f.cancel=h.cancel,f.flush=x,f}e.debounce=n})($0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$0;function n(a,s=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(a,s,{leading:o,maxWait:s,trailing:l})}e.throttle=n})(L0);var MP=L0.throttle;const IP=gr(MP);var ha=function(t,n){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i]};function nh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Eo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nh(Object(n),!0).forEach(function(a){RP(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nh(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function RP(e,t,n){return(t=LP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LP(e){var t=$P(e,"string");return typeof t=="symbol"?t:t+""}function $P(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ar=p.forwardRef((e,t)=>{var{aspect:n,initialDimension:a={width:-1,height:-1},width:s="100%",height:i="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:m,className:h,onResize:f,style:x={}}=e,g=p.useRef(null),w=p.useRef();w.current=f,p.useImperativeHandle(t,()=>g.current);var[j,y]=p.useState({containerWidth:a.width,containerHeight:a.height}),N=p.useCallback((b,v)=>{y(_=>{var P=Math.round(b),O=Math.round(v);return _.containerWidth===P&&_.containerHeight===O?_:{containerWidth:P,containerHeight:O}})},[]);p.useEffect(()=>{var b=O=>{var D,{width:A,height:T}=O[0].contentRect;N(A,T),(D=w.current)===null||D===void 0||D.call(w,A,T)};d>0&&(b=IP(b,d,{trailing:!0,leading:!1}));var v=new ResizeObserver(b),{width:_,height:P}=g.current.getBoundingClientRect();return N(_,P),v.observe(g.current),()=>{v.disconnect()}},[N,d]);var S=p.useMemo(()=>{var{containerWidth:b,containerHeight:v}=j;if(b<0||v<0)return null;ha(Xr(s)||Xr(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,i),ha(!n||n>0,"The aspect(%s) must be greater than zero.",n);var _=Xr(s)?b:s,P=Xr(i)?v:i;return n&&n>0&&(_?P=_/n:P&&(_=P*n),c&&P>c&&(P=c)),ha(_>0||P>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,_,P,s,i,o,l,n),p.Children.map(u,O=>p.cloneElement(O,{width:_,height:P,style:Eo({width:_,height:P},O.props.style)}))},[n,u,i,c,l,o,j,s]);return p.createElement("div",{id:m?"".concat(m):void 0,className:be("recharts-responsive-container",h),style:Eo(Eo({},x),{},{width:s,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:g},p.createElement("div",{style:{width:0,height:0,overflow:"visible"}},S))}),B0=e=>null;B0.displayName="Cell";function FP(e,t,n){return(t=BP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BP(e){var t=qP(e,"string");return typeof t=="symbol"?t:t+""}function qP(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class zP{constructor(t){FP(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var a=this.cache.keys().next().value;this.cache.delete(a)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function ah(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function UP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ah(Object(n),!0).forEach(function(a){WP(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ah(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function WP(e,t,n){return(t=HP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HP(e){var t=KP(e,"string");return typeof t=="symbol"?t:t+""}function KP(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GP={cacheSize:2e3,enableCache:!0},q0=UP({},GP),sh=new zP(q0.cacheSize),VP={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},ih="recharts_measurement_span";function YP(e,t){var n=t.fontSize||"",a=t.fontFamily||"",s=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(i,"|").concat(o,"|").concat(l)}var oh=(e,t)=>{try{var n=document.getElementById(ih);n||(n=document.createElement("span"),n.setAttribute("id",ih),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,VP,t),n.textContent="".concat(e);var a=n.getBoundingClientRect();return{width:a.width,height:a.height}}catch{return{width:0,height:0}}},fa=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||zn.isSsr)return{width:0,height:0};if(!q0.enableCache)return oh(t,n);var a=YP(t,n),s=sh.get(a);if(s)return s;var i=oh(t,n);return sh.set(a,i),i},lh=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ch=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,XP=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,JP=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,z0={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},ZP=Object.keys(z0),Cn="NaN";function QP(e,t){return e*z0[t]}class ct{static parse(t){var n,[,a,s]=(n=JP.exec(t))!==null&&n!==void 0?n:[];return new ct(parseFloat(a),s??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,Nt(t)&&(this.unit=""),n!==""&&!XP.test(n)&&(this.num=NaN,this.unit=""),ZP.includes(n)&&(this.num=QP(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new ct(NaN,""):new ct(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ct(NaN,""):new ct(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ct(NaN,""):new ct(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ct(NaN,""):new ct(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Nt(this.num)}}function U0(e){if(e.includes(Cn))return Cn;for(var t=e;t.includes("*")||t.includes("/");){var n,[,a,s,i]=(n=lh.exec(t))!==null&&n!==void 0?n:[],o=ct.parse(a??""),l=ct.parse(i??""),c=s==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return Cn;t=t.replace(lh,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,m,h]=(u=ch.exec(t))!==null&&u!==void 0?u:[],f=ct.parse(d??""),x=ct.parse(h??""),g=m==="+"?f.add(x):f.subtract(x);if(g.isNaN())return Cn;t=t.replace(ch,g.toString())}return t}var dh=/\(([^()]*)\)/;function eC(e){for(var t=e,n;(n=dh.exec(t))!=null;){var[,a]=n;t=t.replace(dh,U0(a))}return t}function tC(e){var t=e.replace(/\s+/g,"");return t=eC(t),t=U0(t),t}function rC(e){try{return tC(e)}catch{return Cn}}function Oo(e){var t=rC(e.slice(5,-1));return t===Cn?"":t}var nC=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],aC=["dx","dy","angle","className","breakAll"];function Tl(){return Tl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Tl.apply(null,arguments)}function uh(e,t){if(e==null)return{};var n,a,s=sC(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function sC(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var W0=/[ \f\n\r\t\v\u2028\u2029]+/,H0=e=>{var{children:t,breakAll:n,style:a}=e;try{var s=[];Pe(t)||(n?s=t.toString().split(""):s=t.toString().split(W0));var i=s.map(l=>({word:l,width:fa(l,a).width})),o=n?0:fa(" ",a).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},iC=(e,t,n,a,s)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,u=te(i),d=o,m=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return A.reduce((T,L)=>{var{word:C,width:F}=L,R=T[T.length-1];if(R&&(a==null||s||R.width+F+n<Number(a)))R.words.push(C),R.width+=F+n;else{var K={words:[C],width:F};T.push(K)}return T},[])},h=m(t),f=D=>D.reduce((A,T)=>A.width>T.width?A:T);if(!u||s)return h;var x=h.length>i||f(h).width>Number(a);if(!x)return h;for(var g="…",w=D=>{var A=d.slice(0,D),T=H0({breakAll:c,style:l,children:A+g}).wordsWithComputedWidth,L=m(T),C=L.length>i||f(L).width>Number(a);return[C,L]},j=0,y=d.length-1,N=0,S;j<=y&&N<=d.length-1;){var b=Math.floor((j+y)/2),v=b-1,[_,P]=w(v),[O]=w(b);if(!_&&!O&&(j=b+1),_&&O&&(y=b-1),!_&&O){S=P;break}N++}return S||h},mh=e=>{var t=Pe(e)?[]:e.toString().split(W0);return[{words:t}]},oC=e=>{var{width:t,scaleToFit:n,children:a,style:s,breakAll:i,maxLines:o}=e;if((t||n)&&!zn.isSsr){var l,c,u=H0({breakAll:i,children:a,style:s});if(u){var{wordsWithComputedWidth:d,spaceWidth:m}=u;l=d,c=m}else return mh(a);return iC({breakAll:i,children:a,maxLines:o,style:s},l,c,t,n)}return mh(a)},hh="#808080",jd=p.forwardRef((e,t)=>{var{x:n=0,y:a=0,lineHeight:s="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:u=hh}=e,d=uh(e,nC),m=p.useMemo(()=>oC({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:o,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,o,d.style,d.width]),{dx:h,dy:f,angle:x,className:g,breakAll:w}=d,j=uh(d,aC);if(!Zt(n)||!Zt(a))return null;var y=n+(te(h)?h:0),N=a+(te(f)?f:0),S;switch(c){case"start":S=Oo("calc(".concat(i,")"));break;case"middle":S=Oo("calc(".concat((m.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:S=Oo("calc(".concat(m.length-1," * -").concat(s,")"));break}var b=[];if(o){var v=m[0].width,{width:_}=d;b.push("scale(".concat(te(_)?_/v:1,")"))}return x&&b.push("rotate(".concat(x,", ").concat(y,", ").concat(N,")")),b.length&&(j.transform=b.join(" ")),p.createElement("text",Tl({},Me(j,!0),{ref:t,x:y,y:N,className:be("recharts-text",g),textAnchor:l,fill:u.includes("url")?hh:u}),m.map((P,O)=>{var D=P.words.join(w?"":" ");return p.createElement("tspan",{x:y,dy:O===0?S:s,key:"".concat(D,"-").concat(O)},D)}))});jd.displayName="Text";var lC=["offset"],cC=["labelRef"];function fh(e,t){if(e==null)return{};var n,a,s=dC(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function dC(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function ph(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ph(Object(n),!0).forEach(function(a){uC(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ph(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function uC(e,t,n){return(t=mC(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mC(e){var t=hC(e,"string");return typeof t=="symbol"?t:t+""}function hC(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ar(){return ar=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ar.apply(null,arguments)}var fC=e=>{var{value:t,formatter:n}=e,a=Pe(e.children)?t:e.children;return typeof n=="function"?n(a):a},wd=e=>e!=null&&typeof e=="function",pC=(e,t)=>{var n=mt(t-e),a=Math.min(Math.abs(t-e),360);return n*a},gC=(e,t,n,a)=>{var{position:s,offset:i,className:o}=e,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:m,endAngle:h,clockWise:f}=a,x=(u+d)/2,g=pC(m,h),w=g>=0?1:-1,j,y;s==="insideStart"?(j=m+w*i,y=f):s==="insideEnd"?(j=h-w*i,y=!f):s==="end"&&(j=h+w*i,y=f),y=g<=0?y:!y;var N=Je(l,c,x,j),S=Je(l,c,x,j+(y?1:-1)*359),b="M".concat(N.x,",").concat(N.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(y?0:1,`,
    `).concat(S.x,",").concat(S.y),v=Pe(e.id)?ga("recharts-radial-line-"):e.id;return p.createElement("text",ar({},n,{dominantBaseline:"central",className:be("recharts-radial-bar-label",o)}),p.createElement("defs",null,p.createElement("path",{id:v,d:b})),p.createElement("textPath",{xlinkHref:"#".concat(v)},t))},xC=(e,t,n)=>{var{cx:a,cy:s,innerRadius:i,outerRadius:o,startAngle:l,endAngle:c}=e,u=(l+c)/2;if(n==="outside"){var{x:d,y:m}=Je(a,s,o+t,u);return{x:d,y:m,textAnchor:d>=a?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"end"};var h=(i+o)/2,{x:f,y:x}=Je(a,s,h,u);return{x:f,y:x,textAnchor:"middle",verticalAnchor:"middle"}},bC=(e,t)=>{var{parentViewBox:n,offset:a,position:s}=e,{x:i,y:o,width:l,height:c}=t,u=c>=0?1:-1,d=u*a,m=u>0?"end":"start",h=u>0?"start":"end",f=l>=0?1:-1,x=f*a,g=f>0?"end":"start",w=f>0?"start":"end";if(s==="top"){var j={x:i+l/2,y:o-u*a,textAnchor:"middle",verticalAnchor:m};return De(De({},j),n?{height:Math.max(o-n.y,0),width:l}:{})}if(s==="bottom"){var y={x:i+l/2,y:o+c+d,textAnchor:"middle",verticalAnchor:h};return De(De({},y),n?{height:Math.max(n.y+n.height-(o+c),0),width:l}:{})}if(s==="left"){var N={x:i-x,y:o+c/2,textAnchor:g,verticalAnchor:"middle"};return De(De({},N),n?{width:Math.max(N.x-n.x,0),height:c}:{})}if(s==="right"){var S={x:i+l+x,y:o+c/2,textAnchor:w,verticalAnchor:"middle"};return De(De({},S),n?{width:Math.max(n.x+n.width-S.x,0),height:c}:{})}var b=n?{width:l,height:c}:{};return s==="insideLeft"?De({x:i+x,y:o+c/2,textAnchor:w,verticalAnchor:"middle"},b):s==="insideRight"?De({x:i+l-x,y:o+c/2,textAnchor:g,verticalAnchor:"middle"},b):s==="insideTop"?De({x:i+l/2,y:o+d,textAnchor:"middle",verticalAnchor:h},b):s==="insideBottom"?De({x:i+l/2,y:o+c-d,textAnchor:"middle",verticalAnchor:m},b):s==="insideTopLeft"?De({x:i+x,y:o+d,textAnchor:w,verticalAnchor:h},b):s==="insideTopRight"?De({x:i+l-x,y:o+d,textAnchor:g,verticalAnchor:h},b):s==="insideBottomLeft"?De({x:i+x,y:o+c-d,textAnchor:w,verticalAnchor:m},b):s==="insideBottomRight"?De({x:i+l-x,y:o+c-d,textAnchor:g,verticalAnchor:m},b):s&&typeof s=="object"&&(te(s.x)||Xr(s.x))&&(te(s.y)||Xr(s.y))?De({x:i+Kt(s.x,l),y:o+Kt(s.y,c),textAnchor:"end",verticalAnchor:"end"},b):De({x:i+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},b)},yC=e=>"cx"in e&&te(e.cx);function yt(e){var{offset:t=5}=e,n=fh(e,lC),a=De({offset:t},n),{viewBox:s,position:i,value:o,children:l,content:c,className:u="",textBreakAll:d,labelRef:m}=a,h=ne(_x),f=Sc(),x=i==="center"?f:h??f,g=s||x;if(!g||Pe(o)&&Pe(l)&&!p.isValidElement(c)&&typeof c!="function")return null;var w=De(De({},a),{},{viewBox:g});if(p.isValidElement(c)){var{labelRef:j}=w,y=fh(w,cC);return p.cloneElement(c,y)}var N;if(typeof c=="function"){if(N=p.createElement(c,w),p.isValidElement(N))return N}else N=fC(a);var S=yC(g),b=Me(a,!0);if(S&&(i==="insideStart"||i==="insideEnd"||i==="end"))return gC(a,N,b,g);var v=S?xC(g,a.offset,a.position):bC(a,g);return p.createElement(jd,ar({ref:m,className:be("recharts-label",u)},b,v,{breakAll:d}),N)}yt.displayName="Label";var K0=e=>{var{cx:t,cy:n,angle:a,startAngle:s,endAngle:i,r:o,radius:l,innerRadius:c,outerRadius:u,x:d,y:m,top:h,left:f,width:x,height:g,clockWise:w,labelViewBox:j}=e;if(j)return j;if(te(x)&&te(g)){if(te(d)&&te(m))return{x:d,y:m,width:x,height:g};if(te(h)&&te(f))return{x:h,y:f,width:x,height:g}}if(te(d)&&te(m))return{x:d,y:m,width:0,height:0};if(te(t)&&te(n))return{cx:t,cy:n,startAngle:s||a||0,endAngle:i||a||0,innerRadius:c||0,outerRadius:u||l||o||0,clockWise:w};if(e.viewBox)return e.viewBox},vC=(e,t,n)=>{if(!e)return null;var a={viewBox:t,labelRef:n};return e===!0?p.createElement(yt,ar({key:"label-implicit"},a)):Zt(e)?p.createElement(yt,ar({key:"label-implicit",value:e},a)):p.isValidElement(e)?e.type===yt?p.cloneElement(e,De({key:"label-implicit"},a)):p.createElement(yt,ar({key:"label-implicit",content:e},a)):wd(e)?p.createElement(yt,ar({key:"label-implicit",content:e},a)):e&&typeof e=="object"?p.createElement(yt,ar({},e,{key:"label-implicit"},a)):null},jC=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var{children:s,labelRef:i}=t,o=K0(t),l=nc(s,yt).map((u,d)=>p.cloneElement(u,{viewBox:n||o,key:"label-".concat(d)}));if(!a)return l;var c=vC(t.label,n||o,i);return[c,...l]};yt.parseViewBox=K0;yt.renderCallByParent=jC;var G0={},V0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(V0);var Y0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(Y0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=V0,n=Y0,a=Ni;function s(i){if(a.isArrayLike(i))return t.last(n.toArray(i))}e.last=s})(G0);var wC=G0.last;const NC=gr(wC);var SC=["valueAccessor"],_C=["data","dataKey","clockWise","id","textBreakAll"];function Js(){return Js=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Js.apply(null,arguments)}function gh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function xh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gh(Object(n),!0).forEach(function(a){kC(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gh(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function kC(e,t,n){return(t=AC(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AC(e){var t=PC(e,"string");return typeof t=="symbol"?t:t+""}function PC(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bh(e,t){if(e==null)return{};var n,a,s=CC(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function CC(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var EC=e=>Array.isArray(e.value)?NC(e.value):e.value;function Cr(e){var{valueAccessor:t=EC}=e,n=bh(e,SC),{data:a,dataKey:s,clockWise:i,id:o,textBreakAll:l}=n,c=bh(n,_C);return!a||!a.length?null:p.createElement(Gt,{className:"recharts-label-list"},a.map((u,d)=>{var m=Pe(s)?t(u,d):He(u&&u.payload,s),h=Pe(o)?{}:{id:"".concat(o,"-").concat(d)};return p.createElement(yt,Js({},Me(u,!0),c,h,{parentViewBox:u.parentViewBox,value:m,textBreakAll:l,viewBox:yt.parseViewBox(Pe(i)?u:xh(xh({},u),{},{clockWise:i})),key:"label-".concat(d),index:d}))}))}Cr.displayName="LabelList";function OC(e,t){return e?e===!0?p.createElement(Cr,{key:"labelList-implicit",data:t}):p.isValidElement(e)||wd(e)?p.createElement(Cr,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?p.createElement(Cr,Js({data:t},e,{key:"labelList-implicit"})):null:null}function TC(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var{children:a}=e,s=nc(a,Cr).map((o,l)=>p.cloneElement(o,{data:t,key:"labelList-".concat(l)}));if(!n)return s;var i=OC(e.label,t);return[i,...s]}Cr.renderCallByParent=TC;function Dl(){return Dl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Dl.apply(null,arguments)}var X0=e=>{var{cx:t,cy:n,r:a,className:s}=e,i=be("recharts-dot",s);return t===+t&&n===+n&&a===+a?p.createElement("circle",Dl({},gn(e),tc(e),{className:i,cx:t,cy:n,r:a})):null},DC={radiusAxis:{},angleAxis:{}},J0=At({name:"polarAxis",initialState:DC,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:UM,removeRadiusAxis:WM,addAngleAxis:HM,removeAngleAxis:KM}=J0.actions,MC=J0.reducer,Z0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){var s;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!((s=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&s.writable)?!1:n.toString()===`[object ${i}]`}let a=n;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(n)===a}e.isPlainObject=t})(Z0);var IC=Z0.isPlainObject;const RC=gr(IC);function Zs(){return Zs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Zs.apply(null,arguments)}var yh=(e,t,n,a,s)=>{var i=n-a,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+n,",").concat(t),o+="L ".concat(e+n-i/2,",").concat(t+s),o+="L ".concat(e+n-i/2-a,",").concat(t+s),o+="L ".concat(e,",").concat(t," Z"),o},LC={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},$C=e=>{var t=er(e,LC),n=p.useRef(),[a,s]=p.useState(-1);p.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&s(w)}catch{}},[]);var{x:i,y:o,upperWidth:l,lowerWidth:c,height:u,className:d}=t,{animationEasing:m,animationDuration:h,animationBegin:f,isUpdateAnimationActive:x}=t;if(i!==+i||o!==+o||l!==+l||c!==+c||u!==+u||l===0&&c===0||u===0)return null;var g=be("recharts-trapezoid",d);return x?p.createElement(Rs,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:u,x:i,y:o},to:{upperWidth:l,lowerWidth:c,height:u,x:i,y:o},duration:h,animationEasing:m,isActive:x},w=>{var{upperWidth:j,lowerWidth:y,height:N,x:S,y:b}=w;return p.createElement(Rs,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:f,duration:h,easing:m},p.createElement("path",Zs({},Me(t,!0),{className:g,d:yh(S,b,j,y,N),ref:n})))}):p.createElement("g",null,p.createElement("path",Zs({},Me(t,!0),{className:g,d:yh(i,o,l,c,u)})))},FC=["option","shapeType","propTransformer","activeClassName","isActive"];function BC(e,t){if(e==null)return{};var n,a,s=qC(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function qC(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function vh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Qs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vh(Object(n),!0).forEach(function(a){zC(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vh(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function zC(e,t,n){return(t=UC(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UC(e){var t=WC(e,"string");return typeof t=="symbol"?t:t+""}function WC(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HC(e,t){return Qs(Qs({},t),e)}function KC(e,t){return e==="symbols"}function jh(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return p.createElement(gg,n);case"trapezoid":return p.createElement($C,n);case"sector":return p.createElement(yg,n);case"symbols":if(KC(t))return p.createElement(Zf,n);break;default:return null}}function GC(e){return p.isValidElement(e)?e.props:e}function VC(e){var{option:t,shapeType:n,propTransformer:a=HC,activeClassName:s="recharts-active-shape",isActive:i}=e,o=BC(e,FC),l;if(p.isValidElement(t))l=p.cloneElement(t,Qs(Qs({},o),GC(t)));else if(typeof t=="function")l=t(o);else if(RC(t)&&typeof t!="boolean"){var c=a(t,o);l=p.createElement(jh,{shapeType:n,elementProps:c})}else{var u=o;l=p.createElement(jh,{shapeType:n,elementProps:u})}return i?p.createElement(Gt,{className:s},l):l}var Q0=(e,t)=>{var n=Ke();return(a,s)=>i=>{e==null||e(a,s,i),n(m0({activeIndex:String(s),activeDataKey:t,activeCoordinate:a.tooltipPosition}))}},eb=e=>{var t=Ke();return(n,a)=>s=>{e==null||e(n,a,s),t(cA())}},tb=(e,t)=>{var n=Ke();return(a,s)=>i=>{e==null||e(a,s,i),n(dA({activeIndex:String(s),activeDataKey:t,activeCoordinate:a.tooltipPosition}))}};function rb(e){var{fn:t,args:n}=e,a=Ke(),s=ft();return p.useEffect(()=>{if(!s){var i=t(n);return a(iA(i)),()=>{a(oA(i))}}},[t,n,a,s]),null}var YC=()=>{};function nb(e){var{legendPayload:t}=e,n=Ke(),a=ft();return p.useEffect(()=>a?YC:(n(i1(t)),()=>{n(o1(t))}),[n,a,t]),null}function ab(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=p.useRef(ga(t)),a=p.useRef(e);return a.current!==e&&(n.current=ga(t),a.current=e),n.current}var To,XC=()=>{var[e]=p.useState(()=>ga("uid-"));return e},JC=(To=zy.useId)!==null&&To!==void 0?To:XC;function ZC(e,t){var n=JC();return t||(e?"".concat(e,"-").concat(n):n)}var QC=p.createContext(void 0),sb=e=>{var{id:t,type:n,children:a}=e,s=ZC("recharts-".concat(n),t);return p.createElement(QC.Provider,{value:s},a(s))},eE={cartesianItems:[],polarItems:[]},ib=At({name:"graphicalItems",initialState:eE,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:a}=t.payload,s=dr(e).cartesianItems.indexOf(n);s>-1&&(e.cartesianItems[s]=a)},removeCartesianGraphicalItem(e,t){var n=dr(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=dr(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:tE,replaceCartesianGraphicalItem:rE,removeCartesianGraphicalItem:nE,addPolarGraphicalItem:GM,removePolarGraphicalItem:VM}=ib.actions,aE=ib.reducer;function ob(e){var t=Ke(),n=p.useRef(null);return p.useEffect(()=>{n.current===null?t(tE(e)):n.current!==e&&t(rE({prev:n.current,next:e})),n.current=e},[t,e]),p.useEffect(()=>()=>{n.current&&(t(nE(n.current)),n.current=null)},[t]),null}function sE(){}var iE={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},wh={t:0},Do={t:1};function lb(e){var t=er(e,iE),{isActive:n,canBegin:a,duration:s,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c,children:u}=t,d=pg("JavascriptAnimate",t.animationManager),[m,h]=p.useState(n?wh:Do),f=p.useRef(null);return p.useEffect(()=>{n||h(Do)},[n]),p.useEffect(()=>{if(!n||!a)return sE;var x=fg(wh,Do,mg(i),s,h,d.getTimeoutController()),g=()=>{f.current=x()};return d.start([c,o,g,s,l]),()=>{d.stop(),f.current&&f.current(),l()}},[n,a,s,i,o,c,l,d]),u(m.t)}var oE=$([Ge],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),lE=$([oE,xr,br],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),Nd=()=>ne(lE),cE=()=>ne(XA);function Nh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Sh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Nh(Object(n),!0).forEach(function(a){dE(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nh(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function dE(e,t,n){return(t=uE(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uE(e){var t=mE(e,"string");return typeof t=="symbol"?t:t+""}function mE(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hE=e=>{var{point:t,childIndex:n,mainColor:a,activeDot:s,dataKey:i}=e;if(s===!1||t.x==null||t.y==null)return null;var o=Sh(Sh({index:n,dataKey:i,cx:t.x,cy:t.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Me(s,!1)),tc(s)),l;return p.isValidElement(s)?l=p.cloneElement(s,o):typeof s=="function"?l=s(o):l=p.createElement(X0,o),p.createElement(Gt,{className:"recharts-active-dot"},l)};function fE(e){var{points:t,mainColor:n,activeDot:a,itemDataKey:s}=e,i=ne(hn),o=cE();if(t==null||o==null)return null;var l=t.find(c=>o.includes(c.payload));return Pe(l)?null:hE({point:l,childIndex:Number(i),mainColor:n,dataKey:s,activeDot:a})}var pE="Invariant failed";function gE(e,t){throw new Error(pE)}var xE=["x","y"];function Ml(){return Ml=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ml.apply(null,arguments)}function _h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function la(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_h(Object(n),!0).forEach(function(a){bE(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_h(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function bE(e,t,n){return(t=yE(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yE(e){var t=vE(e,"string");return typeof t=="symbol"?t:t+""}function vE(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jE(e,t){if(e==null)return{};var n,a,s=wE(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function wE(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function NE(e,t){var{x:n,y:a}=e,s=jE(e,xE),i="".concat(n),o=parseInt(i,10),l="".concat(a),c=parseInt(l,10),u="".concat(t.height||s.height),d=parseInt(u,10),m="".concat(t.width||s.width),h=parseInt(m,10);return la(la(la(la(la({},t),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function cb(e){return p.createElement(VC,Ml({shapeType:"rectangle",propTransformer:NE,activeClassName:"recharts-active-bar"},e))}var SE=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(a,s)=>{if(te(t))return t;var i=te(a)||Pe(a);return i?t(a,s):(i||gE(),n)}},_E={},db=At({name:"errorBars",initialState:_E,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:a}=t.payload;e[n]||(e[n]=[]),e[n].push(a)},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:a}=t.payload;e[n]&&(e[n]=e[n].filter(s=>s.dataKey!==a.dataKey||s.direction!==a.direction))}}}),{addErrorBar:YM,removeErrorBar:XM}=db.actions,kE=db.reducer,AE=["children"];function PE(e,t){if(e==null)return{};var n,a,s=CE(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function CE(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var EE={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},OE=p.createContext(EE);function ub(e){var{children:t}=e,n=PE(e,AE);return p.createElement(OE.Provider,{value:n},t)}function Sd(e,t){var n,a,s=ne(u=>vr(u,e)),i=ne(u=>Lr(u,t)),o=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:gt.allowDataOverflow,l=(a=i==null?void 0:i.allowDataOverflow)!==null&&a!==void 0?a:xt.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function mb(e){var{xAxisId:t,yAxisId:n,clipPathId:a}=e,s=Nd(),{needClipX:i,needClipY:o,needClip:l}=Sd(t,n);if(!l)return null;var{x:c,y:u,width:d,height:m}=s;return p.createElement("clipPath",{id:"clipPath-".concat(a)},p.createElement("rect",{x:i?c:c-d/2,y:o?u:u-m/2,width:i?d:d*2,height:o?m:m*2}))}var TE=["onMouseEnter","onMouseLeave","onClick"],DE=["value","background","tooltipPosition"],ME=["id"],IE=["onMouseEnter","onClick","onMouseLeave"];function qn(){return qn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},qn.apply(null,arguments)}function kh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kh(Object(n),!0).forEach(function(a){RE(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kh(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function RE(e,t,n){return(t=LE(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LE(e){var t=$E(e,"string");return typeof t=="symbol"?t:t+""}function $E(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ei(e,t){if(e==null)return{};var n,a,s=FE(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function FE(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var BE=e=>{var{dataKey:t,name:n,fill:a,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:a,value:Ii(n,t),payload:e}]};function qE(e){var{dataKey:t,stroke:n,strokeWidth:a,fill:s,name:i,hide:o,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:s,dataKey:t,nameKey:void 0,name:Ii(i,t),hide:o,type:e.tooltipType,color:e.fill,unit:l}}}function zE(e){var t=ne(hn),{data:n,dataKey:a,background:s,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=i,u=ei(i,TE),d=Q0(o,a),m=eb(l),h=tb(c,a);if(!s||n==null)return null;var f=Me(s,!1);return p.createElement(p.Fragment,null,n.map((x,g)=>{var{value:w,background:j,tooltipPosition:y}=x,N=ei(x,DE);if(!j)return null;var S=d(x,g),b=m(x,g),v=h(x,g),_=tt(tt(tt(tt(tt({option:s,isActive:String(g)===t},N),{},{fill:"#eee"},j),f),rc(u,x,g)),{},{onMouseEnter:S,onMouseLeave:b,onClick:v,dataKey:a,index:g,className:"recharts-bar-background-rectangle"});return p.createElement(cb,qn({key:"background-bar-".concat(g)},_))}))}function hb(e){var{data:t,props:n,showLabels:a}=e,s=gn(n),{id:i}=s,o=ei(s,ME),{shape:l,dataKey:c,activeBar:u}=n,d=ne(hn),m=ne(_0),{onMouseEnter:h,onClick:f,onMouseLeave:x}=n,g=ei(n,IE),w=Q0(h,c),j=eb(x),y=tb(f,c);return t?p.createElement(p.Fragment,null,t.map((N,S)=>{var b=u&&String(S)===d&&(m==null||c===m),v=b?u:l,_=tt(tt(tt({},o),N),{},{isActive:b,option:v,index:S,dataKey:c});return p.createElement(Gt,qn({className:"recharts-bar-rectangle"},rc(g,N,S),{onMouseEnter:w(N,S),onMouseLeave:j(N,S),onClick:y(N,S),key:"rectangle-".concat(N==null?void 0:N.x,"-").concat(N==null?void 0:N.y,"-").concat(N==null?void 0:N.value,"-").concat(S)}),p.createElement(cb,_))}),a&&Cr.renderCallByParent(n,t)):null}function UE(e){var{props:t,previousRectanglesRef:n}=e,{data:a,layout:s,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,m=n.current,h=ab(t,"recharts-bar-"),[f,x]=p.useState(!1),g=p.useCallback(()=>{typeof u=="function"&&u(),x(!1)},[u]),w=p.useCallback(()=>{typeof d=="function"&&d(),x(!0)},[d]);return p.createElement(lb,{begin:o,duration:l,isActive:i,easing:c,onAnimationEnd:g,onAnimationStart:w,key:h},j=>{var y=j===1?a:a==null?void 0:a.map((N,S)=>{var b=m&&m[S];if(b)return tt(tt({},N),{},{x:zt(b.x,N.x,j),y:zt(b.y,N.y,j),width:zt(b.width,N.width,j),height:zt(b.height,N.height,j)});if(s==="horizontal"){var v=zt(0,N.height,j);return tt(tt({},N),{},{y:N.y+N.height-v,height:v})}var _=zt(0,N.width,j);return tt(tt({},N),{},{width:_})});return j>0&&(n.current=y??null),y==null?null:p.createElement(Gt,null,p.createElement(hb,{props:t,data:y,showLabels:!f}))})}function WE(e){var{data:t,isAnimationActive:n}=e,a=p.useRef(null);return n&&t&&t.length&&(a.current==null||a.current!==t)?p.createElement(UE,{previousRectanglesRef:a,props:e}):p.createElement(hb,{props:e,data:t,showLabels:!0})}var fb=0,HE=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:He(e,t)}};class KE extends p.PureComponent{render(){var{hide:t,data:n,dataKey:a,className:s,xAxisId:i,yAxisId:o,needClip:l,background:c,id:u}=this.props;if(t)return null;var d=be("recharts-bar",s),m=u;return p.createElement(Gt,{className:d,id:u},l&&p.createElement("defs",null,p.createElement(mb,{clipPathId:m,xAxisId:i,yAxisId:o})),p.createElement(Gt,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(m,")"):void 0},p.createElement(zE,{data:n,dataKey:a,background:c,allOtherBarProps:this.props}),p.createElement(WE,this.props)),this.props.children)}}var GE={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!zn.isSsr,legendType:"rect",minPointSize:fb,xAxisId:0,yAxisId:0};function VE(e){var{xAxisId:t,yAxisId:n,hide:a,legendType:s,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:m}=Sd(t,n),h=Fi(),f=ft(),x=nc(e.children,B0),g=ne(y=>jO(y,t,n,f,e.id,x));if(h!=="vertical"&&h!=="horizontal")return null;var w,j=g==null?void 0:g[0];return j==null||j.height==null||j.width==null?w=0:w=h==="vertical"?j.height/2:j.width/2,p.createElement(ub,{xAxisId:t,yAxisId:n,data:g,dataPointFormatter:HE,errorBarOffset:w},p.createElement(KE,qn({},e,{layout:h,needClip:m,data:g,xAxisId:t,yAxisId:n,hide:a,legendType:s,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function YE(e){var{layout:t,barSettings:{dataKey:n,minPointSize:a},pos:s,bandSize:i,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:m,offset:h,cells:f}=e,x=t==="horizontal"?l:o,g=d?x.scale.domain():null,w=zN({numericAxis:x});return m.map((j,y)=>{var N,S,b,v,_,P;d?N=RN(d[y],g):(N=He(j,n),Array.isArray(N)||(N=[w,N]));var O=SE(a,fb)(N[1],y);if(t==="horizontal"){var D,[A,T]=[l.scale(N[0]),l.scale(N[1])];S=Iu({axis:o,ticks:c,bandSize:i,offset:s.offset,entry:j,index:y}),b=(D=T??A)!==null&&D!==void 0?D:void 0,v=s.size;var L=A-T;if(_=Nt(L)?0:L,P={x:S,y:h.top,width:v,height:h.height},Math.abs(O)>0&&Math.abs(_)<Math.abs(O)){var C=mt(_||O)*(Math.abs(O)-Math.abs(_));b-=C,_+=C}}else{var[F,R]=[o.scale(N[0]),o.scale(N[1])];if(S=F,b=Iu({axis:l,ticks:u,bandSize:i,offset:s.offset,entry:j,index:y}),v=R-F,_=s.size,P={x:h.left,y:b,width:h.width,height:_},Math.abs(O)>0&&Math.abs(v)<Math.abs(O)){var K=mt(v||O)*(Math.abs(O)-Math.abs(v));v+=K}}if(S==null||b==null||v==null||_==null)return null;var M=tt(tt({},j),{},{x:S,y:b,width:v,height:_,value:d?N:N[1],payload:j,background:P,tooltipPosition:{x:S+v/2,y:b+_/2}},f&&f[y]&&f[y].props);return M}).filter(Boolean)}function pa(e){var t=er(e,GE),n=ft();return p.createElement(sb,{id:t.id,type:"bar"},a=>p.createElement(p.Fragment,null,p.createElement(nb,{legendPayload:BE(t)}),p.createElement(rb,{fn:qE,args:t}),p.createElement(ob,{type:"bar",id:a,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:qN(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),p.createElement(VE,qn({},t,{id:a}))))}pa.displayName="Bar";function Ah(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function os(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ah(Object(n),!0).forEach(function(a){XE(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ah(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function XE(e,t,n){return(t=JE(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JE(e){var t=ZE(e,"string");return typeof t=="symbol"?t:t+""}function ZE(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QE=(e,t)=>t,eO=(e,t,n)=>n,tO=(e,t,n,a)=>a,rO=(e,t,n,a,s)=>s,Ba=$([Qi,rO],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),nO=$([Ba],e=>e==null?void 0:e.maxBarSize),aO=(e,t,n,a,s,i)=>i,Ph=(e,t,n)=>{var a=n??e;if(!Pe(a))return Kt(a,t,0)},sO=$([he,Qi,QE,eO,tO],(e,t,n,a,s)=>t.filter(i=>e==="horizontal"?i.xAxisId===n:i.yAxisId===a).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),iO=(e,t,n,a)=>{var s=he(e);return s==="horizontal"?Al(e,"yAxis",n,a):Al(e,"xAxis",t,a)},oO=(e,t,n)=>{var a=he(e);return a==="horizontal"?Wm(e,"xAxis",t):Wm(e,"yAxis",n)},lO=(e,t,n)=>{var a={},s=e.filter(Zi),i=e.filter(u=>u.stackId==null),o=s.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),a),l=Object.entries(o).map(u=>{var[d,m]=u,h=m.map(x=>x.dataKey),f=Ph(t,n,m[0].barSize);return{stackId:d,dataKeys:h,barSize:f}}),c=i.map(u=>{var d=[u.dataKey].filter(h=>h!=null),m=Ph(t,n,u.barSize);return{stackId:void 0,dataKeys:d,barSize:m}});return[...l,...c]},cO=$([sO,ik,oO],lO),dO=(e,t,n,a,s)=>{var i,o,l=Ba(e,t,n,a,s);if(l!=null){var c=he(e),u=bx(e),{maxBarSize:d}=l,m=Pe(d)?u:d,h,f;return c==="horizontal"?(h=Tr(e,"xAxis",t,a),f=Or(e,"xAxis",t,a)):(h=Tr(e,"yAxis",n,a),f=Or(e,"yAxis",n,a)),(i=(o=ya(h,f,!0))!==null&&o!==void 0?o:m)!==null&&i!==void 0?i:0}},pb=(e,t,n,a)=>{var s=he(e),i,o;return s==="horizontal"?(i=Tr(e,"xAxis",t,a),o=Or(e,"xAxis",t,a)):(i=Tr(e,"yAxis",n,a),o=Or(e,"yAxis",n,a)),ya(i,o)};function uO(e,t,n,a,s){var i=a.length;if(!(i<1)){var o=Kt(e,n,0,!0),l,c=[];if(kt(a[0].barSize)){var u=!1,d=n/i,m=a.reduce((j,y)=>j+(y.barSize||0),0);m+=(i-1)*o,m>=n&&(m-=(i-1)*o,o=0),m>=n&&d>0&&(u=!0,d*=.9,m=i*d);var h=(n-m)/2>>0,f={offset:h-o,size:0};l=a.reduce((j,y)=>{var N,S={stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:f.offset+f.size+o,size:u?d:(N=y.barSize)!==null&&N!==void 0?N:0}},b=[...j,S];return f=b[b.length-1].position,b},c)}else{var x=Kt(t,n,0,!0);n-2*x-(i-1)*o<=0&&(o=0);var g=(n-2*x-(i-1)*o)/i;g>1&&(g>>=0);var w=kt(s)?Math.min(g,s):g;l=a.reduce((j,y,N)=>[...j,{stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:x+(g+o)*N+(g-w)/2,size:w}}],c)}return l}}var mO=(e,t,n,a,s,i,o)=>{var l=Pe(o)?t:o,c=uO(n,a,s!==i?s:i,e,l);return s!==i&&c!=null&&(c=c.map(u=>os(os({},u),{},{position:os(os({},u.position),{},{offset:u.position.offset-s/2})}))),c},hO=$([cO,bx,sk,yx,dO,pb,nO],mO),fO=(e,t,n,a)=>Tr(e,"xAxis",t,a),pO=(e,t,n,a)=>Tr(e,"yAxis",n,a),gO=(e,t,n,a)=>Or(e,"xAxis",t,a),xO=(e,t,n,a)=>Or(e,"yAxis",n,a),bO=$([hO,Ba],(e,t)=>{if(!(e==null||t==null)){var n=e.find(a=>a.stackId===t.stackId&&t.dataKey!=null&&a.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),yO=(e,t)=>{var n=nd(t);if(!(!e||n==null||t==null)){var{stackId:a}=t;if(a!=null){var s=e[a];if(s){var{stackedData:i}=s;if(i)return i.find(o=>o.key===n)}}}},vO=$([iO,Ba],yO),jO=$([Ge,fO,pO,gO,xO,bO,he,Ki,pb,vO,Ba,aO],(e,t,n,a,s,i,o,l,c,u,d,m)=>{var{chartData:h,dataStartIndex:f,dataEndIndex:x}=l;if(!(d==null||i==null||o!=="horizontal"&&o!=="vertical"||t==null||n==null||a==null||s==null||c==null)){var{data:g}=d,w;if(g!=null&&g.length>0?w=g:w=h==null?void 0:h.slice(f,x+1),w!=null)return YE({layout:o,barSettings:d,pos:i,bandSize:c,xAxis:t,yAxis:n,xAxisTicks:a,yAxisTicks:s,stackedData:u,displayedData:w,offset:e,cells:m})}}),wO=e=>{var{chartData:t}=e,n=Ke(),a=ft();return p.useEffect(()=>a?()=>{}:(n(Qm(t)),()=>{n(Qm(void 0))}),[t,n,a]),null},Ch={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},gb=At({name:"brush",initialState:Ch,reducers:{setBrushSettings(e,t){return t.payload==null?Ch:t.payload}}}),{setBrushSettings:JM}=gb.actions,NO=gb.reducer;function SO(e,t,n){return(t=_O(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _O(e){var t=kO(e,"string");return typeof t=="symbol"?t:t+""}function kO(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class _d{static create(t){return new _d(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(a)switch(a){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var n=this.range(),a=n[0],s=n[n.length-1];return a<=s?t>=a&&t<=s:t>=s&&t<=a}}SO(_d,"EPS",1e-4);function AO(e){return(e%180+180)%180}var PO=function(t){var{width:n,height:a}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=AO(s),o=i*Math.PI/180,l=Math.atan(a/n),c=o>l&&o<Math.PI-l?a/Math.sin(o):n/Math.cos(o);return Math.abs(c)},CO={dots:[],areas:[],lines:[]},xb=At({name:"referenceElements",initialState:CO,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=dr(e).dots.findIndex(a=>a===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=dr(e).areas.findIndex(a=>a===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=dr(e).lines.findIndex(a=>a===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:ZM,removeDot:QM,addArea:e6,removeArea:t6,addLine:r6,removeLine:n6}=xb.actions,EO=xb.reducer,OO=p.createContext(void 0),TO=e=>{var{children:t}=e,[n]=p.useState("".concat(ga("recharts"),"-clip")),a=Nd();if(a==null)return null;var{x:s,y:i,width:o,height:l}=a;return p.createElement(OO.Provider,{value:n},p.createElement("defs",null,p.createElement("clipPath",{id:n},p.createElement("rect",{x:s,y:i,height:l,width:o}))),t)};function Mo(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function bb(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var a=[],s=0;s<e.length;s+=t)a.push(e[s]);return a}function DO(e,t,n){var a={width:e.width+t.width,height:e.height+t.height};return PO(a,n)}function MO(e,t,n){var a=n==="width",{x:s,y:i,width:o,height:l}=e;return t===1?{start:a?s:i,end:a?s+o:i+l}:{start:a?s+o:i+l,end:a?s:i}}function ti(e,t,n,a,s){if(e*t<e*a||e*t>e*s)return!1;var i=n();return e*(t-e*i/2-a)>=0&&e*(t+e*i/2-s)<=0}function IO(e,t){return bb(e,t+1)}function RO(e,t,n,a,s){for(var i=(a||[]).slice(),{start:o,end:l}=t,c=0,u=1,d=o,m=function(){var x=a==null?void 0:a[c];if(x===void 0)return{v:bb(a,u)};var g=c,w,j=()=>(w===void 0&&(w=n(x,g)),w),y=x.coordinate,N=c===0||ti(e,y,j,d,l);N||(c=0,d=o,u+=1),N&&(d=y+e*(j()/2+s),c+=u)},h;u<=i.length;)if(h=m(),h)return h.v;return[]}function Eh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Eh(Object(n),!0).forEach(function(a){LO(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eh(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function LO(e,t,n){return(t=$O(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $O(e){var t=FO(e,"string");return typeof t=="symbol"?t:t+""}function FO(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BO(e,t,n,a,s){for(var i=(a||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,u=function(h){var f=i[h],x,g=()=>(x===void 0&&(x=n(f,h)),x);if(h===o-1){var w=e*(f.coordinate+e*g()/2-c);i[h]=f=et(et({},f),{},{tickCoord:w>0?f.coordinate-w*e:f.coordinate})}else i[h]=f=et(et({},f),{},{tickCoord:f.coordinate});var j=ti(e,f.tickCoord,g,l,c);j&&(c=f.tickCoord-e*(g()/2+s),i[h]=et(et({},f),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function qO(e,t,n,a,s,i){var o=(a||[]).slice(),l=o.length,{start:c,end:u}=t;if(i){var d=a[l-1],m=n(d,l-1),h=e*(d.coordinate+e*m/2-u);o[l-1]=d=et(et({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var f=ti(e,d.tickCoord,()=>m,c,u);f&&(u=d.tickCoord-e*(m/2+s),o[l-1]=et(et({},d),{},{isShow:!0}))}for(var x=i?l-1:l,g=function(y){var N=o[y],S,b=()=>(S===void 0&&(S=n(N,y)),S);if(y===0){var v=e*(N.coordinate-e*b()/2-c);o[y]=N=et(et({},N),{},{tickCoord:v<0?N.coordinate-v*e:N.coordinate})}else o[y]=N=et(et({},N),{},{tickCoord:N.coordinate});var _=ti(e,N.tickCoord,b,c,u);_&&(c=N.tickCoord+e*(b()/2+s),o[y]=et(et({},N),{},{isShow:!0}))},w=0;w<x;w++)g(w);return o}function kd(e,t,n){var{tick:a,ticks:s,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:m}=e;if(!s||!s.length||!a)return[];if(te(c)||zn.isSsr){var h;return(h=IO(s,te(c)?c:0))!==null&&h!==void 0?h:[]}var f=[],x=l==="top"||l==="bottom"?"width":"height",g=d&&x==="width"?fa(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},w=(N,S)=>{var b=typeof u=="function"?u(N.value,S):N.value;return x==="width"?DO(fa(b,{fontSize:t,letterSpacing:n}),g,m):fa(b,{fontSize:t,letterSpacing:n})[x]},j=s.length>=2?mt(s[1].coordinate-s[0].coordinate):1,y=MO(i,j,x);return c==="equidistantPreserveStart"?RO(j,y,w,s,o):(c==="preserveStart"||c==="preserveStartEnd"?f=qO(j,y,w,s,o,c==="preserveStartEnd"):f=BO(j,y,w,s,o),f.filter(N=>N.isShow))}var zO=["viewBox"],UO=["viewBox"];function En(){return En=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},En.apply(null,arguments)}function Oh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Oh(Object(n),!0).forEach(function(a){Ad(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oh(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Th(e,t){if(e==null)return{};var n,a,s=WO(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function WO(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function Ad(e,t,n){return(t=HO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HO(e){var t=KO(e,"string");return typeof t=="symbol"?t:t+""}function KO(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class $r extends p.Component{constructor(t){super(t),this.tickRefs=p.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,n){var{viewBox:a}=t,s=Th(t,zO),i=this.props,{viewBox:o}=i,l=Th(i,UO);return!Mo(a,o)||!Mo(s,l)||!Mo(n,this.state)}getTickLineCoord(t){var{x:n,y:a,width:s,height:i,orientation:o,tickSize:l,mirror:c,tickMargin:u}=this.props,d,m,h,f,x,g,w=c?-1:1,j=t.tickSize||l,y=te(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":d=m=t.coordinate,f=a+ +!c*i,h=f-w*j,g=h-w*u,x=y;break;case"left":h=f=t.coordinate,m=n+ +!c*s,d=m-w*j,x=d-w*u,g=y;break;case"right":h=f=t.coordinate,m=n+ +c*s,d=m+w*j,x=d+w*u,g=y;break;default:d=m=t.coordinate,f=a+ +c*i,h=f+w*j,g=h+w*u,x=y;break}return{line:{x1:d,y1:h,x2:m,y2:f},tick:{x,y:g}}}getTickTextAnchor(){var{orientation:t,mirror:n}=this.props,a;switch(t){case"left":a=n?"start":"end";break;case"right":a=n?"end":"start";break;default:a="middle";break}return a}getTickVerticalAnchor(){var{orientation:t,mirror:n}=this.props;switch(t){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:t,y:n,width:a,height:s,orientation:i,mirror:o,axisLine:l}=this.props,c=$e($e($e({},Me(this.props,!1)),Me(l,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var u=+(i==="top"&&!o||i==="bottom"&&o);c=$e($e({},c),{},{x1:t,y1:n+u*s,x2:t+a,y2:n+u*s})}else{var d=+(i==="left"&&!o||i==="right"&&o);c=$e($e({},c),{},{x1:t+d*a,y1:n,x2:t+d*a,y2:n+s})}return p.createElement("line",En({},c,{className:be("recharts-cartesian-axis-line",cn(l,"className"))}))}static renderTickItem(t,n,a){var s,i=be(n.className,"recharts-cartesian-axis-tick-value");if(p.isValidElement(t))s=p.cloneElement(t,$e($e({},n),{},{className:i}));else if(typeof t=="function")s=t($e($e({},n),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=be(o,t.className)),s=p.createElement(jd,En({},n,{className:o}),a)}return s}renderTicks(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:s,stroke:i,tick:o,tickFormatter:l,unit:c,padding:u}=this.props,d=kd($e($e({},this.props),{},{ticks:a}),t,n),m=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),f=gn(this.props),x=Me(o,!1),g=$e($e({},f),{},{fill:"none"},Me(s,!1)),w=d.map((j,y)=>{var{line:N,tick:S}=this.getTickLineCoord(j),b=$e($e($e($e({textAnchor:m,verticalAnchor:h},f),{},{stroke:"none",fill:i},x),S),{},{index:y,payload:j,visibleTicksCount:d.length,tickFormatter:l,padding:u});return p.createElement(Gt,En({className:"recharts-cartesian-axis-tick",key:"tick-".concat(j.value,"-").concat(j.coordinate,"-").concat(j.tickCoord)},rc(this.props,j,y)),s&&p.createElement("line",En({},g,N,{className:be("recharts-cartesian-axis-tick-line",cn(s,"className"))})),o&&$r.renderTickItem(o,b,"".concat(typeof l=="function"?l(j.value,y):j.value).concat(c||"")))});return w.length>0?p.createElement("g",{className:"recharts-cartesian-axis-ticks"},w):null}render(){var{axisLine:t,width:n,height:a,className:s,hide:i}=this.props;if(i)return null;var{ticks:o}=this.props;return n!=null&&n<=0||a!=null&&a<=0?null:p.createElement(Gt,{className:be("recharts-cartesian-axis",s),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var u=c[0];if(u){var d=window.getComputedStyle(u).fontSize,m=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||m!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),yt.renderCallByParent(this.props))}}Ad($r,"displayName","CartesianAxis");Ad($r,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var GO=["x1","y1","x2","y2","key"],VO=["offset"],YO=["xAxisId","yAxisId"],XO=["xAxisId","yAxisId"];function Dh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Dh(Object(n),!0).forEach(function(a){JO(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dh(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function JO(e,t,n){return(t=ZO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZO(e){var t=QO(e,"string");return typeof t=="symbol"?t:t+""}function QO(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tn(){return tn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},tn.apply(null,arguments)}function ri(e,t){if(e==null)return{};var n,a,s=eT(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function eT(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var tT=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:a,y:s,width:i,height:o,ry:l}=e;return p.createElement("rect",{x:a,y:s,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function yb(e,t){var n;if(p.isValidElement(e))n=p.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var{x1:a,y1:s,x2:i,y2:o,key:l}=t,c=ri(t,GO),u=gn(c),{offset:d}=u,m=ri(u,VO);n=p.createElement("line",tn({},m,{x1:a,y1:s,x2:i,y2:o,fill:"none",key:l}))}return n}function rT(e){var{x:t,width:n,horizontal:a=!0,horizontalPoints:s}=e;if(!a||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,l=ri(e,YO),c=s.map((u,d)=>{var m=rt(rt({},l),{},{x1:t,y1:u,x2:t+n,y2:u,key:"line-".concat(d),index:d});return yb(a,m)});return p.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function nT(e){var{y:t,height:n,vertical:a=!0,verticalPoints:s}=e;if(!a||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,l=ri(e,XO),c=s.map((u,d)=>{var m=rt(rt({},l),{},{x1:u,y1:t,x2:u,y2:t+n,key:"line-".concat(d),index:d});return yb(a,m)});return p.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function aT(e){var{horizontalFill:t,fillOpacity:n,x:a,y:s,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=l.map(m=>Math.round(m+s-s)).sort((m,h)=>m-h);s!==u[0]&&u.unshift(0);var d=u.map((m,h)=>{var f=!u[h+1],x=f?s+o-m:u[h+1]-m;if(x<=0)return null;var g=h%t.length;return p.createElement("rect",{key:"react-".concat(h),y:m,x:a,height:x,width:i,stroke:"none",fill:t[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return p.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function sT(e){var{vertical:t=!0,verticalFill:n,fillOpacity:a,x:s,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!n||!n.length)return null;var u=c.map(m=>Math.round(m+s-s)).sort((m,h)=>m-h);s!==u[0]&&u.unshift(0);var d=u.map((m,h)=>{var f=!u[h+1],x=f?s+o-m:u[h+1]-m;if(x<=0)return null;var g=h%n.length;return p.createElement("rect",{key:"react-".concat(h),x:m,y:i,width:x,height:l,stroke:"none",fill:n[g],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return p.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var iT=(e,t)=>{var{xAxis:n,width:a,height:s,offset:i}=e;return Xp(kd(rt(rt(rt({},$r.defaultProps),n),{},{ticks:Jp(n),viewBox:{x:0,y:0,width:a,height:s}})),i.left,i.left+i.width,t)},oT=(e,t)=>{var{yAxis:n,width:a,height:s,offset:i}=e;return Xp(kd(rt(rt(rt({},$r.defaultProps),n),{},{ticks:Jp(n),viewBox:{x:0,y:0,width:a,height:s}})),i.top,i.top+i.height,t)},lT={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function rn(e){var t=tg(),n=rg(),a=eg(),s=rt(rt({},er(e,lT)),{},{x:te(e.x)?e.x:a.left,y:te(e.y)?e.y:a.top,width:te(e.width)?e.width:a.width,height:te(e.height)?e.height:a.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:u,height:d,syncWithTicks:m,horizontalValues:h,verticalValues:f}=s,x=ft(),g=ne(O=>Hm(O,"xAxis",i,x)),w=ne(O=>Hm(O,"yAxis",o,x));if(!te(u)||u<=0||!te(d)||d<=0||!te(l)||l!==+l||!te(c)||c!==+c)return null;var j=s.verticalCoordinatesGenerator||iT,y=s.horizontalCoordinatesGenerator||oT,{horizontalPoints:N,verticalPoints:S}=s;if((!N||!N.length)&&typeof y=="function"){var b=h&&h.length,v=y({yAxis:w?rt(rt({},w),{},{ticks:b?h:w.ticks}):void 0,width:t,height:n,offset:a},b?!0:m);ha(Array.isArray(v),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof v,"]")),Array.isArray(v)&&(N=v)}if((!S||!S.length)&&typeof j=="function"){var _=f&&f.length,P=j({xAxis:g?rt(rt({},g),{},{ticks:_?f:g.ticks}):void 0,width:t,height:n,offset:a},_?!0:m);ha(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(S=P)}return p.createElement("g",{className:"recharts-cartesian-grid"},p.createElement(tT,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),p.createElement(aT,tn({},s,{horizontalPoints:N})),p.createElement(sT,tn({},s,{verticalPoints:S})),p.createElement(rT,tn({},s,{offset:a,horizontalPoints:N,xAxis:g,yAxis:w})),p.createElement(nT,tn({},s,{offset:a,verticalPoints:S,xAxis:g,yAxis:w})))}rn.displayName="CartesianGrid";var vb=(e,t,n,a)=>Tr(e,"xAxis",t,a),jb=(e,t,n,a)=>Or(e,"xAxis",t,a),wb=(e,t,n,a)=>Tr(e,"yAxis",n,a),Nb=(e,t,n,a)=>Or(e,"yAxis",n,a),cT=$([he,vb,wb,jb,Nb],(e,t,n,a,s)=>Dr(e,"xAxis")?ya(t,a,!1):ya(n,s,!1)),dT=(e,t,n,a,s)=>s;function uT(e){return e.type==="line"}var mT=$([Qi,dT],(e,t)=>e.filter(uT).find(n=>n.id===t)),hT=$([he,vb,wb,jb,Nb,mT,cT,Ki],(e,t,n,a,s,i,o,l)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=l;if(!(i==null||t==null||n==null||a==null||s==null||a.length===0||s.length===0||o==null)){var{dataKey:m,data:h}=i,f;if(h!=null&&h.length>0?f=h:f=c==null?void 0:c.slice(u,d+1),f!=null)return MT({layout:e,xAxis:t,yAxis:n,xAxisTicks:a,yAxisTicks:s,dataKey:m,bandSize:o,displayedData:f})}}),fT=["id"],pT=["type","layout","connectNulls","needClip"],gT=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Mh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Mh(Object(n),!0).forEach(function(a){xT(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mh(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function xT(e,t,n){return(t=bT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bT(e){var t=yT(e,"string");return typeof t=="symbol"?t:t+""}function yT(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pd(e,t){if(e==null)return{};var n,a,s=vT(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function vT(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function fn(){return fn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},fn.apply(null,arguments)}var jT=e=>{var{dataKey:t,name:n,stroke:a,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:a,value:Ii(n,t),payload:e}]};function wT(e){var{dataKey:t,data:n,stroke:a,strokeWidth:s,fill:i,name:o,hide:l,unit:c}=e;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:a,strokeWidth:s,fill:i,dataKey:t,nameKey:void 0,name:Ii(o,t),hide:l,type:e.tooltipType,color:e.stroke,unit:c}}}var Sb=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function NT(e,t){for(var n=e.length%2!==0?[...e,0]:e,a=[],s=0;s<t;++s)a=[...a,...n];return a}var ST=(e,t,n)=>{var a=n.reduce((m,h)=>m+h);if(!a)return Sb(t,e);for(var s=Math.floor(e/a),i=e%a,o=t-e,l=[],c=0,u=0;c<n.length;u+=n[c],++c)if(u+n[c]>i){l=[...n.slice(0,c),i-u];break}var d=l.length%2===0?[0,o]:[o];return[...NT(n,s),...l,...d].map(m=>"".concat(m,"px")).join(", ")};function _T(e,t){var n;if(p.isValidElement(e))n=p.cloneElement(e,t);else if(typeof e=="function")n=e(t);else{var a=be("recharts-line-dot",typeof e!="boolean"?e.className:"");n=p.createElement(X0,fn({},t,{className:a}))}return n}function kT(e,t){return e==null?!1:t?!0:e.length===1}function AT(e){var{clipPathId:t,points:n,props:a}=e,{dot:s,dataKey:i,needClip:o}=a;if(!kT(n,s))return null;var{id:l}=a,c=Pd(a,fT),u=Df(s),d=gn(c),m=Me(s,!0),h=n.map((x,g)=>{var w=Ut(Ut(Ut({key:"dot-".concat(g),r:3},d),m),{},{index:g,cx:x.x,cy:x.y,dataKey:i,value:x.value,payload:x.payload,points:n});return _T(s,w)}),f={clipPath:o?"url(#clipPath-".concat(u?"":"dots-").concat(t,")"):void 0};return p.createElement(Gt,fn({className:"recharts-line-dots",key:"dots"},f),h)}function Il(e){var{clipPathId:t,pathRef:n,points:a,strokeDasharray:s,props:i,showLabels:o}=e,{type:l,layout:c,connectNulls:u,needClip:d}=i,m=Pd(i,pT),h=Ut(Ut({},Me(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):void 0,points:a,type:l,layout:c,connectNulls:u,strokeDasharray:s??i.strokeDasharray});return p.createElement(p.Fragment,null,(a==null?void 0:a.length)>1&&p.createElement(sg,fn({},h,{pathRef:n})),p.createElement(AT,{points:a,clipPathId:t,props:i}),o&&Cr.renderCallByParent(i,a))}function PT(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function CT(e){var{clipPathId:t,props:n,pathRef:a,previousPointsRef:s,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:m,animateNewValues:h,width:f,height:x,onAnimationEnd:g,onAnimationStart:w}=n,j=s.current,y=ab(n,"recharts-line-"),[N,S]=p.useState(!1),b=p.useCallback(()=>{typeof g=="function"&&g(),S(!1)},[g]),v=p.useCallback(()=>{typeof w=="function"&&w(),S(!0)},[w]),_=PT(a.current),P=i.current;return p.createElement(lb,{begin:u,duration:d,isActive:c,easing:m,onAnimationEnd:b,onAnimationStart:v,key:y},O=>{var D=zt(P,_+P,O),A=Math.min(D,_),T;if(l){var L="".concat(l).split(/[,\s]+/gim).map(R=>parseFloat(R));T=ST(A,_,L)}else T=Sb(_,A);if(j){var C=j.length/o.length,F=O===1?o:o.map((R,K)=>{var M=Math.floor(K*C);if(j[M]){var I=j[M];return Ut(Ut({},R),{},{x:zt(I.x,R.x,O),y:zt(I.y,R.y,O)})}return h?Ut(Ut({},R),{},{x:zt(f*2,R.x,O),y:zt(x/2,R.y,O)}):Ut(Ut({},R),{},{x:R.x,y:R.y})});return s.current=F,p.createElement(Il,{props:n,points:F,clipPathId:t,pathRef:a,showLabels:!N,strokeDasharray:T})}return O>0&&_>0&&(s.current=o,i.current=A),p.createElement(Il,{props:n,points:o,clipPathId:t,pathRef:a,showLabels:!N,strokeDasharray:T})})}function ET(e){var{clipPathId:t,props:n}=e,{points:a,isAnimationActive:s}=n,i=p.useRef(null),o=p.useRef(0),l=p.useRef(null),c=i.current;return s&&a&&a.length&&c!==a?p.createElement(CT,{props:n,clipPathId:t,previousPointsRef:i,longestAnimatedLengthRef:o,pathRef:l}):p.createElement(Il,{props:n,points:a,clipPathId:t,pathRef:l,showLabels:!0})}var OT=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:He(e.payload,t)});class TT extends p.Component{render(){var t,{hide:n,dot:a,points:s,className:i,xAxisId:o,yAxisId:l,top:c,left:u,width:d,height:m,id:h,needClip:f}=this.props;if(n)return null;var x=be("recharts-line",i),g=h,{r:w=3,strokeWidth:j=2}=(t=Me(a,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},y=Df(a),N=w*2+j;return p.createElement(p.Fragment,null,p.createElement(Gt,{className:x},f&&p.createElement("defs",null,p.createElement(mb,{clipPathId:g,xAxisId:o,yAxisId:l}),!y&&p.createElement("clipPath",{id:"clipPath-dots-".concat(g)},p.createElement("rect",{x:u-N/2,y:c-N/2,width:d+N,height:m+N}))),p.createElement(ET,{props:this.props,clipPathId:g}),p.createElement(ub,{xAxisId:o,yAxisId:l,data:s,dataPointFormatter:OT,errorBarOffset:0},this.props.children)),p.createElement(fE,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var _b={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!zn.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function DT(e){var t=er(e,_b),{activeDot:n,animateNewValues:a,animationBegin:s,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,hide:u,isAnimationActive:d,label:m,legendType:h,xAxisId:f,yAxisId:x,id:g}=t,w=Pd(t,gT),{needClip:j}=Sd(f,x),y=Nd(),N=Fi(),S=ft(),b=ne(D=>hT(D,f,x,S,g));if(N!=="horizontal"&&N!=="vertical"||b==null||y==null)return null;var{height:v,width:_,x:P,y:O}=y;return p.createElement(TT,fn({},w,{id:g,connectNulls:l,dot:c,activeDot:n,animateNewValues:a,animationBegin:s,animationDuration:i,animationEasing:o,isAnimationActive:d,hide:u,label:m,legendType:h,xAxisId:f,yAxisId:x,points:b,layout:N,height:v,width:_,left:P,top:O,needClip:j}))}function MT(e){var{layout:t,xAxis:n,yAxis:a,xAxisTicks:s,yAxisTicks:i,dataKey:o,bandSize:l,displayedData:c}=e;return c.map((u,d)=>{var m=He(u,o);if(t==="horizontal"){var h=Mu({axis:n,ticks:s,bandSize:l,entry:u,index:d}),f=Pe(m)?null:a.scale(m);return{x:h,y:f,value:m,payload:u}}var x=Pe(m)?null:n.scale(m),g=Mu({axis:a,ticks:i,bandSize:l,entry:u,index:d});return x==null||g==null?null:{x,y:g,value:m,payload:u}}).filter(Boolean)}function pn(e){var t=er(e,_b),n=ft();return p.createElement(sb,{id:t.id,type:"line"},a=>p.createElement(p.Fragment,null,p.createElement(nb,{legendPayload:jT(t)}),p.createElement(rb,{fn:wT,args:t}),p.createElement(ob,{type:"line",id:a,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:n}),p.createElement(DT,fn({},t,{id:a}))))}pn.displayName="Line";function Ih(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Rh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ih(Object(n),!0).forEach(function(a){IT(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ih(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function IT(e,t,n){return(t=RT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RT(e){var t=LT(e,"string");return typeof t=="symbol"?t:t+""}function LT(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $T={xAxis:{},yAxis:{},zAxis:{}},kb=At({name:"cartesianAxis",initialState:$T,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:a}=t.payload;e.yAxis[n]&&(e.yAxis[n]=Rh(Rh({},e.yAxis[n]),{},{width:a}))}}}),{addXAxis:FT,removeXAxis:BT,addYAxis:qT,removeYAxis:zT,addZAxis:a6,removeZAxis:s6,updateYAxisWidth:UT}=kb.actions,WT=kb.reducer,HT=["children"],KT=["dangerouslySetInnerHTML","ticks"];function Ab(e,t,n){return(t=GT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GT(e){var t=VT(e,"string");return typeof t=="symbol"?t:t+""}function VT(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rl(){return Rl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Rl.apply(null,arguments)}function Pb(e,t){if(e==null)return{};var n,a,s=YT(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function YT(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function XT(e){var t=Ke(),n=p.useMemo(()=>{var{children:i}=e,o=Pb(e,HT);return o},[e]),a=ne(i=>vr(i,n.id)),s=n===a;return p.useEffect(()=>(t(FT(n)),()=>{t(BT(n))}),[n,t]),s?e.children:null}var JT=e=>{var{xAxisId:t,className:n}=e,a=ne(Qp),s=ft(),i="xAxis",o=ne(f=>Vn(f,i,t,s)),l=ne(f=>i0(f,i,t,s)),c=ne(f=>r0(f,t)),u=ne(f=>Jk(f,t));if(c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:m}=e,h=Pb(e,KT);return p.createElement($r,Rl({},h,{scale:o,x:u.x,y:u.y,width:c.width,height:c.height,className:be("recharts-".concat(i," ").concat(i),n),viewBox:a,ticks:l}))},ZT=e=>{var t,n,a,s,i;return p.createElement(XT,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(a=e.angle)!==null&&a!==void 0?a:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},p.createElement(JT,e))};class or extends p.Component{render(){return p.createElement(ZT,this.props)}}Ab(or,"displayName","XAxis");Ab(or,"defaultProps",{allowDataOverflow:gt.allowDataOverflow,allowDecimals:gt.allowDecimals,allowDuplicatedCategory:gt.allowDuplicatedCategory,height:gt.height,hide:!1,mirror:gt.mirror,orientation:gt.orientation,padding:gt.padding,reversed:gt.reversed,scale:gt.scale,tickCount:gt.tickCount,type:gt.type,xAxisId:0});var QT=e=>{var{ticks:t,label:n,labelGapWithTick:a=5,tickSize:s=0,tickMargin:i=0}=e,o=0;if(t){t.forEach(d=>{if(d){var m=d.getBoundingClientRect();m.width>o&&(o=m.width)}});var l=n?n.getBoundingClientRect().width:0,c=s+i,u=o+c+l+(n?a:0);return Math.round(u)}return 0},e3=["dangerouslySetInnerHTML","ticks"];function Cb(e,t,n){return(t=t3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t3(e){var t=r3(e,"string");return typeof t=="symbol"?t:t+""}function r3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ll(){return Ll=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ll.apply(null,arguments)}function n3(e,t){if(e==null)return{};var n,a,s=a3(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function a3(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function s3(e){var t=Ke();return p.useEffect(()=>(t(qT(e)),()=>{t(zT(e))}),[e,t]),null}var i3=e=>{var t,{yAxisId:n,className:a,width:s,label:i}=e,o=p.useRef(null),l=p.useRef(null),c=ne(Qp),u=ft(),d=Ke(),m="yAxis",h=ne(N=>Vn(N,m,n,u)),f=ne(N=>n0(N,n)),x=ne(N=>Zk(N,n)),g=ne(N=>i0(N,m,n,u));if(p.useLayoutEffect(()=>{var N;if(!(s!=="auto"||!f||wd(i)||p.isValidElement(i))){var S=o.current,b=S==null||(N=S.tickRefs)===null||N===void 0?void 0:N.current,{tickSize:v,tickMargin:_}=S.props,P=QT({ticks:b,label:l.current,labelGapWithTick:5,tickSize:v,tickMargin:_});Math.round(f.width)!==Math.round(P)&&d(UT({id:n,width:P}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,f==null?void 0:f.width,f,d,i,n,s]),f==null||x==null)return null;var{dangerouslySetInnerHTML:w,ticks:j}=e,y=n3(e,e3);return p.createElement($r,Ll({},y,{ref:o,labelRef:l,scale:h,x:x.x,y:x.y,width:f.width,height:f.height,className:be("recharts-".concat(m," ").concat(m),a),viewBox:c,ticks:g}))},o3=e=>{var t,n,a,s,i;return p.createElement(p.Fragment,null,p.createElement(s3,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(n=e.includeHidden)!==null&&n!==void 0?n:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(a=e.angle)!==null&&a!==void 0?a:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),p.createElement(i3,e))},l3={allowDataOverflow:xt.allowDataOverflow,allowDecimals:xt.allowDecimals,allowDuplicatedCategory:xt.allowDuplicatedCategory,hide:!1,mirror:xt.mirror,orientation:xt.orientation,padding:xt.padding,reversed:xt.reversed,scale:xt.scale,tickCount:xt.tickCount,type:xt.type,width:xt.width,yAxisId:0};class lr extends p.Component{render(){return p.createElement(o3,this.props)}}Cb(lr,"displayName","YAxis");Cb(lr,"defaultProps",l3);var c3={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qa=p;function d3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var u3=typeof Object.is=="function"?Object.is:d3,m3=qa.useSyncExternalStore,h3=qa.useRef,f3=qa.useEffect,p3=qa.useMemo,g3=qa.useDebugValue;c3.useSyncExternalStoreWithSelector=function(e,t,n,a,s){var i=h3(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=p3(function(){function c(f){if(!u){if(u=!0,d=f,f=a(f),s!==void 0&&o.hasValue){var x=o.value;if(s(x,f))return m=x}return m=f}if(x=m,u3(d,f))return x;var g=a(f);return s!==void 0&&s(x,g)?(d=f,x):(d=f,m=g)}var u=!1,d,m,h=n===void 0?null:n;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,n,a,s]);var l=m3(e,i[0],i[1]);return f3(function(){o.hasValue=!0,o.value=l},[l]),g3(l),l};function x3(e){e()}function b3(){let e=null,t=null;return{clear(){e=null,t=null},notify(){x3(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let a=e;for(;a;)n.push(a),a=a.next;return n},subscribe(n){let a=!0;const s=t={callback:n,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!a||e===null||(a=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var Lh={notify(){},get:()=>[]};function y3(e,t){let n,a=Lh,s=0,i=!1;function o(g){d();const w=a.subscribe(g);let j=!1;return()=>{j||(j=!0,w(),m())}}function l(){a.notify()}function c(){x.onStateChange&&x.onStateChange()}function u(){return i}function d(){s++,n||(n=e.subscribe(c),a=b3())}function m(){s--,n&&s===0&&(n(),n=void 0,a.clear(),a=Lh)}function h(){i||(i=!0,d())}function f(){i&&(i=!1,m())}const x={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:f,getListeners:()=>a};return x}var v3=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",j3=v3(),w3=()=>typeof navigator<"u"&&navigator.product==="ReactNative",N3=w3(),S3=()=>j3||N3?p.useLayoutEffect:p.useEffect,_3=S3(),Io=Symbol.for("react-redux-context"),Ro=typeof globalThis<"u"?globalThis:{};function k3(){if(!p.createContext)return{};const e=Ro[Io]??(Ro[Io]=new Map);let t=e.get(p.createContext);return t||(t=p.createContext(null),e.set(p.createContext,t)),t}var A3=k3();function P3(e){const{children:t,context:n,serverState:a,store:s}=e,i=p.useMemo(()=>{const c=y3(s);return{store:s,subscription:c,getServerState:a?()=>a:void 0}},[s,a]),o=p.useMemo(()=>s.getState(),[s]);_3(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=n||A3;return p.createElement(l.Provider,{value:i},t)}var C3=P3,E3=(e,t)=>t,Cd=$([E3,he,_x,qe,j0,jr,nP,Ge],lP),Ed=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/a)}},Eb=Dt("mouseClick"),Ob=Ca();Ob.startListening({actionCreator:Eb,effect:(e,t)=>{var n=e.payload,a=Cd(t.getState(),Ed(n));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(uA({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var $l=Dt("mouseMove"),Tb=Ca();Tb.startListening({actionCreator:$l,effect:(e,t)=>{var n=e.payload,a=t.getState(),s=md(a,a.tooltip.settings.shared),i=Cd(a,Ed(n));s==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(f0({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(h0()))}});function O3(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var $h={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},Db=At({name:"rootProps",initialState:$h,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:$h.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),T3=Db.reducer,{updateOptions:D3}=Db.actions,Mb=At({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:i6}=Mb.actions,M3=Mb.reducer,Ib=Dt("keyDown"),Rb=Dt("focus"),Od=Ca();Od.startListening({actionCreator:Ib,effect:(e,t)=>{var n=t.getState(),a=n.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:s}=n.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(hd(s,Xn(n))),l=jr(n);if(i==="Enter"){var c=Xs(n,"axis","hover",String(s.index));t.dispatch(Cl({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:c}));return}var u=rA(n),d=u==="left-to-right"?1:-1,m=i==="ArrowRight"?1:-1,h=o+m*d;if(!(l==null||h>=l.length||h<0)){var f=Xs(n,"axis","hover",String(h));t.dispatch(Cl({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:f}))}}}}});Od.startListening({actionCreator:Rb,effect:(e,t)=>{var n=t.getState(),a=n.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:s}=n.tooltip;if(!s.active&&s.index==null){var i="0",o=Xs(n,"axis","hover",String(i));t.dispatch(Cl({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var Et=Dt("externalEvent"),Lb=Ca();Lb.startListening({actionCreator:Et,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),a={activeCoordinate:GA(n),activeDataKey:_0(n),activeIndex:hn(n),activeLabel:S0(n),activeTooltipIndex:hn(n),isTooltipActive:VA(n)};e.payload.handler(a,e.payload.reactEvent)}}});var I3=$([Yn],e=>e.tooltipItemPayloads),R3=$([I3,$a,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,a)=>{var s=e.find(l=>l.settings.dataKey===a);if(s!=null){var{positions:i}=s;if(i!=null){var o=t(i,n);return o}}}),$b=Dt("touchMove"),Fb=Ca();Fb.startListening({actionCreator:$b,effect:(e,t)=>{var n=e.payload,a=t.getState(),s=md(a,a.tooltip.settings.shared);if(s==="axis"){var i=Cd(a,Ed({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(f0({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var o,l=n.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(XN),d=(o=c.getAttribute(JN))!==null&&o!==void 0?o:void 0,m=R3(t.getState(),u,d);t.dispatch(m0({activeDataKey:d,activeIndex:u,activeCoordinate:m}))}}});var L3=kp({brush:NO,cartesianAxis:WT,chartData:NP,errorBars:kE,graphicalItems:aE,layout:yN,legend:l1,options:bP,polarAxis:MC,polarOptions:M3,referenceElements:EO,rootProps:T3,tooltip:mA}),$3=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Ww({reducer:L3,preloadedState:t,middleware:a=>a({serializableCheck:!1}).concat([Ob.middleware,Tb.middleware,Od.middleware,Lb.middleware,Fb.middleware]),devTools:{serialize:{replacer:O3},name:"recharts-".concat(n)}})};function F3(e){var{preloadedState:t,children:n,reduxStoreName:a}=e,s=ft(),i=p.useRef(null);if(s)return n;i.current==null&&(i.current=$3(t,a));var o=fc;return p.createElement(C3,{context:o,store:i.current},n)}function B3(e){var{layout:t,width:n,height:a,margin:s}=e,i=Ke(),o=ft();return p.useEffect(()=>{o||(i(gN(t)),i(xN({width:n,height:a})),i(pN(s)))},[i,o,t,n,a,s]),null}function q3(e){var t=Ke();return p.useEffect(()=>{t(D3(e))},[t,e]),null}var z3=["children"];function U3(e,t){if(e==null)return{};var n,a,s=W3(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function W3(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function ni(){return ni=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ni.apply(null,arguments)}var H3={width:"100%",height:"100%"},K3=p.forwardRef((e,t)=>{var n=tg(),a=rg(),s=ag();if(!Ds(n)||!Ds(a))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,u,d;return typeof o.tabIndex=="number"?u=o.tabIndex:u=s?0:void 0,typeof o.role=="string"?d=o.role:d=s?"application":void 0,p.createElement(Mf,ni({},o,{title:l,desc:c,role:d,tabIndex:u,width:n,height:a,style:H3,ref:t}),i)}),G3=e=>{var{children:t}=e,n=ne($i);if(!n)return null;var{width:a,height:s,y:i,x:o}=n;return p.createElement(Mf,{width:a,height:s,x:o,y:i},t)},Fh=p.forwardRef((e,t)=>{var{children:n}=e,a=U3(e,z3),s=ft();return s?p.createElement(G3,null,n):p.createElement(K3,ni({ref:t},a),n)});function V3(){var e=Ke(),[t,n]=p.useState(null),a=ne(YN);return p.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;kt(i)&&i!==a&&e(bN(i))}},[t,e,a]),n}function Bh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Y3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Bh(Object(n),!0).forEach(function(a){X3(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bh(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function X3(e,t,n){return(t=J3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J3(e){var t=Z3(e,"string");return typeof t=="symbol"?t:t+""}function Z3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Q3=p.forwardRef((e,t)=>{var{children:n,className:a,height:s,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:m,onMouseUp:h,onTouchEnd:f,onTouchMove:x,onTouchStart:g,style:w,width:j}=e,y=Ke(),[N,S]=p.useState(null),[b,v]=p.useState(null);kP();var _=V3(),P=p.useCallback(z=>{_(z),typeof t=="function"&&t(z),S(z),v(z)},[_,t,S,v]),O=p.useCallback(z=>{y(Eb(z)),y(Et({handler:i,reactEvent:z}))},[y,i]),D=p.useCallback(z=>{y($l(z)),y(Et({handler:u,reactEvent:z}))},[y,u]),A=p.useCallback(z=>{y(h0()),y(Et({handler:d,reactEvent:z}))},[y,d]),T=p.useCallback(z=>{y($l(z)),y(Et({handler:m,reactEvent:z}))},[y,m]),L=p.useCallback(()=>{y(Rb())},[y]),C=p.useCallback(z=>{y(Ib(z.key))},[y]),F=p.useCallback(z=>{y(Et({handler:o,reactEvent:z}))},[y,o]),R=p.useCallback(z=>{y(Et({handler:l,reactEvent:z}))},[y,l]),K=p.useCallback(z=>{y(Et({handler:c,reactEvent:z}))},[y,c]),M=p.useCallback(z=>{y(Et({handler:h,reactEvent:z}))},[y,h]),I=p.useCallback(z=>{y(Et({handler:g,reactEvent:z}))},[y,g]),H=p.useCallback(z=>{y($b(z)),y(Et({handler:x,reactEvent:z}))},[y,x]),Y=p.useCallback(z=>{y(Et({handler:f,reactEvent:z}))},[y,f]);return p.createElement(O0.Provider,{value:N},p.createElement(Vv.Provider,{value:b},p.createElement("div",{className:be("recharts-wrapper",a),style:Y3({position:"relative",cursor:"default",width:j,height:s},w),onClick:O,onContextMenu:F,onDoubleClick:R,onFocus:L,onKeyDown:C,onMouseDown:K,onMouseEnter:D,onMouseLeave:A,onMouseMove:T,onMouseUp:M,onTouchEnd:Y,onTouchMove:H,onTouchStart:I,ref:P},n)))}),eD=["children","className","width","height","style","compact","title","desc"];function tD(e,t){if(e==null)return{};var n,a,s=rD(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function rD(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var nD=p.forwardRef((e,t)=>{var{children:n,className:a,width:s,height:i,style:o,compact:l,title:c,desc:u}=e,d=tD(e,eD),m=gn(d);return l?p.createElement(Fh,{otherAttributes:m,title:c,desc:u},n):p.createElement(Q3,{className:a,style:o,width:s,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},p.createElement(Fh,{otherAttributes:m,title:c,desc:u,ref:t},p.createElement(TO,null,n)))}),aD=["width","height"];function Fl(){return Fl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fl.apply(null,arguments)}function sD(e,t){if(e==null)return{};var n,a,s=iD(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function iD(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var oD={top:5,right:5,bottom:5,left:5},lD={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:oD,reverseStackOrder:!1,syncMethod:"index"},Bb=p.forwardRef(function(t,n){var a,s=er(t.categoricalChartProps,lD),{width:i,height:o}=s,l=sD(s,aD);if(!Ds(i)||!Ds(o))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:m,categoricalChartProps:h}=t,f={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:m,eventEmitter:void 0};return p.createElement(F3,{preloadedState:{options:f},reduxStoreName:(a=h.id)!==null&&a!==void 0?a:c},p.createElement(wO,{chartData:h.data}),p.createElement(B3,{width:i,height:o,layout:s.layout,margin:s.margin}),p.createElement(q3,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),p.createElement(nD,Fl({},l,{width:i,height:o,ref:n})))}),cD=["axis"],so=p.forwardRef((e,t)=>p.createElement(Bb,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:cD,tooltipPayloadSearcher:D0,categoricalChartProps:e,ref:t})),dD=["axis","item"],gs=p.forwardRef((e,t)=>p.createElement(Bb,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:dD,tooltipPayloadSearcher:D0,categoricalChartProps:e,ref:t}));const uD=({data:e,color:t="#3B82F6"})=>!e||e.length<2?null:r.jsx("div",{className:"h-8 w-16",children:r.jsx(Ar,{width:"100%",height:"100%",children:r.jsx(so,{data:e,children:r.jsx(pn,{type:"monotone",dataKey:"value",stroke:t,strokeWidth:2,dot:!1,activeDot:!1})})})}),mD=({current:e,previous:t,label:n,format:a="number",sparklineData:s})=>{const i=e-t,o=t>0?i/t*100:0,l=i>0,c=i===0,u=d=>{switch(a){case"percentage":return`${d}%`;case"currency":return`₹${d.toLocaleString()}`;case"decimal":return d.toFixed(2);default:return d.toString()}};return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:u(e)}),r.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ${c?"bg-gray-100 text-gray-600":l?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[l?r.jsx(Gl,{className:"h-3 w-3"}):r.jsx(uf,{className:"h-3 w-3"}),r.jsx("span",{children:c?"0%":`${Math.abs(o).toFixed(1)}%`})]}),r.jsx("div",{className:"text-xs text-gray-500",children:"vs last month"}),r.jsx(uD,{data:s,color:l?"#10B981":"#EF4444"})]})},hD=({data:e,color:t="blue"})=>{if(!e||e.length===0)return r.jsx("div",{className:"h-16 bg-gray-100 rounded flex items-center justify-center text-xs text-gray-500",children:"No data available"});const n=Math.max(...e),a=Math.min(...e),s=n-a||1,i=e.map((o,l)=>{const c=l/(e.length-1)*100,u=100-(o-a)/s*100;return`${c},${u}`}).join(" ");return r.jsx("div",{className:"h-16 w-full",children:r.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[r.jsx("polyline",{fill:"none",stroke:t==="blue"?"#3B82F6":t==="green"?"#10B981":"#EF4444",strokeWidth:"2",points:i}),e.map((o,l)=>{const c=l/(e.length-1)*100,u=100-(o-a)/s*100;return r.jsx("circle",{cx:c,cy:u,r:"2",fill:t==="blue"?"#3B82F6":t==="green"?"#10B981":"#EF4444"},l)})]})})},fD=({kpi:e,isOpen:t,onClose:n,historicalData:a})=>!t||!e?null:r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:[e.title," Details"]}),r.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Formula & Calculation"}),r.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-600",children:e.description}),r.jsxs("p",{className:"text-sm font-mono mt-2",children:["Current Value: ",e.current]}),r.jsxs("p",{className:"text-sm font-mono",children:["Target: ",e.target]}),r.jsxs("p",{className:"text-sm font-mono",children:["Achievement: ",(e.current/e.target*100).toFixed(1),"%"]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"6-Month Trend"}),r.jsx("div",{className:"h-64",children:r.jsx(Ar,{width:"100%",height:"100%",children:r.jsxs(so,{data:a,children:[r.jsx(or,{dataKey:"month"}),r.jsx(lr,{}),r.jsx(en,{}),r.jsx(pn,{type:"monotone",dataKey:"value",stroke:"#3B82F6",strokeWidth:2,dot:{fill:"#3B82F6",strokeWidth:2,r:4}}),r.jsx(pn,{type:"monotone",dataKey:"target",stroke:"#EF4444",strokeWidth:2,strokeDasharray:"5 5",dot:!1})]})})})]})]})]})}),pD=({title:e,current:t,previous:n,target:a,data:s,format:i,color:o,description:l,onEdit:c,onDelete:u,onViewDetails:d,canOverride:m,onOverride:h})=>{const f=a>0?t/a*100:0,x=t>=a,g=(s==null?void 0:s.slice(-6).map((w,j)=>({value:w,index:j})))||[];return r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-lg transition-all duration-200 cursor-pointer group",onClick:()=>d&&d({title:e,current:t,previous:n,target:a,data:s,format:i,color:o,description:l}),children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-600 mb-1 group-hover:text-blue-600 transition-colors",children:e}),r.jsx(Er,{className:"h-4 w-4 text-gray-400 group-hover:text-blue-500"})]}),r.jsx(mD,{current:t,previous:n,format:i,sparklineData:g})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:`p-2 rounded-lg ${x?"bg-green-100":f>75?"bg-yellow-100":"bg-red-100"}`,children:r.jsxs("div",{className:`text-xs font-medium ${x?"text-green-700":f>75?"text-yellow-700":"text-red-700"}`,children:[f.toFixed(0),"%"]})}),r.jsxs("div",{className:"flex space-x-1",onClick:w=>w.stopPropagation(),children:[m&&r.jsx("button",{onClick:()=>h&&h({title:e,current:t,previous:n,target:a,data:s,format:i,color:o,description:l}),className:"p-1 text-gray-400 hover:text-orange-600 transition-colors",title:"Manager Override",children:r.jsx(lf,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>c&&c({title:e,current:t,previous:n,target:a,data:s,format:i,color:o,description:l}),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",children:r.jsx(cf,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>u&&u(),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",children:r.jsx(df,{className:"h-4 w-4"})})]})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[r.jsxs("span",{children:["Target: ",i==="currency"?`₹${a.toLocaleString()}`:a]}),r.jsxs("span",{children:[f.toFixed(1),"% achieved"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${x?"bg-green-500":f>75?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(f,100)}%`}})})]}),r.jsx("div",{className:"mb-3",children:r.jsx(hD,{data:s,color:o})}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-xs text-gray-500",children:l}),x&&r.jsx(ii,{className:"h-5 w-5 text-green-500"})]})]})},gD=({kpis:e,employee:t})=>{const n=p.useMemo(()=>{if(!e||e.length===0)return 0;const i=e.map(o=>{const l=o.target>0?o.current/o.target*100:0;return Math.min(l,100)});return i.reduce((o,l)=>o+l,0)/i.length},[e]),a=i=>i>=90?"text-green-600 bg-green-50 border-green-200":i>=75?"text-blue-600 bg-blue-50 border-blue-200":i>=60?"text-yellow-600 bg-yellow-50 border-yellow-200":"text-red-600 bg-red-50 border-red-200",s=i=>i>=90?"Excellent":i>=75?"Good":i>=60?"Average":"Needs Improvement";return r.jsx("div",{className:`border-2 rounded-lg p-6 ${a(n)}`,children:r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Overall Performance Score"}),r.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-4",children:[r.jsx("div",{className:"text-4xl font-bold",children:n.toFixed(1)}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-sm font-medium",children:s(n)}),r.jsx("div",{className:"text-xs opacity-75",children:"out of 100"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"KPIs Tracked"}),r.jsx("div",{className:"text-lg font-bold",children:(e==null?void 0:e.length)||0})]}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Targets Met"}),r.jsx("div",{className:"text-lg font-bold",children:(e==null?void 0:e.filter(i=>i.current>=i.target).length)||0})]}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Avg Achievement"}),r.jsxs("div",{className:"text-lg font-bold",children:[n.toFixed(0),"%"]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Rank"}),r.jsx("div",{className:"text-lg font-bold",children:"#-"})]})]}),r.jsx("div",{className:"mt-4 text-xs opacity-75",children:"This score is visible on your profile and agency dashboard"})]})})},xD=({isOpen:e,onClose:t,kpi:n,onSave:a})=>{const[s,i]=p.useState({title:"",target:0,current:0,format:"number",description:""});p.useEffect(()=>{i(n?{title:n.title||"",target:n.target||0,current:n.current||0,format:n.format||"number",description:n.description||""}:{title:"",target:0,current:0,format:"number",description:""})},[n,e]);const o=l=>{l.preventDefault(),a(s),t()};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:n?"Edit KPI":"Add New KPI"}),r.jsxs("form",{onSubmit:o,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"KPI Title"}),r.jsx("input",{type:"text",value:s.title,onChange:l=>i(c=>({...c,title:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Target"}),r.jsx("input",{type:"number",value:s.target,onChange:l=>i(c=>({...c,target:parseFloat(l.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current"}),r.jsx("input",{type:"number",value:s.current,onChange:l=>i(c=>({...c,current:parseFloat(l.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",min:"0",step:"0.01",required:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Format"}),r.jsxs("select",{value:s.format,onChange:l=>i(c=>({...c,format:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"percentage",children:"Percentage"}),r.jsx("option",{value:"currency",children:"Currency (₹)"}),r.jsx("option",{value:"decimal",children:"Decimal"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:s.description,onChange:l=>i(c=>({...c,description:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"What does this KPI measure?"})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[n?"Update":"Add"," KPI"]})]})]})]})}):null},bD=({employee:e})=>{const t=Ie(),{notify:n}=Oe(),[a,s]=p.useState(!1),[i,o]=p.useState([]),[l,c]=p.useState({}),[u,d]=p.useState(!1),[m,h]=p.useState(null),[f,x]=p.useState("6months"),[g,w]=p.useState(!1),[j,y]=p.useState(null),[N,S]=p.useState(!1),b=Kl(),v=sf(b);p.useEffect(()=>{(async()=>{if(e!=null&&e.id){s(!0);try{const{data:D,error:A}=await t.from("employee_kpis").select("*").eq("employee_id",e.id).eq("month_key",b);if(A)throw A;const{data:T,error:L}=await t.from("employee_kpis").select("*").eq("employee_id",e.id).eq("month_key",v);if(L)throw L;const C=[];let F=new Date;for(let H=0;H<6;H++){const Y=F.getFullYear(),z=(F.getMonth()+1).toString().padStart(2,"0");C.push(`${Y}-${z}`),F.setMonth(F.getMonth()-1)}const{data:R,error:K}=await t.from("employee_kpis").select("*").eq("employee_id",e.id).in("month_key",C).order("month_key",{ascending:!0});if(K)throw K;const M=(D||[]).map(H=>{const Y=T==null?void 0:T.find(G=>G.kpi_name===H.kpi_name),z=(R==null?void 0:R.filter(G=>G.kpi_name===H.kpi_name))||[];return{id:H.id,title:H.kpi_name,current:H.current_value||0,previous:(Y==null?void 0:Y.current_value)||0,target:H.target_value||0,format:H.format||"number",description:H.description||"",data:z.map(G=>G.current_value||0),color:H.color||"blue"}});o(M);const I={};R==null||R.forEach(H=>{I[H.kpi_name]||(I[H.kpi_name]=[]),I[H.kpi_name].push({month:H.month_key,value:H.current_value||0})}),c(I)}catch(D){console.error("Error fetching KPI data:",D),n("Failed to load KPI data","error")}finally{s(!1)}}})()},[e,b,v,t,n]);const _=async O=>{try{const D={employee_id:e.id,month_key:b,kpi_name:O.title,current_value:O.current,target_value:O.target,format:O.format,description:O.description,color:"blue",updated_at:new Date().toISOString()};if(m){const{error:A}=await t.from("employee_kpis").update(D).eq("id",m.id);if(A)throw A;n("KPI updated successfully!","success")}else{const{error:A}=await t.from("employee_kpis").insert(D);if(A)throw A;n("KPI added successfully!","success")}window.location.reload()}catch(D){console.error("Error saving KPI:",D),n("Failed to save KPI","error")}},P=async O=>{if(confirm("Are you sure you want to delete this KPI?"))try{const{error:D}=await t.from("employee_kpis").delete().eq("id",O);if(D)throw D;o(A=>A.filter(T=>T.id!==O)),n("KPI deleted successfully!","success")}catch(D){console.error("Error deleting KPI:",D),n("Failed to delete KPI","error")}};return a?r.jsx(Ae,{title:"📊 Performance & KPI Tracking",className:"bg-white",children:r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Ee,{size:"lg"})})}):r.jsx(Ae,{title:"📊 Performance & KPI Tracking",className:"bg-white",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Your KPIs for ",ln(b)]}),r.jsx("p",{className:"text-sm text-gray-600",children:"Track your key performance indicators and see growth trends"})]}),r.jsxs("button",{onClick:()=>{h(null),d(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[r.jsx("span",{children:"+"}),r.jsx("span",{children:"Add KPI"})]})]}),r.jsx(gD,{kpis:i,employee:e}),i.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(O=>r.jsx(pD,{...O,onEdit:D=>{h(D),d(!0)},onDelete:()=>P(O.id),onViewDetails:D=>{y(D),w(!0)},canOverride:N,onOverride:D=>{console.log("Override KPI:",D)}},O.id))}):r.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"text-4xl mb-4",children:"📊"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No KPIs Added Yet"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Start tracking your performance by adding your first KPI"}),r.jsx("button",{onClick:()=>{h(null),d(!0)},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add Your First KPI"})]}),r.jsx(xD,{isOpen:u,onClose:()=>d(!1),kpi:m,onSave:_}),r.jsx(fD,{isOpen:g,onClose:()=>w(!1),kpi:j,historicalData:j?l[j.title]||[]:[]}),r.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[r.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"ℹ️ How KPI Tracking Works"}),r.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[r.jsxs("p",{children:["• ",r.jsx("strong",{children:"Performance Score:"})," Average of all your KPI achievement rates (target vs actual)"]}),r.jsxs("p",{children:["• ",r.jsx("strong",{children:"Trend Indicators:"})," Compare current month performance with previous month"]}),r.jsxs("p",{children:["• ",r.jsx("strong",{children:"Visual Charts:"})," See your progress over the last 6 months"]}),r.jsxs("p",{children:["• ",r.jsx("strong",{children:"Agency Ranking:"})," Your performance score is used for agency-wide rankings"]}),r.jsxs("p",{children:["• ",r.jsx("strong",{children:"Target Setting:"})," Work with your manager to set realistic and challenging targets"]})]})]})]})})},yD=({month:e,attendanceData:t,onAttendanceChange:n})=>{const a=h=>{const[f,x]=h.split("-").map(Number);return new Date(f,x,0).getDate()},s=h=>{const[f,x]=h.split("-").map(Number);return new Date(f,x-1,1).getDay()},i=a(e),o=s(e),l=Array.from({length:i},(h,f)=>f+1),c=Array.from({length:o},(h,f)=>null),u=h=>{const f=`${e}-${h.toString().padStart(2,"0")}`;return t[f]||"not-set"},d=h=>{switch(h){case"present":return"bg-green-500 text-white";case"wfh":return"bg-blue-500 text-white";case"leave":return"bg-yellow-500 text-white";case"absent":return"bg-red-500 text-white";case"holiday":return"bg-gray-400 text-white";default:return"bg-gray-100 text-gray-600 border border-gray-300"}},m=h=>{const f=`${e}-${h.toString().padStart(2,"0")}`,x=u(h),g=["present","wfh","leave","absent","holiday"],w=g.indexOf(x),j=g[(w+1)%g.length];n(f,j)};return r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[r.jsxs("h4",{className:"font-medium text-gray-900 mb-4",children:["📅 Attendance Calendar - ",ln(e)]}),r.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 text-xs",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),r.jsx("span",{children:"Present"})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded"}),r.jsx("span",{children:"WFH"})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded"}),r.jsx("span",{children:"Leave"})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500 rounded"}),r.jsx("span",{children:"Absent"})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:"w-3 h-3 bg-gray-400 rounded"}),r.jsx("span",{children:"Holiday"})]})]}),r.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(h=>r.jsx("div",{className:"text-center text-xs font-medium text-gray-600 py-2",children:h},h)),c.map((h,f)=>r.jsx("div",{className:"h-8"},`empty-${f}`)),l.map(h=>{const f=u(h);return r.jsx("button",{onClick:()=>m(h),className:`h-8 w-8 text-xs font-medium rounded hover:scale-110 transition-all duration-200 ${d(f)}`,title:`Day ${h} - ${f.replace("-"," ").toUpperCase()} (Click to change)`,children:h},h)})]})]})},vD=({logs:e,onAddLog:t,onUpdateLog:n,onDeleteLog:a})=>{const[s,i]=p.useState(!1),[o,l]=p.useState({type:"whatsapp",count:1,description:"",date:new Date().toISOString().split("T")[0]}),c=()=>{o.description.trim()&&(t(o),l({type:"whatsapp",count:1,description:"",date:new Date().toISOString().split("T")[0]}),i(!1))},u=d=>{switch(d){case"whatsapp":return"💬";case"call":return"📞";case"email":return"📧";case"meeting":return"🤝";default:return"📝"}};return r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"📞 Communication Log"}),r.jsx("button",{onClick:()=>i(!0),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:"+ Add Log"})]}),s&&r.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Type"}),r.jsxs("select",{value:o.type,onChange:d=>l(m=>({...m,type:d.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",children:[r.jsx("option",{value:"whatsapp",children:"WhatsApp"}),r.jsx("option",{value:"call",children:"Call"}),r.jsx("option",{value:"email",children:"Email"}),r.jsx("option",{value:"meeting",children:"Meeting"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Count"}),r.jsx("input",{type:"number",value:o.count,onChange:d=>l(m=>({...m,count:parseInt(d.target.value)||1})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",min:"1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Date"}),r.jsx("input",{type:"date",value:o.date,onChange:d=>l(m=>({...m,date:d.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("input",{type:"text",value:o.description,onChange:d=>l(m=>({...m,description:d.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Brief description..."})]})]}),r.jsxs("div",{className:"flex justify-end space-x-2 mt-3",children:[r.jsx("button",{onClick:()=>i(!1),className:"px-3 py-1 text-sm text-gray-600 border border-gray-300 rounded hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:c,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:"Add Log"})]})]}),r.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:e.length>0?e.map((d,m)=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"text-lg",children:u(d.type)}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[d.count,"x ",d.type.charAt(0).toUpperCase()+d.type.slice(1)]}),r.jsx("div",{className:"text-xs text-gray-600",children:d.description}),r.jsx("div",{className:"text-xs text-gray-500",children:d.date})]})]}),r.jsx("button",{onClick:()=>a(m),className:"text-red-500 hover:text-red-700 text-sm",title:"Delete log",children:"🗑️"})]},m)):r.jsxs("div",{className:"text-center py-6 text-gray-500",children:[r.jsx("p",{className:"text-sm",children:"No communication logs added yet"}),r.jsx("p",{className:"text-xs",children:'Click "Add Log" to start tracking your communications'})]})})]})},jD=({meetings:e,onAddMeeting:t,onDeleteMeeting:n})=>{const[a,s]=p.useState(!1),[i,o]=p.useState({title:"",url:"",date:new Date().toISOString().split("T")[0],duration:60}),l=()=>{i.title.trim()&&i.url.trim()&&(t(i),o({title:"",url:"",date:new Date().toISOString().split("T")[0],duration:60}),s(!1))},c=u=>{try{return new URL(u),!0}catch{return!1}};return r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:"🔗 Meeting URLs"}),r.jsx("button",{onClick:()=>s(!0),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:"+ Add Meeting"})]}),a&&r.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Meeting Title"}),r.jsx("input",{type:"text",value:i.title,onChange:u=>o(d=>({...d,title:u.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"e.g., Client Review, Team Standup"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Date"}),r.jsx("input",{type:"date",value:i.date,onChange:u=>o(d=>({...d,date:u.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Meeting URL"}),r.jsx("input",{type:"url",value:i.url,onChange:u=>o(d=>({...d,url:u.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"https://meet.google.com/..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Duration (minutes)"}),r.jsx("input",{type:"number",value:i.duration,onChange:u=>o(d=>({...d,duration:parseInt(u.target.value)||60})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",min:"15",step:"15"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-2 mt-3",children:[r.jsx("button",{onClick:()=>s(!1),className:"px-3 py-1 text-sm text-gray-600 border border-gray-300 rounded hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:l,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:"Add Meeting"})]})]}),r.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:e.length>0?e.map((u,d)=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:u.title}),r.jsxs("span",{className:"text-xs text-gray-500",children:["(",u.duration," min)"]})]}),r.jsx("div",{className:"text-xs text-gray-600 mt-1",children:u.date}),r.jsx("div",{className:"text-xs text-blue-600 mt-1",children:r.jsx("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:c(u.url)?"🔗 Open Meeting":"❌ Invalid URL"})})]}),r.jsx("button",{onClick:()=>n(d),className:"text-red-500 hover:text-red-700 text-sm ml-2",title:"Delete meeting",children:"🗑️"})]},d)):r.jsxs("div",{className:"text-center py-6 text-gray-500",children:[r.jsx("p",{className:"text-sm",children:"No meeting URLs added yet"}),r.jsx("p",{className:"text-xs",children:'Click "Add Meeting" to start tracking your meetings'})]})})]})},wD=({attendanceData:e,communicationLogs:t,meetings:n,submissions:a,month:s})=>{const i=p.useMemo(()=>{new Date(new Date(s+"-01").getFullYear(),new Date(s+"-01").getMonth()+1,0).getDate();const l=25,c=Object.values(e).filter(g=>["present","wfh"].includes(g)).length,u=Math.min(c/l*100,100),d=t.reduce((g,w)=>g+w.count,0),m=Math.min(d/50*100,100),h=Math.min(n.length/10*100,100),f=a.length>0?100:0,x=u*.4+m*.3+h*.2+f*.1;return{total:Math.round(x),breakdown:{attendance:Math.round(u),communication:Math.round(m),meetings:Math.round(h),submissions:Math.round(f)},stats:{attendanceDays:c,workingDays:l,totalCommunications:d,totalMeetings:n.length,submissionsCount:a.length}}},[e,t,n,a,s]),o=l=>l>=90?"text-green-600 bg-green-50 border-green-200":l>=75?"text-blue-600 bg-blue-50 border-blue-200":l>=60?"text-yellow-600 bg-yellow-50 border-yellow-200":"text-red-600 bg-red-50 border-red-200";return r.jsxs("div",{className:`border-2 rounded-lg p-6 ${o(i.total)}`,children:[r.jsx("h4",{className:"text-lg font-semibold mb-4 text-center",children:"📊 Discipline Score"}),r.jsxs("div",{className:"text-center mb-6",children:[r.jsxs("div",{className:"text-4xl font-bold mb-2",children:[i.total,"/100"]}),r.jsx("div",{className:"text-sm opacity-75",children:"Overall Discipline Score"})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold",children:i.breakdown.attendance}),r.jsx("div",{className:"text-xs opacity-75",children:"Attendance"}),r.jsxs("div",{className:"text-xs",children:[i.stats.attendanceDays,"/",i.stats.workingDays," days"]})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold",children:i.breakdown.communication}),r.jsx("div",{className:"text-xs opacity-75",children:"Communication"}),r.jsxs("div",{className:"text-xs",children:[i.stats.totalCommunications," logs"]})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold",children:i.breakdown.meetings}),r.jsx("div",{className:"text-xs opacity-75",children:"Meetings"}),r.jsxs("div",{className:"text-xs",children:[i.stats.totalMeetings," meetings"]})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold",children:i.breakdown.submissions}),r.jsx("div",{className:"text-xs opacity-75",children:"Submissions"}),r.jsxs("div",{className:"text-xs",children:[i.stats.submissionsCount," forms"]})]})]}),r.jsx("div",{className:"text-xs opacity-75 text-center",children:"Formula: Attendance (40%) + Communication (30%) + Meetings (20%) + Submissions (10%)"})]})},ND=({employee:e})=>{const t=Ie(),{notify:n}=Oe(),[a,s]=p.useState(!1),[i,o]=p.useState(Kl()),[l,c]=p.useState({}),[u,d]=p.useState([]),[m,h]=p.useState([]),[f,x]=p.useState([]);p.useEffect(()=>{(async()=>{if(e!=null&&e.id){s(!0);try{const{data:b,error:v}=await t.from("employee_attendance").select("*").eq("employee_id",e.id).like("date",`${i}%`);if(v)throw v;const _={};b==null||b.forEach(C=>{_[C.date]=C.status}),c(_);const{data:P,error:O}=await t.from("employee_communications").select("*").eq("employee_id",e.id).like("date",`${i}%`).order("date",{ascending:!1});if(O)throw O;d(P||[]);const{data:D,error:A}=await t.from("employee_meetings").select("*").eq("employee_id",e.id).like("date",`${i}%`).order("date",{ascending:!1});if(A)throw A;h(D||[]);const{data:T,error:L}=await t.from("submissions").select("*").eq("employee_name",e.name).eq("month_key",i);if(L)throw L;x(T||[])}catch(b){console.error("Error loading discipline data:",b),n("Failed to load discipline data","error")}finally{s(!1)}}})()},[e,i,t,n]);const g=async(S,b)=>{try{const{error:v}=await t.from("employee_attendance").upsert({employee_id:e.id,date:S,status:b,updated_at:new Date().toISOString()});if(v)throw v;c(_=>({..._,[S]:b})),n("Attendance updated","success")}catch(v){console.error("Error updating attendance:",v),n("Failed to update attendance","error")}},w=async S=>{try{const{data:b,error:v}=await t.from("employee_communications").insert({employee_id:e.id,type:S.type,count:S.count,description:S.description,date:S.date,created_at:new Date().toISOString()}).select().single();if(v)throw v;d(_=>[b,..._]),n("Communication log added","success")}catch(b){console.error("Error adding communication log:",b),n("Failed to add communication log","error")}},j=async S=>{const b=u[S];if(b.id)try{const{error:v}=await t.from("employee_communications").delete().eq("id",b.id);if(v)throw v;d(_=>_.filter((P,O)=>O!==S)),n("Communication log deleted","success")}catch(v){console.error("Error deleting communication log:",v),n("Failed to delete communication log","error")}},y=async S=>{try{const{data:b,error:v}=await t.from("employee_meetings").insert({employee_id:e.id,title:S.title,url:S.url,date:S.date,duration:S.duration,created_at:new Date().toISOString()}).select().single();if(v)throw v;h(_=>[b,..._]),n("Meeting added","success")}catch(b){console.error("Error adding meeting:",b),n("Failed to add meeting","error")}},N=async S=>{const b=m[S];if(b.id)try{const{error:v}=await t.from("employee_meetings").delete().eq("id",b.id);if(v)throw v;h(_=>_.filter((P,O)=>O!==S)),n("Meeting deleted","success")}catch(v){console.error("Error deleting meeting:",v),n("Failed to delete meeting","error")}};return a?r.jsx(Ae,{title:"📋 Discipline Tracking",className:"bg-white",children:r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Ee,{size:"lg"})})}):r.jsx(Ae,{title:"📋 Discipline Tracking",className:"bg-white",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Select Month:"}),r.jsx("select",{value:i,onChange:S=>o(S.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:12},(S,b)=>{const v=new Date;v.setMonth(v.getMonth()-b);const _=`${v.getFullYear()}-${(v.getMonth()+1).toString().padStart(2,"0")}`;return r.jsx("option",{value:_,children:ln(_)},_)})})]}),r.jsx(wD,{attendanceData:l,communicationLogs:u,meetings:m,submissions:f,month:i}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx(yD,{month:i,attendanceData:l,onAttendanceChange:g}),r.jsx(vD,{logs:u,onAddLog:w,onDeleteLog:j})]}),r.jsx(jD,{meetings:m,onAddMeeting:y,onDeleteMeeting:N}),r.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[r.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"ℹ️ How Discipline Scoring Works"}),r.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[r.jsxs("p",{children:["• ",r.jsx("strong",{children:"Attendance (40%):"})," Based on present/WFH days vs total working days (25/month)"]}),r.jsxs("p",{children:["• ",r.jsx("strong",{children:"Communication (30%):"})," WhatsApp messages, calls, emails logged (target: 50/month)"]}),r.jsxs("p",{children:["• ",r.jsx("strong",{children:"Meetings (20%):"})," Meeting URLs and attendance tracking (target: 10/month)"]}),r.jsxs("p",{children:["• ",r.jsx("strong",{children:"Submissions (10%):"})," Monthly form submissions and reports completed"]}),r.jsxs("p",{children:["• ",r.jsx("strong",{children:"Self-Reporting:"})," All data is self-reported and should be accurate for fair evaluation"]})]})]})]})})};function SD({title:e,titleId:t,...n},a){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?p.createElement("title",{id:t},e):null,p.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const qb=p.forwardRef(SD);function _D({title:e,titleId:t,...n},a){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},n),e?p.createElement("title",{id:t},e):null,p.createElement("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z",clipRule:"evenodd"}))}const kD=p.forwardRef(_D),Lo=({score:e,size:t=120})=>{const n=(t-20)/2,a=2*Math.PI*n,s=a,i=a-e/100*a,o=l=>l>=70?"#10B981":l>=50?"#F59E0B":"#EF4444";return r.jsxs("div",{className:"relative",style:{width:t,height:t},children:[r.jsxs("svg",{width:t,height:t,className:"transform -rotate-90",children:[r.jsx("circle",{cx:t/2,cy:t/2,r:n,stroke:"#E5E7EB",strokeWidth:"8",fill:"none"}),r.jsx("circle",{cx:t/2,cy:t/2,r:n,stroke:o(e),strokeWidth:"8",fill:"none",strokeDasharray:s,strokeDashoffset:i,strokeLinecap:"round",className:"transition-all duration-1000 ease-out"})]}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:`text-2xl font-bold ${e>=70?"text-green-600":e>=50?"text-yellow-600":"text-red-600"}`,children:e}),r.jsx("div",{className:"text-xs text-gray-500",children:"NPS"})]})})]})},Td=({rating:e,onRatingChange:t,readonly:n=!1,size:a="md"})=>{const[s,i]=p.useState(0),o={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"};return r.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(l=>{const c=l<=(s||e);return r.jsx("button",{type:"button",disabled:n,className:`${n?"cursor-default":"cursor-pointer hover:scale-110"} transition-transform`,onMouseEnter:()=>!n&&i(l),onMouseLeave:()=>!n&&i(0),onClick:()=>!n&&t&&t(l),children:c?r.jsx(kD,{className:`${o[a]} text-yellow-400`}):r.jsx(dy,{className:`${o[a]} text-gray-300`})},l)})})},AD=({type:e,targetEmployee:t,onSubmit:n,onCancel:a})=>{var c;const[s,i]=p.useState({rating:0,feedback:"",category:"",anonymous:!1}),o={peer:["Communication","Collaboration","Technical Skills","Leadership","Reliability"],company:["Work Environment","Management","Tools & Resources","Growth Opportunities","Work-Life Balance"],client:["Service Quality","Communication","Timeliness","Problem Solving","Overall Satisfaction"]},l=u=>{u.preventDefault(),!(s.rating===0||!s.feedback.trim())&&n(s)};return r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e==="peer"?`Feedback for ${t==null?void 0:t.name}`:e==="company"?"Company Feedback":"Client Satisfaction"}),r.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),r.jsxs("form",{onSubmit:l,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),r.jsxs("select",{value:s.category,onChange:u=>i({...s,category:u.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[r.jsx("option",{value:"",children:"Select a category"}),(c=o[e])==null?void 0:c.map(u=>r.jsx("option",{value:u,children:u},u))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating"}),r.jsx(Td,{rating:s.rating,onRatingChange:u=>i({...s,rating:u})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Feedback"}),r.jsx("textarea",{value:s.feedback,onChange:u=>i({...s,feedback:u.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Share your thoughts...",required:!0})]}),e==="peer"&&r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"anonymous",checked:s.anonymous,onChange:u=>i({...s,anonymous:u.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsx("label",{htmlFor:"anonymous",className:"ml-2 text-sm text-gray-700",children:"Submit anonymously"})]}),r.jsxs("div",{className:"flex space-x-3 pt-4",children:[r.jsx("button",{type:"submit",disabled:s.rating===0||!s.feedback.trim(),className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Submit Feedback"}),r.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})]})},$o=({feedback:e,showActions:t=!1,onAppreciate:n,onFlag:a})=>{var c;const[s,i]=p.useState(!1),o=150,l=e.feedback.length>o;return r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-sm font-medium text-blue-600",children:e.anonymous?"?":((c=e.from_name)==null?void 0:c.charAt(0))||"U"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.anonymous?"Anonymous":e.from_name||"Unknown"}),r.jsxs("div",{className:"text-xs text-gray-500",children:[e.category," • ",new Date(e.created_at).toLocaleDateString()]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Td,{rating:e.rating,readonly:!0,size:"sm"}),t&&r.jsxs("div",{className:"flex space-x-1",children:[r.jsx("button",{onClick:()=>n&&n(e.id),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",title:"Appreciate",children:r.jsx(Ud,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>a&&a(e.id),className:"p-1 text-gray-400 hover:text-yellow-500 transition-colors",title:"Flag for review",children:r.jsx(oi,{className:"h-4 w-4"})})]})]})]}),r.jsx("div",{className:"text-sm text-gray-700",children:l&&!s?r.jsxs(r.Fragment,{children:[e.feedback.substring(0,o),"...",r.jsx("button",{onClick:()=>i(!0),className:"text-blue-600 hover:text-blue-700 ml-1",children:"Read more"})]}):r.jsxs(r.Fragment,{children:[e.feedback,l&&s&&r.jsx("button",{onClick:()=>i(!1),className:"text-blue-600 hover:text-blue-700 ml-1",children:"Show less"})]})}),e.appreciations>0&&r.jsxs("div",{className:"mt-2 flex items-center space-x-1 text-xs text-gray-500",children:[r.jsx(Ud,{className:"h-3 w-3 text-red-500"}),r.jsxs("span",{children:[e.appreciations," appreciation",e.appreciations!==1?"s":""]})]})]})},PD=({employee:e})=>{const t=Ie(),{notify:n}=Oe(),[a,s]=p.useState(!0),[i,o]=p.useState("overview"),[l,c]=p.useState(null),[u,d]=p.useState({client_satisfaction:0,peer_rating:0,company_satisfaction:0}),[m,h]=p.useState({received:[],given:[],company:[]}),[f,x]=p.useState([]),[g,w]=p.useState(null);p.useEffect(()=>{e!=null&&e.id&&j()},[e==null?void 0:e.id]);const j=async()=>{s(!0);try{const{data:S,error:b}=await t.from("employee_nps").select("*").eq("employee_id",e.id).eq("month",new Date().toISOString().slice(0,7)).single();S&&!b&&d(S);const{data:v,error:_}=await t.from("employee_feedback").select("*, from_employee:from_employee_id(name)").eq("to_employee_id",e.id).order("created_at",{ascending:!1});if(_)throw _;const{data:P,error:O}=await t.from("employee_feedback").select("*, to_employee:to_employee_id(name)").eq("from_employee_id",e.id).order("created_at",{ascending:!1});if(O)throw O;const{data:D,error:A}=await t.from("company_feedback").select("*").eq("employee_id",e.id).order("created_at",{ascending:!1});if(A)throw A;h({received:v||[],given:P||[],company:D||[]});const{data:T,error:L}=await t.from("employees").select("id, name, department").neq("id",e.id).eq("is_active",!0);if(L)throw L;x(T||[])}catch(S){console.error("Error loading feedback data:",S),n("Failed to load feedback data","error")}finally{s(!1)}},y=async S=>{try{if(l==="peer"&&g){const{error:b}=await t.from("employee_feedback").insert({from_employee_id:e.id,to_employee_id:g.id,rating:S.rating,feedback:S.feedback,category:S.category,anonymous:S.anonymous,month:new Date().toISOString().slice(0,7)});if(b)throw b;n("Peer feedback submitted successfully!","success")}else if(l==="company"){const{error:b}=await t.from("company_feedback").insert({employee_id:e.id,rating:S.rating,feedback:S.feedback,category:S.category,month:new Date().toISOString().slice(0,7)});if(b)throw b;n("Company feedback submitted successfully!","success")}c(null),w(null),j()}catch(b){console.error("Error submitting feedback:",b),n("Failed to submit feedback","error")}},N=async S=>{try{const{error:b}=await t.from("employee_feedback").update({appreciations:t.raw("appreciations + 1")}).eq("id",S);if(b)throw b;n("Appreciation added!","success"),j()}catch(b){console.error("Error adding appreciation:",b),n("Failed to add appreciation","error")}};return a?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Ee,{size:"lg"})}):r.jsxs(Ae,{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Feedback & NPS"}),r.jsx("p",{className:"text-gray-600",children:"Client satisfaction, peer feedback, and company insights"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Er,{className:"h-5 w-5 text-gray-400"}),r.jsx("span",{className:"text-sm text-gray-500",children:"Updated monthly"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 text-center",children:[r.jsx(Lo,{score:u.client_satisfaction}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mt-4",children:"Client Satisfaction"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Based on client feedback"})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 text-center",children:[r.jsx(Lo,{score:u.peer_rating}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mt-4",children:"Peer Rating"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Team collaboration score"})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 text-center",children:[r.jsx(Lo,{score:u.company_satisfaction}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mt-4",children:"Company Satisfaction"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Your workplace happiness"})]})]}),r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"flex space-x-8",children:[{id:"overview",name:"Overview",icon:"📊"},{id:"received",name:"Received Feedback",icon:"📥"},{id:"given",name:"Given Feedback",icon:"📤"},{id:"company",name:"Company Feedback",icon:"🏢"}].map(S=>r.jsxs("button",{onClick:()=>o(S.id),className:`py-2 px-1 border-b-2 font-medium text-sm ${i===S.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx("span",{className:"mr-2",children:S.icon}),S.name]},S.id))})}),r.jsxs("div",{className:"space-y-6",children:[i==="overview"&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("button",{onClick:()=>c("peer"),className:"w-full flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx(Go,{className:"h-5 w-5 text-blue-600"}),r.jsx("span",{className:"text-sm font-medium",children:"Give Peer Feedback"})]}),r.jsxs("button",{onClick:()=>c("company"),className:"w-full flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx(ma,{className:"h-5 w-5 text-green-600"}),r.jsx("span",{className:"text-sm font-medium",children:"Company Feedback"})]})]})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"This Month"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Feedback Received"}),r.jsx("span",{className:"font-medium",children:m.received.length})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Feedback Given"}),r.jsx("span",{className:"font-medium",children:m.given.length})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Average Rating"}),r.jsx("div",{className:"flex items-center space-x-1",children:r.jsx(Td,{rating:m.received.length>0?m.received.reduce((S,b)=>S+b.rating,0)/m.received.length:0,readonly:!0,size:"sm"})})]})]})]})]}),i==="received"&&r.jsx("div",{className:"space-y-4",children:m.received.length>0?m.received.map(S=>{var b;return r.jsx($o,{feedback:{...S,from_name:(b=S.from_employee)==null?void 0:b.name},showActions:!0,onAppreciate:N},S.id)}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx(ma,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"No feedback received yet"})]})}),i==="given"&&r.jsx("div",{className:"space-y-4",children:m.given.length>0?m.given.map(S=>{var b;return r.jsx($o,{feedback:{...S,from_name:`To: ${(b=S.to_employee)==null?void 0:b.name}`}},S.id)}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Go,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"No feedback given yet"}),r.jsx("button",{onClick:()=>c("peer"),className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Give Feedback"})]})}),i==="company"&&r.jsx("div",{className:"space-y-4",children:m.company.length>0?m.company.map(S=>r.jsx($o,{feedback:{...S,from_name:"You",anonymous:!1}},S.id)):r.jsxs("div",{className:"text-center py-12",children:[r.jsx(ma,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"No company feedback submitted yet"}),r.jsx("button",{onClick:()=>c("company"),className:"mt-4 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:"Share Feedback"})]})})]}),l&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:l==="peer"&&!g?r.jsxs("div",{className:"bg-white rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Employee"}),r.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:f.map(S=>r.jsxs("button",{onClick:()=>w(S),className:"w-full text-left p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"font-medium",children:S.name}),r.jsx("div",{className:"text-sm text-gray-600",children:S.department})]},S.id))}),r.jsx("button",{onClick:()=>c(null),className:"mt-4 w-full py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]}):r.jsx(AD,{type:l,targetEmployee:g,onSubmit:y,onCancel:()=>{c(null),w(null)}})})}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Er,{className:"h-5 w-5 text-blue-600 mt-0.5"}),r.jsxs("div",{className:"text-sm text-blue-800",children:[r.jsx("p",{className:"font-medium mb-1",children:"How NPS Scores Work:"}),r.jsxs("ul",{className:"space-y-1 text-blue-700",children:[r.jsxs("li",{children:["• ",r.jsx("strong",{children:"70-100:"})," Excellent performance, exceeding expectations"]}),r.jsxs("li",{children:["• ",r.jsx("strong",{children:"50-69:"})," Good performance, meeting most expectations"]}),r.jsxs("li",{children:["• ",r.jsx("strong",{children:"0-49:"})," Needs improvement, below expectations"]})]})]})]})})]})},CD=({current:e,target:t,label:n,showPercentage:a=!0})=>{const s=Math.min(e/t*100,100),i=e>=t,o=e>t;return r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:n}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("span",{className:`text-sm font-medium ${i?"text-green-600":e>t*.7?"text-yellow-600":"text-red-600"}`,children:[e,"/",t," hours"]}),a&&r.jsxs("span",{className:`text-xs ${i?"text-green-600":"text-gray-500"}`,children:["(",Math.round(s),"%)"]}),i&&r.jsx(qb,{className:"h-4 w-4 text-green-500"})]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${o?"bg-gradient-to-r from-green-500 to-blue-500":i?"bg-green-500":s>70?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(s,100)}%`}})}),o&&r.jsxs("div",{className:"flex items-center space-x-1 text-xs text-blue-600",children:[r.jsx(hy,{className:"h-3 w-3"}),r.jsxs("span",{children:["Exceeded target by ",e-t," hours!"]})]})]})},ED=({entry:e,onSave:t,onCancel:n})=>{const[a,s]=p.useState({title:(e==null?void 0:e.title)||"",url:(e==null?void 0:e.url)||"",hours:(e==null?void 0:e.hours)||"",learning_type:(e==null?void 0:e.learning_type)||"video",description:(e==null?void 0:e.description)||"",key_takeaways:(e==null?void 0:e.key_takeaways)||"",completion_date:(e==null?void 0:e.completion_date)||new Date().toISOString().split("T")[0]}),[i,o]=p.useState({}),l=[{value:"video",label:"📹 Video/YouTube",icon:"📹"},{value:"course",label:"🎓 Online Course",icon:"🎓"},{value:"book",label:"📚 Book/Article",icon:"📚"},{value:"workshop",label:"🛠️ Workshop/Webinar",icon:"🛠️"},{value:"podcast",label:"🎧 Podcast",icon:"🎧"},{value:"conference",label:"🎤 Conference/Talk",icon:"🎤"},{value:"practice",label:"💻 Hands-on Practice",icon:"💻"},{value:"other",label:"📝 Other",icon:"📝"}],c=()=>{const d={};if(a.title.trim()||(d.title="Title is required"),!a.url.trim())d.url="URL is required";else try{new URL(a.url)}catch{d.url="Please enter a valid URL"}return!a.hours||parseFloat(a.hours)<=0?d.hours="Hours must be greater than 0":parseFloat(a.hours)>24&&(d.hours="Hours cannot exceed 24 per entry"),a.description.trim()||(d.description="Description is required"),a.key_takeaways.trim()||(d.key_takeaways="Key takeaways are required"),o(d),Object.keys(d).length===0},u=d=>{d.preventDefault(),c()&&t({...a,hours:parseFloat(a.hours)})};return r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e?"Edit Learning Entry":"Add Learning Entry"}),r.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),r.jsxs("form",{onSubmit:u,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),r.jsx("input",{type:"text",value:a.title,onChange:d=>s({...a,title:d.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i.title?"border-red-300":"border-gray-300"}`,placeholder:"e.g., React Hooks Tutorial"}),i.title&&r.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.title})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),r.jsx("select",{value:a.learning_type,onChange:d=>s({...a,learning_type:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:l.map(d=>r.jsx("option",{value:d.value,children:d.label},d.value))})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL *"}),r.jsx("input",{type:"url",value:a.url,onChange:d=>s({...a,url:d.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i.url?"border-red-300":"border-gray-300"}`,placeholder:"https://..."}),i.url&&r.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.url})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hours *"}),r.jsx("input",{type:"number",step:"0.5",min:"0.5",max:"24",value:a.hours,onChange:d=>s({...a,hours:d.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i.hours?"border-red-300":"border-gray-300"}`,placeholder:"2.5"}),i.hours&&r.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.hours})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Completion Date *"}),r.jsx("input",{type:"date",value:a.completion_date,onChange:d=>s({...a,completion_date:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),r.jsx("textarea",{value:a.description,onChange:d=>s({...a,description:d.target.value}),rows:3,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i.description?"border-red-300":"border-gray-300"}`,placeholder:"Brief description of the content..."}),i.description&&r.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.description})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What did you learn? *"}),r.jsx("textarea",{value:a.key_takeaways,onChange:d=>s({...a,key_takeaways:d.target.value}),rows:4,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i.key_takeaways?"border-red-300":"border-gray-300"}`,placeholder:"Key concepts, skills, or insights gained..."}),i.key_takeaways&&r.jsx("p",{className:"text-red-600 text-xs mt-1",children:i.key_takeaways})]}),r.jsxs("div",{className:"flex space-x-3 pt-4",children:[r.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:e?"Update Entry":"Add Entry"}),r.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})]})},OD=({entry:e,onEdit:t,onDelete:n,canEdit:a=!0})=>{const[s,i]=p.useState(!1),[o,l]=p.useState(!1),c=d=>({video:"📹",course:"🎓",book:"📚",workshop:"🛠️",podcast:"🎧",conference:"🎤",practice:"💻",other:"📝"})[d]||"📝",u=(d,m=150)=>d.length<=m?d:d.substring(0,m)+"...";return r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("span",{className:"text-lg",children:c(e.learning_type)}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),r.jsxs("div",{className:"flex items-center space-x-1 text-sm text-blue-600",children:[r.jsx(On,{className:"h-4 w-4"}),r.jsxs("span",{children:[e.hours,"h"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-3",children:[r.jsxs("span",{children:["Completed: ",new Date(e.completion_date).toLocaleDateString()]}),r.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 underline",children:"View Resource"})]})]}),a&&r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>t(e),className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",title:"Edit entry",children:r.jsx(cf,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>n(e.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"Delete entry",children:r.jsx(df,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsxs("p",{className:"text-sm text-gray-600",children:[s?e.description:u(e.description),e.description.length>150&&r.jsx("button",{onClick:()=>i(!s),className:"text-blue-600 hover:text-blue-700 ml-1",children:s?"Show less":"Read more"})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Key Takeaways"}),r.jsxs("p",{className:"text-sm text-gray-600",children:[o?e.key_takeaways:u(e.key_takeaways),e.key_takeaways.length>150&&r.jsx("button",{onClick:()=>l(!o),className:"text-blue-600 hover:text-blue-700 ml-1",children:o?"Show less":"Read more"})]})]})]})},TD=({entries:e,currentMonth:t})=>{const n=e.filter(o=>o.completion_date.startsWith(t)),a=n.reduce((o,l)=>o+l.hours,0),s=n.reduce((o,l)=>(o[l.learning_type]=(o[l.learning_type]||0)+l.hours,o),{}),i=o=>({video:"Videos",course:"Courses",book:"Books/Articles",workshop:"Workshops",podcast:"Podcasts",conference:"Conferences",practice:"Practice",other:"Other"})[o]||"Other";return r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Learning Statistics"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Entries"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[a.toFixed(1),"h"]}),r.jsx("div",{className:"text-sm text-gray-600",children:"Total Hours"})]})]}),Object.keys(s).length>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Learning Types"}),r.jsx("div",{className:"space-y-2",children:Object.entries(s).sort(([,o],[,l])=>l-o).map(([o,l])=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:i(o)}),r.jsxs("span",{className:"text-sm font-medium",children:[l.toFixed(1),"h"]})]},o))})]})]})},DD=({employee:e})=>{const t=Ie(),{notify:n}=Oe(),[a,s]=p.useState(!0),[i,o]=p.useState(!1),[l,c]=p.useState(null),[u,d]=p.useState([]),[m]=p.useState(new Date().toISOString().slice(0,7)),[h]=p.useState(6),[f,x]=p.useState(!0);p.useEffect(()=>{e!=null&&e.id&&g()},[e==null?void 0:e.id]),p.useEffect(()=>{const v=u.filter(_=>_.completion_date.startsWith(m)).reduce((_,P)=>_+P.hours,0);x(v>=h)},[u,m,h]);const g=async()=>{s(!0);try{const{data:b,error:v}=await t.from("learning_entries").select("*").eq("employee_id",e.id).order("completion_date",{ascending:!1});if(v)throw v;d(b||[])}catch(b){console.error("Error loading learning entries:",b),n("Failed to load learning entries","error")}finally{s(!1)}},w=async b=>{try{if(l){const{error:v}=await t.from("learning_entries").update({...b,updated_at:new Date().toISOString()}).eq("id",l.id);if(v)throw v;n("Learning entry updated successfully!","success")}else{const{error:v}=await t.from("learning_entries").insert({...b,employee_id:e.id,month:b.completion_date.slice(0,7)});if(v)throw v;n("Learning entry added successfully!","success")}o(!1),c(null),g()}catch(v){console.error("Error saving learning entry:",v),n("Failed to save learning entry","error")}},j=async b=>{if(confirm("Are you sure you want to delete this learning entry?"))try{const{error:v}=await t.from("learning_entries").delete().eq("id",b);if(v)throw v;n("Learning entry deleted successfully!","success"),g()}catch(v){console.error("Error deleting learning entry:",v),n("Failed to delete learning entry","error")}},y=b=>{c(b),o(!0)},S=u.filter(b=>b.completion_date.startsWith(m)).reduce((b,v)=>b+v.hours,0);return a?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Ee,{size:"lg"})}):r.jsxs(Ae,{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Learning & Growth"}),r.jsx("p",{className:"text-gray-600",children:"Track your continuous learning journey"})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[!f&&r.jsxs("div",{className:"flex items-center space-x-2 bg-red-50 text-red-700 px-3 py-2 rounded-lg",children:[r.jsx(lf,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Report submission blocked"})]}),r.jsxs("button",{onClick:()=>{c(null),o(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[r.jsx(uy,{className:"h-4 w-4"}),r.jsx("span",{children:"Add Learning"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 bg-white border border-gray-200 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Monthly Progress"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(mf,{className:"h-5 w-5 text-blue-600"}),r.jsx("span",{className:"text-sm text-gray-600",children:new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"})})]})]}),r.jsx(CD,{current:S,target:h,label:"Learning Hours"}),S<h&&r.jsx("div",{className:"mt-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(oi,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),r.jsxs("div",{className:"text-sm text-yellow-800",children:[r.jsx("p",{className:"font-medium mb-1",children:"Learning Target Not Met"}),r.jsxs("p",{children:["You need ",r.jsxs("strong",{children:[(h-S).toFixed(1)," more hours"]})," to reach the minimum ",h," hours required this month. Complete your learning to unlock monthly report submission."]})]})]})}),S>=h&&r.jsx("div",{className:"mt-4 bg-green-50 border border-green-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(qb,{className:"h-5 w-5 text-green-600 mt-0.5"}),r.jsxs("div",{className:"text-sm text-green-800",children:[r.jsx("p",{className:"font-medium mb-1",children:"Learning Target Achieved!"}),r.jsxs("p",{children:["Great job! You've completed ",S.toFixed(1)," hours of learning this month. Your monthly report submission is now unlocked."]})]})]})})]}),r.jsx(TD,{entries:u,currentMonth:m})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Learning Entries"}),r.jsxs("div",{className:"text-sm text-gray-600",children:[u.length," total entries"]})]}),i&&r.jsx(ED,{entry:l,onSave:w,onCancel:()=>{o(!1),c(null)}}),u.length>0?r.jsx("div",{className:"space-y-4",children:u.map(b=>r.jsx(OD,{entry:b,onEdit:y,onDelete:j},b.id))}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx(my,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"No learning entries yet"}),r.jsx("button",{onClick:()=>{c(null),o(!0)},className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Add Your First Learning Entry"})]})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Er,{className:"h-5 w-5 text-blue-600 mt-0.5"}),r.jsxs("div",{className:"text-sm text-blue-800",children:[r.jsx("p",{className:"font-medium mb-2",children:"Learning Requirements:"}),r.jsxs("ul",{className:"space-y-1 text-blue-700",children:[r.jsxs("li",{children:["• ",r.jsx("strong",{children:"Minimum 6 hours"})," of learning required per month"]}),r.jsx("li",{children:"• Include URL links to all learning materials"}),r.jsx("li",{children:"• Document key takeaways and learnings for each entry"}),r.jsx("li",{children:"• Monthly report submission is blocked until learning target is met"}),r.jsx("li",{children:"• Learning hours carry over - exceeding targets is encouraged!"})]})]})]})})]})},MD=({insight:e,type:t="info"})=>{const n=()=>{switch(t){case"success":return r.jsx(ii,{className:"h-5 w-5 text-green-600"});case"warning":return r.jsx(oi,{className:"h-5 w-5 text-yellow-600"});case"danger":return r.jsx(by,{className:"h-5 w-5 text-red-600"});case"tip":return r.jsx(xy,{className:"h-5 w-5 text-blue-600"});default:return r.jsx(Er,{className:"h-5 w-5 text-gray-600"})}},a=()=>{switch(t){case"success":return"bg-green-50 border-green-200";case"warning":return"bg-yellow-50 border-yellow-200";case"danger":return"bg-red-50 border-red-200";case"tip":return"bg-blue-50 border-blue-200";default:return"bg-gray-50 border-gray-200"}};return r.jsx("div",{className:`border rounded-lg p-4 ${a()}`,children:r.jsxs("div",{className:"flex items-start space-x-3",children:[n(),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:e.title}),r.jsx("p",{className:"text-sm text-gray-700",children:e.description}),e.action&&r.jsxs("p",{className:"text-sm font-medium text-gray-900 mt-2",children:["💡 ",e.action]})]})]})})},Fo=({value:e,previousValue:t,label:n,format:a="number"})=>{const s=e-t,i=t!==0?s/t*100:0,o=s>0,l=s===0,c=u=>{switch(a){case"percentage":return`${u.toFixed(1)}%`;case"hours":return`${u.toFixed(1)}h`;case"currency":return`$${u.toLocaleString()}`;default:return u.toFixed(1)}};return r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:c(e)}),r.jsx("div",{className:"text-sm text-gray-600 mb-1",children:n}),r.jsxs("div",{className:`flex items-center justify-center space-x-1 text-xs ${l?"text-gray-500":o?"text-green-600":"text-red-600"}`,children:[l?r.jsx(hf,{className:"h-3 w-3"}):o?r.jsx(py,{className:"h-3 w-3"}):r.jsx(gy,{className:"h-3 w-3"}),r.jsxs("span",{children:[Math.abs(i).toFixed(1),"% vs last month"]})]})]})},ID=({score:e,rank:t,totalEmployees:n})=>{const a=i=>i>=85?"text-green-600 bg-green-100":i>=70?"text-blue-600 bg-blue-100":i>=55?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",s=i=>i>=85?"Exceptional":i>=70?"Strong":i>=55?"Satisfactory":"Needs Improvement";return r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:`inline-flex items-center justify-center w-20 h-20 rounded-full text-2xl font-bold ${a(e)}`,children:e.toFixed(0)}),r.jsxs("div",{className:"mt-2",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:s(e)}),r.jsxs("div",{className:"text-xs text-gray-600",children:["Rank #",t," of ",n]})]})]})},RD=({data:e,currentEmployeeId:t})=>{const n=e.map(a=>({...a,isCurrentUser:a.id===t}));return r.jsx("div",{className:"h-64",children:r.jsx(Ar,{width:"100%",height:"100%",children:r.jsxs(gs,{data:n,margin:{top:20,right:30,left:20,bottom:5},children:[r.jsx(rn,{strokeDasharray:"3 3"}),r.jsx(or,{dataKey:"name",angle:-45,textAnchor:"end",height:80,fontSize:12}),r.jsx(lr,{}),r.jsx(en,{formatter:(a,s)=>[a.toFixed(1),"Score"],labelFormatter:a=>`Employee: ${a}`}),r.jsx(pa,{dataKey:"score",fill:a=>a.isCurrentUser?"#3B82F6":"#E5E7EB",radius:[4,4,0,0]})]})})})},LD=({skills:e})=>{const t=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4"];return r.jsx("div",{className:"space-y-4",children:e.map((n,a)=>{const s=n.score/100*100;return r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:n.name}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("span",{className:"text-sm text-gray-600",children:[n.score.toFixed(1),"/100"]}),n.trend&&r.jsxs("div",{className:`flex items-center space-x-1 text-xs ${n.trend>0?"text-green-600":n.trend<0?"text-red-600":"text-gray-500"}`,children:[n.trend>0?r.jsx(Gl,{className:"h-3 w-3"}):n.trend<0?r.jsx(uf,{className:"h-3 w-3"}):r.jsx(hf,{className:"h-3 w-3"}),r.jsxs("span",{children:[Math.abs(n.trend).toFixed(1),"%"]})]})]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"h-2 rounded-full transition-all duration-500",style:{width:`${s}%`,backgroundColor:t[a%t.length]}})})]},n.name)})})},qh=({data:e})=>r.jsx("div",{className:"h-64",children:r.jsx(Ar,{width:"100%",height:"100%",children:r.jsxs(so,{data:e,margin:{top:20,right:30,left:20,bottom:5},children:[r.jsx(rn,{strokeDasharray:"3 3"}),r.jsx(or,{dataKey:"month"}),r.jsx(lr,{domain:[0,100]}),r.jsx(en,{formatter:t=>[t.toFixed(1),"Performance Score"],labelFormatter:t=>`Month: ${t}`}),r.jsx(pn,{type:"monotone",dataKey:"score",stroke:"#3B82F6",strokeWidth:3,dot:{fill:"#3B82F6",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#3B82F6",strokeWidth:2}})]})})}),zh=({employees:e,currentEmployeeId:t,showFull:n=!1})=>{const a=n?e:e.slice(0,5),s=i=>{switch(i){case 1:return"🥇";case 2:return"🥈";case 3:return"🥉";default:return`#${i}`}};return r.jsxs("div",{className:"space-y-3",children:[a.map((i,o)=>{const l=o+1,c=i.id===t;return r.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${c?"bg-blue-50 border-blue-200":"bg-white border-gray-200"}`,children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"text-lg font-bold text-gray-600 w-8",children:s(l)}),r.jsxs("div",{children:[r.jsxs("div",{className:`font-medium ${c?"text-blue-900":"text-gray-900"}`,children:[i.name," ",c&&"(You)"]}),r.jsx("div",{className:"text-sm text-gray-600",children:i.department})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:`text-lg font-bold ${i.score>=85?"text-green-600":i.score>=70?"text-blue-600":i.score>=55?"text-yellow-600":"text-red-600"}`,children:i.score.toFixed(1)}),r.jsx("div",{className:"text-xs text-gray-500",children:"Score"})]})]},i.id)}),!n&&e.length>5&&r.jsxs("div",{className:"text-center text-sm text-gray-500 pt-2",children:["... and ",e.length-5," more employees"]})]})},$D=({employee:e})=>{const t=Ie(),{notify:n}=Oe(),[a,s]=p.useState(!0),[i,o]=p.useState({currentScore:0,previousScore:0,rank:0,totalEmployees:0,insights:[],skills:[],timeline:[],teamComparison:[],leaderboard:[]}),[l,c]=p.useState("overview");p.useEffect(()=>{e!=null&&e.id&&u()},[e==null?void 0:e.id]);const u=async()=>{s(!0);try{const h=new Date().toISOString().slice(0,7),f=new Date(new Date().setMonth(new Date().getMonth()-1)).toISOString().slice(0,7),{data:x,error:g}=await t.from("employee_performance").select("*").eq("employee_id",e.id).in("month",[h,f]).order("month",{ascending:!1});if(g)throw g;const w=x==null?void 0:x.find(R=>R.month===h),j=x==null?void 0:x.find(R=>R.month===f),{data:y,error:N}=await t.from("employee_performance").select("employee_id, overall_score, employees(name, department)").eq("month",h).order("overall_score",{ascending:!1});if(N)throw N;const{data:S,error:b}=await t.from("monthly_kpi_reports").select("*").eq("employee_id",e.id).eq("month",h).single();if(b&&b.code!=="PGRST116")throw b;const{data:v,error:_}=await t.from("employee_performance").select("month, overall_score").eq("employee_id",e.id).order("month",{ascending:!0}).limit(6);if(_)throw _;const P=(w==null?void 0:w.overall_score)||0,O=(j==null?void 0:j.overall_score)||0,D=(y==null?void 0:y.map(R=>{var K,M;return{id:R.employee_id,name:((K=R.employees)==null?void 0:K.name)||"Unknown",department:((M=R.employees)==null?void 0:M.department)||"Unknown",score:R.overall_score||0}}))||[],A=D.findIndex(R=>R.id===e.id)+1,T=d(P,O,S,A,D.length),L=m(S),C=(v==null?void 0:v.map(R=>({month:new Date(R.month+"-01").toLocaleDateString("en-US",{month:"short",year:"2-digit"}),score:R.overall_score||0})))||[],F=D.filter(R=>R.department===e.department).slice(0,10);o({currentScore:P,previousScore:O,rank:A,totalEmployees:D.length,insights:T,skills:L,timeline:C,teamComparison:F,leaderboard:D})}catch(h){console.error("Error loading analytics data:",h),n("Failed to load analytics data","error")}finally{s(!1)}},d=(h,f,x,g,w)=>{const j=[],y=h-f,N=f!==0?y/f*100:0;if(y>5?j.push({title:"🚀 Strong Performance Growth",description:`Your performance score improved by ${y.toFixed(1)} points (${N.toFixed(1)}%) this month!`,action:"Keep up the excellent work and maintain this momentum.",type:"success"}):y<-5&&j.push({title:"📉 Performance Decline",description:`Your performance score decreased by ${Math.abs(y).toFixed(1)} points this month.`,action:"Focus on improving key KPIs and seek feedback from your manager.",type:"warning"}),g<=3?j.push({title:"🏆 Top Performer",description:`You're ranked #${g} out of ${w} employees - exceptional work!`,action:"Consider mentoring others and sharing your best practices.",type:"success"}):g>w*.8&&j.push({title:"⚠️ Performance Below Average",description:"You're in the bottom 20% of performers. Let's work on improvement.",action:"Schedule a meeting with your manager to create an improvement plan.",type:"danger"}),x){const b=["sales_target","client_satisfaction","project_completion","learning_hours"].filter(v=>x[v]&&x[v]<70);b.length>0&&j.push({title:"🎯 Focus Areas Identified",description:`These KPIs need attention: ${b.join(", ").replace(/_/g," ")}.`,action:"Prioritize these areas in your next month's goals.",type:"tip"})}return j.length===0&&j.push({title:"📊 Steady Performance",description:"Your performance is consistent. Look for opportunities to excel.",action:"Set stretch goals and challenge yourself to reach the next level.",type:"info"}),j},m=h=>h?[{name:"Sales Performance",score:h.sales_target||0,trend:Math.random()*20-10},{name:"Client Satisfaction",score:h.client_satisfaction||0,trend:Math.random()*20-10},{name:"Project Delivery",score:h.project_completion||0,trend:Math.random()*20-10},{name:"Learning & Growth",score:h.learning_hours?Math.min(h.learning_hours/6*100,100):0,trend:Math.random()*20-10},{name:"Communication",score:h.communication_score||0,trend:Math.random()*20-10}].filter(f=>f.score>0):[];return a?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Ee,{size:"lg"})}):r.jsxs(Ae,{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Growth & Analytics"}),r.jsx("p",{className:"text-gray-600",children:"Performance insights and team comparisons"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(fy,{className:"h-5 w-5 text-blue-600"}),r.jsx("span",{className:"text-sm text-gray-500",children:"AI-powered insights"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:r.jsx(ID,{score:i.currentScore,rank:i.rank,totalEmployees:i.totalEmployees})}),r.jsx(Fo,{value:i.currentScore,previousValue:i.previousScore,label:"Overall Score"}),r.jsx(Fo,{value:i.rank,previousValue:i.rank+1,label:"Team Rank"}),r.jsx(Fo,{value:85,previousValue:80,label:"Engagement",format:"percentage"})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"📊 Performance Insights"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.insights.map((h,f)=>r.jsx(MD,{insight:h,type:h.type},f))})]}),r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"flex space-x-8",children:[{id:"overview",name:"Overview",icon:"📊"},{id:"skills",name:"Skills Breakdown",icon:"🎯"},{id:"timeline",name:"Performance Timeline",icon:"📈"},{id:"team",name:"Team Comparison",icon:"👥"},{id:"leaderboard",name:"Leaderboard",icon:"🏆"}].map(h=>r.jsxs("button",{onClick:()=>c(h.id),className:`py-2 px-1 border-b-2 font-medium text-sm ${l===h.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx("span",{className:"mr-2",children:h.icon}),h.name]},h.id))})}),r.jsxs("div",{className:"space-y-6",children:[l==="overview"&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Timeline"}),r.jsx(qh,{data:i.timeline})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top 5 Performers"}),r.jsx(zh,{employees:i.leaderboard,currentEmployeeId:e.id,showFull:!1})]})]}),l==="skills"&&r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Skills & KPI Breakdown"}),i.skills.length>0?r.jsx(LD,{skills:i.skills}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Pn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"No KPI data available for this month"})]})]}),l==="timeline"&&r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"6-Month Performance Timeline"}),i.timeline.length>0?r.jsx(qh,{data:i.timeline}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Gl,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"Not enough historical data available"})]})]}),l==="team"&&r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:["Team Comparison - ",e.department]}),i.teamComparison.length>0?r.jsx(RD,{data:i.teamComparison,currentEmployeeId:e.id}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Go,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"No team data available"})]})]}),l==="leaderboard"&&r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Company Leaderboard"}),r.jsx(zh,{employees:i.leaderboard,currentEmployeeId:e.id,showFull:!0})]})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Er,{className:"h-5 w-5 text-blue-600 mt-0.5"}),r.jsxs("div",{className:"text-sm text-blue-800",children:[r.jsx("p",{className:"font-medium mb-2",children:"How is my score calculated?"}),r.jsxs("ul",{className:"space-y-1 text-blue-700",children:[r.jsxs("li",{children:["• ",r.jsx("strong",{children:"Performance Score:"})," Average of all KPIs weighted by importance"]}),r.jsxs("li",{children:["• ",r.jsx("strong",{children:"Ranking:"})," Based on overall performance compared to all employees"]}),r.jsxs("li",{children:["• ",r.jsx("strong",{children:"Trends:"})," Month-over-month comparison of key metrics"]}),r.jsxs("li",{children:["• ",r.jsx("strong",{children:"Insights:"})," AI-generated recommendations based on your data"]})]})]})]})})]})},FD=({session:e})=>{var s;const t=i=>i!=null&&i.includes("Mobile")||i!=null&&i.includes("Android")||i!=null&&i.includes("iPhone")?r.jsx(Ny,{className:"h-4 w-4 text-blue-600"}):r.jsx(Hd,{className:"h-4 w-4 text-gray-600"}),n=i=>i?i.includes("Chrome")?"Chrome":i.includes("Firefox")?"Firefox":i.includes("Safari")?"Safari":i.includes("Edge")?"Edge":"Other":"Unknown",a=i=>{if(!i)return"Unknown Location";const{city:o,region:l,country:c}=i;return[o,l,c].filter(Boolean).join(", ")};return r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-sm font-medium text-blue-600",children:((s=e.employee_name)==null?void 0:s.charAt(0))||"U"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:e.employee_name}),r.jsx("div",{className:"text-sm text-gray-600",children:e.department})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[t(e.user_agent),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.is_active?"Active":"Ended"})]})]}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(On,{className:"h-4 w-4"}),r.jsxs("span",{children:["Login: ",new Date(e.login_time).toLocaleString()]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(wy,{className:"h-4 w-4"}),r.jsx("span",{children:a(e.location)})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(gf,{className:"h-4 w-4"}),r.jsxs("span",{children:["IP: ",e.ip_address]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Hd,{className:"h-4 w-4"}),r.jsx("span",{children:n(e.user_agent)})]}),e.logout_time&&r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(On,{className:"h-4 w-4"}),r.jsxs("span",{children:["Logout: ",new Date(e.logout_time).toLocaleString()]})]}),e.session_duration&&r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(On,{className:"h-4 w-4"}),r.jsxs("span",{children:["Duration: ",Math.round(e.session_duration/60)," minutes"]})]})]})]})},BD=({employee:e,onViewReport:t,onDownloadPDF:n})=>{var a,s;return r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-sm font-medium text-blue-600",children:((a=e.name)==null?void 0:a.charAt(0))||"U"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900",children:e.name}),r.jsxs("div",{className:"text-sm text-gray-600",children:[e.department," • ",e.role]})]})]}),r.jsx("div",{className:"flex items-center space-x-2",children:r.jsxs("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.overall_score>=85?"bg-green-100 text-green-800":e.overall_score>=70?"bg-blue-100 text-blue-800":e.overall_score>=55?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:["Score: ",((s=e.overall_score)==null?void 0:s.toFixed(1))||"N/A"]})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Last Login:"}),r.jsx("div",{className:"font-medium",children:e.last_login?new Date(e.last_login).toLocaleDateString():"Never"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Reports Submitted:"}),r.jsx("div",{className:"font-medium",children:e.reports_count||0})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs("button",{onClick:()=>t(e),className:"flex-1 bg-blue-600 text-white py-2 px-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2 text-sm",children:[r.jsx(jy,{className:"h-4 w-4"}),r.jsx("span",{children:"View Report"})]}),r.jsx("button",{onClick:()=>n(e),className:"bg-gray-600 text-white py-2 px-3 rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center",title:"Download PDF",children:r.jsx(ff,{className:"h-4 w-4"})})]})]})},Uh=({data:e})=>r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Distribution"}),r.jsx("div",{className:"h-64",children:r.jsx(Ar,{width:"100%",height:"100%",children:r.jsxs(gs,{data:e.performanceDistribution,children:[r.jsx(rn,{strokeDasharray:"3 3"}),r.jsx(or,{dataKey:"range"}),r.jsx(lr,{}),r.jsx(en,{}),r.jsx(pa,{dataKey:"count",fill:"#3B82F6",radius:[4,4,0,0]})]})})})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Department Averages"}),r.jsx("div",{className:"h-64",children:r.jsx(Ar,{width:"100%",height:"100%",children:r.jsxs(gs,{data:e.departmentAverages,layout:"horizontal",children:[r.jsx(rn,{strokeDasharray:"3 3"}),r.jsx(or,{type:"number",domain:[0,100]}),r.jsx(lr,{dataKey:"department",type:"category",width:80}),r.jsx(en,{}),r.jsx(pa,{dataKey:"average",fill:"#10B981",radius:[0,4,4,0]})]})})})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Monthly Performance Trends"}),r.jsx("div",{className:"h-64",children:r.jsx(Ar,{width:"100%",height:"100%",children:r.jsxs(so,{data:e.monthlyTrends,children:[r.jsx(rn,{strokeDasharray:"3 3"}),r.jsx(or,{dataKey:"month"}),r.jsx(lr,{domain:[0,100]}),r.jsx(en,{}),r.jsx(pn,{type:"monotone",dataKey:"average",stroke:"#3B82F6",strokeWidth:3}),r.jsx(pn,{type:"monotone",dataKey:"median",stroke:"#10B981",strokeWidth:2,strokeDasharray:"5 5"})]})})})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Login Activity (Last 7 Days)"}),r.jsx("div",{className:"h-64",children:r.jsx(Ar,{width:"100%",height:"100%",children:r.jsxs(gs,{data:e.loginActivity,children:[r.jsx(rn,{strokeDasharray:"3 3"}),r.jsx(or,{dataKey:"date"}),r.jsx(lr,{}),r.jsx(en,{}),r.jsx(pa,{dataKey:"logins",fill:"#8B5CF6",radius:[4,4,0,0]})]})})})]})]}),qD=({filters:e,onFiltersChange:t})=>r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx(yy,{className:"h-5 w-5 text-gray-600"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filters"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),r.jsxs("select",{value:e.department,onChange:n=>t({...e,department:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"All Departments"}),r.jsx("option",{value:"Engineering",children:"Engineering"}),r.jsx("option",{value:"Sales",children:"Sales"}),r.jsx("option",{value:"Marketing",children:"Marketing"}),r.jsx("option",{value:"HR",children:"HR"}),r.jsx("option",{value:"Operations",children:"Operations"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),r.jsxs("select",{value:e.role,onChange:n=>t({...e,role:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"All Roles"}),r.jsx("option",{value:"Manager",children:"Manager"}),r.jsx("option",{value:"Senior",children:"Senior"}),r.jsx("option",{value:"Junior",children:"Junior"}),r.jsx("option",{value:"Intern",children:"Intern"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Month"}),r.jsx("input",{type:"month",value:e.month,onChange:n=>t({...e,month:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),r.jsxs("div",{className:"relative",children:[r.jsx(vy,{className:"h-4 w-4 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),r.jsx("input",{type:"text",value:e.search,onChange:n=>t({...e,search:n.target.value}),placeholder:"Search employees...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]})]}),zD=({currentUser:e})=>{const t=Ie(),{notify:n}=Oe(),[a,s]=p.useState(!0),[i,o]=p.useState("overview"),[l,c]=p.useState({department:"",role:"",month:new Date().toISOString().slice(0,7),search:""}),[u,d]=p.useState({employees:[],loginSessions:[],analytics:{performanceDistribution:[],departmentAverages:[],monthlyTrends:[],loginActivity:[]},stats:{totalEmployees:0,activeUsers:0,avgPerformance:0,totalLogins:0}}),m=(e==null?void 0:e.role)==="superadmin"||(e==null?void 0:e.is_admin);p.useEffect(()=>{m&&h()},[m,l]);const h=async()=>{var j;s(!0);try{let y=t.from("employees").select(`
          *,
          employee_performance!inner(
            overall_score,
            month
          )
        `).eq("employee_performance.month",l.month);l.department&&(y=y.eq("department",l.department)),l.role&&(y=y.eq("role",l.role)),l.search&&(y=y.ilike("name",`%${l.search}%`));const{data:N,error:S}=await y;if(S)throw S;const{data:b,error:v}=await t.from("login_sessions").select(`
          *,
          employees(name, department)
        `).order("login_time",{ascending:!1}).limit(50);if(v)throw v;const _=f(N),P={totalEmployees:(N==null?void 0:N.length)||0,activeUsers:((j=b==null?void 0:b.filter(O=>O.is_active))==null?void 0:j.length)||0,avgPerformance:(N==null?void 0:N.length)>0?N.reduce((O,D)=>{var A,T;return O+(((T=(A=D.employee_performance)==null?void 0:A[0])==null?void 0:T.overall_score)||0)},0)/N.length:0,totalLogins:(b==null?void 0:b.length)||0};d({employees:N||[],loginSessions:(b==null?void 0:b.map(O=>{var D,A;return{...O,employee_name:(D=O.employees)==null?void 0:D.name,department:(A=O.employees)==null?void 0:A.department}}))||[],analytics:_,stats:P})}catch(y){console.error("Error loading superadmin data:",y),n("Failed to load superadmin data","error")}finally{s(!1)}},f=j=>{const y=[{range:"0-25",count:0},{range:"26-50",count:0},{range:"51-75",count:0},{range:"76-100",count:0}];j.forEach(_=>{var O,D;const P=((D=(O=_.employee_performance)==null?void 0:O[0])==null?void 0:D.overall_score)||0;P<=25?y[0].count++:P<=50?y[1].count++:P<=75?y[2].count++:y[3].count++});const N=j.reduce((_,P)=>{var D,A;const O=P.department||"Unknown";return _[O]||(_[O]=[]),_[O].push(((A=(D=P.employee_performance)==null?void 0:D[0])==null?void 0:A.overall_score)||0),_},{}),S=Object.entries(N).map(([_,P])=>({department:_,average:P.reduce((O,D)=>O+D,0)/P.length}));return{performanceDistribution:y,departmentAverages:S,monthlyTrends:[{month:"Jan",average:72,median:75},{month:"Feb",average:74,median:76},{month:"Mar",average:76,median:78},{month:"Apr",average:78,median:80},{month:"May",average:75,median:77},{month:"Jun",average:77,median:79}],loginActivity:[{date:"Mon",logins:45},{date:"Tue",logins:52},{date:"Wed",logins:48},{date:"Thu",logins:61},{date:"Fri",logins:55},{date:"Sat",logins:23},{date:"Sun",logins:18}]}},x=j=>{n(`Viewing report for ${j.name}`,"info")},g=async j=>{try{n("Generating PDF report...","info");const y={employeeName:j.name,department:j.department,period:new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"}),metrics:{"Performance Score":`${j.overall_score||85}%`,"Projects Completed":j.reports_count||12,"Last Login":j.last_login?new Date(j.last_login).toLocaleDateString():"Never",Department:j.department||"N/A"},summary:`Performance summary for ${j.name} in ${j.department} department. Overall performance score: ${j.overall_score||85}%.`},N=xs.generateFilename(`employee-report-${j.name.replace(/\s+/g,"-")}`),S=await bs(y,"pdf","employeePerformance",N);S.success?n(S.message,"success"):n(S.message,"error")}catch(y){console.error("Error generating PDF:",y),n("Failed to generate PDF report","error")}},w=async()=>{try{n("Generating organization-wide report...","info");const j={month:new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"}),generatedBy:"Super Admin",metrics:{"Total Employees":u.stats.totalEmployees,"Active Users":u.stats.activeUsers,"Average Performance":`${u.stats.avgPerformance.toFixed(1)}%`,"Total Logins":u.stats.totalLogins,"Department Count":[...new Set(u.employees.map(S=>S.department))].length},departmentBreakdown:[...new Set(u.employees.map(S=>S.department))].map(S=>({department:S,employeeCount:u.employees.filter(b=>b.department===S).length,avgPerformance:Math.round(u.employees.filter(b=>b.department===S).reduce((b,v)=>{var _,P;return b+(((P=(_=v.employee_performance)==null?void 0:_[0])==null?void 0:P.overall_score)||0)},0)/u.employees.filter(b=>b.department===S).length)}))},y=xs.generateFilename("organization-report"),N=await bs(j,"excel","monthlyReport",y);N.success?n(N.message,"success"):n(N.message,"error")}catch(j){console.error("Error generating org report:",j),n("Failed to generate organization report","error")}};return m?a?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Ee,{size:"lg"})}):r.jsxs(Ae,{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Superadmin Controls"}),r.jsx("p",{className:"text-gray-600",children:"System administration and organization-wide analytics"})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("button",{onClick:w,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[r.jsx(ff,{className:"h-4 w-4"}),r.jsx("span",{children:"Download Org Report"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(pf,{className:"h-5 w-5 text-green-600"}),r.jsx("span",{className:"text-sm text-gray-600",children:"Superadmin Access"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 text-center",children:[r.jsx(Wd,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:u.stats.totalEmployees}),r.jsx("div",{className:"text-sm text-gray-600",children:"Total Employees"})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 text-center",children:[r.jsx(ii,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:u.stats.activeUsers}),r.jsx("div",{className:"text-sm text-gray-600",children:"Active Users"})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 text-center",children:[r.jsx(Pn,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:u.stats.avgPerformance.toFixed(1)}),r.jsx("div",{className:"text-sm text-gray-600",children:"Avg Performance"})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 text-center",children:[r.jsx(gf,{className:"h-8 w-8 text-orange-600 mx-auto mb-2"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:u.stats.totalLogins}),r.jsx("div",{className:"text-sm text-gray-600",children:"Total Logins"})]})]}),r.jsx(qD,{filters:l,onFiltersChange:c}),r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"flex space-x-8",children:[{id:"overview",name:"Overview",icon:"📊"},{id:"employees",name:"Employee Reports",icon:"👥"},{id:"sessions",name:"Login Sessions",icon:"🔐"},{id:"analytics",name:"Analytics",icon:"📈"}].map(j=>r.jsxs("button",{onClick:()=>o(j.id),className:`py-2 px-1 border-b-2 font-medium text-sm ${i===j.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx("span",{className:"mr-2",children:j.icon}),j.name]},j.id))})}),r.jsxs("div",{className:"space-y-6",children:[i==="overview"&&r.jsx(Uh,{data:u.analytics}),i==="employees"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Employee Reports (",u.employees.length,")"]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.employees.map(j=>{var y,N;return r.jsx(BD,{employee:{...j,overall_score:(N=(y=j.employee_performance)==null?void 0:y[0])==null?void 0:N.overall_score},onViewReport:x,onDownloadPDF:g},j.id)})}),u.employees.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Wd,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"No employees found with current filters"})]})]}),i==="sessions"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Recent Login Sessions (",u.loginSessions.length,")"]})}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:u.loginSessions.map(j=>r.jsx(FD,{session:j},j.id))}),u.loginSessions.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(On,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"No login sessions found"})]})]}),i==="analytics"&&r.jsx(Uh,{data:u.analytics})]}),r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Er,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),r.jsxs("div",{className:"text-sm text-yellow-800",children:[r.jsx("p",{className:"font-medium mb-2",children:"Superadmin Features:"}),r.jsxs("ul",{className:"space-y-1 text-yellow-700",children:[r.jsxs("li",{children:["• ",r.jsx("strong",{children:"Employee Reports:"})," View and download individual performance reports"]}),r.jsxs("li",{children:["• ",r.jsx("strong",{children:"Login Tracking:"})," Monitor user sessions with IP and location data"]}),r.jsxs("li",{children:["• ",r.jsx("strong",{children:"Organization Analytics:"})," Company-wide performance insights"]}),r.jsxs("li",{children:["• ",r.jsx("strong",{children:"PDF Generation:"})," Export detailed reports for compliance and review"]}),r.jsxs("li",{children:["• ",r.jsx("strong",{children:"Advanced Filtering:"})," Filter by department, role, time period, and more"]})]})]})]})})]}):r.jsxs(Ae,{className:"text-center py-12",children:[r.jsx(oi,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-gray-600",children:"You don't have permission to access superadmin controls."})]})},UD=({sections:e,currentSection:t})=>{const n=e.filter(i=>i.completed).length,a=e.length,s=n/a*100;return r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Dashboard Progress"}),r.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[n,"/",a," sections completed"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-4",children:r.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 h-3 rounded-full transition-all duration-500 ease-out",style:{width:`${s}%`}})}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:e.map((i,o)=>r.jsxs("div",{className:`flex items-center space-x-2 p-2 rounded-lg text-sm ${i.id===t?"bg-blue-100 border border-blue-300":i.completed?"bg-green-50 border border-green-200":"bg-gray-50 border border-gray-200"}`,children:[r.jsx("span",{className:"text-lg",children:i.completed?"✅":i.id===t?"🔄":"⭕"}),r.jsx("span",{className:`font-medium ${i.id===t?"text-blue-700":i.completed?"text-green-700":"text-gray-600"}`,children:i.name})]},i.id))}),r.jsx("div",{className:"mt-3 text-xs text-gray-500 text-center",children:"Complete all sections to unlock your full dashboard potential"})]})},WD=({title:e,description:t,type:n="info"})=>{const[a,s]=p.useState(!1),i=n==="warning"?"text-yellow-600":n==="success"?"text-green-600":"text-blue-600",o=n==="warning"?"bg-yellow-50 border-yellow-200":n==="success"?"bg-green-50 border-green-200":"bg-blue-50 border-blue-200";return r.jsxs("div",{className:`border rounded-lg p-3 ${o}`,children:[r.jsxs("button",{onClick:()=>s(!a),className:"flex items-center justify-between w-full text-left",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Er,{className:`h-4 w-4 ${i}`}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:e})]}),a?r.jsx(ky,{className:"h-4 w-4 text-gray-500"}):r.jsx(Ay,{className:"h-4 w-4 text-gray-500"})]}),a&&r.jsx("div",{className:"mt-2 text-sm text-gray-700",children:t})]})},HD=()=>{const e=[{question:"How is my performance score calculated?",answer:"Your performance score is calculated as the average of all your completed KPIs for the current month. Each KPI is weighted equally, and the final score is updated in real-time as you complete more KPIs."},{question:"What happens if I don't complete my learning hours?",answer:"You need to complete at least 6 hours of learning per month. If you haven't met this requirement, you won't be able to submit your monthly report or request performance reviews until the learning target is achieved."},{question:"How does the discipline score work?",answer:"Your discipline score is calculated based on: Attendance (40%), Communication logs (30%), Meeting participation (20%), and Timely submissions (10%). Each component is scored and weighted to give you an overall discipline rating."},{question:"Can I edit my submitted data?",answer:"Most data can be edited until the monthly deadline. However, some fields may be locked by managers or after certain approval processes. Contact your manager if you need to modify locked data."},{question:"Who can see my performance data?",answer:"Your direct manager, HR team, and superadmins can view your performance data. Peer feedback is anonymized, and client feedback is shared with relevant stakeholders for improvement purposes."}];return r.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx(_y,{className:"h-5 w-5 text-gray-600"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Frequently Asked Questions"})]}),r.jsx("div",{className:"space-y-4",children:e.map((t,n)=>r.jsx(WD,{title:t.question,description:t.answer,type:"info"},n))})]})},KD=({activeTab:e,setActiveTab:t,completionStatus:n,currentUser:a,dashboardType:s})=>{const i=()=>{if(!s)return[];switch(s){case"seo":return[{id:"seo-performance",name:"SEO Performance",icon:Pn,completed:!0},{id:"keyword-tracking",name:"Keyword Tracking",icon:Ga,completed:n.performance}];case"ads":return[{id:"ads-performance",name:"Ads Performance",icon:Pn,completed:!0},{id:"campaign-metrics",name:"Campaign Metrics",icon:Ga,completed:n.performance}];case"social":return[{id:"social-engagement",name:"Social Engagement",icon:ma,completed:!0},{id:"content-calendar",name:"Content Calendar",icon:Kd,completed:n.monthly}];case"youtube":return[{id:"youtube-analytics",name:"YouTube Analytics",icon:Pn,completed:!0},{id:"video-performance",name:"Video Performance",icon:Ga,completed:n.performance}];default:return[]}},o=[{id:"profile",name:"Profile",icon:Sy,completed:n.profile},{id:"monthly",name:"Monthly Forms",icon:Kd,completed:n.monthly},{id:"performance",name:"Performance & KPI",icon:Pn,completed:n.performance},{id:"discipline",name:"Discipline",icon:On,completed:n.discipline},{id:"feedback",name:"Feedback & NPS",icon:ma,completed:n.feedback},{id:"learning",name:"Learning & Growth",icon:mf,completed:n.learning},{id:"analytics",name:"Analytics",icon:Ga,completed:n.analytics}],l=[...i(),...o];return((a==null?void 0:a.role)==="superadmin"||a!=null&&a.is_admin)&&l.push({id:"superadmin",name:"Superadmin",icon:pf,completed:!0}),r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"flex space-x-8 overflow-x-auto",children:l.map(c=>{const u=c.icon;return r.jsxs("button",{onClick:()=>t(c.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 whitespace-nowrap ${e===c.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx(u,{className:"h-4 w-4"}),r.jsx("span",{children:c.name}),c.completed&&c.id!=="superadmin"&&r.jsx(ii,{className:"h-4 w-4 text-green-500"})]},c.id)})})})},GD=({employee:e,overallScore:t})=>{var s;const n=()=>{const i=new Date().getHours();return i<12?"Good Morning":i<17?"Good Afternoon":"Good Evening"},a=i=>i>=90?"text-green-600":i>=75?"text-blue-600":i>=60?"text-yellow-600":"text-red-600";return r.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg p-6 mb-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold mb-2",children:[n(),", ",(e==null?void 0:e.name)||"Employee","! 👋"]}),r.jsxs("p",{className:"text-blue-100 mb-1",children:[e==null?void 0:e.department," • ",((s=e==null?void 0:e.role)==null?void 0:s[0])||"Employee"]}),r.jsx("p",{className:"text-blue-200 text-sm",children:"Welcome to your comprehensive employee dashboard"})]}),t!==null&&r.jsxs("div",{className:"text-center bg-white bg-opacity-20 rounded-lg p-4",children:[r.jsx("div",{className:`text-3xl font-bold ${a(t)}`,children:t.toFixed(1)}),r.jsx("div",{className:"text-sm text-blue-100",children:"Overall Score"})]})]})})},VD=({employee:e,stats:t})=>r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 text-center",children:[r.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[t.profileCompletion,"%"]}),r.jsx("div",{className:"text-sm text-gray-600",children:"Profile Complete"})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.monthlyFormsCompleted}),r.jsx("div",{className:"text-sm text-gray-600",children:"Forms Completed"})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t.kpisTracked}),r.jsx("div",{className:"text-sm text-gray-600",children:"KPIs Tracked"})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 text-center",children:[r.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[t.disciplineScore,"/100"]}),r.jsx("div",{className:"text-sm text-gray-600",children:"Discipline Score"})]})]}),Ur=({employeeId:e,dashboardType:t})=>{console.log("📊 Loading employee dashboard with type:",t);const n=()=>{if(!t)return"profile";switch(t){case"seo":return"seo-performance";case"ads":return"ads-performance";case"social":return"social-engagement";case"youtube":return"youtube-analytics";default:return"profile"}},a=Ie(),{notify:s}=Oe(),[i,o]=p.useState(!0),[l,c]=p.useState(null),[u,d]=p.useState(n()),[m,h]=p.useState({profileCompletion:0,monthlyFormsCompleted:0,kpisTracked:0,disciplineScore:0,feedbackScore:0,learningHours:0,analyticsScore:0}),[f,x]=p.useState({profile:!1,monthly:!1,performance:!1,discipline:!1,feedback:!1,learning:!1,analytics:!1}),g=()=>{switch(t){case"seo":return[{id:"seo-performance",name:"SEO Performance",icon:"🔍",completed:!0},{id:"keyword-tracking",name:"Keyword Tracking",icon:"📈",completed:m.kpisTracked>0}];case"ads":return[{id:"ads-performance",name:"Ads Performance",icon:"📣",completed:!0},{id:"campaign-metrics",name:"Campaign Metrics",icon:"📊",completed:m.kpisTracked>0}];case"social":return[{id:"social-engagement",name:"Social Engagement",icon:"👥",completed:!0},{id:"content-calendar",name:"Content Calendar",icon:"📅",completed:m.monthlyFormsCompleted>0}];case"youtube":return[{id:"youtube-analytics",name:"YouTube Analytics",icon:"📹",completed:!0},{id:"video-performance",name:"Video Performance",icon:"🎬",completed:m.kpisTracked>0}];default:return[]}},w=p.useMemo(()=>[...t?g():[],{id:"profile",name:"Profile",icon:"👤",completed:m.profileCompletion>=80},{id:"accountability",name:"Accountability",icon:"📋",completed:m.monthlyFormsCompleted>0},{id:"performance",name:"Performance",icon:"📊",completed:m.kpisTracked>0},{id:"discipline",name:"Discipline",icon:"📅",completed:m.disciplineScore>=70}],[m]),j=p.useMemo(()=>{const S=[m.profileCompletion,m.monthlyFormsCompleted>0?100:0,m.kpisTracked>0?85:0,m.disciplineScore,m.feedbackScore||0,m.learningHours*16.67||0,m.analyticsScore||0].filter(b=>b>0);return S.length>0?S.reduce((b,v)=>b+v,0)/S.length:0},[m]);p.useEffect(()=>{(async()=>{if(e){o(!0);try{const{data:b,error:v}=await a.from("employees").select("*").eq("id",e).single();if(v)throw v;c(b),await y(b)}catch(b){console.error("Error loading employee data:",b),s("Failed to load employee data","error")}finally{o(!1)}}})()},[e,a,s]);const y=async S=>{try{const b=["name","phone","department","role","joining_date"],v=b.filter(I=>S[I]).length,_=Math.round(v/b.length*100),{data:P,error:O}=await a.from("submissions").select("id").eq("employee_name",S.name);if(O)throw O;const D=(P==null?void 0:P.length)||0,{data:A,error:T}=await a.from("employee_kpis").select("id").eq("employee_id",S.id);if(T)throw T;const L=(A==null?void 0:A.length)||0,C=new Date().toISOString().slice(0,7),{data:F,error:R}=await a.from("employee_attendance").select("status").eq("employee_id",S.id).like("date",`${C}%`);if(R)throw R;const K=(F==null?void 0:F.filter(I=>["present","wfh"].includes(I.status)).length)||0,M=Math.min(Math.round(K/25*100),100);h({profileCompletion:_,monthlyFormsCompleted:D,kpisTracked:L,disciplineScore:M})}catch(b){console.error("Error loading dashboard stats:",b)}},N=S=>{l&&y(l)};return i?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ee,{size:"lg"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading your dashboard..."})]})}):l?r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsx(GD,{employee:l,overallScore:j}),r.jsx(VD,{employee:l,stats:m}),r.jsx(UD,{sections:w,currentSection:u}),r.jsx(KD,{activeTab:u,setActiveTab:d,completionStatus:f,currentUser:l,dashboardType:t}),r.jsxs("div",{className:"space-y-6",children:[u==="profile"&&r.jsx(Av,{employee:l,onUpdate:()=>N()}),u==="monthly"&&r.jsx(Ov,{employee:l,onSubmit:()=>N()}),u==="performance"&&r.jsx(bD,{employee:l,onUpdate:()=>N()}),u==="discipline"&&r.jsx(ND,{employee:l,onUpdate:()=>N()}),u==="feedback"&&r.jsx(PD,{employee:l,onUpdate:()=>N()}),u==="learning"&&r.jsx(DD,{employee:l,onUpdate:()=>N()}),u==="analytics"&&r.jsx($D,{employee:l,onUpdate:()=>N()}),u==="superadmin"&&r.jsx(zD,{currentUser:l})]}),r.jsx("div",{className:"mt-8",children:r.jsx(HD,{})}),r.jsxs("div",{className:"mt-12 text-center text-sm text-gray-500",children:[r.jsxs("p",{children:["Employee Dashboard • Branding Pioneers • ",new Date().getFullYear()]}),r.jsx("p",{className:"mt-1",children:"Need help? Contact your manager or HR department"})]})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:"😕"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Employee Not Found"}),r.jsx("p",{className:"text-gray-600",children:"The requested employee profile could not be loaded."})]})})};function YD({allSubmissions:e}){const[t,n]=p.useState("all"),[a,s]=p.useState("All"),[i,o]=p.useState("overall"),l=p.useMemo(()=>{if(!e||e.length===0)return[];let d=e;if(t!=="all"){const h=new Date,f=new Date;switch(t){case"monthly":f.setMonth(h.getMonth()-1);break;case"quarterly":f.setMonth(h.getMonth()-3);break;case"yearly":f.setFullYear(h.getFullYear()-1);break}d=e.filter(x=>x.submissions&&x.submissions.some(g=>{const[w,j]=g.monthKey.split("-").map(Number);return new Date(w,j-1)>=f}))}return a!=="All"&&(d=d.filter(h=>h.department===a)),d.map(h=>{var N,S;let f=0,x=0,g=0,w=0,j=0;if(h.submissions&&h.submissions.length>0){switch(i){case"overall":f=parseFloat(h.averageScore)||0;break;case"kpi":f=h.submissions.reduce((b,v)=>{var _;return b+(((_=v.scores)==null?void 0:_.kpiScore)||0)},0)/h.submissions.length;break;case"learning":f=h.submissions.reduce((b,v)=>{var _;return b+(((_=v.scores)==null?void 0:_.learningScore)||0)},0)/h.submissions.length;break;case"relationship":f=h.submissions.reduce((b,v)=>{var _;return b+(((_=v.scores)==null?void 0:_.relationshipScore)||0)},0)/h.submissions.length;break}if(x=h.submissions.length,g=h.totalHours||0,w=Math.min(1,x/6),h.submissions.length>=2){const b=[...h.submissions].sort((P,O)=>P.monthKey.localeCompare(O.monthKey)),v=((N=b[0].scores)==null?void 0:N.overall)||0,_=((S=b[b.length-1].scores)==null?void 0:S.overall)||0;j=Math.max(0,(_-v)/10)}}const y=f+w*.5+j*.3;return{...h,rankingScore:y,submissionCount:x,totalHours:g,consistencyBonus:w,improvementBonus:j,badge:u(y,x)}}).filter(h=>h.rankingScore>0).sort((h,f)=>f.rankingScore-h.rankingScore).map((h,f)=>({...h,rank:f+1}))},[e,t,a,i]),c=p.useMemo(()=>e?[...new Set(e.map(d=>d.department))].filter(Boolean).sort():[],[e]),u=(d,m)=>d>=9&&m>=6?{type:"gold",icon:"🥇",label:"Gold Champion",className:"bg-gradient-to-r from-yellow-400 to-yellow-600 text-white border-yellow-500"}:d>=8&&m>=4?{type:"silver",icon:"🥈",label:"Silver Star",className:"bg-gradient-to-r from-gray-300 to-gray-500 text-white border-gray-400"}:d>=7&&m>=2?{type:"bronze",icon:"🥉",label:"Bronze Achiever",className:"bg-gradient-to-r from-orange-400 to-orange-600 text-white border-orange-500"}:d>=6?{type:"rising",icon:"🌟",label:"Rising Star",className:"bg-gradient-to-r from-purple-400 to-purple-600 text-white border-purple-500"}:{type:"participant",icon:"💪",label:"Active",className:"bg-gradient-to-r from-blue-400 to-blue-600 text-white border-blue-500"};return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 rounded-xl shadow-sm p-6 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold mb-2",children:"🏆 Employee Leaderboard"}),r.jsx("p",{className:"opacity-90",children:"Top performing team members across all metrics"})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-3xl font-bold",children:l.length}),r.jsx("div",{className:"text-sm opacity-90",children:"Active Performers"})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Period"}),r.jsxs("select",{value:t,onChange:d=>n(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"all",children:"All Time"}),r.jsx("option",{value:"monthly",children:"Last Month"}),r.jsx("option",{value:"quarterly",children:"Last Quarter"}),r.jsx("option",{value:"yearly",children:"Last Year"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),r.jsxs("select",{value:a,onChange:d=>s(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"All",children:"All Departments"}),c.map(d=>r.jsx("option",{value:d,children:d},d))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ranking Metric"}),r.jsxs("select",{value:i,onChange:d=>o(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"overall",children:"Overall Score"}),r.jsx("option",{value:"kpi",children:"KPI Performance"}),r.jsx("option",{value:"learning",children:"Learning & Development"}),r.jsx("option",{value:"relationship",children:"Client Relationships"})]})]})]})}),l.length>=3&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6 text-center",children:"🏆 Top Performers"}),r.jsxs("div",{className:"flex justify-center items-end gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"bg-gray-200 rounded-lg p-4 mb-2",children:[r.jsx("div",{className:"text-2xl",children:"🥈"}),r.jsx("div",{className:"text-sm font-medium mt-2",children:l[1].name}),r.jsx("div",{className:"text-xs text-gray-600",children:l[1].department}),r.jsx("div",{className:"text-lg font-bold text-gray-600 mt-1",children:l[1].rankingScore.toFixed(1)}),l[1].hasTestimonial&&r.jsx("div",{className:"text-xs text-purple-700 mt-1",children:"🎥 Testimonial"})]}),r.jsx("div",{className:"bg-gray-400 h-16 rounded-t-lg flex items-center justify-center text-white font-bold",children:"2nd"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"bg-yellow-100 rounded-lg p-4 mb-2 border-2 border-yellow-400",children:[r.jsx("div",{className:"text-3xl",children:"🥇"}),r.jsx("div",{className:"text-sm font-medium mt-2",children:l[0].name}),r.jsx("div",{className:"text-xs text-gray-600",children:l[0].department}),r.jsx("div",{className:"text-xl font-bold text-yellow-600 mt-1",children:l[0].rankingScore.toFixed(1)}),l[0].hasTestimonial&&r.jsx("div",{className:"text-xs text-purple-700 mt-1",children:"🎥 Testimonial"})]}),r.jsx("div",{className:"bg-yellow-500 h-20 rounded-t-lg flex items-center justify-center text-white font-bold",children:"1st"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"bg-orange-100 rounded-lg p-4 mb-2",children:[r.jsx("div",{className:"text-2xl",children:"🥉"}),r.jsx("div",{className:"text-sm font-medium mt-2",children:l[2].name}),r.jsx("div",{className:"text-xs text-gray-600",children:l[2].department}),r.jsx("div",{className:"text-lg font-bold text-orange-600 mt-1",children:l[2].rankingScore.toFixed(1)}),l[2].hasTestimonial&&r.jsx("div",{className:"text-xs text-purple-700 mt-1",children:"🎥 Testimonial"})]}),r.jsx("div",{className:"bg-orange-500 h-12 rounded-t-lg flex items-center justify-center text-white font-bold",children:"3rd"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Complete Rankings"})}),l.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"📋"}),r.jsx("p",{className:"text-gray-500",children:"No performance data available for the selected criteria."})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submissions"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Learning Hours"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Badge"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(d=>r.jsxs("tr",{className:`hover:bg-gray-50 ${d.rank<=3?"bg-gradient-to-r from-yellow-50 to-orange-50":""}`,children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsxs("span",{className:`text-lg font-bold ${d.rank===1?"text-yellow-600":d.rank===2?"text-gray-600":d.rank===3?"text-orange-600":"text-gray-800"}`,children:["#",d.rank]}),d.rank<=3&&r.jsx("span",{className:"ml-2 text-lg",children:d.rank===1?"🥇":d.rank===2?"🥈":"🥉"})]})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:d.name}),r.jsx("div",{className:"text-sm text-gray-500",children:d.phone})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:d.department}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:`text-lg font-semibold ${d.rankingScore>=9?"text-green-600":d.rankingScore>=8?"text-blue-600":d.rankingScore>=7?"text-yellow-600":"text-gray-600"}`,children:d.rankingScore.toFixed(1)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:d.submissionCount}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[d.totalHours.toFixed(1),"h"]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-xs font-medium border transition-all duration-200 hover:shadow-lg hover:scale-105 cursor-default ${d.badge.className}`,children:[r.jsx("span",{className:"mr-1.5 text-sm",children:d.badge.icon}),d.badge.label]})})]},`${d.name}-${d.phone}`))})]})})]})]})}const za=e=>{if(!e)return{isEligible:!1,reason:"User information not available"};if((e==null?void 0:e.role)==="intern"||(e==null?void 0:e.userType)==="intern"||(e==null?void 0:e.user_category)==="intern")return{isEligible:!1,reason:"Interns are not eligible for the Arcade Program"};if((e==null?void 0:e.department)==="HR"||(e==null?void 0:e.department)==="hr"||(e==null?void 0:e.role)==="HR")return{isEligible:!1,reason:"HR department employees are not eligible for the Arcade Program"};const t=(e==null?void 0:e.employment_type)||(e==null?void 0:e.employee_type);return t&&!(t==="full-time"||t==="fulltime"||t==="full_time"||t==="Full-time"||t==="Full Time")?{isEligible:!1,reason:"Only full-time employees are eligible for the Arcade Program"}:{isEligible:!0,reason:"User is eligible for the Arcade Program"}},XD=(e,t)=>{const n=[],a=za(t);return a.isEligible||n.push(a.reason),e.activity_type||n.push("Activity category is required"),e.activity_subtype||n.push("Activity type is required"),(!e.description||e.description.trim().length<10)&&n.push("Description must be at least 10 characters long"),["google_review","video_testimonial","bp_reel","full_video"].includes(e.activity_subtype)&&!e.proof_url&&n.push("Proof URL is required for this activity type"),e.proof_url&&!t5(e.proof_url)&&n.push("Please provide a valid URL for proof"),{isValid:n.length===0,errors:n}},JD=(e,t,n)=>{const a=[],s=za(n);return s.isEligible||a.push(s.reason),e.reward_id||a.push("Reward selection is required"),(!e.points_required||e.points_required<=0)&&a.push("Invalid points requirement"),t<e.points_required&&a.push(`Insufficient points. You have ${t} points but need ${e.points_required}`),e.reward_type==="wfh"&&t-e.points_required<50&&a.push("WFH redemption requires maintaining a minimum balance of 50 points"),e.reward_type==="wfh"&&!e.manager_approval_requested&&a.push("Manager approval is required for WFH redemption"),{isValid:a.length===0,errors:a}},ZD=(e,t)=>{var o;const n=[];["hr","team_leader","manager","operations_head"].includes((o=t==null?void 0:t.role)==null?void 0:o.toLowerCase())||n.push("Only HR, Team Leaders, Managers, or Operations Head can create escalations"),e.employee_id||n.push("Employee selection is required"),e.escalation_type||n.push("Escalation type is required"),(!e.points_deducted||e.points_deducted<=0)&&n.push("Points deduction must be greater than 0"),(!e.reason||e.reason.trim().length<20)&&n.push("Reason must be at least 20 characters long");const i={client_complaint:30,missed_meeting:10,performance_issue:10,behavioral_issue:15,other:20}[e.escalation_type]||20;return e.points_deducted>i&&n.push(`Maximum ${i} points can be deducted for ${e.escalation_type}`),{isValid:n.length===0,errors:n}},QD=e=>{const t=new Date;t.setFullYear(t.getFullYear()-1);const n=new Date;n.setDate(n.getDate()+30);let a=0,s=null;return e.forEach(i=>{const o=new Date(i.created_at),l=new Date(o);l.setFullYear(l.getFullYear()+1),l<=n&&l>new Date&&(a+=i.points_earned,(!s||l<s)&&(s=l))}),{hasExpiring:a>0,expiringPoints:a,expirationDate:s?s.toLocaleDateString():null}},e5=e=>{const t=new Date,n=t.getHours(),a=t.getDay();if(["client_referral","tactical_goals","strategic_goals"].includes(e)){if(a===0||a===6)return{isValidTime:!1,message:"This activity can only be logged during business days (Monday-Friday)"};if(n<9||n>=18)return{isValidTime:!1,message:"This activity can only be logged during business hours (9 AM - 6 PM)"}}return{isValidTime:!0,message:"Activity can be logged at this time"}},t5=e=>{try{return new URL(e),!0}catch{return!1}},r5=(e,t)=>{const n=new Date,a=n.toDateString(),s=e.filter(l=>new Date(l.created_at).toDateString()===a&&l.activity_subtype===t),o={whatsapp_appreciation:3,google_review:1,video_testimonial:1,client_referral:2,bp_reel:5,full_video:3,monthly_attendance:1,employee_referral:1,tactical_goals:1,strategic_goals:1,poll_first:1,poll_second:1,poll_third:1}[t]||5;if(s.length>=o){const l=new Date(n);l.setDate(l.getDate()+1),l.setHours(0,0,0,0);const c=l.getTime()-n.getTime();return{canSubmit:!1,message:`Daily limit of ${o} submissions reached for this activity type. Try again tomorrow.`,waitTime:Math.ceil(c/(1e3*60*60))}}return{canSubmit:!0,message:`You can submit ${o-s.length} more ${t} activities today`,waitTime:0}},n5=({currentUser:e,onNavigate:t})=>{var Z,ue;const n=Ie(),{handleDataFetching:a,handleDatabaseOperation:s,showSuccessNotification:i,showErrorModal:o,showWarningModal:l}=Yl(),[c,u]=p.useState([]),[d,m]=p.useState([]),[h,f]=p.useState([]),[x,g]=p.useState({}),[w,j]=p.useState(!0),[y,N]=p.useState("activities"),[S,b]=p.useState(""),[v,_]=p.useState([]),[P,O]=p.useState(!1),[D,A]=p.useState({employee_id:"",escalation_type:"",escalation_subtype:"",description:"",points_deducted:0});p.useEffect(()=>{e!=null&&e.id&&(L(),C(),F(),R(),T())},[e]);const T=async()=>{await a(async()=>{const{data:E,error:B}=await n.from("employees").select("id, name, email, department").neq("department","HR").order("name");if(B)throw B;return E||[]},{onSuccess:E=>{_(E)},onError:E=>{l("Failed to load employees. Some features may be limited."),_([])}})},L=async()=>{await a(async()=>{const{data:E,error:B}=await n.from("arcade_activities").select(`
            *,
            employees!inner(name, email, department)
          `).eq("status","pending").order("created_at",{ascending:!1});if(B)throw B;return E||[]},{onSuccess:E=>{u(E)},onError:E=>{l("Failed to load pending activities."),u([])}})},C=async()=>{await a(async()=>{const{data:E,error:B}=await n.from("arcade_redemptions").select(`
            *,
            employees!inner(name, email, department)
          `).eq("status","pending").order("created_at",{ascending:!1});if(B)throw B;return E||[]},{onSuccess:E=>{m(E)},onError:E=>{l("Failed to load pending redemptions."),m([])}})},F=async()=>{await a(async()=>{const{data:E,error:B}=await n.from("arcade_escalations").select(`
            *,
            employees!inner(name, email, department)
          `).order("created_at",{ascending:!1}).limit(50);if(B)throw B;return E||[]},{onSuccess:E=>{f(E)},onError:E=>{l("Failed to load escalations."),f([])}})},R=async()=>{await a(async()=>{const{data:E,error:B}=await n.from("arcade_employee_summary").select("*");if(B)throw B;return E||[]},{onSuccess:E=>{const B=E.length,U=E.reduce((ve,le)=>ve+(le.total_points_earned||0),0),X=E.reduce((ve,le)=>ve+(le.total_points_redeemed||0),0),ae=B>0?Math.round(U/B):0,q=E.sort((ve,le)=>(le.current_points||0)-(ve.current_points||0)).slice(0,5);g({totalEmployees:B,totalPointsEarned:U,totalPointsRedeemed:X,averagePoints:ae,topPerformers:q})},onError:E=>{l("Failed to load analytics data."),g({})},onFinally:()=>{j(!1)}})},K=async E=>{await s(async()=>{const{error:B}=await n.from("arcade_activities").update({status:"approved",approved_by:e.id,approved_at:new Date().toISOString()}).eq("id",E);if(B)throw B},{onSuccess:()=>{i("Activity approved successfully!"),L(),R()},onError:B=>{o("Failed to approve activity",B.message)}})},M=async E=>{await s(async()=>{const{error:B}=await n.from("arcade_activities").update({status:"rejected",approved_by:e.id,approved_at:new Date().toISOString()}).eq("id",E);if(B)throw B},{onSuccess:()=>{i("Activity rejected successfully!"),L()},onError:B=>{o("Failed to reject activity",B.message)}})},I=async E=>{try{const{error:B}=await n.from("arcade_redemptions").update({status:"approved",approved_by:e.id,approved_at:new Date().toISOString()}).eq("id",E);if(B){console.error("Error approving redemption:",B),alert("Error approving redemption");return}alert("Redemption approved successfully!"),C(),R()}catch(B){console.error("Error:",B),alert("Error approving redemption")}},H=async E=>{try{const{error:B}=await n.from("arcade_redemptions").update({status:"rejected",approved_by:e.id,approved_at:new Date().toISOString()}).eq("id",E);if(B){console.error("Error rejecting redemption:",B),alert("Error rejecting redemption");return}alert("Redemption rejected successfully!"),C()}catch(B){console.error("Error:",B),alert("Error rejecting redemption")}},Y=async E=>{try{const{error:B}=await n.from("arcade_redemptions").update({status:"fulfilled",fulfilled_at:new Date().toISOString()}).eq("id",E);if(B){console.error("Error fulfilling redemption:",B),alert("Error fulfilling redemption");return}alert("Redemption marked as fulfilled!"),C()}catch(B){console.error("Error:",B),alert("Error fulfilling redemption")}},z=async E=>{E.preventDefault();try{const B=ZD(D,e);if(!B.isValid){alert(B.errors.join(". "));return}const{data:U}=await n.from("employees").select("*").eq("id",D.employee_id).single();if(U){const ae=za(U);if(!ae.isEligible){alert(`Target employee is not eligible for Arcade Program: ${ae.reason}`);return}}const{error:X}=await n.from("arcade_escalations").insert([{employee_id:D.employee_id,escalation_type:D.escalation_type,escalation_subtype:D.escalation_subtype,description:D.description,points_deducted:D.points_deducted,reported_by:e.id}]);if(X){console.error("Error creating escalation:",X),alert("Error creating escalation");return}alert("Escalation created successfully!"),O(!1),A({employee_id:"",escalation_type:"",escalation_subtype:"",description:"",points_deducted:0}),F(),R()}catch(B){console.error("Error:",B),alert("Error creating escalation")}},G=E=>({client_issues:[{value:"whatsapp_complaint",label:"WhatsApp Complaint (-2 pts)",points:2},{value:"call_escalation",label:"Call Escalation (-5 pts)",points:5},{value:"non_response",label:"Non-response to Client (-2 pts/day)",points:2},{value:"client_loss",label:"Client Loss (-30 pts)",points:30}],meeting_attendance:[{value:"daily_operations",label:"Daily Operations (-1 pt)",points:1},{value:"tactical",label:"Tactical (-3 pts)",points:3},{value:"strategic",label:"Strategic (-5 pts)",points:5}],performance_issues:[{value:"missed_deadline",label:"Missed Deadline (-3 pts)",points:3},{value:"missed_tactical_target",label:"Missed Tactical Target (-1 pt)",points:1},{value:"missed_strategic_target",label:"Missed Strategic Target (-2 pts)",points:2},{value:"late_payments",label:"Late Payments (-2 pts/month)",points:2}],behavioral_issues:[{value:"colleague_misbehavior",label:"Colleague Misbehavior (-10 pts)",points:10},{value:"unannounced_leaves",label:"Unannounced Leaves (-5 pts)",points:5}]})[E]||[],V=(E,B)=>{const U={client_engagement:"Client Engagement",content_creation:"Content Creation",attendance:"Attendance",performance:"Performance",polls:"Poll Performance"};return{whatsapp_appreciation:"WhatsApp Appreciation",google_review:"Google Review",video_testimonial:"Video Testimonial",client_referral:"Client Referral",bp_reel:"BP Reel",full_video:"Full Video",monthly_attendance:"100% Monthly Attendance",employee_referral:"Employee Referral",tactical_goals:"Tactical Goals",strategic_goals:"Strategic Goals",poll_first:"Poll - 1st Place",poll_second:"Poll - 2nd Place",poll_third:"Poll - 3rd Place"}[B]||`${U[E]||E} - ${B}`};return w?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading admin panel..."})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"🎮 Arcade Admin Panel"}),r.jsx("p",{className:"text-gray-600",children:"Manage the Arcade program and employee activities"})]}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsx("button",{onClick:()=>O(!0),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"⚠️ Create Escalation"}),r.jsx("button",{onClick:()=>t("dashboard"),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"← Back to Dashboard"})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"text-3xl mr-4",children:"👥"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Employees"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.totalEmployees})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"text-3xl mr-4",children:"💰"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Points Earned"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:x.totalPointsEarned})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"text-3xl mr-4",children:"🛍️"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Points Redeemed"}),r.jsx("p",{className:"text-2xl font-bold text-purple-600",children:x.totalPointsRedeemed})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"text-3xl mr-4",children:"📊"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Average Points"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:x.averagePoints})]})]})})]}),r.jsx("div",{className:"mb-6",children:r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"-mb-px flex space-x-8",children:[{key:"activities",label:"Pending Activities",icon:"💰",count:c.length},{key:"redemptions",label:"Pending Redemptions",icon:"🛍️",count:d.length},{key:"escalations",label:"Recent Escalations",icon:"⚠️",count:h.length},{key:"analytics",label:"Top Performers",icon:"🏆",count:((Z=x.topPerformers)==null?void 0:Z.length)||0}].map(E=>r.jsxs("button",{onClick:()=>N(E.key),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${y===E.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx("span",{children:E.icon}),r.jsx("span",{children:E.label}),r.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs",children:E.count})]},E.key))})})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg",children:[y==="activities"&&r.jsxs("div",{className:"p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Pending Activities"}),c.length>0?r.jsx("div",{className:"space-y-4",children:c.map(E=>r.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"font-medium text-gray-900",children:V(E.activity_type,E.activity_subtype)}),r.jsxs("span",{className:"font-bold text-green-600",children:["+",E.points_earned," pts"]})]}),r.jsx("p",{className:"text-gray-600 mb-2",children:E.description}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[r.jsxs("span",{children:["👤 ",E.employees.name]}),r.jsxs("span",{children:["📧 ",E.employees.email]}),r.jsxs("span",{children:["🏢 ",E.employees.department]}),r.jsxs("span",{children:["📅 ",new Date(E.created_at).toLocaleDateString()]})]}),E.proof_url&&r.jsx("a",{href:E.proof_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm mt-2 inline-block",children:"📎 View Proof"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>K(E.id),className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 transition-colors",children:"✅ Approve"}),r.jsx("button",{onClick:()=>M(E.id),className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition-colors",children:"❌ Reject"})]})]})},E.id))}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"✅"}),r.jsx("p",{className:"text-gray-500",children:"No pending activities"})]})]}),y==="redemptions"&&r.jsxs("div",{className:"p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Pending Redemptions"}),d.length>0?r.jsx("div",{className:"space-y-4",children:d.map(E=>r.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"font-medium text-gray-900",children:E.reward_name}),r.jsxs("span",{className:"font-bold text-purple-600",children:["-",E.points_required," pts"]}),r.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs capitalize",children:E.reward_type.replace("_"," ")})]}),r.jsx("p",{className:"text-gray-600 mb-2",children:E.request_details}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[r.jsxs("span",{children:["👤 ",E.employees.name]}),r.jsxs("span",{children:["📧 ",E.employees.email]}),r.jsxs("span",{children:["🏢 ",E.employees.department]}),r.jsxs("span",{children:["📅 ",new Date(E.created_at).toLocaleDateString()]})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>I(E.id),className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 transition-colors",children:"✅ Approve"}),r.jsx("button",{onClick:()=>H(E.id),className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition-colors",children:"❌ Reject"}),E.status==="approved"&&r.jsx("button",{onClick:()=>Y(E.id),className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors",children:"📦 Fulfill"})]})]})},E.id))}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"✅"}),r.jsx("p",{className:"text-gray-500",children:"No pending redemptions"})]})]}),y==="escalations"&&r.jsxs("div",{className:"p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Recent Escalations"}),h.length>0?r.jsx("div",{className:"space-y-4",children:h.map(E=>r.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsxs("h3",{className:"font-medium text-gray-900 capitalize",children:[E.escalation_type.replace("_"," ")," - ",E.escalation_subtype.replace("_"," ")]}),r.jsxs("span",{className:"font-bold text-red-600",children:["-",E.points_deducted," pts"]})]}),r.jsx("p",{className:"text-gray-600 mb-2",children:E.description}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[r.jsxs("span",{children:["👤 ",E.employees.name]}),r.jsxs("span",{children:["📧 ",E.employees.email]}),r.jsxs("span",{children:["🏢 ",E.employees.department]}),r.jsxs("span",{children:["📅 ",new Date(E.created_at).toLocaleDateString()]})]})]})})},E.id))}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"📋"}),r.jsx("p",{className:"text-gray-500",children:"No escalations found"})]})]}),y==="analytics"&&r.jsxs("div",{className:"p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Top Performers"}),((ue=x.topPerformers)==null?void 0:ue.length)>0?r.jsx("div",{className:"space-y-4",children:x.topPerformers.map((E,B)=>r.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"text-2xl",children:B===0?"🥇":B===1?"🥈":B===2?"🥉":"🏅"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:E.employee_name}),r.jsx("p",{className:"text-sm text-gray-600",children:E.department})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-lg font-bold text-blue-600",children:[E.current_points," pts"]}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Earned: ",E.total_points_earned]}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Redeemed: ",E.total_points_redeemed]})]})]})},E.employee_id))}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"🏆"}),r.jsx("p",{className:"text-gray-500",children:"No performance data available"})]})]})]}),P&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Create Escalation"}),r.jsxs("form",{onSubmit:z,children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee"}),r.jsxs("select",{value:D.employee_id,onChange:E=>A({...D,employee_id:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[r.jsx("option",{value:"",children:"Select Employee"}),v.map(E=>r.jsxs("option",{value:E.id,children:[E.name," - ",E.department]},E.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Escalation Type"}),r.jsxs("select",{value:D.escalation_type,onChange:E=>{A({...D,escalation_type:E.target.value,escalation_subtype:"",points_deducted:0})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[r.jsx("option",{value:"",children:"Select Type"}),r.jsx("option",{value:"client_issues",children:"Client Issues"}),r.jsx("option",{value:"meeting_attendance",children:"Meeting Attendance"}),r.jsx("option",{value:"performance_issues",children:"Performance Issues"}),r.jsx("option",{value:"behavioral_issues",children:"Behavioral Issues"})]})]}),D.escalation_type&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Specific Issue"}),r.jsxs("select",{value:D.escalation_subtype,onChange:E=>{const B=G(D.escalation_type).find(U=>U.value===E.target.value);A({...D,escalation_subtype:E.target.value,points_deducted:(B==null?void 0:B.points)||0})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[r.jsx("option",{value:"",children:"Select Issue"}),G(D.escalation_type).map(E=>r.jsx("option",{value:E.value,children:E.label},E.value))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Points to Deduct"}),r.jsx("input",{type:"number",value:D.points_deducted,onChange:E=>A({...D,points_deducted:parseInt(E.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:D.description,onChange:E=>A({...D,description:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"Provide details about the escalation...",required:!0})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[r.jsx("button",{type:"button",onClick:()=>O(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Create Escalation"})]})]})]})})]})})},Dd=p.createContext(),a5=({children:e,defaultValue:t,value:n,onValueChange:a,className:s="",...i})=>{const[o,l]=p.useState(n||t||""),c=u=>{l(u),a&&a(u)};return r.jsx(Dd.Provider,{value:{activeTab:o,setActiveTab:c},children:r.jsx("div",{className:s,...i,children:e})})},s5=({children:e,className:t="",...n})=>r.jsx("div",{className:`inline-flex h-10 items-center justify-center rounded-md bg-gray-100 p-1 text-gray-500 ${t}`,...n,children:e}),ls=({children:e,value:t,className:n="",...a})=>{const{activeTab:s,setActiveTab:i}=p.useContext(Dd),o=s===t;return r.jsx("button",{className:`inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ${o?"bg-white text-gray-950 shadow-sm":"text-gray-600 hover:text-gray-900"} ${n}`,onClick:()=>i(t),...a,children:e})},cs=({children:e,value:t,className:n="",...a})=>{const{activeTab:s}=p.useContext(Dd);return s!==t?null:r.jsx("div",{className:`mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 ${n}`,...a,children:e})},Sn=({children:e,onValueChange:t,defaultValue:n,value:a,...s})=>{const[i,o]=p.useState(!1),[l,c]=p.useState(a||n||""),u=d=>{c(d),t&&t(d),o(!1)};return r.jsx("div",{className:"relative",...s,children:jt.Children.map(e,d=>jt.isValidElement(d)?jt.cloneElement(d,{isOpen:i,setIsOpen:o,selectedValue:l,onValueChange:u}):d)})},_n=({children:e,className:t="",isOpen:n,setIsOpen:a,selectedValue:s})=>r.jsxs("button",{type:"button",className:`flex h-10 w-full items-center justify-between rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:cursor-not-allowed disabled:opacity-50 ${t}`,onClick:()=>a(!n),children:[e,r.jsx("svg",{className:"h-4 w-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"m6 9 6 6 6-6"})})]}),kn=({placeholder:e,selectedValue:t})=>r.jsx("span",{className:t?"":"text-gray-500",children:t||e}),An=({children:e,className:t="",isOpen:n})=>n?r.jsx("div",{className:`absolute top-full z-50 w-full rounded-md border bg-white shadow-md ${t}`,children:e}):null,Qe=({children:e,value:t,onValueChange:n})=>r.jsx("div",{className:"cursor-pointer px-3 py-2 text-sm hover:bg-gray-100",onClick:()=>n(t),children:e}),ai=jt.forwardRef(({className:e="",type:t="text",...n},a)=>r.jsx("input",{type:t,className:`flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:cursor-not-allowed disabled:opacity-50 ${e}`,ref:a,...n}));ai.displayName="Input";const zb=jt.forwardRef(({className:e="",...t},n)=>r.jsx("textarea",{className:`flex min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:cursor-not-allowed disabled:opacity-50 ${e}`,ref:n,...t}));zb.displayName="Textarea";const i5=()=>{const[e,t]=p.useState("sales_executive"),[n,a]=p.useState("2024-01"),[s,i]=p.useState("leads"),[o,l]=p.useState("kanban"),[c,u]=p.useState(!1),[d,m]=p.useState({stage:"all",source:"all",priority:"all",ageing:"all"}),h={name:"John Smith"},f={newLeads:15,meetings:12,proposals:5,wonAmount:15e4,pipelineAmount:45e4,winRate:40,avgFollowupSLA:18},x={totalRevenue:85e4,revenueTarget:1e6,forecastRisk:15,staleLeads:23,avgWinRate:35},g=[{id:"1",leadName:"Tech Solutions Inc",company:"Tech Solutions Inc",contactName:"Alice Johnson",email:"alice@techsolutions.com",phone:"+91-9876543210",stage:"qualified",source:"website",estAmount:75e3,probability:60,estCloseDate:"2024-02-15",lastContacted:"2024-01-20",nextAction:"2024-01-25",ageing:5,owner:"John Smith",priority:"high",serviceInterest:["seo","web"]},{id:"2",leadName:"Digital Marketing Co",company:"Digital Marketing Co",contactName:"Bob Wilson",email:"bob@digitalmarketing.com",phone:"+91-9876543211",stage:"proposal_sent",source:"google_ads",estAmount:12e4,probability:75,estCloseDate:"2024-02-28",lastContacted:"2024-01-22",nextAction:"2024-01-26",ageing:3,owner:"John Smith",priority:"high",serviceInterest:["ads","social"]},{id:"3",leadName:"E-commerce Startup",company:"E-commerce Startup",contactName:"Carol Davis",email:"carol@ecommerce.com",phone:"+91-9876543212",stage:"discovery",source:"reference",estAmount:5e4,probability:40,estCloseDate:"2024-03-10",lastContacted:"2024-01-19",nextAction:"2024-01-24",ageing:6,owner:"John Smith",priority:"medium",serviceInterest:["web","seo"]}],w=[{id:"1",leadId:"1",type:"call",summary:"Discussed project requirements and timeline",activityTime:"2024-01-20T10:30:00Z",duration:30,outcome:"meeting_booked",nextAction:"Send proposal draft"},{id:"2",leadId:"2",type:"email",summary:"Sent proposal with pricing details",activityTime:"2024-01-22T14:15:00Z",outcome:"connected",nextAction:"Follow up on proposal feedback"}],j={revenueTargetScore:20,pipelineCoverageScore:8,leadToMeetingScore:7,meetingToProposalScore:6,proposalToWinScore:7,followupSLAScore:8,staleControlScore:4,activitiesThroughputScore:5,proposalDisciplineScore:4,dataCompletenessScore:3,mentorScore:8,csDeliveryNPS:8,totalScore:88},y=[{key:"new",label:"New",color:"bg-gray-100"},{key:"qualified",label:"Qualified",color:"bg-blue-100"},{key:"discovery",label:"Discovery",color:"bg-yellow-100"},{key:"proposal_sent",label:"Proposal Sent",color:"bg-orange-100"},{key:"negotiation",label:"Negotiation",color:"bg-purple-100"},{key:"won",label:"Won",color:"bg-green-100"},{key:"lost",label:"Lost",color:"bg-red-100"}],N=[{key:"fb_ads",label:"Facebook Ads"},{key:"website",label:"Website"},{key:"seo",label:"SEO"},{key:"google_ads",label:"Google Ads"},{key:"reference",label:"Reference"},{key:"other",label:"Other"}],S=C=>{const F=y.find(R=>R.key===C);return F?F.color:"bg-gray-100"},b=C=>{switch(C){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},v=C=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(C),_=C=>new Date(C).toLocaleDateString("en-IN"),P=C=>C<=3?"text-green-600":C<=7?"text-yellow-600":"text-red-600",O=g.filter(C=>!(d.stage!=="all"&&C.stage!==d.stage||d.source!=="all"&&C.source!==d.source||d.priority!=="all"&&C.priority!==d.priority)),D=()=>e==="sales_executive"?r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-7 gap-4 mb-6",children:[r.jsx(pe,{children:r.jsx(ge,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"New Leads"}),r.jsx("p",{className:"text-2xl font-bold",children:f.newLeads})]}),r.jsx(ev,{className:"h-8 w-8 text-blue-500"})]})})}),r.jsx(pe,{children:r.jsx(ge,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Meetings"}),r.jsx("p",{className:"text-2xl font-bold",children:f.meetings})]}),r.jsx(tv,{className:"h-8 w-8 text-green-500"})]})})}),r.jsx(pe,{children:r.jsx(ge,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Proposals"}),r.jsx("p",{className:"text-2xl font-bold",children:f.proposals})]}),r.jsx(rv,{className:"h-8 w-8 text-orange-500"})]})})}),r.jsx(pe,{children:r.jsx(ge,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Won Amount"}),r.jsx("p",{className:"text-xl font-bold",children:v(f.wonAmount)})]}),r.jsx(Zd,{className:"h-8 w-8 text-purple-500"})]})})}),r.jsx(pe,{children:r.jsx(ge,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Pipeline"}),r.jsx("p",{className:"text-xl font-bold",children:v(f.pipelineAmount)})]}),r.jsx(Qd,{className:"h-8 w-8 text-indigo-500"})]})})}),r.jsx(pe,{children:r.jsx(ge,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Win Rate"}),r.jsxs("p",{className:"text-2xl font-bold",children:[f.winRate,"%"]})]}),r.jsx(nv,{className:"h-8 w-8 text-green-600"})]})})}),r.jsx(pe,{children:r.jsx(ge,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Avg SLA"}),r.jsxs("p",{className:"text-2xl font-bold",children:[f.avgFollowupSLA,"h"]})]}),r.jsx(av,{className:"h-8 w-8 text-blue-600"})]})})})]}):r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-6",children:[r.jsx(pe,{children:r.jsx(ge,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Revenue vs Target"}),r.jsx("p",{className:"text-xl font-bold",children:v(x.totalRevenue)}),r.jsxs("p",{className:"text-sm text-gray-500",children:["of ",v(x.revenueTarget)]})]}),r.jsx(Zd,{className:"h-8 w-8 text-purple-500"})]})})}),r.jsx(pe,{children:r.jsx(ge,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Forecast Risk"}),r.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[x.forecastRisk,"%"]})]}),r.jsx(sv,{className:"h-8 w-8 text-orange-500"})]})})}),r.jsx(pe,{children:r.jsx(ge,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Stale Leads"}),r.jsx("p",{className:"text-2xl font-bold text-red-600",children:x.staleLeads})]}),r.jsx(iv,{className:"h-8 w-8 text-red-500"})]})})}),r.jsx(pe,{children:r.jsx(ge,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Avg Win Rate"}),r.jsxs("p",{className:"text-2xl font-bold",children:[x.avgWinRate,"%"]})]}),r.jsx(Qd,{className:"h-8 w-8 text-green-500"})]})})}),r.jsx(pe,{children:r.jsx(ge,{className:"p-4",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("div",{children:r.jsxs(Ue,{size:"sm",className:"w-full",children:[r.jsx(_f,{className:"h-4 w-4 mr-2"}),"Export"]})})})})})]}),A=()=>r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-7 gap-4",children:y.map(C=>{const F=O.filter(R=>R.stage===C.key);return r.jsxs("div",{className:`${C.color} p-4 rounded-lg`,children:[r.jsxs("h3",{className:"font-semibold mb-3",children:[C.label," (",F.length,")"]}),r.jsx("div",{className:"space-y-3",children:F.map(R=>r.jsx(pe,{className:"cursor-pointer hover:shadow-md transition-shadow",children:r.jsxs(ge,{className:"p-3",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("h4",{className:"font-medium text-sm",children:R.leadName}),r.jsx(rr,{className:b(R.priority),children:R.priority})]}),r.jsx("p",{className:"text-xs text-gray-600 mb-2",children:R.contactName}),r.jsxs("p",{className:"text-sm font-semibold text-green-600 mb-2",children:[v(R.estAmount)," (",R.probability,"%)"]}),r.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[r.jsxs("span",{children:["Due: ",_(R.estCloseDate)]}),r.jsxs("span",{className:P(R.ageing),children:[R.ageing,"d"]})]}),r.jsxs("div",{className:"flex justify-between mt-2",children:[r.jsxs(Ue,{size:"sm",variant:"outline",className:"text-xs px-2 py-1",children:[r.jsx(ys,{className:"h-3 w-3 mr-1"}),"View"]}),r.jsxs(Ue,{size:"sm",variant:"outline",className:"text-xs px-2 py-1",children:[r.jsx(ov,{className:"h-3 w-3 mr-1"}),"Edit"]})]})]})},R.id))})]},C.key)})}),T=()=>r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Stage"}),r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Lead"}),r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Company"}),r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Source"}),r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Est. Amount"}),r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Prob%"}),r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Est. Close"}),r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Last Contact"}),r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Next Action"}),r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Ageing"}),r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Actions"})]})}),r.jsx("tbody",{children:O.map(C=>{var F,R;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.jsx(rr,{className:S(C.stage),children:(F=y.find(K=>K.key===C.stage))==null?void 0:F.label})}),r.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:C.leadName}),r.jsx("p",{className:"text-sm text-gray-600",children:C.contactName})]})}),r.jsx("td",{className:"border border-gray-300 px-4 py-2",children:C.company}),r.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.jsx(rr,{variant:"outline",children:(R=N.find(K=>K.key===C.source))==null?void 0:R.label})}),r.jsx("td",{className:"border border-gray-300 px-4 py-2 font-semibold text-green-600",children:v(C.estAmount)}),r.jsxs("td",{className:"border border-gray-300 px-4 py-2",children:[C.probability,"%"]}),r.jsx("td",{className:"border border-gray-300 px-4 py-2",children:_(C.estCloseDate)}),r.jsx("td",{className:"border border-gray-300 px-4 py-2",children:_(C.lastContacted)}),r.jsx("td",{className:"border border-gray-300 px-4 py-2",children:_(C.nextAction)}),r.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.jsxs("span",{className:P(C.ageing),children:[C.ageing," days"]})}),r.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.jsxs("div",{className:"flex space-x-1",children:[r.jsx(Ue,{size:"sm",variant:"outline",children:r.jsx(ys,{className:"h-3 w-3"})}),r.jsx(Ue,{size:"sm",variant:"outline",children:r.jsx(Xd,{className:"h-3 w-3"})}),r.jsx(Ue,{size:"sm",variant:"outline",children:r.jsx(Jd,{className:"h-3 w-3"})})]})})]},C.id)})})]})}),L=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs(pe,{children:[r.jsx(dt,{children:r.jsx(ut,{className:"text-lg",children:"Revenue & Target (35 pts)"})}),r.jsx(ge,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Revenue Target:"}),r.jsxs("span",{className:"font-semibold",children:[j.revenueTargetScore,"/25"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Pipeline Coverage:"}),r.jsxs("span",{className:"font-semibold",children:[j.pipelineCoverageScore,"/10"]})]}),r.jsx("div",{className:"border-t pt-2 mt-2",children:r.jsxs("div",{className:"flex justify-between font-bold",children:[r.jsx("span",{children:"Subtotal:"}),r.jsxs("span",{children:[j.revenueTargetScore+j.pipelineCoverageScore,"/35"]})]})})]})})]}),r.jsxs(pe,{children:[r.jsx(dt,{children:r.jsx(ut,{className:"text-lg",children:"Conversion (25 pts)"})}),r.jsx(ge,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Lead→Meeting:"}),r.jsxs("span",{className:"font-semibold",children:[j.leadToMeetingScore,"/8"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Meeting→Proposal:"}),r.jsxs("span",{className:"font-semibold",children:[j.meetingToProposalScore,"/8"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Proposal→Win:"}),r.jsxs("span",{className:"font-semibold",children:[j.proposalToWinScore,"/9"]})]}),r.jsx("div",{className:"border-t pt-2 mt-2",children:r.jsxs("div",{className:"flex justify-between font-bold",children:[r.jsx("span",{children:"Subtotal:"}),r.jsxs("span",{children:[j.leadToMeetingScore+j.meetingToProposalScore+j.proposalToWinScore,"/25"]})]})})]})})]}),r.jsxs(pe,{children:[r.jsx(dt,{children:r.jsx(ut,{className:"text-lg",children:"Velocity & Discipline (20 pts)"})}),r.jsx(ge,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Follow-up SLA:"}),r.jsxs("span",{className:"font-semibold",children:[j.followupSLAScore,"/8"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Stale Control:"}),r.jsxs("span",{className:"font-semibold",children:[j.staleControlScore,"/6"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Activities:"}),r.jsxs("span",{className:"font-semibold",children:[j.activitiesThroughputScore,"/6"]})]}),r.jsx("div",{className:"border-t pt-2 mt-2",children:r.jsxs("div",{className:"flex justify-between font-bold",children:[r.jsx("span",{children:"Subtotal:"}),r.jsxs("span",{children:[j.followupSLAScore+j.staleControlScore+j.activitiesThroughputScore,"/20"]})]})})]})})]}),r.jsxs(pe,{children:[r.jsx(dt,{children:r.jsx(ut,{className:"text-lg",children:"Hygiene & Relationship (20 pts)"})}),r.jsx(ge,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Proposal Discipline:"}),r.jsxs("span",{className:"font-semibold",children:[j.proposalDisciplineScore,"/4"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Data Completeness:"}),r.jsxs("span",{className:"font-semibold",children:[j.dataCompletenessScore,"/4"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Mentor Score:"}),r.jsxs("span",{className:"font-semibold",children:[(j.mentorScore/10*2).toFixed(1),"/2"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"CS/Delivery NPS:"}),r.jsxs("span",{className:"font-semibold",children:[(j.csDeliveryNPS/10*6).toFixed(1),"/6"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Handoff Quality:"}),r.jsx("span",{className:"font-semibold",children:"4/4"})]}),r.jsx("div",{className:"border-t pt-2 mt-2",children:r.jsxs("div",{className:"flex justify-between font-bold",children:[r.jsx("span",{children:"Subtotal:"}),r.jsxs("span",{children:[(j.proposalDisciplineScore+j.dataCompletenessScore+j.mentorScore/10*2+j.csDeliveryNPS/10*6+4).toFixed(1),"/20"]})]})})]})})]})]}),r.jsxs(pe,{children:[r.jsx(dt,{children:r.jsx(ut,{className:"text-xl",children:"Overall Performance Score"})}),r.jsx(ge,{children:r.jsx("div",{className:"flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-6xl font-bold text-green-600 mb-2",children:j.totalScore}),r.jsx("div",{className:"text-xl text-gray-600",children:"out of 100 points"}),r.jsx("div",{className:"mt-4",children:r.jsx(rr,{className:"text-lg px-4 py-2 bg-blue-100 text-blue-800",children:"Good"})})]})})})]})]});return r.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sales CRM Dashboard"}),r.jsxs("p",{className:"text-gray-600",children:["Welcome back, ",h.name]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs(Sn,{value:n,onValueChange:a,children:[r.jsx(_n,{className:"w-32",children:r.jsx(kn,{})}),r.jsxs(An,{children:[r.jsx(Qe,{value:"2024-01",children:"Jan 2024"}),r.jsx(Qe,{value:"2023-12",children:"Dec 2023"}),r.jsx(Qe,{value:"2023-11",children:"Nov 2023"})]})]}),r.jsxs(Sn,{value:e,onValueChange:t,children:[r.jsx(_n,{className:"w-40",children:r.jsx(kn,{})}),r.jsxs(An,{children:[r.jsx(Qe,{value:"sales_executive",children:"Sales Executive"}),r.jsx(Qe,{value:"sales_lead",children:"Sales Lead"}),r.jsx(Qe,{value:"admin",children:"Admin"}),r.jsx(Qe,{value:"reviewer_mentor",children:"Reviewer/Mentor"})]})]})]})]}),D(),r.jsxs(a5,{value:s,onValueChange:i,children:[r.jsxs(s5,{className:"grid w-full grid-cols-4",children:[r.jsx(ls,{value:"leads",children:"My Leads"}),r.jsx(ls,{value:"calendar",children:"Calendar & Tasks"}),r.jsx(ls,{value:"performance",children:"Monthly Review"}),r.jsx(ls,{value:"activities",children:"Activities"})]}),r.jsxs(cs,{value:"leads",className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs(Ue,{onClick:()=>u(!0),children:[r.jsx(Sf,{className:"h-4 w-4 mr-2"}),"Create Lead"]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ue,{variant:o==="kanban"?"default":"outline",onClick:()=>l("kanban"),size:"sm",children:"Kanban"}),r.jsx(Ue,{variant:o==="table"?"default":"outline",onClick:()=>l("table"),size:"sm",children:"Table"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Jy,{className:"h-4 w-4"}),r.jsxs(Sn,{value:d.stage,onValueChange:C=>m({...d,stage:C}),children:[r.jsx(_n,{className:"w-32",children:r.jsx(kn,{placeholder:"Stage"})}),r.jsxs(An,{children:[r.jsx(Qe,{value:"all",children:"All Stages"}),y.map(C=>r.jsx(Qe,{value:C.key,children:C.label},C.key))]})]}),r.jsxs(Sn,{value:d.source,onValueChange:C=>m({...d,source:C}),children:[r.jsx(_n,{className:"w-32",children:r.jsx(kn,{placeholder:"Source"})}),r.jsxs(An,{children:[r.jsx(Qe,{value:"all",children:"All Sources"}),N.map(C=>r.jsx(Qe,{value:C.key,children:C.label},C.key))]})]}),r.jsxs(Sn,{value:d.priority,onValueChange:C=>m({...d,priority:C}),children:[r.jsx(_n,{className:"w-32",children:r.jsx(kn,{placeholder:"Priority"})}),r.jsxs(An,{children:[r.jsx(Qe,{value:"all",children:"All Priorities"}),r.jsx(Qe,{value:"high",children:"High"}),r.jsx(Qe,{value:"medium",children:"Medium"}),r.jsx(Qe,{value:"low",children:"Low"})]})]})]})]}),o==="kanban"?A():T()]}),r.jsx(cs,{value:"calendar",className:"space-y-4",children:r.jsxs(pe,{children:[r.jsx(dt,{children:r.jsx(ut,{children:"Calendar & Tasks"})}),r.jsxs(ge,{children:[r.jsx("p",{className:"text-gray-600",children:"Calendar integration and task management features will be implemented here."}),r.jsxs("div",{className:"mt-4 space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Follow up with Tech Solutions Inc"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Due: Jan 25, 2024"})]}),r.jsx(Ue,{size:"sm",children:"Mark Done"})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Send proposal to Digital Marketing Co"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Due: Jan 26, 2024"})]}),r.jsx(Ue,{size:"sm",children:"Mark Done"})]})]})]})]})}),r.jsx(cs,{value:"performance",children:L()}),r.jsx(cs,{value:"activities",className:"space-y-4",children:r.jsxs(pe,{children:[r.jsx(dt,{children:r.jsx(ut,{children:"Recent Activities"})}),r.jsx(ge,{children:r.jsx("div",{className:"space-y-4",children:w.map(C=>r.jsxs("div",{className:"flex items-start space-x-4 p-4 border rounded",children:[r.jsxs("div",{className:"flex-shrink-0",children:[C.type==="call"&&r.jsx(Xd,{className:"h-5 w-5 text-blue-500"}),C.type==="email"&&r.jsx(Jd,{className:"h-5 w-5 text-green-500"}),C.type==="meeting"&&r.jsx(Zy,{className:"h-5 w-5 text-purple-500"}),C.type==="whatsapp"&&r.jsx(Qy,{className:"h-5 w-5 text-green-600"})]}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"font-medium",children:C.type.charAt(0).toUpperCase()+C.type.slice(1)}),r.jsx("span",{className:"text-sm text-gray-500",children:new Date(C.activityTime).toLocaleString()})]}),r.jsx("p",{className:"text-gray-600 mt-1",children:C.summary}),C.duration&&r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Duration: ",C.duration," minutes"]}),C.outcome&&r.jsx(rr,{className:"mt-2",variant:"outline",children:C.outcome.replace("_"," ")}),C.nextAction&&r.jsxs("p",{className:"text-sm text-blue-600 mt-2",children:["Next: ",C.nextAction]})]})]},C.id))})})]})})]})]})},Vr=jt.forwardRef(({className:e="",...t},n)=>r.jsx("label",{ref:n,className:`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${e}`,...t}));Vr.displayName="Label";const Ub=p.createContext(),Wh=({children:e,open:t,onOpenChange:n})=>r.jsx(Ub.Provider,{value:{open:t,onOpenChange:n},children:e}),Hh=({children:e,className:t="",...n})=>{const{open:a,onOpenChange:s}=p.useContext(Ub);return a?r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>s(!1)}),r.jsxs("div",{className:`relative bg-white rounded-lg shadow-lg p-6 max-w-md w-full mx-4 ${t}`,...n,children:[r.jsx("button",{className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",onClick:()=>s(!1),children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e]})]}):null},Kh=({children:e,className:t="",...n})=>r.jsx("div",{className:`flex flex-col space-y-1.5 text-center sm:text-left ${t}`,...n,children:e}),Gh=({children:e,className:t="",...n})=>r.jsx("h2",{className:`text-lg font-semibold leading-none tracking-tight ${t}`,...n,children:e}),Vh=({children:e,className:t="",...n})=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{className:`w-full caption-bottom text-sm ${t}`,...n,children:e})}),Yh=({children:e,className:t="",...n})=>r.jsx("thead",{className:`[&_tr]:border-b ${t}`,...n,children:e}),Xh=({children:e,className:t="",...n})=>r.jsx("tbody",{className:`[&_tr:last-child]:border-0 ${t}`,...n,children:e}),ds=({children:e,className:t="",...n})=>r.jsx("tr",{className:`border-b transition-colors hover:bg-gray-100/50 data-[state=selected]:bg-gray-100 ${t}`,...n,children:e}),Bt=({children:e,className:t="",...n})=>r.jsx("th",{className:`h-12 px-4 text-left align-middle font-medium text-gray-500 [&:has([role=checkbox])]:pr-0 ${t}`,...n,children:e}),qt=({children:e,className:t="",...n})=>r.jsx("td",{className:`p-4 align-middle [&:has([role=checkbox])]:pr-0 ${t}`,...n,children:e});class o5{constructor(){this.config=null}async loadConfig(){if(this.config)return this.config;const{data:t,error:n}=await se.from("seo_config").select("config_key, config_value");if(n)throw new Error(`Failed to load SEO config: ${n.message}`);return this.config={},t.forEach(a=>{this.config[a.config_key]=a.config_value}),this.config}async calculateMonthScore(t,n,a=[]){await this.loadConfig();const s={trafficImpact:this.calculateTrafficImpact(t),rankings:this.calculateRankings(t,n),technicalHealth:this.calculateTechnicalHealth(t),deliveryScope:this.calculateDeliveryScope(t,n),relationshipQuality:this.calculateRelationshipQuality(t)};let i=s.trafficImpact.points+s.rankings.points+s.technicalHealth.points+s.deliveryScope.points+s.relationshipQuality.points;const o=this.calculatePenalties(t,n,a);return i=Math.max(0,i-o.total),{totalScore:Math.round(i*100)/100,breakdown:s,penalties:o,maxScore:100}}calculateTrafficImpact(t){const n=this.calculateGrowthPercentage(t.gsc_organic_prev_30d,t.gsc_organic_curr_30d),a=this.calculateGrowthPercentage(t.ga_total_prev_30d,t.ga_total_curr_30d),s=this.mapGrowthToPoints(n,{30:20,15:16,5:12,0:8,[-10]:4,[-1/0]:0}),i=this.mapGrowthToPoints(a,{30:15,15:12,5:9,0:6,[-10]:3,[-1/0]:0});return{points:s+i,maxPoints:35,details:{organicGrowth:{percentage:n,points:s},totalTrafficGrowth:{percentage:a,points:i}}}}calculateRankings(t,n){const a=this.config.ranking_targets[n.type],s=(t.serp_top3_count*1.5+t.serp_top10_count*.5)/a.serp_target*12,i=Math.min(12,Math.max(0,s)),o=t.gmb_top3_count/a.gmb_target*8,l=Math.min(8,Math.max(0,o));return{points:i+l,maxPoints:20,details:{serp:{top3:t.serp_top3_count,top10:t.serp_top10_count,points:i,target:a.serp_target},gmb:{top3:t.gmb_top3_count,points:l,target:a.gmb_target}}}}calculateTechnicalHealth(t){const n=(t.pagespeed_home+t.pagespeed_service+t.pagespeed_location)/3,a=this.mapPageSpeedToPoints(n),s=t.sc_errors_home+t.sc_errors_service+t.sc_errors_location,i=this.mapErrorsToPoints(s);return{points:a+i,maxPoints:20,details:{pageSpeed:{average:Math.round(n),points:a,breakdown:{home:t.pagespeed_home,service:t.pagespeed_service,location:t.pagespeed_location}},errors:{total:s,points:i,breakdown:{home:t.sc_errors_home,service:t.sc_errors_service,location:t.sc_errors_location}}}}}calculateDeliveryScope(t,n){const a=this.config.delivery_targets[n.type],s={blogs:t.deliverables_blogs,backlinks:t.deliverables_backlinks,onpage:t.deliverables_onpage,techfixes:t.deliverables_techfixes},i=15/4;let o=0;const l={};return Object.keys(a).forEach(c=>{const u=s[c]||0,d=a[c],m=u/d*100;let h=0;m>=100?h=1:m>=75?h=.75:m>=50?h=.5:h=0;const f=i*h;o+=f,l[c]={achieved:u,target:d,percentage:Math.round(m),points:Math.round(f*100)/100}}),{points:Math.round(o*100)/100,maxPoints:15,details:l}}calculateRelationshipQuality(t){const n=t.nps_client?t.nps_client/10*6:0,a=t.client_meeting_date?1:0,s=(t.interactions_count||0)>=4?1:0,i=a&&s?2:a||s?1.5:0,o=t.mentor_score?t.mentor_score/10*2:0;return{points:n+i+o,maxPoints:10,details:{nps:{score:t.nps_client,points:Math.round(n*100)/100},interactions:{count:t.interactions_count,hasMeeting:a,points:i},mentor:{score:t.mentor_score,points:Math.round(o*100)/100}}}}calculatePenalties(t,n,a){const s=[];let i=0;if(a.length>=1){const c=this.calculateGrowthPercentage(t.gsc_organic_prev_30d,t.gsc_organic_curr_30d),u=this.calculateGrowthPercentage(a[0].gsc_organic_prev_30d,a[0].gsc_organic_curr_30d);c<0&&u<0&&(s.push({type:"consecutive_negative_growth",points:5}),i+=5)}const o=this.config.delivery_targets[n.type];return Object.keys(o).some(c=>(t[`deliverables_${c}`]||0)>0)||(s.push({type:"missing_mandatory_deliverables",points:5}),i+=5),{penalties:s,total:i}}calculateGrowthPercentage(t,n){return!t||t===0?n>0?100:0:(n-t)/t*100}mapGrowthToPoints(t,n){const a=Object.keys(n).map(Number).sort((s,i)=>i-s);for(const s of a)if(t>=s)return n[s];return 0}mapPageSpeedToPoints(t){return t>=90?10:t>=80?8:t>=70?6:t>=60?4:2}mapErrorsToPoints(t){return t===0?10:t<=5?8:t<=15?5:t<=40?2:0}async calculateEmployeeMonthScore(t,n){const{data:a,error:s}=await se.from("seo_monthly_entries").select(`
        *,
        clients!inner(*)
      `).eq("employee_id",t).eq("month",n).eq("status","approved");if(s)throw new Error(`Failed to fetch entries: ${s.message}`);if(!a.length)return null;await this.loadConfig();const i=this.config.client_weights;let o=0,l=0;return a.forEach(c=>{const u=i[c.clients.type]||1;o+=c.month_score*u,l+=u}),l>0?o/l:0}async calculateAppraisalScore(t,n,a){const{data:s,error:i}=await se.from("seo_monthly_entries").select("month_score").eq("employee_id",t).eq("status","approved").gte("month",n).lte("month",a);if(i)throw new Error(`Failed to fetch appraisal entries: ${i.message}`);if(!s.length)return null;const o=s.reduce((d,m)=>d+m.month_score,0)/s.length;await this.loadConfig();const l=this.config.appraisal_bands;let c="D",u=0;return["A","B","C","D"].forEach(d=>{o>=l[d].min_score&&(c=d,u=l[d].increment_pct)}),{avgScore:Math.round(o*100)/100,ratingBand:c,incrementPct:u,entryCount:s.length}}}const Bo=new o5;class l5{async getEntries(t={}){const{employeeId:n,clientId:a,month:s,status:i,page:o=1,limit:l=50,sortBy:c="month",sortOrder:u="desc"}=t;let d=se.from("seo_monthly_entries").select(`
        *,
        clients!inner(id, name, type, active),
        users!inner(id, name, email),
        reviewer:reviewed_by(id, name, email)
      `,{count:"exact"});n&&(d=d.eq("employee_id",n)),a&&(d=d.eq("client_id",a)),s&&(d=d.eq("month",s)),i&&(d=d.eq("status",i)),d=d.order(c,{ascending:u==="asc"});const m=(o-1)*l,h=m+l-1;d=d.range(m,h);const{data:f,error:x,count:g}=await d;if(x)throw new Error(`Failed to fetch SEO entries: ${x.message}`);return{data:f,pagination:{page:o,limit:l,total:g,totalPages:Math.ceil(g/l)}}}async getEntry(t){const{data:n,error:a}=await se.from("seo_monthly_entries").select(`
        *,
        clients!inner(id, name, type, active),
        users!inner(id, name, email),
        reviewer:reviewed_by(id, name, email)
      `).eq("id",t).single();if(a)throw new Error(`Failed to fetch SEO entry: ${a.message}`);return n}async createEntry(t){const n=["employee_id","client_id","month"];for(const o of n)if(!t[o])throw new Error(`Missing required field: ${o}`);const{data:a}=await se.from("seo_monthly_entries").select("id").eq("employee_id",t.employee_id).eq("client_id",t.client_id).eq("month",t.month).single();if(a)throw new Error("Entry already exists for this employee, client, and month");const{data:s,error:i}=await se.from("seo_monthly_entries").insert(t).select().single();if(i)throw new Error(`Failed to create SEO entry: ${i.message}`);return s}async updateEntry(t,n){const a=["organic_growth_pct","traffic_growth_pct","technical_health_score","ranking_score","delivery_score","relationship_score","month_score"],s={...n};a.forEach(l=>delete s[l]);const{data:i,error:o}=await se.from("seo_monthly_entries").update(s).eq("id",t).select().single();if(o)throw new Error(`Failed to update SEO entry: ${o.message}`);return i}async submitEntry(t){const n=await this.getEntry(t);if(n.status!=="draft")throw new Error("Only draft entries can be submitted");this.validateEntryData(n);const{data:a}=await se.from("seo_monthly_entries").select("*").eq("employee_id",n.employee_id).eq("client_id",n.client_id).lt("month",n.month).order("month",{ascending:!1}).limit(2),s=await Bo.calculateMonthScore(n,n.clients,a||[]),i={organic_growth_pct:Bo.calculateGrowthPercentage(n.gsc_organic_prev_30d,n.gsc_organic_curr_30d),traffic_growth_pct:Bo.calculateGrowthPercentage(n.ga_total_prev_30d,n.ga_total_curr_30d),technical_health_score:s.breakdown.technicalHealth.points,ranking_score:s.breakdown.rankings.points,delivery_score:s.breakdown.deliveryScope.points,relationship_score:s.breakdown.relationshipQuality.points,month_score:s.totalScore,status:"submitted",submitted_at:new Date().toISOString()},{data:o,error:l}=await se.from("seo_monthly_entries").update(i).eq("id",t).select().single();if(l)throw new Error(`Failed to submit SEO entry: ${l.message}`);return{...o,scoring:s}}async approveEntry(t,n,a=""){const{data:s,error:i}=await se.from("seo_monthly_entries").update({status:"approved",review_comment:a,reviewed_by:n,reviewed_at:new Date().toISOString()}).eq("id",t).eq("status","submitted").select().single();if(i)throw new Error(`Failed to approve SEO entry: ${i.message}`);return s}async returnEntry(t,n,a){if(!a||a.trim()==="")throw new Error("Comment is required when returning an entry");const{data:s,error:i}=await se.from("seo_monthly_entries").update({status:"returned",review_comment:a,reviewed_by:n,reviewed_at:new Date().toISOString()}).eq("id",t).eq("status","submitted").select().single();if(i)throw new Error(`Failed to return SEO entry: ${i.message}`);return s}async addMentorScore(t,n,a){if(n<1||n>10)throw new Error("Mentor score must be between 1 and 10");const{data:s,error:i}=await se.from("seo_monthly_entries").update({mentor_score:n}).eq("id",t).select().single();if(i)throw new Error(`Failed to add mentor score: ${i.message}`);return s}async getEmployeeDashboard(t){const n=new Date().getFullYear(),a=new Date().getMonth()+1,s=a===1?12:a-1,i=a===1?n-1:n,{data:o}=await se.from("seo_monthly_entries").select("month_score").eq("employee_id",t).eq("status","approved").gte("month",`${n}-01`).lte("month",`${n}-12`),l=`${i}-${s.toString().padStart(2,"0")}`,{data:c}=await se.from("seo_monthly_entries").select("month_score").eq("employee_id",t).eq("status","approved").eq("month",l),{data:u}=await se.from("seo_accounts").select("client_id").eq("employee_id",t).eq("status","active"),d=new Date;d.setDate(d.getDate()-90);const{data:m}=await se.from("seo_monthly_entries").select("nps_client").eq("employee_id",t).not("nps_client","is",null).gte("created_at",d.toISOString()),h=(o==null?void 0:o.length)>0?o.reduce((g,w)=>g+w.month_score,0)/o.length:0,f=(c==null?void 0:c.length)>0?c.reduce((g,w)=>g+w.month_score,0)/c.length:0,x=(m==null?void 0:m.length)>0?m.reduce((g,w)=>g+w.nps_client,0)/m.length:0;return{ytdAvgScore:Math.round(h*100)/100,lastMonthScore:Math.round(f*100)/100,activeClientsCount:(u==null?void 0:u.length)||0,avgNPS:Math.round(x*100)/100}}async getTeamDashboard(t=null){new Date().toISOString().slice(0,7);let n=se.from("seo_monthly_entries").select(`
        *,
        users!inner(id, name, email, role),
        clients!inner(id, name, type)
      `);const{data:a}=await n;return this.calculateTeamMetrics(a||[])}async getClients(t={}){const{active:n=!0,type:a}=t;let s=se.from("clients").select("*").order("name");n!==null&&(s=s.eq("active",n)),a&&(s=s.eq("type",a));const{data:i,error:o}=await s;if(o)throw new Error(`Failed to fetch clients: ${o.message}`);return i}async getEmployeeAccounts(t){const{data:n,error:a}=await se.from("seo_accounts").select(`
        *,
        clients!inner(id, name, type, active)
      `).eq("employee_id",t).eq("status","active");if(a)throw new Error(`Failed to fetch SEO accounts: ${a.message}`);return n}validateEntryData(t){const a=["gsc_organic_prev_30d","gsc_organic_curr_30d","ga_total_prev_30d","ga_total_curr_30d","serp_top3_count","serp_top10_count","pagespeed_home","pagespeed_service","pagespeed_location"].filter(s=>t[s]===null||t[s]===void 0);if(a.length>0)throw new Error(`Missing required fields: ${a.join(", ")}`)}calculateTeamMetrics(t){const n=new Date().toISOString().slice(0,7),a=t.filter(l=>l.status==="approved"),s=t.filter(l=>l.month===n),i=a.length>0?a.reduce((l,c)=>l+c.month_score,0)/a.length:0,o=a.filter(l=>l.month_score<65);return{totalEntries:t.length,approvedEntries:a.length,pendingReview:t.filter(l=>l.status==="submitted").length,avgTeamScore:Math.round(i*100)/100,lowPerformersCount:o.length,currentMonthSubmissions:s.length}}}const us=new l5,c5={ADMIN:"admin"},d5={MANAGER:"manager"},u5={CREATE_ENTRY:"create_entry",EDIT_OWN_DRAFT:"edit_own_draft",SUBMIT_ENTRY:"submit_entry",VIEW_OWN_ENTRIES:"view_own_entries",ADD_MENTOR_SCORE:"add_mentor_score",APPROVE_ENTRY:"approve_entry",RETURN_ENTRY:"return_entry",VIEW_TEAM_ENTRIES:"view_team_entries",OVERRIDE_ENTRY:"override_entry",BACKFILL_PAST_MONTHS:"backfill_past_months",CHANGE_WEIGHTS_TARGETS:"change_weights_targets",VIEW_ALL_ENTRIES:"view_all_entries",VIEW_EMPLOYEE_DASHBOARD:"view_employee_dashboard",VIEW_TEAM_DASHBOARD:"view_team_dashboard",VIEW_ADMIN_DASHBOARD:"view_admin_dashboard",CREATE_APPRAISAL:"create_appraisal",VIEW_APPRAISALS:"view_appraisals",EDIT_APPRAISAL:"edit_appraisal",EXPORT_TEAM_DATA:"export_team_data",EXPORT_ALL_DATA:"export_all_data"};c5.ADMIN+"",[...Object.values(u5)];const m5=({message:e="You don't have permission to access this feature."})=>r.jsx(pe,{className:"max-w-md mx-auto mt-8",children:r.jsxs(ge,{className:"p-6 text-center",children:[r.jsx(Nf,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-muted-foreground",children:e})]})}),h5=({children:e,fallback:t=r.jsx(m5,{message:"Appraisal data is only accessible to managers."})})=>{const{authState:n}=Ze(),a=n.user;return!a||a.department!==d5.MANAGER&&a.userRole!=="admin"?t:e},f5=()=>r.jsx(h5,{children:r.jsx(p5,{})}),p5=()=>{var b;const{user:e,role:t}=Ze(),[n,a]=p.useState([]),[s,i]=p.useState([]),[o,l]=p.useState(null),[c,u]=p.useState(!1),[d,m]=p.useState(!0),[h,f]=p.useState({employee_id:"",period_start:"",period_end:"",notes:""});p.useEffect(()=>{x()},[]);const x=async()=>{try{m(!0);const[v,_]=await Promise.all([us.getAppraisals(),us.getEmployees({department:"SEO"})]);a(v),i(_)}catch(v){console.error("Failed to load appraisal data:",v),lo.error("Failed to load appraisal data")}finally{m(!1)}},g=async(v,_,P)=>{try{return await us.calculateAppraisal({employee_id:v,period_start:_,period_end:P})}catch(O){throw console.error("Failed to calculate appraisal:",O),O}},w=async()=>{try{const v=await g(h.employee_id,h.period_start,h.period_end);await us.createAppraisal({...h,...v}),lo.success("Appraisal created successfully"),u(!1),f({employee_id:"",period_start:"",period_end:"",notes:""}),x()}catch(v){console.error("Failed to create appraisal:",v),lo.error("Failed to create appraisal")}},j=v=>{const _={A:"bg-green-100 text-green-800",B:"bg-blue-100 text-blue-800",C:"bg-yellow-100 text-yellow-800",D:"bg-red-100 text-red-800"};return r.jsx(rr,{className:_[v]||"bg-gray-100 text-gray-800",children:v})},y=(v,_)=>{const P={A:"Full increment bracket",B:"Standard increment",C:"Limited increment",D:"PIP/No increment"};return r.jsxs("div",{className:"text-sm",children:[r.jsx("div",{className:"font-medium",children:P[v]}),_&&r.jsxs("div",{className:"text-muted-foreground",children:[_,"%"]})]})},N=()=>r.jsx(Wh,{open:c,onOpenChange:u,children:r.jsxs(Hh,{className:"max-w-md",children:[r.jsx(Kh,{children:r.jsx(Gh,{children:"Create New Appraisal"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Vr,{htmlFor:"employee_id",children:"Employee"}),r.jsxs(Sn,{value:h.employee_id,onValueChange:v=>f(_=>({..._,employee_id:v})),children:[r.jsx(_n,{children:r.jsx(kn,{placeholder:"Select Employee"})}),r.jsx(An,{children:s.map(v=>r.jsx(Qe,{value:v.id,children:v.name},v.id))})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(Vr,{htmlFor:"period_start",children:"Period Start"}),r.jsx(ai,{id:"period_start",type:"date",value:h.period_start,onChange:v=>f(_=>({..._,period_start:v.target.value}))})]}),r.jsxs("div",{children:[r.jsx(Vr,{htmlFor:"period_end",children:"Period End"}),r.jsx(ai,{id:"period_end",type:"date",value:h.period_end,onChange:v=>f(_=>({..._,period_end:v.target.value}))})]})]}),r.jsxs("div",{children:[r.jsx(Vr,{htmlFor:"notes",children:"Notes"}),r.jsx(zb,{id:"notes",value:h.notes,onChange:v=>f(_=>({..._,notes:v.target.value})),placeholder:"Additional notes for this appraisal period...",rows:3})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(Ue,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),r.jsx(Ue,{onClick:w,disabled:!h.employee_id||!h.period_start||!h.period_end,children:"Create Appraisal"})]})]})]})}),S=({appraisal:v})=>{var _;return r.jsx(Wh,{open:!!o,onOpenChange:()=>l(null),children:r.jsxs(Hh,{className:"max-w-2xl",children:[r.jsx(Kh,{children:r.jsxs(Gh,{children:["Appraisal Details - ",v==null?void 0:v.employee_name]})}),v&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs(pe,{children:[r.jsx(dt,{children:r.jsx(ut,{className:"text-lg",children:"Appraisal Period"})}),r.jsx(ge,{children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(Vr,{children:"Period Start"}),r.jsx("p",{className:"font-medium",children:new Date(v.period_start).toLocaleDateString()})]}),r.jsxs("div",{children:[r.jsx(Vr,{children:"Period End"}),r.jsx("p",{className:"font-medium",children:new Date(v.period_end).toLocaleDateString()})]})]})})]}),r.jsxs(pe,{children:[r.jsx(dt,{children:r.jsx(ut,{className:"text-lg",children:"Performance Summary"})}),r.jsx(ge,{children:r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:((_=v.avg_month_score)==null?void 0:_.toFixed(1))||"N/A"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Average Score"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold",children:j(v.final_rating_band)}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Rating Band"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[v.eligible_increment_pct||0,"%"]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Increment"})]})]})})]}),v.monthly_scores&&r.jsxs(pe,{children:[r.jsx(dt,{children:r.jsx(ut,{className:"text-lg",children:"Monthly Breakdown"})}),r.jsx(ge,{children:r.jsxs(Vh,{children:[r.jsx(Yh,{children:r.jsxs(ds,{children:[r.jsx(Bt,{children:"Month"}),r.jsx(Bt,{children:"Clients"}),r.jsx(Bt,{children:"Avg Score"}),r.jsx(Bt,{children:"Status"})]})}),r.jsx(Xh,{children:v.monthly_scores.map((P,O)=>{var D;return r.jsxs(ds,{children:[r.jsx(qt,{children:P.month}),r.jsx(qt,{children:P.client_count}),r.jsx(qt,{children:r.jsx("span",{className:P.score>=75?"text-green-600":P.score>=65?"text-yellow-600":"text-red-600",children:(D=P.score)==null?void 0:D.toFixed(1)})}),r.jsx(qt,{children:r.jsx(rr,{variant:P.all_approved?"default":"secondary",children:P.all_approved?"Complete":"Pending"})})]},O)})})]})})]}),v.notes&&r.jsxs(pe,{children:[r.jsx(dt,{children:r.jsx(ut,{className:"text-lg",children:"Notes"})}),r.jsx(ge,{children:r.jsx("p",{className:"text-sm",children:v.notes})})]})]})]})})};return d?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-2 text-muted-foreground",children:"Loading appraisal data..."})]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"SEO Appraisal System"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage performance appraisals and increment eligibility"})]}),((b=authState.user)==null?void 0:b.role)==="admin"&&r.jsxs(Ue,{onClick:()=>u(!0),children:[r.jsx(Sf,{className:"h-4 w-4 mr-2"}),"New Appraisal"]})]}),r.jsxs(pe,{children:[r.jsx(dt,{children:r.jsx(ut,{className:"text-lg",children:"Rating Bands & Increment Policy"})}),r.jsx(ge,{children:r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"text-center p-4 border rounded-lg bg-green-50",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600 mb-2",children:"A"}),r.jsx("div",{className:"text-sm font-medium",children:"≥85 Score"}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Full increment bracket"})]}),r.jsxs("div",{className:"text-center p-4 border rounded-lg bg-blue-50",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-2",children:"B"}),r.jsx("div",{className:"text-sm font-medium",children:"75-84.9 Score"}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Standard increment"})]}),r.jsxs("div",{className:"text-center p-4 border rounded-lg bg-yellow-50",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-600 mb-2",children:"C"}),r.jsx("div",{className:"text-sm font-medium",children:"65-74.9 Score"}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Limited increment"})]}),r.jsxs("div",{className:"text-center p-4 border rounded-lg bg-red-50",children:[r.jsx("div",{className:"text-2xl font-bold text-red-600 mb-2",children:"D"}),r.jsx("div",{className:"text-sm font-medium",children:"<65 Score"}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"PIP/No increment"})]})]})})]}),r.jsxs(pe,{children:[r.jsx(dt,{children:r.jsx(ut,{children:"Recent Appraisals"})}),r.jsx(ge,{children:n.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(lv,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-medium",children:"No appraisals yet"}),r.jsx("p",{className:"text-muted-foreground",children:"Create your first appraisal to get started"})]}):r.jsxs(Vh,{children:[r.jsx(Yh,{children:r.jsxs(ds,{children:[r.jsx(Bt,{children:"Employee"}),r.jsx(Bt,{children:"Period"}),r.jsx(Bt,{children:"Avg Score"}),r.jsx(Bt,{children:"Rating"}),r.jsx(Bt,{children:"Increment"}),r.jsx(Bt,{children:"Created"}),r.jsx(Bt,{children:"Actions"})]})}),r.jsx(Xh,{children:n.map(v=>{var _;return r.jsxs(ds,{children:[r.jsx(qt,{className:"font-medium",children:v.employee_name}),r.jsx(qt,{children:r.jsxs("div",{className:"text-sm",children:[r.jsx("div",{children:new Date(v.period_start).toLocaleDateString()}),r.jsxs("div",{className:"text-muted-foreground",children:["to ",new Date(v.period_end).toLocaleDateString()]})]})}),r.jsx(qt,{children:r.jsx("span",{className:v.avg_month_score>=75?"text-green-600":v.avg_month_score>=65?"text-yellow-600":"text-red-600",children:((_=v.avg_month_score)==null?void 0:_.toFixed(1))||"N/A"})}),r.jsx(qt,{children:j(v.final_rating_band)}),r.jsx(qt,{children:y(v.final_rating_band,v.eligible_increment_pct)}),r.jsx(qt,{children:new Date(v.created_at).toLocaleDateString()}),r.jsx(qt,{children:r.jsxs(Ue,{size:"sm",variant:"outline",onClick:()=>l(v),children:[r.jsx(ys,{className:"h-3 w-3 mr-1"}),"View"]})})]},v.id)})})]})})]}),r.jsx(N,{}),o&&r.jsx(S,{appraisal:o})]})};class g5{static async authenticateUser(t,n,a=null,s=null){try{if(!se)throw new Error("Database connection not available");let{data:i,error:o}=await se.from("unified_users").select("*").eq("email",t).eq("status","active").single();if(o&&o.code==="PGRST116"){const{data:c,error:u}=await se.from("user_accounts").select("*").eq("email",t).eq("is_active",!0).single();if(u||!c)throw await this.logFailedLoginAttempt(t,a,s),new Error("Invalid email or password");i={id:c.id,user_id:c.user_id,name:c.full_name,email:c.email,phone:c.phone,password_hash:"password123",role:this.mapAccountRoleToUnifiedRole(c.role),user_category:this.mapRoleToCategory(c.role),department:c.department,status:c.is_active?"active":"inactive",login_attempts:c.failed_login_attempts||0,permissions:{},dashboard_access:[]},o=null}if(o||!i)throw await this.logFailedLoginAttempt(t,a,s),new Error("Invalid email or password");if(i.password_hash!==n)throw await this.incrementLoginAttempts(i.id),new Error("Invalid email or password");if(i.login_attempts>=5)throw new Error("Account locked due to too many failed attempts. Contact administrator.");const l=await this.createUserSession(i.id,a,s);return await se.from("unified_users").update({last_login:new Date().toISOString(),login_attempts:0,updated_at:new Date().toISOString()}).eq("id",i.id),{success:!0,user:{id:i.id,user_id:i.user_id,name:i.name,email:i.email,phone:i.phone,role:i.role,user_category:i.user_category,department:i.department,permissions:i.permissions||{},dashboard_access:i.dashboard_access||[],status:i.status},session:l}}catch(i){throw console.error("Authentication error:",i),i}}static async createUserSession(t,n,a){const s=this.generateSessionToken(),i=new Date(Date.now()+24*60*60*1e3),{data:o,error:l}=await se.from("user_sessions").insert({user_id:t,session_token:s,ip_address:n,user_agent:a,expires_at:i.toISOString(),is_active:!0}).select().single();if(l)throw new Error("Failed to create session");return{id:o.id,session_token:s,expires_at:i.toISOString()}}static async incrementLoginAttempts(t){await se.from("unified_users").update({login_attempts:se.raw("login_attempts + 1"),updated_at:new Date().toISOString()}).eq("id",t)}static async logFailedLoginAttempt(t,n,a){try{console.warn("Failed login attempt:",{email:t,ip_address:n,user_agent:a,timestamp:new Date().toISOString()})}catch(s){console.error("Failed to log login attempt:",s)}}static async getUserLoginHistory(t){const{data:n}=await se.from("unified_users").select("role").eq("id",t).single();if(!n||n.role!=="Super Admin")throw new Error("Access denied. Only Super Admin can view login history.");const{data:a,error:s}=await se.from("user_sessions").select(`
        *,
        unified_users!inner(
          name,
          email,
          role
        )
      `).order("login_timestamp",{ascending:!1}).limit(1e3);if(s)throw new Error("Failed to fetch login history");return a.map(i=>({id:i.id,user_name:i.unified_users.name,user_email:i.unified_users.email,user_role:i.unified_users.role,ip_address:i.ip_address,user_agent:i.user_agent,login_time:i.login_timestamp,last_activity:i.last_activity,is_active:i.is_active,logout_time:i.logout_timestamp}))}static async logoutUser(t){await se.from("user_sessions").update({is_active:!1,logout_timestamp:new Date().toISOString()}).eq("session_token",t)}static async validateSession(t){const{data:n,error:a}=await se.from("user_sessions").select(`
        *,
        unified_users!inner(*)
      `).eq("session_token",t).eq("is_active",!0).gt("expires_at",new Date().toISOString()).single();return a||!n?null:(await se.from("user_sessions").update({last_activity:new Date().toISOString()}).eq("id",n.id),{user:n.unified_users,session:{id:n.id,session_token:n.session_token,expires_at:n.expires_at}})}static generateSessionToken(){return`session_${Date.now()}_${Math.random().toString(36).substring(2,15)}_${Math.random().toString(36).substring(2,15)}`}static getClientIP(t){var n,a,s;return((n=t==null?void 0:t.headers)==null?void 0:n["x-forwarded-for"])||((a=t==null?void 0:t.headers)==null?void 0:a["x-real-ip"])||((s=t==null?void 0:t.connection)==null?void 0:s.remoteAddress)||"unknown"}static mapAccountRoleToUnifiedRole(t){return{employee:"Web Developer",manager:"Operations Head",hr:"HR Manager",admin:"Super Admin"}[t]||"Web Developer"}static mapRoleToCategory(t){return{employee:"employee",manager:"management",hr:"management",admin:"super_admin"}[t]||"employee"}}const Md="-",x5=e=>{const t=y5(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:o=>{const l=o.split(Md);return l[0]===""&&l.length!==1&&l.shift(),Wb(l,t)||b5(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&a[o]?[...c,...a[o]]:c}}},Wb=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],a=t.nextPart.get(n),s=a?Wb(e.slice(1),a):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(Md);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},Jh=/^\[(.+)\]$/,b5=e=>{if(Jh.test(e)){const t=Jh.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},y5=e=>{const{theme:t,classGroups:n}=e,a={nextPart:new Map,validators:[]};for(const s in n)Bl(n[s],a,s,t);return a},Bl=(e,t,n,a)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:Zh(t,s);i.classGroupId=n;return}if(typeof s=="function"){if(v5(s)){Bl(s(a),t,n,a);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Bl(o,Zh(t,i),n,a)})})},Zh=(e,t)=>{let n=e;return t.split(Md).forEach(a=>{n.nextPart.has(a)||n.nextPart.set(a,{nextPart:new Map,validators:[]}),n=n.nextPart.get(a)}),n},v5=e=>e.isThemeGetter,j5=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,a=new Map;const s=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,a=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=a.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},ql="!",zl=":",w5=zl.length,N5=e=>{const{prefix:t,experimentalParseClassName:n}=e;let a=s=>{const i=[];let o=0,l=0,c=0,u;for(let x=0;x<s.length;x++){let g=s[x];if(o===0&&l===0){if(g===zl){i.push(s.slice(c,x)),c=x+w5;continue}if(g==="/"){u=x;continue}}g==="["?o++:g==="]"?o--:g==="("?l++:g===")"&&l--}const d=i.length===0?s:s.substring(c),m=S5(d),h=m!==d,f=u&&u>c?u-c:void 0;return{modifiers:i,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:f}};if(t){const s=t+zl,i=a;a=o=>o.startsWith(s)?i(o.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const s=a;a=i=>n({className:i,parseClassName:s})}return a},S5=e=>e.endsWith(ql)?e.substring(0,e.length-1):e.startsWith(ql)?e.substring(1):e,_5=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(a=>[a,!0]));return a=>{if(a.length<=1)return a;const s=[];let i=[];return a.forEach(o=>{o[0]==="["||t[o]?(s.push(...i.sort(),o),i=[]):i.push(o)}),s.push(...i.sort()),s}},k5=e=>({cache:j5(e.cacheSize),parseClassName:N5(e),sortModifiers:_5(e),...x5(e)}),A5=/\s+/,P5=(e,t)=>{const{parseClassName:n,getClassGroupId:a,getConflictingClassGroupIds:s,sortModifiers:i}=t,o=[],l=e.trim().split(A5);let c="";for(let u=l.length-1;u>=0;u-=1){const d=l[u],{isExternal:m,modifiers:h,hasImportantModifier:f,baseClassName:x,maybePostfixModifierPosition:g}=n(d);if(m){c=d+(c.length>0?" "+c:c);continue}let w=!!g,j=a(w?x.substring(0,g):x);if(!j){if(!w){c=d+(c.length>0?" "+c:c);continue}if(j=a(x),!j){c=d+(c.length>0?" "+c:c);continue}w=!1}const y=i(h).join(":"),N=f?y+ql:y,S=N+j;if(o.includes(S))continue;o.push(S);const b=s(j,w);for(let v=0;v<b.length;++v){const _=b[v];o.push(N+_)}c=d+(c.length>0?" "+c:c)}return c};function C5(){let e=0,t,n,a="";for(;e<arguments.length;)(t=arguments[e++])&&(n=Hb(t))&&(a&&(a+=" "),a+=n);return a}const Hb=e=>{if(typeof e=="string")return e;let t,n="";for(let a=0;a<e.length;a++)e[a]&&(t=Hb(e[a]))&&(n&&(n+=" "),n+=t);return n};function E5(e,...t){let n,a,s,i=o;function o(c){const u=t.reduce((d,m)=>m(d),e());return n=k5(u),a=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const u=a(c);if(u)return u;const d=P5(c,n);return s(c,d),d}return function(){return i(C5.apply(null,arguments))}}const Fe=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},Kb=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Gb=/^\((?:(\w[\w-]*):)?(.+)\)$/i,O5=/^\d+\/\d+$/,T5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,D5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,M5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,I5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,R5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wn=e=>O5.test(e),ce=e=>!!e&&!Number.isNaN(Number(e)),Sr=e=>!!e&&Number.isInteger(Number(e)),qo=e=>e.endsWith("%")&&ce(e.slice(0,-1)),tr=e=>T5.test(e),L5=()=>!0,$5=e=>D5.test(e)&&!M5.test(e),Vb=()=>!1,F5=e=>I5.test(e),B5=e=>R5.test(e),q5=e=>!Q(e)&&!ee(e),z5=e=>Jn(e,Jb,Vb),Q=e=>Kb.test(e),Wr=e=>Jn(e,Zb,$5),zo=e=>Jn(e,G5,ce),Qh=e=>Jn(e,Yb,Vb),U5=e=>Jn(e,Xb,B5),ms=e=>Jn(e,Qb,F5),ee=e=>Gb.test(e),ca=e=>Zn(e,Zb),W5=e=>Zn(e,V5),ef=e=>Zn(e,Yb),H5=e=>Zn(e,Jb),K5=e=>Zn(e,Xb),hs=e=>Zn(e,Qb,!0),Jn=(e,t,n)=>{const a=Kb.exec(e);return a?a[1]?t(a[1]):n(a[2]):!1},Zn=(e,t,n=!1)=>{const a=Gb.exec(e);return a?a[1]?t(a[1]):n:!1},Yb=e=>e==="position"||e==="percentage",Xb=e=>e==="image"||e==="url",Jb=e=>e==="length"||e==="size"||e==="bg-size",Zb=e=>e==="length",G5=e=>e==="number",V5=e=>e==="family-name",Qb=e=>e==="shadow",Y5=()=>{const e=Fe("color"),t=Fe("font"),n=Fe("text"),a=Fe("font-weight"),s=Fe("tracking"),i=Fe("leading"),o=Fe("breakpoint"),l=Fe("container"),c=Fe("spacing"),u=Fe("radius"),d=Fe("shadow"),m=Fe("inset-shadow"),h=Fe("text-shadow"),f=Fe("drop-shadow"),x=Fe("blur"),g=Fe("perspective"),w=Fe("aspect"),j=Fe("ease"),y=Fe("animate"),N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],b=()=>[...S(),ee,Q],v=()=>["auto","hidden","clip","visible","scroll"],_=()=>["auto","contain","none"],P=()=>[ee,Q,c],O=()=>[wn,"full","auto",...P()],D=()=>[Sr,"none","subgrid",ee,Q],A=()=>["auto",{span:["full",Sr,ee,Q]},Sr,ee,Q],T=()=>[Sr,"auto",ee,Q],L=()=>["auto","min","max","fr",ee,Q],C=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],F=()=>["start","end","center","stretch","center-safe","end-safe"],R=()=>["auto",...P()],K=()=>[wn,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...P()],M=()=>[e,ee,Q],I=()=>[...S(),ef,Qh,{position:[ee,Q]}],H=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Y=()=>["auto","cover","contain",H5,z5,{size:[ee,Q]}],z=()=>[qo,ca,Wr],G=()=>["","none","full",u,ee,Q],V=()=>["",ce,ca,Wr],Z=()=>["solid","dashed","dotted","double"],ue=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],E=()=>[ce,qo,ef,Qh],B=()=>["","none",x,ee,Q],U=()=>["none",ce,ee,Q],X=()=>["none",ce,ee,Q],ae=()=>[ce,ee,Q],q=()=>[wn,"full",...P()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[tr],breakpoint:[tr],color:[L5],container:[tr],"drop-shadow":[tr],ease:["in","out","in-out"],font:[q5],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[tr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[tr],shadow:[tr],spacing:["px",ce],text:[tr],"text-shadow":[tr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",wn,Q,ee,w]}],container:["container"],columns:[{columns:[ce,Q,ee,l]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:b()}],overflow:[{overflow:v()}],"overflow-x":[{"overflow-x":v()}],"overflow-y":[{"overflow-y":v()}],overscroll:[{overscroll:_()}],"overscroll-x":[{"overscroll-x":_()}],"overscroll-y":[{"overscroll-y":_()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:O()}],"inset-x":[{"inset-x":O()}],"inset-y":[{"inset-y":O()}],start:[{start:O()}],end:[{end:O()}],top:[{top:O()}],right:[{right:O()}],bottom:[{bottom:O()}],left:[{left:O()}],visibility:["visible","invisible","collapse"],z:[{z:[Sr,"auto",ee,Q]}],basis:[{basis:[wn,"full","auto",l,...P()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ce,wn,"auto","initial","none",Q]}],grow:[{grow:["",ce,ee,Q]}],shrink:[{shrink:["",ce,ee,Q]}],order:[{order:[Sr,"first","last","none",ee,Q]}],"grid-cols":[{"grid-cols":D()}],"col-start-end":[{col:A()}],"col-start":[{"col-start":T()}],"col-end":[{"col-end":T()}],"grid-rows":[{"grid-rows":D()}],"row-start-end":[{row:A()}],"row-start":[{"row-start":T()}],"row-end":[{"row-end":T()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":L()}],"auto-rows":[{"auto-rows":L()}],gap:[{gap:P()}],"gap-x":[{"gap-x":P()}],"gap-y":[{"gap-y":P()}],"justify-content":[{justify:[...C(),"normal"]}],"justify-items":[{"justify-items":[...F(),"normal"]}],"justify-self":[{"justify-self":["auto",...F()]}],"align-content":[{content:["normal",...C()]}],"align-items":[{items:[...F(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...F(),{baseline:["","last"]}]}],"place-content":[{"place-content":C()}],"place-items":[{"place-items":[...F(),"baseline"]}],"place-self":[{"place-self":["auto",...F()]}],p:[{p:P()}],px:[{px:P()}],py:[{py:P()}],ps:[{ps:P()}],pe:[{pe:P()}],pt:[{pt:P()}],pr:[{pr:P()}],pb:[{pb:P()}],pl:[{pl:P()}],m:[{m:R()}],mx:[{mx:R()}],my:[{my:R()}],ms:[{ms:R()}],me:[{me:R()}],mt:[{mt:R()}],mr:[{mr:R()}],mb:[{mb:R()}],ml:[{ml:R()}],"space-x":[{"space-x":P()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":P()}],"space-y-reverse":["space-y-reverse"],size:[{size:K()}],w:[{w:[l,"screen",...K()]}],"min-w":[{"min-w":[l,"screen","none",...K()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...K()]}],h:[{h:["screen","lh",...K()]}],"min-h":[{"min-h":["screen","lh","none",...K()]}],"max-h":[{"max-h":["screen","lh",...K()]}],"font-size":[{text:["base",n,ca,Wr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,ee,zo]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",qo,Q]}],"font-family":[{font:[W5,Q,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,ee,Q]}],"line-clamp":[{"line-clamp":[ce,"none",ee,zo]}],leading:[{leading:[i,...P()]}],"list-image":[{"list-image":["none",ee,Q]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ee,Q]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:M()}],"text-color":[{text:M()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:[ce,"from-font","auto",ee,Wr]}],"text-decoration-color":[{decoration:M()}],"underline-offset":[{"underline-offset":[ce,"auto",ee,Q]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ee,Q]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ee,Q]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:I()}],"bg-repeat":[{bg:H()}],"bg-size":[{bg:Y()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Sr,ee,Q],radial:["",ee,Q],conic:[Sr,ee,Q]},K5,U5]}],"bg-color":[{bg:M()}],"gradient-from-pos":[{from:z()}],"gradient-via-pos":[{via:z()}],"gradient-to-pos":[{to:z()}],"gradient-from":[{from:M()}],"gradient-via":[{via:M()}],"gradient-to":[{to:M()}],rounded:[{rounded:G()}],"rounded-s":[{"rounded-s":G()}],"rounded-e":[{"rounded-e":G()}],"rounded-t":[{"rounded-t":G()}],"rounded-r":[{"rounded-r":G()}],"rounded-b":[{"rounded-b":G()}],"rounded-l":[{"rounded-l":G()}],"rounded-ss":[{"rounded-ss":G()}],"rounded-se":[{"rounded-se":G()}],"rounded-ee":[{"rounded-ee":G()}],"rounded-es":[{"rounded-es":G()}],"rounded-tl":[{"rounded-tl":G()}],"rounded-tr":[{"rounded-tr":G()}],"rounded-br":[{"rounded-br":G()}],"rounded-bl":[{"rounded-bl":G()}],"border-w":[{border:V()}],"border-w-x":[{"border-x":V()}],"border-w-y":[{"border-y":V()}],"border-w-s":[{"border-s":V()}],"border-w-e":[{"border-e":V()}],"border-w-t":[{"border-t":V()}],"border-w-r":[{"border-r":V()}],"border-w-b":[{"border-b":V()}],"border-w-l":[{"border-l":V()}],"divide-x":[{"divide-x":V()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":V()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Z(),"hidden","none"]}],"divide-style":[{divide:[...Z(),"hidden","none"]}],"border-color":[{border:M()}],"border-color-x":[{"border-x":M()}],"border-color-y":[{"border-y":M()}],"border-color-s":[{"border-s":M()}],"border-color-e":[{"border-e":M()}],"border-color-t":[{"border-t":M()}],"border-color-r":[{"border-r":M()}],"border-color-b":[{"border-b":M()}],"border-color-l":[{"border-l":M()}],"divide-color":[{divide:M()}],"outline-style":[{outline:[...Z(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ce,ee,Q]}],"outline-w":[{outline:["",ce,ca,Wr]}],"outline-color":[{outline:M()}],shadow:[{shadow:["","none",d,hs,ms]}],"shadow-color":[{shadow:M()}],"inset-shadow":[{"inset-shadow":["none",m,hs,ms]}],"inset-shadow-color":[{"inset-shadow":M()}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:M()}],"ring-offset-w":[{"ring-offset":[ce,Wr]}],"ring-offset-color":[{"ring-offset":M()}],"inset-ring-w":[{"inset-ring":V()}],"inset-ring-color":[{"inset-ring":M()}],"text-shadow":[{"text-shadow":["none",h,hs,ms]}],"text-shadow-color":[{"text-shadow":M()}],opacity:[{opacity:[ce,ee,Q]}],"mix-blend":[{"mix-blend":[...ue(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ue()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ce]}],"mask-image-linear-from-pos":[{"mask-linear-from":E()}],"mask-image-linear-to-pos":[{"mask-linear-to":E()}],"mask-image-linear-from-color":[{"mask-linear-from":M()}],"mask-image-linear-to-color":[{"mask-linear-to":M()}],"mask-image-t-from-pos":[{"mask-t-from":E()}],"mask-image-t-to-pos":[{"mask-t-to":E()}],"mask-image-t-from-color":[{"mask-t-from":M()}],"mask-image-t-to-color":[{"mask-t-to":M()}],"mask-image-r-from-pos":[{"mask-r-from":E()}],"mask-image-r-to-pos":[{"mask-r-to":E()}],"mask-image-r-from-color":[{"mask-r-from":M()}],"mask-image-r-to-color":[{"mask-r-to":M()}],"mask-image-b-from-pos":[{"mask-b-from":E()}],"mask-image-b-to-pos":[{"mask-b-to":E()}],"mask-image-b-from-color":[{"mask-b-from":M()}],"mask-image-b-to-color":[{"mask-b-to":M()}],"mask-image-l-from-pos":[{"mask-l-from":E()}],"mask-image-l-to-pos":[{"mask-l-to":E()}],"mask-image-l-from-color":[{"mask-l-from":M()}],"mask-image-l-to-color":[{"mask-l-to":M()}],"mask-image-x-from-pos":[{"mask-x-from":E()}],"mask-image-x-to-pos":[{"mask-x-to":E()}],"mask-image-x-from-color":[{"mask-x-from":M()}],"mask-image-x-to-color":[{"mask-x-to":M()}],"mask-image-y-from-pos":[{"mask-y-from":E()}],"mask-image-y-to-pos":[{"mask-y-to":E()}],"mask-image-y-from-color":[{"mask-y-from":M()}],"mask-image-y-to-color":[{"mask-y-to":M()}],"mask-image-radial":[{"mask-radial":[ee,Q]}],"mask-image-radial-from-pos":[{"mask-radial-from":E()}],"mask-image-radial-to-pos":[{"mask-radial-to":E()}],"mask-image-radial-from-color":[{"mask-radial-from":M()}],"mask-image-radial-to-color":[{"mask-radial-to":M()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":S()}],"mask-image-conic-pos":[{"mask-conic":[ce]}],"mask-image-conic-from-pos":[{"mask-conic-from":E()}],"mask-image-conic-to-pos":[{"mask-conic-to":E()}],"mask-image-conic-from-color":[{"mask-conic-from":M()}],"mask-image-conic-to-color":[{"mask-conic-to":M()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:I()}],"mask-repeat":[{mask:H()}],"mask-size":[{mask:Y()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ee,Q]}],filter:[{filter:["","none",ee,Q]}],blur:[{blur:B()}],brightness:[{brightness:[ce,ee,Q]}],contrast:[{contrast:[ce,ee,Q]}],"drop-shadow":[{"drop-shadow":["","none",f,hs,ms]}],"drop-shadow-color":[{"drop-shadow":M()}],grayscale:[{grayscale:["",ce,ee,Q]}],"hue-rotate":[{"hue-rotate":[ce,ee,Q]}],invert:[{invert:["",ce,ee,Q]}],saturate:[{saturate:[ce,ee,Q]}],sepia:[{sepia:["",ce,ee,Q]}],"backdrop-filter":[{"backdrop-filter":["","none",ee,Q]}],"backdrop-blur":[{"backdrop-blur":B()}],"backdrop-brightness":[{"backdrop-brightness":[ce,ee,Q]}],"backdrop-contrast":[{"backdrop-contrast":[ce,ee,Q]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ce,ee,Q]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ce,ee,Q]}],"backdrop-invert":[{"backdrop-invert":["",ce,ee,Q]}],"backdrop-opacity":[{"backdrop-opacity":[ce,ee,Q]}],"backdrop-saturate":[{"backdrop-saturate":[ce,ee,Q]}],"backdrop-sepia":[{"backdrop-sepia":["",ce,ee,Q]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":P()}],"border-spacing-x":[{"border-spacing-x":P()}],"border-spacing-y":[{"border-spacing-y":P()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ee,Q]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ce,"initial",ee,Q]}],ease:[{ease:["linear","initial",j,ee,Q]}],delay:[{delay:[ce,ee,Q]}],animate:[{animate:["none",y,ee,Q]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,ee,Q]}],"perspective-origin":[{"perspective-origin":b()}],rotate:[{rotate:U()}],"rotate-x":[{"rotate-x":U()}],"rotate-y":[{"rotate-y":U()}],"rotate-z":[{"rotate-z":U()}],scale:[{scale:X()}],"scale-x":[{"scale-x":X()}],"scale-y":[{"scale-y":X()}],"scale-z":[{"scale-z":X()}],"scale-3d":["scale-3d"],skew:[{skew:ae()}],"skew-x":[{"skew-x":ae()}],"skew-y":[{"skew-y":ae()}],transform:[{transform:[ee,Q,"","none","gpu","cpu"]}],"transform-origin":[{origin:b()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:q()}],"translate-x":[{"translate-x":q()}],"translate-y":[{"translate-y":q()}],"translate-z":[{"translate-z":q()}],"translate-none":["translate-none"],accent:[{accent:M()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:M()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ee,Q]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ee,Q]}],fill:[{fill:["none",...M()]}],"stroke-w":[{stroke:[ce,ca,Wr,zo]}],stroke:[{stroke:["none",...M()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},X5=E5(Y5);function Id(...e){return X5(be(e))}const Ul=jt.forwardRef(({className:e,variant:t,...n},a)=>r.jsx("div",{ref:a,role:"alert",className:Id("relative w-full rounded-lg border p-4",{"border-red-200 bg-red-50 text-red-900":t==="destructive","border-yellow-200 bg-yellow-50 text-yellow-900":t==="warning","border-blue-200 bg-blue-50 text-blue-900":t==="info","border-green-200 bg-green-50 text-green-900":t==="success","border-gray-200 bg-gray-50 text-gray-900":!t||t==="default"},e),...n}));Ul.displayName="Alert";const Wl=jt.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Id("text-sm [&_p]:leading-relaxed",e),...t}));Wl.displayName="AlertDescription";const J5=jt.forwardRef(({className:e,...t},n)=>r.jsx("h5",{ref:n,className:Id("mb-1 font-medium leading-none tracking-tight",e),...t}));J5.displayName="AlertTitle";function Z5(){const{user:e,hasPermission:t}=Ze(),{notify:n}=Oe(),[a,s]=p.useState([]),[i,o]=p.useState(!1),[l,c]=p.useState(null),[u,d]=p.useState(""),[m,h]=p.useState(!0),[f,x]=p.useState([]),g=t("audit:logs")&&(e==null?void 0:e.role)==="Super Admin";p.useEffect(()=>{g&&w()},[g]),p.useEffect(()=>{if(u){const b=a.filter(v=>{var _,P,O,D;return((_=v.user_name)==null?void 0:_.toLowerCase().includes(u.toLowerCase()))||((P=v.user_email)==null?void 0:P.toLowerCase().includes(u.toLowerCase()))||((O=v.user_role)==null?void 0:O.toLowerCase().includes(u.toLowerCase()))||((D=v.ip_address)==null?void 0:D.includes(u))});x(b)}else x(a)},[u,a]);const w=async()=>{try{o(!0),c(null);const b=await g5.getUserLoginHistory(e.id);s(b),n({type:"success",title:"Login History Loaded",message:`Retrieved ${b.length} login records`})}catch(b){console.error("Failed to fetch login history:",b),c(b.message),n({type:"error",title:"Access Denied",message:b.message})}finally{o(!1)}},j=()=>{if(f.length===0){n({type:"warning",title:"No Data",message:"No login history to export"});return}const v=[["User Name","Email","Role","IP Address","Login Time","Last Activity","Status","Logout Time"].join(","),...f.map(D=>[`"${D.user_name||"N/A"}"`,`"${D.user_email||"N/A"}"`,`"${D.user_role||"N/A"}"`,`"${m?D.ip_address||"N/A":"Hidden"}"`,`"${new Date(D.login_time).toLocaleString()}"`,`"${D.last_activity?new Date(D.last_activity).toLocaleString():"N/A"}"`,`"${D.is_active?"Active":"Inactive"}"`,`"${D.logout_time?new Date(D.logout_time).toLocaleString():"N/A"}"`].join(","))].join(`
`),_=new Blob([v],{type:"text/csv;charset=utf-8;"}),P=document.createElement("a"),O=URL.createObjectURL(_);P.setAttribute("href",O),P.setAttribute("download",`login_history_${new Date().toISOString().split("T")[0]}.csv`),P.style.visibility="hidden",document.body.appendChild(P),P.click(),document.body.removeChild(P),n({type:"success",title:"Export Complete",message:"Login history exported to CSV"})},y=b=>b?new Date(b).toLocaleString():"N/A",N=b=>r.jsx(rr,{variant:b?"success":"secondary",children:b?"Active":"Inactive"}),S=b=>{const v={"Super Admin":"destructive","Operations Head":"warning",HR:"info",Manager:"secondary",Employee:"outline",Intern:"outline",Freelancer:"outline"};return r.jsx(rr,{variant:v[b]||"outline",children:b})};return g?r.jsxs(pe,{className:"w-full max-w-6xl mx-auto",children:[r.jsxs(dt,{children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx(ut,{className:"text-2xl font-bold",children:"User Login History"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Ue,{variant:"outline",size:"sm",onClick:()=>h(!m),className:"flex items-center gap-2",children:[m?r.jsx(cv,{className:"h-4 w-4"}):r.jsx(ys,{className:"h-4 w-4"}),m?"Hide IPs":"Show IPs"]}),r.jsxs(Ue,{variant:"outline",size:"sm",onClick:j,disabled:f.length===0,className:"flex items-center gap-2",children:[r.jsx(_f,{className:"h-4 w-4"}),"Export CSV"]}),r.jsxs(Ue,{variant:"outline",size:"sm",onClick:w,disabled:i,className:"flex items-center gap-2",children:[r.jsx(eu,{className:`h-4 w-4 ${i?"animate-spin":""}`}),"Refresh"]})]})]}),r.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(dv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(ai,{placeholder:"Search by name, email, role, or IP address...",value:u,onChange:b=>d(b.target.value),className:"pl-10"})]}),r.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",f.length," of ",a.length," records"]})]})]}),r.jsxs(ge,{children:[l&&r.jsx(Ul,{className:"mb-4",children:r.jsx(Wl,{children:l})}),i?r.jsxs("div",{className:"flex justify-center items-center py-8",children:[r.jsx(eu,{className:"h-6 w-6 animate-spin"}),r.jsx("span",{className:"ml-2",children:"Loading login history..."})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full border-collapse border border-gray-200",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"User"}),r.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Role"}),m&&r.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"IP Address"}),r.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Login Time"}),r.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Last Activity"}),r.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Status"}),r.jsx("th",{className:"border border-gray-200 px-4 py-2 text-left",children:"Logout Time"})]})}),r.jsx("tbody",{children:f.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:m?7:6,className:"border border-gray-200 px-4 py-8 text-center text-gray-500",children:u?"No matching login records found":"No login history available"})}):f.map((b,v)=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"border border-gray-200 px-4 py-2",children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:b.user_name||"Unknown"}),r.jsx("div",{className:"text-sm text-gray-600",children:b.user_email})]})}),r.jsx("td",{className:"border border-gray-200 px-4 py-2",children:S(b.user_role)}),m&&r.jsx("td",{className:"border border-gray-200 px-4 py-2 font-mono text-sm",children:b.ip_address||"N/A"}),r.jsx("td",{className:"border border-gray-200 px-4 py-2 text-sm",children:y(b.login_time)}),r.jsx("td",{className:"border border-gray-200 px-4 py-2 text-sm",children:y(b.last_activity)}),r.jsx("td",{className:"border border-gray-200 px-4 py-2",children:N(b.is_active)}),r.jsx("td",{className:"border border-gray-200 px-4 py-2 text-sm",children:y(b.logout_time)})]},b.id||v))})]})})]})]}):r.jsx(pe,{className:"w-full max-w-4xl mx-auto",children:r.jsx(ge,{className:"p-6",children:r.jsx(Ul,{children:r.jsx(Wl,{children:"Access Denied: Only Super Admin users can view login history."})})})})}function Q5({onNavigateToDashboard:e}){var re,_e,ot;const t=Ie(),{submissions:n,clients:a,loading:s,refreshAllData:i}=Aa(),{employees:o}=Py(),{notify:l}=Oe(),{openModal:c,closeModal:u}=Vl(),{crossDashboardData:d,performanceMetrics:m,dashboardActivity:h,notifications:f,unreadNotifications:x,activeDashboards:g,totalActiveUsers:w,updateDashboardActivity:j,markNotificationRead:y,clearNotifications:N}=Cy(),{currentUser:S,hasFeatureAccess:b}=Ey(),{systemNotifications:v}=Oy(),{auditLogs:_,logUserAction:P}=Ty(),{navigate:O}=Dy(),[D,A]=p.useState([]),[T,L]=p.useState({employees:0,interns:0,freelancers:0,managers:0,sales:0,hr:0,finance:0,agency:0}),[C,F]=p.useState({sales:{value:"₹0",change:"+0%"},hr:{value:"0",change:"+0"},finance:{value:"₹0",change:"+0%"},intern:{value:"0",change:"+0"}}),[R,K]=p.useState({totalEmployees:0,activeProjects:0,monthlyRevenue:"₹0",clientSatisfaction:0}),[M,I]=p.useState({database:"healthy",sync:"healthy",performance:"good",security:"secure"}),[H,Y]=p.useState(!1),[z,G]=p.useState(!1),[V,Z]=p.useState(!1),[ue,E]=p.useState(!1),[B,U]=p.useState(!1),[X,ae]=p.useState(!1),[q,ve]=p.useState(!1),[le,Ne]=p.useState(!1),[fe,Lt]=p.useState({totalSubmissions:0,currentMonthSubmissions:0,totalEmployees:0,activeEmployees:0,totalClients:0,activeClients:0,pendingReviews:0,averagePerformance:8.5,dataSync:"healthy"});p.useEffect(()=>{(async()=>{let ye={};if(S)try{ye=await Vd.getPersonalizedDashboardMetrics(S,"superAdmin")}catch(lt){console.error("Error loading personalized metrics:",lt)}const nt=ye.totalSubmissions||(n==null?void 0:n.length)||0,$t=new Date().toISOString().slice(0,7),Te=ye.currentMonthSubmissions||(n==null?void 0:n.filter(lt=>{var zr;return(zr=lt.created_at)==null?void 0:zr.startsWith($t)}).length)||0,Ft=ye.totalEmployees||(o==null?void 0:o.length)||0,Br=ye.activeEmployees||(o==null?void 0:o.filter(lt=>lt.status==="active").length)||0,qr=ye.totalClients||(a==null?void 0:a.length)||0,vn=ye.activeClients||(a==null?void 0:a.filter(lt=>lt.status==="active").length)||0,Wa=ye.pendingReviews||(n==null?void 0:n.filter(lt=>lt.status==="pending_review").length)||0,Ha=ye.averagePerformance||((n==null?void 0:n.length)>0?n.reduce((lt,zr)=>lt+(zr.performance_score||0),0)/n.length:8.5),Ka=s.submissions||s.clients?"syncing":"healthy";Lt({totalSubmissions:nt,currentMonthSubmissions:Te,totalEmployees:Ft,activeEmployees:Br,totalClients:qr,activeClients:vn,pendingReviews:Wa,averagePerformance:Ha,dataSync:Ka})})()},[n,o,a,s,S]);const Fr=p.useCallback(async()=>{try{const[oe,ye]=await Promise.all([Gd.getDynamicStats(),Gd.getSuperAdminStats()]);F(oe),K(ye)}catch(oe){console.error("Error fetching dynamic stats:",oe),F({sales:{value:"₹2.5M",change:"+12%"},hr:{value:"156",change:"+8"},finance:{value:"₹1.2M",change:"+5%"},intern:{value:"15",change:"+3"}}),K({totalEmployees:156,activeProjects:45,monthlyRevenue:"₹2.5M",clientSatisfaction:92})}},[]);p.useEffect(()=>{const oe=()=>{const nt=t?"healthy":"local",$t=s.submissions||s.clients?"syncing":"healthy",Te=fe.averagePerformance>8?"excellent":fe.averagePerformance>6?"good":"needs-attention",Ft="secure";(M.database!==nt||M.sync!==$t||M.performance!==Te||M.security!==Ft)&&I({database:nt,sync:$t,performance:Te,security:Ft})};oe();const ye=setInterval(oe,3e4);return()=>clearInterval(ye)},[fe.averagePerformance,s,t]);const Ua=p.useCallback(async()=>{if(S)try{const oe=await Vd.getPersonalizedDashboardCards(S);A(oe)}catch(oe){console.error("Error loading personalized cards:",oe),A([])}},[S]);p.useEffect(()=>{Fr(),Ua()},[Fr,Ua]);const it=p.useCallback(async(oe,ye)=>{try{switch(oe){case"refresh":await i(),l("Data refreshed successfully","success"),P("data_refresh",{dashboard:ye});break;case"broadcast":c("broadcast",{dashboard:ye});break;case"backup":l("Backup initiated","info"),P("backup_initiated",{dashboard:ye});break;case"export":l("Export started","info"),P("data_export",{dashboard:ye});break;case"audit":ae(!0);break;default:console.warn("Unknown action:",oe)}}catch(nt){console.error("Quick action failed:",nt),l("Action failed. Please try again.","error")}},[i,l,c,P]),k=({title:oe,icon:ye,color:nt,stats:$t,onNavigate:Te,onQuickAction:Ft,isNew:Br=!1})=>r.jsx("div",{className:`bg-white rounded-2xl shadow-lg border border-gray-200/50 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 ${Br?"ring-2 ring-green-200":""}`,children:r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:`w-14 h-14 bg-gradient-to-r ${nt} rounded-xl flex items-center justify-center text-white text-2xl shadow-lg`,children:ye}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[oe,Br&&r.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-medium",children:"NEW"})]}),r.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Full administrative access"})]})]})}),r.jsx("div",{className:"grid grid-cols-3 gap-4 mb-6",children:$t.map((qr,vn)=>r.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-xl",children:[r.jsx("div",{className:"text-xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:qr.value}),r.jsx("div",{className:"text-xs text-gray-600 font-medium mt-1",children:qr.label})]},vn))}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:Te,className:`flex-1 bg-gradient-to-r ${nt} hover:shadow-lg text-white py-3 px-4 rounded-xl text-sm font-semibold transition-all duration-300 transform hover:scale-105`,children:"Open Dashboard"}),r.jsx("button",{onClick:()=>Ft("refresh"),className:"px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl text-sm font-medium hover:shadow-md transition-all duration-300",title:"Refresh Data",children:"↻"})]})]})});if(s.submissions||s.clients)return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsx(Ee,{size:"lg"})});const W=({userRole:oe="superAdmin"})=>{const ye=Yd[oe]||Yd.superAdmin;return r.jsx("div",{className:"w-64 bg-white border-r border-gray-200 h-full",children:r.jsxs("div",{className:"p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:ye.title}),ye.sections.map((nt,$t)=>r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-3",children:nt.title}),r.jsx("nav",{className:"space-y-1",children:nt.items.map((Te,Ft)=>r.jsxs("button",{onClick:()=>{Te.path.includes("#/")?O.navigateToHash(Te.path.replace("#/","")):O.navigateToPath(Te.path)},className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-700 rounded-lg hover:bg-gray-100 transition-colors text-left",children:[r.jsx("span",{className:"text-gray-400",children:Te.icon==="LayoutDashboard"?"📊":Te.icon==="BarChart3"?"📈":Te.icon==="Users"?"👥":Te.icon==="Building"?"🏢":Te.icon==="Shield"?"🛡️":Te.icon==="Settings"?"⚙️":Te.icon==="FileText"?"📄":Te.icon==="Database"?"💾":"📋"}),Te.label]},Ft))})]},$t))]})})};return r.jsx(Ho,{show:!0,children:r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50 flex",children:[r.jsx(W,{userRole:((re=S==null?void 0:S.role)==null?void 0:re.toLowerCase())||"superAdmin"}),r.jsx("div",{className:"flex-1",children:r.jsx(Wy,{title:"Super Admin Dashboard",subtitle:"Complete system oversight and control",icon:"🔥",showNotifications:!0,showProfile:!0,customActions:[{label:"Refresh All",onClick:()=>it("refresh","all"),variant:"default"},{label:"Backup",onClick:()=>it("backup","system"),variant:"default"},{label:"Settings",onClick:()=>Ne(!0),variant:"default"}]})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg border border-blue-200/50 p-6 hover:shadow-xl transition-all duration-300",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Total Users"}),r.jsx("p",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:fe.totalEmployees})]}),r.jsx("div",{className:"w-14 h-14 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:r.jsx("span",{className:"text-white text-2xl",children:"👥"})})]})}),r.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl shadow-lg border border-green-200/50 p-6 hover:shadow-xl transition-all duration-300",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Active Dashboards"}),r.jsx("p",{className:"text-3xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:(g==null?void 0:g.length)||8})]}),r.jsx("div",{className:"w-14 h-14 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg",children:r.jsx("span",{className:"text-white text-2xl",children:"📊"})})]})}),r.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 rounded-2xl shadow-lg border border-purple-200/50 p-6 hover:shadow-xl transition-all duration-300",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"System Performance"}),r.jsxs("p",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-violet-600 bg-clip-text text-transparent",children:[((_e=fe.averagePerformance)==null?void 0:_e.toFixed(1))||"8.5","/10"]})]}),r.jsx("div",{className:"w-14 h-14 bg-gradient-to-r from-purple-500 to-violet-600 rounded-xl flex items-center justify-center shadow-lg",children:r.jsx("span",{className:"text-white text-2xl",children:"⚡"})})]})}),r.jsx("div",{className:"bg-gradient-to-br from-red-50 to-pink-50 rounded-2xl shadow-lg border border-red-200/50 p-6 hover:shadow-xl transition-all duration-300",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Security Status"}),r.jsx("p",{className:"text-3xl font-bold bg-gradient-to-r from-red-600 to-pink-600 bg-clip-text text-transparent",children:"Secure"})]}),r.jsx("div",{className:"w-14 h-14 bg-gradient-to-r from-red-500 to-pink-600 rounded-xl flex items-center justify-center shadow-lg",children:r.jsx("span",{className:"text-white text-2xl",children:"🔒"})})]})})]}),r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center mb-8",children:[r.jsx("div",{className:"w-1 h-8 bg-gradient-to-b from-blue-500 to-purple-600 rounded-full mr-4"}),r.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:"Core Dashboards"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(k,{title:"Employee Dashboard",icon:"👥",color:"from-blue-500 to-blue-600",stats:[{label:"Total Employees",value:fe.totalEmployees},{label:"Active This Month",value:fe.activeEmployees},{label:"Submissions",value:fe.currentMonthSubmissions}],onNavigate:()=>e("employee"),onQuickAction:oe=>it(oe,"employee")}),r.jsx(k,{title:"Agency Dashboard",icon:"🚀",color:"from-amber-500 to-amber-600",stats:[{label:"Active Users",value:T.agency},{label:"Total Clients",value:fe.totalClients},{label:"Active Clients",value:fe.activeClients}],onNavigate:()=>e("agency"),onQuickAction:oe=>it(oe,"agency")}),r.jsx(k,{title:"Intern Dashboard",icon:"🎓",color:"from-orange-500 to-orange-600",stats:[{label:"Active Interns",value:(o==null?void 0:o.filter(oe=>oe.employee_type==="Intern"&&oe.status==="active").length)||0},{label:"Total Interns",value:C.intern.value,change:C.intern.change},{label:"Performance",value:"85%"}],onNavigate:()=>e("intern"),onQuickAction:oe=>it(oe,"intern")}),r.jsx(k,{title:"Manager Dashboard",icon:"⚡",color:"from-purple-500 to-purple-600",stats:[{label:"Pending Reviews",value:fe.pendingReviews},{label:"Team Performance",value:`${((ot=fe.averagePerformance)==null?void 0:ot.toFixed(1))||"8.5"}/10`},{label:"Data Sync",value:fe.dataSync}],onNavigate:()=>e("manager"),onQuickAction:oe=>it(oe,"manager")})]})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Administrative Dashboards"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.jsx(k,{title:"Sales Dashboard",icon:"💰",color:"from-green-500 to-green-600",stats:[{label:"Revenue",value:C.sales.value,change:C.sales.change},{label:"Active Projects",value:R.activeProjects},{label:"Client Satisfaction",value:`${R.clientSatisfaction}%`}],onNavigate:()=>e("sales"),onQuickAction:oe=>it(oe,"sales")}),r.jsx(k,{title:"HR Dashboard",icon:"👤",color:"from-pink-500 to-pink-600",stats:[{label:"Total Employees",value:C.hr.value,change:C.hr.change},{label:"Active Employees",value:R.totalEmployees},{label:"Pending Reviews",value:fe.pendingReviews}],onNavigate:()=>e("hr"),onQuickAction:oe=>it(oe,"hr")}),r.jsx(k,{title:"Finance Dashboard",icon:"📊",color:"from-indigo-500 to-indigo-600",stats:[{label:"Monthly Revenue",value:C.finance.value,change:C.finance.change},{label:"Total Revenue",value:R.monthlyRevenue},{label:"Profit Margin",value:"47%"}],onNavigate:()=>e("finance"),onQuickAction:oe=>it(oe,"finance")})]})]}),r.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl shadow-lg text-white p-6 mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"📊 Monthly Analytics & Reports"}),r.jsx("p",{className:"text-indigo-100 text-sm",children:"Access comprehensive system-wide monthly reports and analytics"})]}),r.jsx("button",{onClick:()=>e("monthly-reports"),className:"px-4 py-2 bg-white text-indigo-600 rounded-lg hover:bg-indigo-50 transition-colors font-medium",children:"View Reports →"})]})}),r.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl shadow-lg text-white p-6 mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"📋 Form Tracking System"}),r.jsx("p",{className:"text-emerald-100 text-sm",children:"Monitor onboarding forms, submission status, and administrative oversight"})]}),r.jsx("button",{onClick:()=>e("form-tracking"),className:"px-4 py-2 bg-white text-emerald-600 rounded-lg hover:bg-emerald-50 transition-colors font-medium",children:"Track Forms →"})]})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6 mb-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"⚡ Quick Actions"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx("button",{onClick:()=>it("refresh","all"),className:"flex items-center justify-center gap-2 bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors",children:"🔄 Refresh Data"}),r.jsx("button",{onClick:()=>it("broadcast","system"),className:"flex items-center justify-center gap-2 bg-green-500 text-white py-2 px-4 rounded-lg hover:bg-green-600 transition-colors",children:"📢 Broadcast Message"}),r.jsx("button",{onClick:()=>it("backup","system"),className:"flex items-center justify-center gap-2 bg-purple-500 text-white py-2 px-4 rounded-lg hover:bg-purple-600 transition-colors",children:"💾 Backup Data"}),r.jsx("button",{onClick:()=>Ne(!0),className:"flex items-center justify-center gap-2 bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600 transition-colors",children:"🔧 System Maintenance"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:r.jsx(hv,{isManager:!0})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"🏆 Leaderboard"}),r.jsx(YD,{compact:!0})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"🔔 Notifications"}),r.jsx(My,{compact:!0})]})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Specialized Modules"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"🎮 Arcade Management"}),r.jsx(n5,{compact:!0})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"💼 Sales CRM"}),r.jsx(i5,{compact:!0})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"📈 SEO Appraisal"}),r.jsx(f5,{compact:!0})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Controls"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"🔐 Login History & Security"}),r.jsx(Z5,{})]}),r.jsxs("button",{onClick:()=>ve(!0),className:"w-full flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[r.jsxs("span",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-blue-600",children:"👥"}),r.jsx("span",{className:"font-medium",children:"User Management"})]}),r.jsx("span",{className:"text-gray-400",children:"→"})]}),r.jsxs("button",{onClick:()=>E(!0),className:"w-full flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[r.jsxs("span",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-green-600",children:"🔐"}),r.jsx("span",{className:"font-medium",children:"Access Control"})]}),r.jsx("span",{className:"text-gray-400",children:"→"})]}),r.jsxs("button",{onClick:()=>ae(!0),className:"w-full flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[r.jsxs("span",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-purple-600",children:"📋"}),r.jsx("span",{className:"font-medium",children:"Audit Logs"})]}),r.jsx("span",{className:"text-gray-400",children:"→"})]}),r.jsxs("button",{onClick:()=>Ne(!0),className:"w-full flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[r.jsxs("span",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-gray-600",children:"⚙️"}),r.jsx("span",{className:"font-medium",children:"System Settings"})]}),r.jsx("span",{className:"text-gray-400",children:"→"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent System Activity"}),r.jsx("div",{className:"space-y-3",children:(_==null?void 0:_.slice(0,5).map((oe,ye)=>r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:oe.action}),r.jsx("p",{className:"text-xs text-gray-600",children:oe.timestamp})]})]},ye)))||r.jsx("div",{className:"text-center py-8 text-gray-500",children:r.jsx("p",{children:"No recent activity"})})})]})]})]})]})})}class eM{constructor(){this.baseURL="/api/auth"}async makeRequest(t,n={}){const a=`${this.baseURL}${t}`,s={headers:{"Content-Type":"application/json",...n.headers},...n};try{const i=await fetch(a,s),o=await i.json();if(!i.ok)throw new Error(o.message||"Request failed");return o}catch(i){throw console.error(`API request failed: ${t}`,i),i}}async login(t,n){return this.makeRequest("/login",{method:"POST",body:JSON.stringify({phone:t,password:n})})}async setupPassword(t,n){return this.makeRequest("/setup-password",{method:"POST",headers:{Authorization:`Bearer ${n}`},body:JSON.stringify({newPassword:t})})}async verifySession(t){return this.makeRequest("/verify-session",{method:"POST",headers:{Authorization:`Bearer ${t}`}})}async logout(t){return this.makeRequest("/logout",{method:"POST",headers:{Authorization:`Bearer ${t}`}})}async createUserFromEmployee(t){return this.makeRequest("/create-from-employee",{method:"POST",body:JSON.stringify(t)})}async updateProfile(t,n){return this.makeRequest("/update-profile",{method:"PUT",headers:{Authorization:`Bearer ${n}`},body:JSON.stringify(t)})}async changePassword(t,n,a){return this.makeRequest("/change-password",{method:"POST",headers:{Authorization:`Bearer ${a}`},body:JSON.stringify({currentPassword:t,newPassword:n})})}async getProfile(t){return this.makeRequest("/profile",{method:"GET",headers:{Authorization:`Bearer ${t}`}})}async refreshSession(t){return this.makeRequest("/refresh-session",{method:"POST",headers:{Authorization:`Bearer ${t}`}})}}const tM=new eM,rM=["Full-time","Part-time","Remote","Intern","Consultant","Freelancer"],nM=["A+","A-","B+","B-","AB+","AB-","O+","O-"],aM=["ChatGPT","Claude","Gemini","Midjourney","DALL-E","Canva AI","Notion AI","GitHub Copilot","Jasper","Copy.ai","Grammarly","Other"],sM=["English","Hindi","Marathi","Gujarati","Tamil","Telugu","Bengali","Kannada","Malayalam","Punjabi","Other"],iM=["With Parents","With Spouse/Family","Alone","With Roommates","PG/Hostel","Other"],oM=()=>{const{supabase:e}=Ie(),{showToast:t}=Oe(),{showModal:n}=Vl(),[a,s]=p.useState({employeeName:"",department:"",role:[],employeeType:"",languages:[],aiTools:[],profilePictureUrl:"",documentsUrl:"",dateOfBirth:"",joiningDate:"",currentAddress:"",personalPhone:"",parentsAddress:"",parentsPhone:{father:"",mother:""},emailId:"",bloodGroup:"",educationCertificatesUrl:"",distanceFromOffice:"",livingSituation:"",linkedinProfile:"",favoriteFood:"",healthConditions:"",induction:{hrInductionDone:!1,companypoliciesRead:!1,offerLetterResponded:!1,deptTeamLeadInduction:!1,placeAllocated:!1,biometricSetup:!1,deviceDetails:{allocated:!1,simCard:"",macAddress:"",phoneIMEI:""},officialWhatsappAccess:{granted:!1,number:""},myzenInstalled:!1,razorpayOnboarding:{completed:!1,bankAccount:"",upiDetails:""},vehicleForMeetings:!1,roleClarity:!1,toolsAwareness:!1,monthlyGoals:"",quarterlyGoals:"",workAllocated:""},freelancerDetails:{paymentDetails:"",reportingSheetUrl:""},termsAndConditions:{ndaAccepted:!1,employmentBondAccepted:!1,companyGuidelineAccepted:!1,allTermsAccepted:!1}}),[i,o]=p.useState(!1),[l,c]=p.useState(!1),[u,d]=p.useState({searchPhone:"",searchEmail:""}),[m,h]=p.useState(!1),[f,x]=p.useState(null),g=(b,v)=>{try{if(b.includes(".")){const[_,P,O]=b.split(".");s(D=>{const A=D[_]||{};if(O){const T=A[P]||{};return{...D,[_]:{...A,[P]:{...T,[O]:v}}}}else return{...D,[_]:{...A,[P]:v}}})}else s(_=>({..._,[b]:v}))}catch(_){console.error("Error updating form field:",b,_),t("Error updating form field. Please try again.","error")}},w=()=>{try{const b=["employeeName","department","employeeType","dateOfBirth","joiningDate","currentAddress","personalPhone","emailId"];if(!a||typeof a!="object")return t("Form data is corrupted. Please refresh the page.","error"),!1;for(const T of b){const L=a[T];if(!L||typeof L=="string"&&!L.trim()){const C=T.replace(/([A-Z])/g," $1").toLowerCase();return t(`Please fill in ${C}`,"error"),!1}}if(!a.role||!Array.isArray(a.role)||a.role.length===0)return t("Please select at least one role","error"),!1;const v=a.emailId;if(!v||typeof v!="string"||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v.trim()))return t("Please enter a valid email address","error"),!1;const P=a.personalPhone;if(!P||typeof P!="string")return t("Please enter a valid phone number","error"),!1;const O=/^[6-9]\d{9}$/,D=P.replace(/\D/g,"");if(!O.test(D))return t("Please enter a valid 10-digit Indian phone number","error"),!1;const A=a.termsAndConditions;return!A||typeof A!="object"||!A.allTermsAccepted?(t("Please accept all terms and conditions to proceed","error"),!1):!0}catch(b){return console.error("Form validation error:",b),t("Validation error occurred. Please check your input and try again.","error"),!1}},j=async b=>{if(b.preventDefault(),!!w()){o(!0),x(null),h(!1);try{const{data:v,error:_}=await e.from("employees").select("id, name, phone, email").or(`phone.eq.${a.personalPhone},email.eq.${a.emailId}`).single();if(v&&!_){const A=`Employee already exists with ${v.phone===a.personalPhone?"phone number":"email address"}: ${v.name}`;x(A),t(A,"error"),o(!1);return}const P={name:a.employeeName,phone:a.personalPhone,email:a.emailId,department:a.department,role:a.role,employee_type:a.employeeType,date_of_birth:a.dateOfBirth,hire_date:a.joiningDate,status:"Active",profile_image_url:a.profilePictureUrl,address:{current:a.currentAddress,parents:a.parentsAddress},emergency_contact:{father_phone:a.parentsPhone.father,mother_phone:a.parentsPhone.mother},onboarding_data:{languages:a.languages,ai_tools:a.aiTools,blood_group:a.bloodGroup,distance_from_office:a.distanceFromOffice,living_situation:a.livingSituation,linkedin_profile:a.linkedinProfile,favorite_food:a.favoriteFood,health_conditions:a.healthConditions,documents_url:a.documentsUrl,education_certificates_url:a.educationCertificatesUrl,induction_checklist:a.induction,freelancer_details:a.freelancerDetails,terms_and_conditions:a.termsAndConditions},created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:O,error:D}=await e.from("employees").insert([P]).select();if(D){console.error("Error creating employee:",D),x("Failed to create employee record. Please try again."),t("Failed to create employee record","error");return}try{await tM.createUserFromOnboarding({employee_id:O[0].id,name:a.employeeName,email:a.emailId,phone:a.personalPhone,department:a.department,role:a.role,employee_type:a.employeeType})}catch(A){console.warn("User account creation failed:",A)}t("Employee onboarding completed successfully! Redirecting to employee directory...","success"),h(!0),setTimeout(()=>{window.location.href="/employee-directory"},2e3),s({employeeName:"",department:"",role:[],employeeType:"",languages:[],aiTools:[],profilePictureUrl:"",documentsUrl:"",dateOfBirth:"",joiningDate:"",currentAddress:"",personalPhone:"",parentsAddress:"",parentsPhone:{father:"",mother:""},emailId:"",bloodGroup:"",educationCertificatesUrl:"",distanceFromOffice:"",livingSituation:"",linkedinProfile:"",favoriteFood:"",healthConditions:"",induction:{hrInductionDone:!1,companypoliciesRead:!1,offerLetterResponded:!1,deptTeamLeadInduction:!1,placeAllocated:!1,biometricSetup:!1,deviceDetails:{allocated:!1,simCard:"",macAddress:"",phoneIMEI:""},officialWhatsappAccess:{granted:!1,number:""},myzenInstalled:!1,razorpayOnboarding:{completed:!1,bankAccount:"",upiDetails:""},vehicleForMeetings:!1,roleClarity:!1,toolsAwareness:!1,monthlyGoals:"",quarterlyGoals:"",workAllocated:""},freelancerDetails:{paymentDetails:"",reportingSheetUrl:""},termsAndConditions:{ndaAccepted:!1,employmentBondAccepted:!1,companyGuidelineAccepted:!1,allTermsAccepted:!1}})}catch(v){console.error("Submission error:",v);let _="An unexpected error occurred during submission. Please try again.",P=`ERR_${Date.now()}`;v!=null&&v.message&&(v.message.includes("duplicate key")||v.message.includes("already exists")?_="An employee with this phone number or email already exists.":v.message.includes("network")||v.message.includes("fetch")?_="Network error. Please check your connection and try again.":v.message.includes("validation")||v.message.includes("invalid")?_="Please check your input data and try again.":v.message.includes("permission")||v.message.includes("unauthorized")?_="You do not have permission to perform this action.":_=`Submission failed: ${v.message}`),console.error("Detailed error info:",{errorId:P,message:v==null?void 0:v.message,stack:v==null?void 0:v.stack,formData:{employeeName:a==null?void 0:a.employeeName,department:a==null?void 0:a.department,personalPhone:a==null?void 0:a.personalPhone,emailId:a==null?void 0:a.emailId}}),x(`${_} (Error ID: ${P})`),t(_,"error")}finally{o(!1)}}},y=async()=>{var b,v,_,P,O,D,A,T,L,C,F,R,K,M,I,H,Y;if(!u.searchPhone&&!u.searchEmail){t("Please enter phone number or email to search","error");return}try{let z=e.from("employees").select("*");u.searchPhone?z=z.eq("phone",u.searchPhone):u.searchEmail&&(z=z.eq("email",u.searchEmail));const{data:G,error:V}=await z.single();if(V||!G){t("Employee not found","error");return}s({employeeName:G.name||"",department:G.department||"",role:G.role||[],employeeType:G.employee_type||"",languages:((b=G.onboarding_data)==null?void 0:b.languages)||[],aiTools:((v=G.onboarding_data)==null?void 0:v.ai_tools)||[],profilePictureUrl:G.profile_image_url||"",documentsUrl:((_=G.onboarding_data)==null?void 0:_.documents_url)||"",dateOfBirth:G.date_of_birth||"",joiningDate:G.hire_date||"",currentAddress:((P=G.address)==null?void 0:P.current)||"",personalPhone:G.phone||"",parentsAddress:((O=G.address)==null?void 0:O.parents)||"",parentsPhone:{father:((D=G.emergency_contact)==null?void 0:D.father_phone)||"",mother:((A=G.emergency_contact)==null?void 0:A.mother_phone)||""},emailId:G.email||"",bloodGroup:((T=G.onboarding_data)==null?void 0:T.blood_group)||"",educationCertificatesUrl:((L=G.onboarding_data)==null?void 0:L.education_certificates_url)||"",distanceFromOffice:((C=G.onboarding_data)==null?void 0:C.distance_from_office)||"",livingSituation:((F=G.onboarding_data)==null?void 0:F.living_situation)||"",linkedinProfile:((R=G.onboarding_data)==null?void 0:R.linkedin_profile)||"",favoriteFood:((K=G.onboarding_data)==null?void 0:K.favorite_food)||"",healthConditions:((M=G.onboarding_data)==null?void 0:M.health_conditions)||"",induction:((I=G.onboarding_data)==null?void 0:I.induction_checklist)||{hrInductionDone:!1,companypoliciesRead:!1,offerLetterResponded:!1,deptTeamLeadInduction:!1,placeAllocated:!1,biometricSetup:!1,deviceDetails:{allocated:!1,simCard:"",macAddress:"",phoneIMEI:""},officialWhatsappAccess:{granted:!1,number:""},myzenInstalled:!1,razorpayOnboarding:{completed:!1,bankAccount:"",upiDetails:""},vehicleForMeetings:!1,roleClarity:!1,toolsAwareness:!1,monthlyGoals:"",quarterlyGoals:"",workAllocated:""},freelancerDetails:((H=G.onboarding_data)==null?void 0:H.freelancer_details)||{paymentDetails:"",reportingSheetUrl:""},termsAndConditions:((Y=G.onboarding_data)==null?void 0:Y.terms_and_conditions)||{ndaAccepted:!1,employmentBondAccepted:!1,companyGuidelineAccepted:!1,allTermsAccepted:!1}}),t("Employee data loaded successfully","success")}catch(z){console.error("Search error:",z),t("Error searching for employee","error")}},N=()=>{const b=a.employeeType==="Full-time";return a.employeeType==="Freelancer"?r.jsxs(Ae,{title:"Freelancer Setup",children:[r.jsx(de,{label:"Payment Details (Bank Account/UPI)",value:a.freelancerDetails.paymentDetails,onChange:_=>g("freelancerDetails.paymentDetails",_.target.value),placeholder:"Enter payment details"}),r.jsx(de,{label:"Reporting Google Sheet URL",value:a.freelancerDetails.reportingSheetUrl,onChange:_=>g("freelancerDetails.reportingSheetUrl",_.target.value),placeholder:"Enter Google Sheet URL for work reporting"})]}):r.jsx(Ae,{title:"Day 0 Induction Checklist",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",checked:a.induction.hrInductionDone,onChange:_=>g("induction.hrInductionDone",_.target.checked),className:"rounded"}),r.jsx("span",{children:"HR Induction Done"})]}),r.jsxs("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",checked:a.induction.companypoliciesRead,onChange:_=>g("induction.companypoliciesRead",_.target.checked),className:"rounded"}),r.jsx("span",{children:"Company Policies Read"})]}),r.jsxs("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",checked:a.induction.offerLetterResponded,onChange:_=>g("induction.offerLetterResponded",_.target.checked),className:"rounded"}),r.jsx("span",{children:"Offer Letter Responded"})]}),r.jsxs("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",checked:a.induction.deptTeamLeadInduction,onChange:_=>g("induction.deptTeamLeadInduction",_.target.checked),className:"rounded"}),r.jsx("span",{children:"Department Team Lead Induction"})]}),b&&r.jsxs(r.Fragment,{children:[r.jsxs("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",checked:a.induction.placeAllocated,onChange:_=>g("induction.placeAllocated",_.target.checked),className:"rounded"}),r.jsx("span",{children:"Place Allocated"})]}),r.jsxs("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",checked:a.induction.biometricSetup,onChange:_=>g("induction.biometricSetup",_.target.checked),className:"rounded"}),r.jsx("span",{children:"Biometric Login Setup"})]}),r.jsxs("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",checked:a.induction.vehicleForMeetings,onChange:_=>g("induction.vehicleForMeetings",_.target.checked),className:"rounded"}),r.jsx("span",{children:"Vehicle for Client Meetings"})]})]}),r.jsxs("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",checked:a.induction.myzenInstalled,onChange:_=>g("induction.myzenInstalled",_.target.checked),className:"rounded"}),r.jsx("span",{children:"Myzen Installed"})]}),r.jsxs("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",checked:a.induction.roleClarity,onChange:_=>g("induction.roleClarity",_.target.checked),className:"rounded"}),r.jsx("span",{children:"Role Clarity"})]}),r.jsxs("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",checked:a.induction.toolsAwareness,onChange:_=>g("induction.toolsAwareness",_.target.checked),className:"rounded"}),r.jsx("span",{children:"Tools Awareness"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("input",{type:"checkbox",checked:a.induction.deviceDetails.allocated,onChange:_=>g("induction.deviceDetails.allocated",_.target.checked),className:"rounded"}),r.jsx("span",{children:"Device Allocated"})]}),a.induction.deviceDetails.allocated&&r.jsxs("div",{className:"ml-6 space-y-2",children:[r.jsx(de,{label:"SIM Card Number",value:a.induction.deviceDetails.simCard,onChange:_=>g("induction.deviceDetails.simCard",_.target.value),placeholder:"Enter SIM card number"}),r.jsx(de,{label:"MAC Address",value:a.induction.deviceDetails.macAddress,onChange:_=>g("induction.deviceDetails.macAddress",_.target.value),placeholder:"Enter MAC address"}),r.jsx(de,{label:"Phone IMEI",value:a.induction.deviceDetails.phoneIMEI,onChange:_=>g("induction.deviceDetails.phoneIMEI",_.target.value),placeholder:"Enter phone IMEI"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("input",{type:"checkbox",checked:a.induction.officialWhatsappAccess.granted,onChange:_=>g("induction.officialWhatsappAccess.granted",_.target.checked),className:"rounded"}),r.jsx("span",{children:"Official WhatsApp Access"})]}),a.induction.officialWhatsappAccess.granted&&r.jsx("div",{className:"ml-6",children:r.jsx(de,{label:"WhatsApp Number",value:a.induction.officialWhatsappAccess.number,onChange:_=>g("induction.officialWhatsappAccess.number",_.target.value),placeholder:"Enter WhatsApp number"})})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("input",{type:"checkbox",checked:a.induction.razorpayOnboarding.completed,onChange:_=>g("induction.razorpayOnboarding.completed",_.target.checked),className:"rounded"}),r.jsx("span",{children:"Razorpay Onboarding"})]}),a.induction.razorpayOnboarding.completed&&r.jsxs("div",{className:"ml-6 space-y-2",children:[r.jsx(de,{label:"Bank Account Details",value:a.induction.razorpayOnboarding.bankAccount,onChange:_=>g("induction.razorpayOnboarding.bankAccount",_.target.value),placeholder:"Enter bank account details"}),r.jsx(de,{label:"UPI Details",value:a.induction.razorpayOnboarding.upiDetails,onChange:_=>g("induction.razorpayOnboarding.upiDetails",_.target.value),placeholder:"Enter UPI details"})]})]}),r.jsx(Yt,{label:"Monthly Goals",value:a.induction.monthlyGoals,onChange:_=>g("induction.monthlyGoals",_.target.value),placeholder:"Enter monthly goals",rows:3}),r.jsx(Yt,{label:"Quarterly Goals",value:a.induction.quarterlyGoals,onChange:_=>g("induction.quarterlyGoals",_.target.value),placeholder:"Enter quarterly goals",rows:3}),r.jsx(Yt,{label:"Work Allocated",value:a.induction.workAllocated,onChange:_=>g("induction.workAllocated",_.target.value),placeholder:"Enter work allocated",rows:3})]})]})})},S=()=>{const b=a.employeeType==="Full-time";return r.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 p-8 rounded-2xl border border-gray-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-center mb-6",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Terms and Conditions"}),r.jsx("p",{className:"text-gray-600",children:"Please review and accept the following terms"})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 border border-amber-200 rounded-xl p-6 shadow-sm",children:[r.jsxs("div",{className:"flex items-center mb-3",children:[r.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center mr-3",children:r.jsx("svg",{className:"w-4 h-4 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("h3",{className:"text-lg font-semibold text-amber-800",children:"Important Legal Agreement"})]}),r.jsx("p",{className:"text-amber-700 text-sm leading-relaxed",children:"Please read and accept all terms and conditions below. These are legally binding agreements that govern your employment with Branding Pioneers."})]}),b&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h4",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[r.jsx("span",{className:"mr-2",children:"🔒"}),"1. Non-Disclosure Agreement (NDA)"]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:a.termsAndConditions.ndaAccepted,onChange:v=>g("termsAndConditions.ndaAccepted",v.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),r.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"I Accept"})]})]}),r.jsxs("div",{className:"space-y-4 text-sm text-gray-700",children:[r.jsxs("div",{children:[r.jsx("h5",{className:"font-semibold text-gray-800 mb-2",children:"Non-Competition:"}),r.jsx("p",{children:"You agree not to engage in or start any business activities that compete directly with the core services and products of Branding Pioneers during your employment and for a period of one year after your employment ends. This restriction aims to protect the company's strategic interests and proprietary information."})]}),r.jsxs("div",{children:[r.jsx("h5",{className:"font-semibold text-gray-800 mb-2",children:"Confidentiality:"}),r.jsx("p",{children:"You are obligated to protect and not disclose any confidential information acquired during your tenure at the company. This includes, but is not limited to, operational methodologies, client lists, pricing strategies, marketing plans, and any other sensitive information that is not publicly known."})]}),r.jsxs("div",{children:[r.jsx("h5",{className:"font-semibold text-gray-800 mb-2",children:"No Personal Use:"}),r.jsx("p",{children:"Use of company resources, whether physical, digital, or intellectual, is restricted strictly to business-related activities. Personal use of these resources is prohibited to prevent any potential misuse that could harm the company's operational integrity."})]}),r.jsxs("div",{children:[r.jsx("h5",{className:"font-semibold text-gray-800 mb-2",children:"Respectful Conduct:"}),r.jsx("p",{children:"You are expected to uphold and enhance the company's reputation both internally and externally. This includes abstaining from making derogatory comments or actions that could damage the company's standing with clients, partners, or the public."})]})]})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h4",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[r.jsx("span",{className:"mr-2",children:"📋"}),"2. Employment Bond"]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:a.termsAndConditions.employmentBondAccepted,onChange:v=>g("termsAndConditions.employmentBondAccepted",v.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),r.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"I Accept"})]})]}),r.jsxs("div",{className:"space-y-4 text-sm text-gray-700",children:[r.jsx("p",{className:"font-medium text-gray-800",children:"Upon successful completion of your probationary period, or receipt of your official appointment letter, you enter into a one-year employment bond with Branding Pioneers:"}),r.jsxs("div",{children:[r.jsx("h5",{className:"font-semibold text-gray-800 mb-2",children:"Duration and Commitment:"}),r.jsx("p",{children:"This bond signifies your agreement to remain employed with Branding Pioneers for at least twelve months, ensuring your commitment to the company's long-term projects and team stability."})]}),r.jsxs("div",{children:[r.jsx("h5",{className:"font-semibold text-gray-800 mb-2",children:"Consequences of Breaching the Bond:"}),r.jsx("p",{children:"If you decide to terminate your employment before fulfilling the bond period, you will face several penalties. These include the forfeiture of accumulated Retention Bonus Components (RBC), withholding of final salary payments, and retention of employment-related documents. Additionally, details of the breach may be communicated to external job platforms as part of a formal blacklist procedure."})]})]})]})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h4",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[r.jsx("span",{className:"mr-2",children:"📖"}),b?"3. ":"","Compliance with Company Guidebook"]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:a.termsAndConditions.companyGuidelineAccepted,onChange:v=>g("termsAndConditions.companyGuidelineAccepted",v.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),r.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"I Accept"})]})]}),r.jsxs("div",{className:"space-y-4 text-sm text-gray-700",children:[r.jsx("p",{children:"All employees are required to adhere strictly to the guidelines outlined in the Branding Pioneers Company Guidebook:"}),r.jsxs("div",{children:[r.jsx("h5",{className:"font-semibold text-gray-800 mb-2",children:"Access to Policies:"}),r.jsxs("p",{children:["The guidebook, which details all operational, conduct, and employment policies, is available online at ",r.jsx("a",{href:"https://bit.ly/BP-BOOK",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"https://bit.ly/BP-BOOK"}),". You are encouraged to access this link regularly to stay updated on policy changes."]})]}),r.jsxs("div",{children:[r.jsx("h5",{className:"font-semibold text-gray-800 mb-2",children:"Adaptation to Changes:"}),r.jsx("p",{children:"The company reserves the right to amend the guidebook. Changes may involve modifications to existing policies or the introduction of new policies. As an employee, you are expected to comply with these changes as they are officially communicated through company channels."})]})]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h4",{className:"text-lg font-semibold text-blue-800 flex items-center",children:[r.jsx("span",{className:"mr-2",children:"✅"}),"Acknowledgment and Acceptance"]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:a.termsAndConditions.allTermsAccepted,onChange:v=>{const _=v.target.checked;if(_&&!(b?a.termsAndConditions.ndaAccepted&&a.termsAndConditions.employmentBondAccepted&&a.termsAndConditions.companyGuidelineAccepted:a.termsAndConditions.companyGuidelineAccepted)){t("Please accept all individual terms and conditions first","error");return}g("termsAndConditions.allTermsAccepted",_)},className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500",required:!0}),r.jsx("span",{className:"ml-2 text-sm font-medium text-blue-700",children:"I Accept All Terms and Conditions *"})]})]}),r.jsxs("div",{className:"text-sm text-blue-700",children:[r.jsx("p",{className:"font-medium mb-2",children:"By checking this box, you acknowledge that you have:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[r.jsx("li",{children:"Thoroughly reviewed and understood all terms outlined above"}),r.jsx("li",{children:"Agreed to comply with all terms as a condition of your employment"}),r.jsx("li",{children:"Understood that failure to comply may result in disciplinary actions, up to and including termination"}),r.jsx("li",{children:"Accessed and reviewed the Company Guidebook at the provided link"})]})]})]})]})]})};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 py-8",children:r.jsxs("div",{className:"max-w-5xl mx-auto px-4",children:[r.jsxs("div",{className:"text-center mb-10",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),r.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent mb-2",children:"Employee Onboarding"}),r.jsx("p",{className:"text-gray-600 text-lg",children:"Welcome to Branding Pioneers! Let's get you set up."})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:r.jsxs("div",{className:"p-8",children:[m&&r.jsx("div",{className:"mb-8 p-6 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl shadow-sm",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"Welcome to the team! 🎉"}),r.jsx("p",{className:"text-green-700",children:"Your onboarding has been completed successfully. You'll receive further instructions via email."})]})]})}),f&&r.jsx("div",{className:"mb-8 p-6 bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-xl shadow-sm",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-lg font-semibold text-red-800",children:"Submission Error"}),r.jsx("p",{className:"text-red-700",children:f})]})]})}),r.jsx(Ae,{title:"Existing Employee Account Creation",children:r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Search Existing Employee"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(de,{label:"Phone Number",value:u.searchPhone,onChange:b=>d(v=>({...v,searchPhone:b.target.value})),placeholder:"Enter phone number"}),r.jsx(de,{label:"Email Address",value:u.searchEmail,onChange:b=>d(v=>({...v,searchEmail:b.target.value})),placeholder:"Enter email address"})]}),r.jsx("button",{type:"button",onClick:y,className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Search & Load Data"})]})}),r.jsxs("form",{onSubmit:j,className:"space-y-8",children:[r.jsx(Ae,{title:"Basic Information",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(de,{label:"Employee Name *",value:a.employeeName,onChange:b=>g("employeeName",b.target.value),placeholder:"Enter full name",required:!0}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department *"}),r.jsxs("select",{value:a.department,onChange:b=>g("department",b.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[r.jsx("option",{value:"",children:"Select Department"}),xf.map(b=>r.jsx("option",{value:b,children:b},b))]})]}),r.jsx(io,{label:"Role",value:a.role,onChange:b=>g("role",b),options:a.department?Iy[a.department]||[]:[],placeholder:"Select roles"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee Type *"}),r.jsxs("select",{value:a.employeeType,onChange:b=>g("employeeType",b.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[r.jsx("option",{value:"",children:"Select Type"}),rM.map(b=>r.jsx("option",{value:b,children:b},b))]})]}),r.jsx(io,{label:"Languages",value:a.languages,onChange:b=>g("languages",b),options:sM,placeholder:"Select languages"}),r.jsx(io,{label:"AI Tools Known",value:a.aiTools,onChange:b=>g("aiTools",b),options:aM,placeholder:"Select AI tools"})]})}),r.jsx(Ae,{title:"Profile & Documents",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"File Upload Instructions"}),r.jsxs("p",{className:"text-yellow-700 text-sm",children:["Please upload all files to Google Drive and share access with ",r.jsx("strong",{children:"brandingpioneers@gmail.com"}),". Then paste the shareable Google Drive links below."]})]}),r.jsx(de,{label:"Profile Picture (Google Drive Link)",value:a.profilePictureUrl,onChange:b=>g("profilePictureUrl",b.target.value),placeholder:"Paste Google Drive link for profile picture"}),r.jsx(de,{label:"Documents - PAN, AADHAR (Google Drive Link)",value:a.documentsUrl,onChange:b=>g("documentsUrl",b.target.value),placeholder:"Paste Google Drive link for PAN, AADHAR documents"})]})}),r.jsxs(Ae,{title:"Personal Details",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(de,{label:"Date of Birth *",type:"date",value:a.dateOfBirth,onChange:b=>g("dateOfBirth",b.target.value),required:!0}),r.jsx(de,{label:"Joining Date *",type:"date",value:a.joiningDate,onChange:b=>g("joiningDate",b.target.value),required:!0}),r.jsx(de,{label:"Personal Phone Number *",value:a.personalPhone,onChange:b=>g("personalPhone",b.target.value),placeholder:"Enter phone number",required:!0}),r.jsx(de,{label:"Email ID *",type:"email",value:a.emailId,onChange:b=>g("emailId",b.target.value),placeholder:"Enter email address",required:!0}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blood Group"}),r.jsxs("select",{value:a.bloodGroup,onChange:b=>g("bloodGroup",b.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Select Blood Group"}),nM.map(b=>r.jsx("option",{value:b,children:b},b))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Living Situation"}),r.jsxs("select",{value:a.livingSituation,onChange:b=>g("livingSituation",b.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Select Living Situation"}),iM.map(b=>r.jsx("option",{value:b,children:b},b))]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Yt,{label:"Current Address *",value:a.currentAddress,onChange:b=>g("currentAddress",b.target.value),placeholder:"Enter current address",rows:3,required:!0}),r.jsx(Yt,{label:"Parents/Guardians Address (Name and Full Address)",value:a.parentsAddress,onChange:b=>g("parentsAddress",b.target.value),placeholder:"Enter parents/guardians name and full address",rows:3}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(de,{label:"Father's Phone Number",value:a.parentsPhone.father,onChange:b=>g("parentsPhone.father",b.target.value),placeholder:"Enter father's phone number"}),r.jsx(de,{label:"Mother's Phone Number",value:a.parentsPhone.mother,onChange:b=>g("parentsPhone.mother",b.target.value),placeholder:"Enter mother's phone number"})]})]})]}),r.jsx(Ae,{title:"Education & Professional",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx(de,{label:"Education Certificates (Google Drive Link)",value:a.educationCertificatesUrl,onChange:b=>g("educationCertificatesUrl",b.target.value),placeholder:"Paste Google Drive link for education certificates"}),r.jsx(de,{label:"Distance from Office & Living Situation Details",value:a.distanceFromOffice,onChange:b=>g("distanceFromOffice",b.target.value),placeholder:"e.g., 15 km from office, living with parents"}),r.jsx(de,{label:"LinkedIn Profile",value:a.linkedinProfile,onChange:b=>g("linkedinProfile",b.target.value),placeholder:"Enter LinkedIn profile URL"}),r.jsx(de,{label:"Favorite Food",value:a.favoriteFood,onChange:b=>g("favoriteFood",b.target.value),placeholder:"Enter favorite food"}),r.jsx(Yt,{label:"Any Existing Health Conditions",value:a.healthConditions,onChange:b=>g("healthConditions",b.target.value),placeholder:"Enter any existing health conditions or 'None'",rows:3})]})}),a.employeeType&&N(),a.employeeType&&S(),r.jsx("div",{className:"flex justify-center pt-8 pb-4",children:r.jsx("button",{type:"submit",disabled:i,className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-12 py-4 rounded-xl font-semibold text-lg hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transform transition-all duration-200 hover:scale-105 shadow-lg hover:shadow-xl",children:i?r.jsxs("div",{className:"flex items-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting..."]}):r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{children:"Complete Onboarding"}),r.jsx("svg",{className:"ml-2 w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})})]})]})})]})})};class Uo{static async saveOnboardingData(t){var n,a,s,i,o,l,c,u,d,m,h,f,x,g,w,j,y,N,S,b,v,_,P,O,D,A,T,L,C,F,R,K,M,I,H;try{const Y={client_name:t.clientName,industry:t.industry,healthcare_type:t.healthcareType,service_scope:t.serviceScope,selected_web_services:t.selectedWebServices||[],selected_marketing_services:t.selectedMarketingServices||[],primary_email:t.primaryEmail,leads_email:t.leadsEmail,phone_number:t.phoneNumber,locations:t.locations||[],website_url:(n=t.websiteAccess)==null?void 0:n.url,cpanel_username:(a=t.websiteAccess)==null?void 0:a.cpanelUsername,cpanel_password:(s=t.websiteAccess)==null?void 0:s.cpanelPassword,admin_panel_url:(i=t.websiteAccess)==null?void 0:i.adminPanelUrl,admin_username:(o=t.websiteAccess)==null?void 0:o.adminUsername,admin_password:(l=t.websiteAccess)==null?void 0:l.adminPassword,gmb_access_granted:((c=t.googleServices)==null?void 0:c.gmbAccess)||!1,analytics_access_granted:((u=t.googleServices)==null?void 0:u.analyticsAccess)||!1,search_console_access_granted:((d=t.googleServices)==null?void 0:d.searchConsoleAccess)||!1,extra_services:((m=t.seoServices)==null?void 0:m.extraServices)||[],seo_involvement:(h=t.seoServices)==null?void 0:h.involvement,seo_remarks:(f=t.seoServices)==null?void 0:f.remarks,ad_platforms:((x=t.advertising)==null?void 0:x.platforms)||[],ad_budget_per_day:(g=t.advertising)!=null&&g.budgetPerDay?parseFloat(t.advertising.budgetPerDay):null,ad_involvement:(w=t.advertising)==null?void 0:w.involvement,ad_target_locations:((j=t.advertising)==null?void 0:j.targetLocations)||[],ad_remarks:(y=t.advertising)==null?void 0:y.remarks,facebook_access_granted:((N=t.socialMedia)==null?void 0:N.facebookAccess)||!1,linkedin_access_granted:((S=t.socialMedia)==null?void 0:S.linkedinAccess)||!1,youtube_access_granted:((b=t.socialMedia)==null?void 0:b.youtubeAccess)||!1,youtube_involvement:(v=t.socialMedia)==null?void 0:v.youtubeInvolvement,social_media_involvement:(_=t.socialMedia)==null?void 0:_.involvement,biggest_strength:t.biggestStrength,business_identity:t.identity,value_proposition:t.valueProposition,target_age:t.targetAge,target_gender:t.targetGender,target_occupation:t.targetOccupation,top_services:t.topServices||[],customer_learning_points:t.customerLearningPoints||[],customer_questions:t.customerQuestions||[],education_topics:t.educationTopics||[],keywords:t.keywords||[],customer_fears:t.customerFears||[],customer_pain_points:t.customerPainPoints||[],customer_problems:t.customerProblems||[],customer_desires:t.customerDesires||[],review_meeting_date:t.reviewMeetingDate,gstin:(P=t.indianBusinessDetails)==null?void 0:P.gstin,pan_number:(O=t.indianBusinessDetails)==null?void 0:O.panNumber,state:(D=t.indianBusinessDetails)==null?void 0:D.state,city:(A=t.indianBusinessDetails)==null?void 0:A.city,pincode:(T=t.indianBusinessDetails)==null?void 0:T.pincode,business_registration_type:(L=t.indianBusinessDetails)==null?void 0:L.businessRegistrationType,udyam_registration:(C=t.indianBusinessDetails)==null?void 0:C.udyamRegistration,medical_council_registration:(F=t.indianBusinessDetails)==null?void 0:F.medicalCouncilRegistration,clinical_establishment_license:(R=t.indianBusinessDetails)==null?void 0:R.clinicalEstablishmentLicense,drug_license:(K=t.indianBusinessDetails)==null?void 0:K.drugLicense,nabh_jci_accreditation:(M=t.indianBusinessDetails)==null?void 0:M.nabh_jci_accreditation,fssai_license:(I=t.indianBusinessDetails)==null?void 0:I.fssaiLicense,biomedical_waste_authorization:(H=t.indianBusinessDetails)==null?void 0:H.biomedicalWasteAuthorization,submission_status:"submitted",assigned_team:this.determineAssignedTeam(t.serviceScope)},{data:z,error:G}=await se.from("client_onboarding").insert([Y]).select().single();if(G)throw console.error("Error saving onboarding data:",G),new Error(`Failed to save onboarding data: ${G.message}`);return z}catch(Y){throw console.error("Error in saveOnboardingData:",Y),Y}}static async saveOnboardingFiles(t,n,a){try{const s=n.map(l=>({client_onboarding_id:t,file_type:a,file_name:l.name,file_url:l.url,file_size:l.size,mime_type:l.type})),{data:i,error:o}=await se.from("client_onboarding_files").insert(s).select();if(o)throw console.error("Error saving onboarding files:",o),new Error(`Failed to save files: ${o.message}`);return i}catch(s){throw console.error("Error in saveOnboardingFiles:",s),s}}static async getAllOnboardingRecords(t={}){try{let n=se.from("client_onboarding").select(`
          *,
          client_onboarding_files(*),
          client_onboarding_comments(*)
        `).order("created_at",{ascending:!1});t.status&&(n=n.eq("submission_status",t.status)),t.industry&&(n=n.eq("industry",t.industry)),t.serviceScope&&(n=n.eq("service_scope",t.serviceScope)),t.assignedTeam&&(n=n.eq("assigned_team",t.assignedTeam));const{data:a,error:s}=await n;if(s)throw console.error("Error fetching onboarding records:",s),new Error(`Failed to fetch records: ${s.message}`);return a||[]}catch(n){throw console.error("Error in getAllOnboardingRecords:",n),n}}static async getOnboardingRecord(t){try{const{data:n,error:a}=await se.from("client_onboarding").select(`
          *,
          client_onboarding_files(*),
          client_onboarding_comments(*)
        `).eq("id",t).single();if(a)throw console.error("Error fetching onboarding record:",a),new Error(`Failed to fetch record: ${a.message}`);return n}catch(n){throw console.error("Error in getOnboardingRecord:",n),n}}static async updateOnboardingStatus(t,n,a=null){try{const s={submission_status:n};a&&(s.notes=a);const{data:i,error:o}=await se.from("client_onboarding").update(s).eq("id",t).select().single();if(o)throw console.error("Error updating onboarding status:",o),new Error(`Failed to update status: ${o.message}`);return i}catch(s){throw console.error("Error in updateOnboardingStatus:",s),s}}static async addComment(t,n,a,s){try{const{data:i,error:o}=await se.from("client_onboarding_comments").insert([{client_onboarding_id:t,user_name:n,user_role:a,comment:s}]).select().single();if(o)throw console.error("Error adding comment:",o),new Error(`Failed to add comment: ${o.message}`);return i}catch(i){throw console.error("Error in addComment:",i),i}}static async deleteOnboardingRecord(t){try{const{error:n}=await se.from("client_onboarding").delete().eq("id",t);if(n)throw console.error("Error deleting onboarding record:",n),new Error(`Failed to delete record: ${n.message}`);return!0}catch(n){throw console.error("Error in deleteOnboardingRecord:",n),n}}static determineAssignedTeam(t){switch(t){case"web":return"web";case"marketing":return"marketing";case"both":return"both";default:return"both"}}static async getOnboardingStats(){try{const{data:t,error:n}=await se.from("client_onboarding").select("submission_status, service_scope, industry, created_at");if(n)throw console.error("Error fetching onboarding stats:",n),new Error(`Failed to fetch stats: ${n.message}`);const a={total:t.length,byStatus:{},byServiceScope:{},byIndustry:{},recentSubmissions:0},s=new Date;return s.setDate(s.getDate()-7),t.forEach(i=>{a.byStatus[i.submission_status]=(a.byStatus[i.submission_status]||0)+1,a.byServiceScope[i.service_scope]=(a.byServiceScope[i.service_scope]||0)+1,i.industry&&(a.byIndustry[i.industry]=(a.byIndustry[i.industry]||0)+1),new Date(i.created_at)>s&&a.recentSubmissions++}),a}catch(t){throw console.error("Error in getOnboardingStats:",t),t}}}const lM=({onBack:e})=>{const[t,n]=p.useState({formId:Date.now().toString(),lastSaved:null,completionPercentage:0,clientName:"",businessType:"",industry:"healthcare",primaryEmail:"",phoneNumber:"",businessAddress:"",websiteUrl:"",indianBusinessDetails:{gstin:"",panNumber:"",state:"",city:"",pincode:"",businessRegistrationType:"",udyamRegistration:"",fssaiLicense:"",drugLicense:"",medicalCouncilRegistration:"",hospitalRegistration:"",nabh_jci_accreditation:"",ayushLicense:"",clinicalEstablishmentLicense:"",biomedicalWasteAuthorization:"",radiationSafetyLicense:"",pharmacyLicense:"",bloodBankLicense:"",ambulancePermit:"",telemedicineLicense:""},serviceScope:[],specificServices:[],primaryGoals:[],successMetrics:[],timelineExpectations:"",currentMarketingEfforts:"",marketingChallenges:"",previousAgencyExperience:"",websiteCredentials:{adminUrl:"",username:"",password:""},websiteHostingProvider:"",domainProvider:"",logoUrl:"",brandGuidelinesUrl:"",existingMarketingMaterialsUrl:"",competitorAnalysisUrl:"",googleAccess:{seoEmail:"",gmbAccess:!1,analyticsAccess:!1,searchConsoleAccess:!1},previousSeoReport:null,seoInvolvement:"",seoRemarks:"",adsPlatforms:[],adsCredentials:{googleAds:{username:"",password:""},metaAds:{username:"",password:""}},adsInvolvement:"",dailyAdBudget:"",targetLocations:"",adsRemarks:"",socialMediaAccess:{facebook:{username:"",password:""},linkedin:{username:"",password:""},youtube:{username:"",password:""}},socialMediaInvolvement:"",youtubeInvolvement:"",logoFiles:null,biggestStrength:"",identity:"",valueProposition:"",targetAudience:{primaryAudience:"",ageRange:"",gender:"",location:"",incomeLevel:"",healthConditions:[],insuranceTypes:[],decisionMakingProcess:""},idealCustomerProfile:{demographics:"",psychographics:"",painPoints:[],motivations:[],preferredCommunicationChannels:[],buyingBehavior:"",customerJourneyStage:""},topServices:["","","","",""],customerLearningPoints:["","","","",""],customerQuestions:"",educationTopics:["","","","",""],keywords:"",customerFears:["","","","","","","","","",""],customerPainPoints:["","","","","","","","","",""],customerProblems:["","","","","","","","","",""],customerDesires:["","","","","","","","","",""],brandingNeeds:{logoDesign:!1,brandGuidelines:!1,marketingMaterials:!1,websiteDesign:!1,socialMediaGraphics:!1,printMaterials:!1,brandStrategy:!1},brandingRequirements:{brandPersonality:"",brandValues:[],targetBrandPerception:"",competitorBranding:"",brandingTimeline:"",brandingBudgetRange:""},aiAutomationNeeds:{chatbots:!1,emailAutomation:!1,leadScoring:!1,contentGeneration:!1,socialMediaAutomation:!1,appointmentScheduling:!1,customerSegmentation:!1,predictiveAnalytics:!1},aiAutomationRequirements:{currentAutomationLevel:"",currentTools:"",automationGoals:[],dataIntegrationNeeds:"",complianceRequirements:"",automationTimeline:"",automationBudgetRange:"",implementationTimeline:"",technicalComplexity:"",additionalRequirements:""},reviewMeetingDate:"",urgentRequirements:"",additionalNotes:"",businessHours:"",timeZone:"",seasonalVariations:"",peakBusinessPeriods:"",mainCompetitors:["","",""],competitiveAdvantages:"",marketPosition:"",additionalMarketingBudget:"",expectedROI:"",budgetPriorities:[],investmentComfortLevel:"",preferredCommunicationMethod:"",reportingFrequency:"",meetingPreferences:"",currentTechStack:"",integrationNeeds:"",analyticsRequirements:"",brandGuidelines:null,contentTone:"",brandColors:"",brandFonts:"",industryRegulations:"",complianceRequirements:"",dataPrivacyNeeds:"",primaryKPIs:["","","","",""],successDefinition:"",currentPerformanceMetrics:"",internalTeamSize:"",keyStakeholders:["","",""],decisionMakers:"",projectUrgency:"",launchDeadlines:"",milestonePreferences:""}),[a,s]=p.useState(1),[i,o]=p.useState(!1),[l,c]=p.useState({}),[u,d]=p.useState(!1),[m,h]=p.useState(null),[f,x]=p.useState({}),[g,w]=p.useState(!1),[j,y]=p.useState(null),{notify:N}=Oe(),S=[{value:"healthcare",label:"Healthcare",customerTerm:"Patient"},{value:"retail",label:"Retail",customerTerm:"Customer"},{value:"restaurant",label:"Restaurant",customerTerm:"Customer"},{value:"education",label:"Education",customerTerm:"Student"},{value:"real-estate",label:"Real Estate",customerTerm:"Client"},{value:"legal",label:"Legal Services",customerTerm:"Client"},{value:"fitness",label:"Fitness & Wellness",customerTerm:"Member"},{value:"automotive",label:"Automotive",customerTerm:"Customer"},{value:"technology",label:"Technology",customerTerm:"User"},{value:"other",label:"Other",customerTerm:"Customer"}],b=["Doctor/Physician","Clinic","Hospital","Dental Practice","Veterinary Clinic","Pharmacy","Medical Laboratory","Physiotherapy Center","Mental Health Practice","Chiropractic Practice","Optometry/Eye Care","Dermatology Practice","Pediatric Practice","Urgent Care Center","Rehabilitation Center"],v=["Diabetes","Hypertension","Heart Disease","Arthritis","Asthma","Depression/Anxiety","Chronic Pain","Obesity","Cancer","Allergies","Sleep Disorders","Digestive Issues","Skin Conditions","Vision Problems","Hearing Issues","Pregnancy/Maternity","Pediatric Conditions","Mental Health","Preventive Care","General Wellness"],_=["Medicare","Medicaid","Private Insurance","Blue Cross Blue Shield","Aetna","Cigna","UnitedHealthcare","Humana","Kaiser Permanente","Self-Pay/Cash","HSA/FSA","Workers Compensation","Auto Insurance","No Insurance","Multiple Insurance Types"],P=["Patients (General)","Elderly Patients (65+)","Pediatric Patients","Chronic Care Patients","Emergency Care Patients","Preventive Care Patients","Healthcare Providers","Medical Staff","Insurance Companies","Healthcare Administrators","Caregivers/Family Members","Healthcare Students","Medical Researchers"],O=["Professionals (Doctors, Lawyers, Engineers)","Business Owners/Entrepreneurs","Corporate Employees","Students","Homemakers","Retirees/Senior Citizens","Government Employees","Teachers/Educators","Healthcare Workers","IT Professionals","Sales Professionals","Freelancers/Consultants","Blue Collar Workers","Artists/Creatives","Mixed/All Occupations","Other"],D=["Under $1,000/month","$1,000 - $2,500/month","$2,500 - $5,000/month","$5,000 - $10,000/month","$10,000 - $25,000/month","$25,000+ /month","Project-based pricing","To be discussed"],A=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Andaman and Nicobar Islands","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Delhi","Jammu and Kashmir","Ladakh","Lakshadweep","Puducherry"],T=["Sole Proprietorship","Partnership Firm","Limited Liability Partnership (LLP)","Private Limited Company","Public Limited Company","One Person Company (OPC)","Section 8 Company (Non-Profit)","Trust","Society","Cooperative Society","Hindu Undivided Family (HUF)","Unregistered Business"],L=["Mumbai","Delhi","Bangalore","Hyderabad","Ahmedabad","Chennai","Kolkata","Surat","Pune","Jaipur","Lucknow","Kanpur","Nagpur","Indore","Thane","Bhopal","Visakhapatnam","Pimpri-Chinchwad","Patna","Vadodara","Ghaziabad","Ludhiana","Agra","Nashik","Faridabad","Meerut","Rajkot","Kalyan-Dombivli","Vasai-Virar","Varanasi","Srinagar","Aurangabad","Dhanbad","Amritsar","Navi Mumbai","Allahabad","Ranchi","Howrah","Coimbatore","Jabalpur","Gwalior","Vijayawada","Jodhpur","Madurai","Raipur","Kota","Guwahati","Chandigarh","Solapur","Hubli-Dharwad","Bareilly","Moradabad","Mysore","Gurgaon","Aligarh","Jalandhar","Tiruchirappalli","Bhubaneswar","Salem","Mira-Bhayandar","Warangal","Thiruvananthapuram","Guntur","Bhiwandi","Saharanpur","Gorakhpur","Bikaner","Amravati","Noida","Jamshedpur","Bhilai","Cuttack","Firozabad","Kochi","Nellore","Bhavnagar","Dehradun","Durgapur","Asansol","Rourkela","Nanded","Kolhapur","Ajmer","Akola","Gulbarga","Jamnagar","Ujjain","Loni","Siliguri","Jhansi","Ulhasnagar","Jammu","Sangli-Miraj & Kupwad","Mangalore","Erode","Belgaum","Ambattur","Tirunelveli","Malegaon","Gaya","Jalgaon","Udaipur","Maheshtala"],C=()=>{const k=S.find(W=>W.value===t.industry);return k?k.customerTerm:"Customer"},F=async()=>{if(!g){w(!0);try{const k={...t,lastSaved:new Date().toISOString(),completionPercentage:R()};localStorage.setItem(`onboarding_form_${t.formId}`,JSON.stringify(k)),y(new Date)}catch(k){console.error("Auto-save failed:",k)}finally{w(!1)}}},R=()=>{const k=["clientName","primaryEmail","phoneNumber","industry","businessType","targetAudience.primaryAudience","targetAudience.location","targetAudience.decisionMakingProcess","idealCustomerProfile.painPoints","idealCustomerProfile.motivations","idealCustomerProfile.preferredCommunicationChannels","brandingDesign.brandPersonality","brandingDesign.brandValues","brandingDesign.designPreferences"];let W=0;return k.forEach(re=>{const _e=re.includes(".")?re.split(".").reduce((ot,oe)=>ot==null?void 0:ot[oe],t):t[re];(Array.isArray(_e)?_e.length>0:_e)&&W++}),Math.round(W/k.length*100)},K=()=>{var re,_e,ot,oe,ye,nt,$t,Te,Ft,Br,qr,vn,Wa,Ha,Ka,lt,zr,Rd,Ld,$d,Fd,Bd,qd,zd;const k={};return(re=t.clientName)!=null&&re.trim()||(k.clientName="Client name is required"),(_e=t.primaryEmail)!=null&&_e.trim()||(k.primaryEmail="Primary email is required"),(ot=t.phoneNumber)!=null&&ot.trim()||(k.phoneNumber="Phone number is required"),t.industry||(k.industry="Industry selection is required"),(oe=t.businessType)!=null&&oe.trim()||(k.businessType="Business type is required"),(nt=(ye=t.targetAudience)==null?void 0:ye.primaryAudience)!=null&&nt.trim()||(k["targetAudience.primaryAudience"]="Primary audience is required"),(Te=($t=t.targetAudience)==null?void 0:$t.location)!=null&&Te.trim()||(k["targetAudience.location"]="Target location is required"),(Br=(Ft=t.targetAudience)==null?void 0:Ft.decisionMakingProcess)!=null&&Br.trim()||(k["targetAudience.decisionMakingProcess"]="Decision making process is required"),(vn=(qr=t.idealCustomerProfile)==null?void 0:qr.painPoints)!=null&&vn.trim()||(k["idealCustomerProfile.painPoints"]="Pain points and challenges are required"),(Ha=(Wa=t.idealCustomerProfile)==null?void 0:Wa.motivations)!=null&&Ha.trim()||(k["idealCustomerProfile.motivations"]="Motivations and goals are required"),(lt=(Ka=t.idealCustomerProfile)==null?void 0:Ka.preferredCommunicationChannels)!=null&&lt.length||(k["idealCustomerProfile.preferredCommunicationChannels"]="At least one communication channel is required"),(Rd=(zr=t.brandingDesign)==null?void 0:zr.brandPersonality)!=null&&Rd.trim()||(k["brandingDesign.brandPersonality"]="Brand personality is required"),($d=(Ld=t.brandingDesign)==null?void 0:Ld.brandValues)!=null&&$d.length||(k["brandingDesign.brandValues"]="At least one brand value is required"),(Bd=(Fd=t.brandingDesign)==null?void 0:Fd.designPreferences)!=null&&Bd.length||(k["brandingDesign.designPreferences"]="At least one design preference is required"),Object.values(t.aiAutomationNeeds||{}).some(Boolean)&&((zd=(qd=t.aiAutomationRequirements)==null?void 0:qd.automationGoals)!=null&&zd.length||(k["aiAutomationRequirements.automationGoals"]="Automation goals are required for AI services")),x(k),Object.keys(k).length===0},M=(k,W)=>{if(k.includes(".")){const[re,_e]=k.split(".");n(ot=>({...ot,[re]:{...ot[re],[_e]:W}}))}else n(re=>({...re,[k]:W}))},I=(k,W,re)=>{n(_e=>({..._e,[k]:{..._e[k],[W]:re}}))},H=(k,W,re)=>{n(_e=>({..._e,[k]:_e[k].map((ot,oe)=>oe===W?re:ot)}))},Y=k=>{const W={};switch(k){case 1:t.clientName||(W.clientName="Client name is required"),t.industry||(W.industry="Industry is required");break;case 2:t.primaryEmail||(W.primaryEmail="Primary email is required"),t.phoneNumber||(W.phoneNumber="Phone number is required");break;case 13:t.targetAudience.primaryAudience||(W.primaryAudience="Primary target audience is required"),t.idealCustomerProfile.painPoints||(W.painPoints="Pain points and challenges are required");break;case 14:t.brandingDesign.brandPersonality||(W.brandPersonality="Brand personality is required");break}return c(W),Object.keys(W).length===0};p.useEffect(()=>{const k=setInterval(()=>{(t.clientName||t.primaryEmail)&&F()},3e4);return()=>clearInterval(k)},[t]),p.useEffect(()=>{const k=localStorage.getItem(`onboarding_form_${t.formId}`);if(k)try{const W=JSON.parse(k);n(W),y(new Date(W.lastSaved)),N("Form data restored from previous session","info")}catch(W){console.error("Failed to restore form data:",W)}},[]),p.useEffect(()=>{const k=setTimeout(()=>{(t.clientName||t.primaryEmail)&&F()},2e3);return()=>clearTimeout(k)},[t]);const z=async()=>{if(Y(a)){o(!0),h(null);try{const k=K();if(Object.keys(k).length>0){x(k),h("Please fill in all required fields before submitting."),N({title:"Validation Error",message:"Please fill in all required fields before submitting.",type:"error"});return}N({title:"Submitting Form",message:"Please wait while we save your information...",type:"info"});const W=await Uo.saveOnboardingData(t);if(!W||!W.id)throw new Error("Failed to save client onboarding data - no record returned");t.logoFiles&&t.logoFiles.length>0&&await Uo.saveOnboardingFiles(W.id,t.logoFiles,"logo"),t.previousSeoReport&&await Uo.saveOnboardingFiles(W.id,[t.previousSeoReport],"seo_report"),d(!0),N({title:"Form Submitted Successfully!",message:`Client onboarding for ${t.clientName} has been saved. You can view it in the client directory.`,type:"success"}),localStorage.removeItem(`onboarding_form_${t.formId}`),setTimeout(()=>{e?e():window.location.href="/client-directory"},2e3)}catch(k){console.error("Error submitting onboarding form:",k);const W=k.message||"Failed to submit form. Please try again.";h(W),N({title:"Submission Failed",message:W,type:"error"})}finally{o(!1)}}},G=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Social Media & Content Management"}),r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Social Media Access"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Facebook Access"}),r.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Please provide admin access to: ",r.jsx("strong",{children:"https://www.facebook.com/arush.thapar"})," (Arush.thapar@yahoo.com)"]}),r.jsxs("p",{className:"text-sm text-blue-600",children:["Tutorials:",r.jsx("a",{href:"https://youtu.be/d0qfd15Pdlc?t=126",target:"_blank",rel:"noopener noreferrer",className:"underline ml-1",children:"Desktop"})," |",r.jsx("a",{href:"https://youtu.be/d0qfd15Pdlc?t=243",target:"_blank",rel:"noopener noreferrer",className:"underline ml-1",children:"Mobile"})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"LinkedIn Access"}),r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:t.industry==="healthcare"?"For doctors: LinkedIn profile login / For hospitals: We will send connection request":"LinkedIn profile access required"}),r.jsxs("p",{className:"text-sm text-blue-600",children:["Tutorial: ",r.jsx("a",{href:"https://youtu.be/yjvdwyjg25w?t=8",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"How to give LinkedIn access"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Social Media Involvement"}),r.jsxs("select",{value:t.socialMediaInvolvement,onChange:k=>M("socialMediaInvolvement",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select your preferred involvement level"}),r.jsx("option",{value:"full-management",children:"Full Management - Create and post everything"}),r.jsx("option",{value:"content-approval",children:"Content Approval - Review before posting"}),r.jsx("option",{value:"collaborative",children:"Collaborative - Work together on content"}),r.jsx("option",{value:"content-provider",children:"Content Provider - I provide, you optimize and post"})]})]})]}),r.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"YouTube Management"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Please provide access to our video team emails:"}),r.jsxs("ul",{className:"text-sm text-gray-600 mb-2",children:[r.jsx("li",{children:"• ytbpworks@gmail.com"}),r.jsx("li",{children:"• brandingpioneers@gmail.com"})]}),r.jsxs("p",{className:"text-sm text-blue-600",children:["Tutorial: ",r.jsx("a",{href:"https://youtu.be/iw1m3FaY-g4?t=46",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"How to give YouTube access"})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"YouTube Involvement"}),r.jsxs("select",{value:t.youtubeInvolvement,onChange:k=>M("youtubeInvolvement",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select your preferred involvement level"}),r.jsx("option",{value:"full-production",children:"Full Production - Complete video creation and channel management"}),r.jsx("option",{value:"editing-only",children:"Editing Only - You provide footage, we edit and upload"}),r.jsx("option",{value:"guidance",children:"Guidance & Strategy - Consulting on content strategy and optimization"}),r.jsx("option",{value:"channel-setup",children:"Channel Setup - Initial setup and branding only"})]})]})]}),r.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Current Logo & Branding"}),r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Current Logo Files"}),r.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Upload your current logo in any format (PNG, JPG, SVG, AI, EPS, PDF)"}),r.jsx("input",{type:"file",multiple:!0,accept:".png,.jpg,.jpeg,.svg,.ai,.eps,.pdf",onChange:k=>M("logoFiles",k.target.files),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),V=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Business Understanding & Target Audience"}),r.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Business Identity"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"What is your biggest strength?"}),r.jsx("textarea",{value:t.biggestStrength,onChange:k=>M("biggestStrength",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Highlight the specialty or skill you have the most experience/skill in that stands out from your other services"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IDENTITY: Who are you?"}),r.jsx("textarea",{value:t.identity,onChange:k=>M("identity",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Describe your business identity and what you represent"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["VALUE PROPOSITION: What's the UVP for your ",C(),"?"]}),r.jsx("textarea",{value:t.valueProposition,onChange:k=>M("valueProposition",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:`Why will the ${C().toLowerCase()} choose you and not the next 10 competitors in your city?`})]})]})]}),r.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Target Audience"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Age of your ",C().toLowerCase(),"s"]}),r.jsxs("select",{value:t.targetAge,onChange:k=>M("targetAge",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select age range"}),r.jsx("option",{value:"18-25",children:"18-25 years"}),r.jsx("option",{value:"26-35",children:"26-35 years"}),r.jsx("option",{value:"36-45",children:"36-45 years"}),r.jsx("option",{value:"46-55",children:"46-55 years"}),r.jsx("option",{value:"56-65",children:"56-65 years"}),r.jsx("option",{value:"65+",children:"65+ years"}),r.jsx("option",{value:"all-ages",children:"All ages"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Gender of your ",C().toLowerCase(),"s"]}),r.jsxs("select",{value:t.targetGender,onChange:k=>M("targetGender",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select gender"}),r.jsx("option",{value:"male",children:"Male"}),r.jsx("option",{value:"female",children:"Female"}),r.jsx("option",{value:"both",children:"Both"}),r.jsx("option",{value:"other",children:"Other"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Occupation of your ",C().toLowerCase(),"s"]}),r.jsxs("select",{value:t.targetOccupation,onChange:k=>M("targetOccupation",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select occupation"}),O.map(k=>r.jsx("option",{value:k,children:k},k))]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Income Level of your ",C().toLowerCase(),"s"]}),r.jsxs("select",{value:t.targetIncome,onChange:k=>M("targetIncome",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select income level"}),r.jsx("option",{value:"Under $25,000",children:"Under $25,000"}),r.jsx("option",{value:"$25,000 - $50,000",children:"$25,000 - $50,000"}),r.jsx("option",{value:"$50,000 - $75,000",children:"$50,000 - $75,000"}),r.jsx("option",{value:"$75,000 - $100,000",children:"$75,000 - $100,000"}),r.jsx("option",{value:"$100,000 - $150,000",children:"$100,000 - $150,000"}),r.jsx("option",{value:"Over $150,000",children:"Over $150,000"}),r.jsx("option",{value:"Varies significantly",children:"Varies significantly"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Primary Location of your ",C().toLowerCase(),"s"]}),r.jsx("input",{type:"text",value:t.targetLocation,onChange:k=>M("targetLocation",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Local, National, International, Specific cities/states"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Customer Acquisition Cost (if known)"}),r.jsx("input",{type:"text",value:t.customerAcquisitionCost,onChange:k=>M("customerAcquisitionCost",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., $50, Unknown, Varies by channel"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Average Order Value"}),r.jsx("input",{type:"text",value:t.averageOrderValue,onChange:k=>M("averageOrderValue",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., $100, $500-$1000, Varies by service"})]})]})]}),r.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Services & Content Strategy"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Top 5 ",t.industry==="healthcare"?"Medical Services/Treatments":"Services"]}),t.topServices.map((k,W)=>r.jsx("input",{type:"text",value:k,onChange:re=>H("topServices",W,re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mb-2",placeholder:t.industry==="healthcare"?`Medical service/treatment ${W+1} (e.g., General Checkups, Dental Cleanings, Physical Therapy)`:`Service ${W+1}`},W))]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["What would your target ",C().toLowerCase()," love to learn about your product/service?"]}),t.customerLearningPoints.map((k,W)=>r.jsx("input",{type:"text",value:k,onChange:re=>H("customerLearningPoints",W,re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mb-2",placeholder:`Learning point ${W+1}`},W))]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["What questions about your service do your ",C().toLowerCase(),"s have before they want to buy?"]}),r.jsx("textarea",{value:t.customerQuestions,onChange:k=>M("customerQuestions",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"List common questions your customers ask"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Top 5 ",t.industry==="healthcare"?"Health Education Topics":"topics about your domain"," you would love to educate your ",C().toLowerCase(),"s on"]}),t.educationTopics.map((k,W)=>r.jsx("input",{type:"text",value:k,onChange:re=>H("educationTopics",W,re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mb-2",placeholder:t.industry==="healthcare"?`Health topic ${W+1} (e.g., Preventive Care, Nutrition, Exercise, Mental Health)`:`Education topic ${W+1}`},W))]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Top 15 keywords that come to your mind when you think of your ",t.industry==="healthcare"?"medical practice/services":"product"]}),r.jsx("textarea",{value:t.keywords,onChange:k=>M("keywords",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"4",placeholder:t.industry==="healthcare"?"Enter healthcare keywords separated by commas (e.g., family medicine, preventive care, patient wellness, health screening)":"Enter keywords separated by commas"})]})]})]})]}),Z=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Business Operations & Market Analysis"}),r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Business Operations"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Hours"}),r.jsx("input",{type:"text",value:t.businessHours,onChange:k=>M("businessHours",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Mon-Fri 9AM-6PM"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Zone"}),r.jsxs("select",{value:t.timeZone,onChange:k=>M("timeZone",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select time zone"}),r.jsx("option",{value:"EST",children:"Eastern (EST)"}),r.jsx("option",{value:"CST",children:"Central (CST)"}),r.jsx("option",{value:"MST",children:"Mountain (MST)"}),r.jsx("option",{value:"PST",children:"Pacific (PST)"}),r.jsx("option",{value:"GMT",children:"GMT"}),r.jsx("option",{value:"other",children:"Other"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seasonal Variations"}),r.jsx("textarea",{value:t.seasonalVariations,onChange:k=>M("seasonalVariations",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:"How does your business vary by season?"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Peak Business Periods"}),r.jsx("textarea",{value:t.peakBusinessPeriods,onChange:k=>M("peakBusinessPeriods",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:"When is your business busiest?"})]})]})]}),r.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Competitive Analysis"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Main Competitors (Top 3)"}),t.mainCompetitors.map((k,W)=>r.jsx("input",{type:"text",value:k,onChange:re=>H("mainCompetitors",W,re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mb-2",placeholder:`Competitor ${W+1}`},W))]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Competitive Advantages"}),r.jsx("textarea",{value:t.competitiveAdvantages,onChange:k=>M("competitiveAdvantages",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"What makes you different from competitors?"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Market Position"}),r.jsxs("select",{value:t.marketPosition,onChange:k=>M("marketPosition",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select market position"}),r.jsx("option",{value:"premium",children:"Premium/Luxury"}),r.jsx("option",{value:"mid-market",children:"Mid-Market"}),r.jsx("option",{value:"budget",children:"Budget/Value"}),r.jsx("option",{value:"niche",children:"Niche Specialist"}),r.jsx("option",{value:"market-leader",children:"Market Leader"}),r.jsx("option",{value:"challenger",children:"Challenger"})]})]})]})]})]}),ue=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:[C()," Psychology & Follow-up"]}),r.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:[C()," Psychology"]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Fears of ",C().toLowerCase(),"s before they take your service"]}),r.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Mention 5-10 points highlighting the fears your ",C().toLowerCase()," will experience before taking your service"]}),t.customerFears.map((k,W)=>r.jsx("input",{type:"text",value:k,onChange:re=>H("customerFears",W,re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mb-2",placeholder:`Fear ${W+1}`},W))]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Pain points of ",C().toLowerCase(),"s"]}),r.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Mention 5-10 points highlighting the pain points your ",C().toLowerCase()," experiences before taking your service"]}),t.customerPainPoints.map((k,W)=>r.jsx("input",{type:"text",value:k,onChange:re=>H("customerPainPoints",W,re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mb-2",placeholder:`Pain point ${W+1}`},W))]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Problems of ",C().toLowerCase(),"s before they take your service"]}),r.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Mention 5-10 points highlighting the problems your ",C().toLowerCase()," experiences before taking your service"]}),t.customerProblems.map((k,W)=>r.jsx("input",{type:"text",value:k,onChange:re=>H("customerProblems",W,re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mb-2",placeholder:`Problem ${W+1}`},W))]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Needs and desires of your ",C().toLowerCase(),"s after your service"]}),r.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Mention 5-10 points highlighting the emotions your ",C().toLowerCase()," will experience after taking your service"]}),t.customerDesires.map((k,W)=>r.jsx("input",{type:"text",value:k,onChange:re=>H("customerDesires",W,re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mb-2",placeholder:`Desire/Need ${W+1}`},W))]})]})]}),r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Follow-up & Next Steps"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Review Meeting Date"}),r.jsx("input",{type:"date",value:t.reviewMeetingDate,onChange:k=>M("reviewMeetingDate",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:new Date().toISOString().split("T")[0]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Please select your preferred date for the review meeting"})]})]})]}),E=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Budget & Communication Preferences"}),r.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Budget Allocation & Investment Priorities"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Marketing Budget Allocation (beyond our services)"}),r.jsx("textarea",{value:t.additionalMarketingBudget,onChange:k=>M("additionalMarketingBudget",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:"Do you have additional budget for paid advertising, tools, or other marketing expenses? Please specify amounts and priorities."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Investment Priorities"}),r.jsx("div",{className:"space-y-2",children:["Paid Advertising (Google Ads, Meta Ads)","Content Creation & Photography","Marketing Tools & Software","Website Enhancements","SEO & Content Marketing","Social Media Management","Email Marketing Automation","Analytics & Tracking Tools"].map(k=>r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:t.budgetPriorities.includes(k),onChange:W=>{W.target.checked?M("budgetPriorities",[...t.budgetPriorities,k]):M("budgetPriorities",t.budgetPriorities.filter(re=>re!==k))},className:"mr-2"}),r.jsx("span",{className:"text-sm text-gray-700",children:k})]},k))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected ROI Timeline"}),r.jsxs("select",{value:t.expectedROI,onChange:k=>M("expectedROI",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select realistic timeline for seeing results"}),r.jsx("option",{value:"1-3-months",children:"1-3 months (Quick wins & initial improvements)"}),r.jsx("option",{value:"3-6-months",children:"3-6 months (Significant growth & optimization)"}),r.jsx("option",{value:"6-12-months",children:"6-12 months (Long-term strategy & market positioning)"}),r.jsx("option",{value:"12-plus-months",children:"12+ months (Brand building & market dominance)"})]})]})]})]}),r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Communication Preferences"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Communication Method"}),r.jsxs("select",{value:t.preferredCommunicationMethod,onChange:k=>M("preferredCommunicationMethod",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select method"}),r.jsx("option",{value:"email",children:"Email"}),r.jsx("option",{value:"phone",children:"Phone"}),r.jsx("option",{value:"video-call",children:"Video Call"}),r.jsx("option",{value:"slack",children:"Slack"}),r.jsx("option",{value:"teams",children:"Microsoft Teams"}),r.jsx("option",{value:"in-person",children:"In-Person"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reporting Frequency"}),r.jsxs("select",{value:t.reportingFrequency,onChange:k=>M("reportingFrequency",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select frequency"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"bi-weekly",children:"Bi-weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"quarterly",children:"Quarterly"})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meeting Preferences"}),r.jsx("textarea",{value:t.meetingPreferences,onChange:k=>M("meetingPreferences",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:"Best times, frequency, format preferences"})]})]})]})]}),B=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Technical Requirements & Success Metrics"}),r.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Technical Requirements"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Tech Stack"}),r.jsx("textarea",{value:t.currentTechStack,onChange:k=>M("currentTechStack",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:"CMS, CRM, email platforms, analytics tools, etc."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Integration Needs"}),r.jsx("textarea",{value:t.integrationNeeds,onChange:k=>M("integrationNeeds",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:"Systems that need to connect or integrate"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Analytics Requirements"}),r.jsx("textarea",{value:t.analyticsRequirements,onChange:k=>M("analyticsRequirements",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:"Tracking, reporting, and analytics needs"})]})]})]}),r.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Success Metrics & KPIs"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary KPIs (Top 5)"}),t.primaryKPIs.map((k,W)=>r.jsx("input",{type:"text",value:k,onChange:re=>H("primaryKPIs",W,re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mb-2",placeholder:`KPI ${W+1} (e.g., Lead generation, Revenue growth)`},W))]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"How do you define success?"}),r.jsx("textarea",{value:t.successDefinition,onChange:k=>M("successDefinition",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"What would make this project a success?"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Performance Metrics"}),r.jsx("textarea",{value:t.currentPerformanceMetrics,onChange:k=>M("currentPerformanceMetrics",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Current website traffic, conversion rates, leads, etc."})]})]})]})]}),U=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Team Structure & Project Timeline"}),r.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Team & Resources"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Internal Team Size"}),r.jsxs("select",{value:t.internalTeamSize,onChange:k=>M("internalTeamSize",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select team size"}),r.jsx("option",{value:"1-5",children:"1-5 people"}),r.jsx("option",{value:"6-10",children:"6-10 people"}),r.jsx("option",{value:"11-25",children:"11-25 people"}),r.jsx("option",{value:"26-50",children:"26-50 people"}),r.jsx("option",{value:"50-plus",children:"50+ people"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Key Stakeholders"}),t.keyStakeholders.map((k,W)=>r.jsx("input",{type:"text",value:k,onChange:re=>H("keyStakeholders",W,re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mb-2",placeholder:`Stakeholder ${W+1} (Name & Role)`},W))]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Decision Makers"}),r.jsx("textarea",{value:t.decisionMakers,onChange:k=>M("decisionMakers",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:"Who makes final decisions on this project?"})]})]})]}),r.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Project Timeline"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Urgency"}),r.jsxs("select",{value:t.projectUrgency,onChange:k=>M("projectUrgency",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select urgency"}),r.jsx("option",{value:"asap",children:"ASAP (Rush)"}),r.jsx("option",{value:"1-month",children:"Within 1 month"}),r.jsx("option",{value:"2-3-months",children:"2-3 months"}),r.jsx("option",{value:"3-6-months",children:"3-6 months"}),r.jsx("option",{value:"flexible",children:"Flexible timeline"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Launch Deadlines"}),r.jsx("textarea",{value:t.launchDeadlines,onChange:k=>M("launchDeadlines",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:"Any specific launch dates or deadlines?"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Milestone Preferences"}),r.jsx("textarea",{value:t.milestonePreferences,onChange:k=>M("milestonePreferences",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:"How would you like to track progress?"})]})]})]})]}),X=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Target Audience & Ideal Customer Profile"}),r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Target Audience Analysis"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Primary Target Audience",le()]}),r.jsx("textarea",{value:t.targetAudience.primaryAudience,onChange:k=>I("targetAudience","primaryAudience",k.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${f.primaryAudience?"border-red-500":"border-gray-300"}`,rows:"3",placeholder:"Describe your primary target audience (demographics, psychographics, behaviors)"}),Ne("primaryAudience")]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Geographic Focus"}),r.jsx("input",{type:"text",value:t.targetAudience.geographicFocus,onChange:k=>I("targetAudience","geographicFocus",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Local, regional, national, or international focus"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Age Range"}),r.jsx("input",{type:"text",value:t.targetAudience.ageRange,onChange:k=>I("targetAudience","ageRange",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 25-45, 35-65"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Income Level"}),r.jsxs("select",{value:t.targetAudience.incomeLevel,onChange:k=>I("targetAudience","incomeLevel",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select income level"}),r.jsx("option",{value:"low",children:"Low Income ($0-$35k)"}),r.jsx("option",{value:"middle-low",children:"Lower Middle ($35k-$50k)"}),r.jsx("option",{value:"middle",children:"Middle Income ($50k-$100k)"}),r.jsx("option",{value:"upper-middle",children:"Upper Middle ($100k-$200k)"}),r.jsx("option",{value:"high",children:"High Income ($200k+)"}),r.jsx("option",{value:"mixed",children:"Mixed Income Levels"})]})]}),t.industry==="healthcare"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Primary ",C()," Type"]}),r.jsxs("select",{value:t.targetAudience.primaryAudience,onChange:k=>I("targetAudience","primaryAudience",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsxs("option",{value:"",children:["Select primary ",C().toLowerCase()," type"]}),P.map(k=>r.jsx("option",{value:k,children:k},k))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Common Health Conditions/Specialties"}),r.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-40 overflow-y-auto border border-gray-200 rounded-md p-2",children:v.map(k=>r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:t.targetAudience.healthConditions.includes(k),onChange:W=>{const re=t.targetAudience.healthConditions;W.target.checked?I("targetAudience","healthConditions",[...re,k]):I("targetAudience","healthConditions",re.filter(_e=>_e!==k))},className:"mr-2"}),r.jsx("span",{className:"text-sm text-gray-700",children:k})]},k))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Insurance Types Accepted"}),r.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-32 overflow-y-auto border border-gray-200 rounded-md p-2",children:_.map(k=>r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:t.targetAudience.insuranceTypes.includes(k),onChange:W=>{const re=t.targetAudience.insuranceTypes;W.target.checked?I("targetAudience","insuranceTypes",[...re,k]):I("targetAudience","insuranceTypes",re.filter(_e=>_e!==k))},className:"mr-2"}),r.jsx("span",{className:"text-sm text-gray-700",children:k})]},k))})]})]})]})]}),r.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Ideal Customer Profile (ICP)"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[C()," Pain Points & Challenges",le()]}),r.jsx("textarea",{value:t.idealCustomerProfile.painPoints,onChange:k=>I("idealCustomerProfile","painPoints",k.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${f.painPoints?"border-red-500":"border-gray-300"}`,rows:"3",placeholder:t.industry==="healthcare"?"What health concerns, access issues, or care challenges do your patients face?":"What specific problems does your ideal customer face that you solve?"}),Ne("painPoints")]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[C()," Goals & Motivations"]}),r.jsx("textarea",{value:t.idealCustomerProfile.motivations,onChange:k=>I("idealCustomerProfile","motivations",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:t.industry==="healthcare"?"What health outcomes, wellness goals, or care improvements do your patients seek?":"What are their goals and what motivates them to seek your services?"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[C()," Decision-Making Process"]}),r.jsx("textarea",{value:t.idealCustomerProfile.decisionMaking,onChange:k=>I("idealCustomerProfile","decisionMaking",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:t.industry==="healthcare"?"How do patients choose healthcare providers? Who influences their decisions (family, doctors, insurance)?":"How do they typically make purchasing decisions? Who influences them?"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Communication Channels"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:(t.industry==="healthcare"?["Email","Phone","Patient Portal","Text/SMS","Telehealth","In-Person","Referrals","Health Apps","Educational Materials","Support Groups"]:["Email","Phone","Social Media","Website","Referrals","In-Person","Online Reviews","Content Marketing"]).map(k=>r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:t.idealCustomerProfile.communicationChannels.includes(k),onChange:W=>{const re=t.idealCustomerProfile.communicationChannels;W.target.checked?I("idealCustomerProfile","communicationChannels",[...re,k]):I("idealCustomerProfile","communicationChannels",re.filter(_e=>_e!==k))},className:"mr-2"}),r.jsx("span",{className:"text-sm text-gray-700",children:k})]},k))})]})]})]})]}),ae=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Branding & Creative Design"}),r.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Current Brand Status"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Do you have an existing logo?"}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"radio",name:"hasLogo",value:"yes",checked:t.brandingDesign.hasLogo==="yes",onChange:k=>I("brandingDesign","hasLogo",k.target.value),className:"mr-2"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Yes"})]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"radio",name:"hasLogo",value:"no",checked:t.brandingDesign.hasLogo==="no",onChange:k=>I("brandingDesign","hasLogo",k.target.value),className:"mr-2"}),r.jsx("span",{className:"text-sm text-gray-700",children:"No"})]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"radio",name:"hasLogo",value:"needs-redesign",checked:t.brandingDesign.hasLogo==="needs-redesign",onChange:k=>I("brandingDesign","hasLogo",k.target.value),className:"mr-2"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Yes, but needs redesign"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo URL (if available)"}),r.jsx("input",{type:"url",value:t.logoUrl,onChange:k=>M("logoUrl",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/logo.png"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Brand Guidelines URL"}),r.jsx("input",{type:"url",value:t.brandGuidelinesUrl,onChange:k=>M("brandGuidelinesUrl",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/brand-guidelines.pdf"})]})]})]}),r.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Brand Preferences & Style"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Brand Personality",le()]}),r.jsx("textarea",{value:t.brandingDesign.brandPersonality,onChange:k=>I("brandingDesign","brandPersonality",k.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${f.brandPersonality?"border-red-500":"border-gray-300"}`,rows:"3",placeholder:"How would you describe your brand's personality? (e.g., professional, friendly, innovative, trustworthy)"}),Ne("brandPersonality")]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Colors"}),r.jsx("input",{type:"text",value:t.brandingDesign.preferredColors,onChange:k=>I("brandingDesign","preferredColors",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Blue and white, Earth tones, Modern pastels"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Design Style Preference"}),r.jsxs("select",{value:t.brandingDesign.designStyle,onChange:k=>I("brandingDesign","designStyle",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select design style"}),r.jsx("option",{value:"modern-minimalist",children:"Modern & Minimalist"}),r.jsx("option",{value:"professional-corporate",children:"Professional & Corporate"}),r.jsx("option",{value:"creative-artistic",children:"Creative & Artistic"}),r.jsx("option",{value:"warm-approachable",children:"Warm & Approachable"}),r.jsx("option",{value:"bold-dynamic",children:"Bold & Dynamic"}),r.jsx("option",{value:"classic-traditional",children:"Classic & Traditional"}),r.jsx("option",{value:"healthcare-medical",children:"Healthcare & Medical"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Brands You Admire"}),r.jsx("textarea",{value:t.brandingDesign.inspirationalBrands,onChange:k=>I("brandingDesign","inspirationalBrands",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:"List 3-5 brands whose visual identity you admire and why"})]})]})]}),r.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Design Needs & Requirements"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"What design materials do you need?"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Logo Design/Redesign","Business Cards","Letterhead","Brochures/Flyers","Website Graphics","Social Media Templates","Email Signatures","Presentation Templates","Signage Design","Marketing Materials"].map(k=>r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:t.brandingDesign.designNeeds.includes(k),onChange:W=>{const re=t.brandingDesign.designNeeds;W.target.checked?I("brandingDesign","designNeeds",[...re,k]):I("brandingDesign","designNeeds",re.filter(_e=>_e!==k))},className:"mr-2"}),r.jsx("span",{className:"text-sm text-gray-700",children:k})]},k))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timeline for Design Work"}),r.jsxs("select",{value:t.brandingDesign.timeline,onChange:k=>I("brandingDesign","timeline",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select timeline"}),r.jsx("option",{value:"asap",children:"ASAP (Rush)"}),r.jsx("option",{value:"1-2-weeks",children:"1-2 weeks"}),r.jsx("option",{value:"3-4-weeks",children:"3-4 weeks"}),r.jsx("option",{value:"1-2-months",children:"1-2 months"}),r.jsx("option",{value:"flexible",children:"Flexible timeline"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Design Requirements"}),r.jsx("textarea",{value:t.brandingDesign.additionalRequirements,onChange:k=>I("brandingDesign","additionalRequirements",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Any specific requirements, file formats needed, or special considerations?"})]})]})]})]}),q=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"AI Automation & Services"}),r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Current Automation Status"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"What's your current level of automation?"}),r.jsxs("select",{value:t.aiAutomationRequirements.currentAutomationLevel,onChange:k=>I("aiAutomationRequirements","currentAutomationLevel",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select current level"}),r.jsx("option",{value:"none",children:"No automation currently"}),r.jsx("option",{value:"basic",children:"Basic automation (email autoresponders, simple workflows)"}),r.jsx("option",{value:"intermediate",children:"Intermediate (CRM automation, lead scoring)"}),r.jsx("option",{value:"advanced",children:"Advanced (AI chatbots, predictive analytics)"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Tools & Platforms"}),r.jsx("textarea",{value:t.aiAutomationRequirements.currentTools,onChange:k=>I("aiAutomationRequirements","currentTools",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:"List any automation tools you currently use (e.g., Zapier, HubSpot, Mailchimp)"})]})]})]}),r.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"AI Automation Services Needed"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Which AI automation services interest you?"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:["AI Chatbots for Customer Service","Email Marketing Automation","Lead Qualification & Scoring","Appointment Scheduling","Social Media Automation","Content Generation (AI Writing)","Customer Segmentation","Predictive Analytics","Voice Assistants","Workflow Automation","Data Analysis & Reporting","Personalized Recommendations"].map(k=>r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:Object.keys(t.aiAutomationNeeds).includes(k.toLowerCase().replace(/[^a-z0-9]/g,""))&&t.aiAutomationNeeds[k.toLowerCase().replace(/[^a-z0-9]/g,"")],onChange:W=>{const re=k.toLowerCase().replace(/[^a-z0-9]/g,"");I("aiAutomationNeeds",re,W.target.checked)},className:"mr-2"}),r.jsx("span",{className:"text-sm text-gray-700",children:k})]},k))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority Automation Goals"}),r.jsx("textarea",{value:t.aiAutomationRequirements.automationGoals,onChange:k=>I("aiAutomationRequirements","automationGoals",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"What are your main goals with AI automation? (e.g., save time, improve customer experience, increase conversions)"})]})]})]}),r.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Implementation Preferences"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Automation Budget Range"}),r.jsxs("select",{value:t.aiAutomationRequirements.automationBudgetRange,onChange:k=>I("aiAutomationRequirements","automationBudgetRange",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select budget range"}),r.jsx("option",{value:"under-1k",children:"Under $1,000/month"}),r.jsx("option",{value:"1k-3k",children:"$1,000 - $3,000/month"}),r.jsx("option",{value:"3k-5k",children:"$3,000 - $5,000/month"}),r.jsx("option",{value:"5k-10k",children:"$5,000 - $10,000/month"}),r.jsx("option",{value:"over-10k",children:"Over $10,000/month"}),r.jsx("option",{value:"project-based",children:"Prefer project-based pricing"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Implementation Timeline"}),r.jsxs("select",{value:t.aiAutomationRequirements.implementationTimeline,onChange:k=>I("aiAutomationRequirements","implementationTimeline",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select timeline"}),r.jsx("option",{value:"immediate",children:"Start immediately"}),r.jsx("option",{value:"1-month",children:"Within 1 month"}),r.jsx("option",{value:"2-3-months",children:"2-3 months"}),r.jsx("option",{value:"6-months",children:"Within 6 months"}),r.jsx("option",{value:"planning-phase",children:"Still in planning phase"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Technical Complexity Preference"}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"radio",name:"technicalComplexity",value:"simple",checked:t.aiAutomationRequirements.technicalComplexity==="simple",onChange:k=>I("aiAutomationRequirements","technicalComplexity",k.target.value),className:"mr-2"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Simple & User-friendly"})]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"radio",name:"technicalComplexity",value:"moderate",checked:t.aiAutomationRequirements.technicalComplexity==="moderate",onChange:k=>I("aiAutomationRequirements","technicalComplexity",k.target.value),className:"mr-2"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Moderate complexity"})]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"radio",name:"technicalComplexity",value:"advanced",checked:t.aiAutomationRequirements.technicalComplexity==="advanced",onChange:k=>I("aiAutomationRequirements","technicalComplexity",k.target.value),className:"mr-2"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Advanced & Customizable"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional AI Automation Requirements"}),r.jsx("textarea",{value:t.aiAutomationRequirements.additionalRequirements,onChange:k=>I("aiAutomationRequirements","additionalRequirements",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Any specific requirements, integrations needed, or concerns about AI automation?"})]})]})]})]}),ve=()=>r.jsx("div",{className:"flex justify-center mb-8",children:r.jsx("div",{className:"flex space-x-2",children:Array.from({length:15},(W,re)=>r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${re+1===a?"bg-blue-600 text-white":re+1<a?"bg-green-600 text-white":"bg-gray-300 text-gray-600"}`,children:re+1},re))})}),le=()=>r.jsx("span",{className:"text-red-500 ml-1",children:"*"}),Ne=k=>{const W=f[k]||l[k];return W?r.jsx("p",{className:"text-red-500 text-sm mt-1",children:W}):null},fe=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Basic Information & Business Details"}),r.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-700 mb-4",children:["📧 ",r.jsx("strong",{children:"For file uploads:"})," Please email all files (logos, brand guidelines, marketing materials, etc.) to ",r.jsx("strong",{children:"files@yourdomain.com"})," with your client name in the subject line."]})}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Client Name",le()]}),r.jsx("input",{type:"text",value:t.clientName,onChange:k=>M("clientName",k.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${f.clientName||l.clientName?"border-red-500":"border-gray-300"}`,placeholder:"Enter your business/client name"}),Ne("clientName")]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Primary Email",le()]}),r.jsx("input",{type:"email",value:t.primaryEmail,onChange:k=>M("primaryEmail",k.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${f.primaryEmail||l.primaryEmail?"border-red-500":"border-gray-300"}`,placeholder:"your@email.com"}),Ne("primaryEmail")]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone Number",le()]}),r.jsx("input",{type:"tel",value:t.phoneNumber,onChange:k=>M("phoneNumber",k.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${f.phoneNumber||l.phoneNumber?"border-red-500":"border-gray-300"}`,placeholder:"+1 (555) 123-4567"}),Ne("phoneNumber")]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Address"}),r.jsx("textarea",{value:t.businessAddress,onChange:k=>M("businessAddress",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Full business address including city, state, and zip code"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website URL"}),r.jsx("input",{type:"url",value:t.websiteUrl,onChange:k=>M("websiteUrl",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://www.yourwebsite.com"})]}),r.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"🇮🇳 Indian Business Details"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GSTIN (GST Identification Number)"}),r.jsx("input",{type:"text",value:t.indianBusinessDetails.gstin,onChange:k=>M("indianBusinessDetails.gstin",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"22AAAAA0000A1Z5",maxLength:"15"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PAN Number"}),r.jsx("input",{type:"text",value:t.indianBusinessDetails.panNumber,onChange:k=>M("indianBusinessDetails.panNumber",k.target.value.toUpperCase()),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"ABCDE1234F",maxLength:"10"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State"}),r.jsxs("select",{value:t.indianBusinessDetails.state,onChange:k=>M("indianBusinessDetails.state",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select State"}),A.map(k=>r.jsx("option",{value:k,children:k},k))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),r.jsxs("select",{value:t.indianBusinessDetails.city,onChange:k=>M("indianBusinessDetails.city",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select City"}),L.map(k=>r.jsx("option",{value:k,children:k},k))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PIN Code"}),r.jsx("input",{type:"text",value:t.indianBusinessDetails.pincode,onChange:k=>M("indianBusinessDetails.pincode",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"400001",maxLength:"6",pattern:"[0-9]{6}"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Registration Type"}),r.jsxs("select",{value:t.indianBusinessDetails.businessRegistrationType,onChange:k=>M("indianBusinessDetails.businessRegistrationType",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select Registration Type"}),T.map(k=>r.jsx("option",{value:k,children:k},k))]})]})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Udyam Registration Number (MSME)"}),r.jsx("input",{type:"text",value:t.indianBusinessDetails.udyamRegistration,onChange:k=>M("indianBusinessDetails.udyamRegistration",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"UDYAM-XX-00-0000000"})]}),t.industry==="healthcare"&&r.jsxs("div",{className:"mt-6",children:[r.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"🏥 Healthcare Licenses & Registrations"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medical Council Registration"}),r.jsx("input",{type:"text",value:t.indianBusinessDetails.medicalCouncilRegistration,onChange:k=>M("indianBusinessDetails.medicalCouncilRegistration",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"MCI/State Medical Council Number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Clinical Establishment License"}),r.jsx("input",{type:"text",value:t.indianBusinessDetails.clinicalEstablishmentLicense,onChange:k=>M("indianBusinessDetails.clinicalEstablishmentLicense",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"State Health Department License"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Drug License (if applicable)"}),r.jsx("input",{type:"text",value:t.indianBusinessDetails.drugLicense,onChange:k=>M("indianBusinessDetails.drugLicense",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Drug License Number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"NABH/JCI Accreditation"}),r.jsx("input",{type:"text",value:t.indianBusinessDetails.nabh_jci_accreditation,onChange:k=>M("indianBusinessDetails.nabh_jci_accreditation",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"NABH/JCI Accreditation Number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"FSSAI License (if applicable)"}),r.jsx("input",{type:"text",value:t.indianBusinessDetails.fssaiLicense,onChange:k=>M("indianBusinessDetails.fssaiLicense",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"FSSAI License Number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Biomedical Waste Authorization"}),r.jsx("input",{type:"text",value:t.indianBusinessDetails.biomedicalWasteAuthorization,onChange:k=>M("indianBusinessDetails.biomedicalWasteAuthorization",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Biomedical Waste Authorization Number"})]})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Industry",le()]}),r.jsxs("select",{value:t.industry,onChange:k=>M("industry",k.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${f.industry||l.industry?"border-red-500":"border-gray-300"}`,children:[r.jsx("option",{value:"",children:"Select Industry"}),S.map(k=>r.jsx("option",{value:k.value,children:k.label},k.value))]}),Ne("industry")]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t.industry==="healthcare"?"Healthcare Business Type":"Business Type",le()]}),t.industry==="healthcare"?r.jsxs("select",{value:t.businessType,onChange:k=>M("businessType",k.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${f.businessType||l.businessType?"border-red-500":"border-gray-300"}`,children:[r.jsx("option",{value:"",children:"Select Healthcare Business Type"}),b.map(k=>r.jsx("option",{value:k,children:k},k))]}):r.jsx("input",{type:"text",value:t.businessType,onChange:k=>M("businessType",k.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${f.businessType||l.businessType?"border-red-500":"border-gray-300"}`,placeholder:"e.g., Restaurant, Retail Store, Law Firm, etc."}),Ne("businessType")]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Monthly Marketing Budget"}),r.jsxs("select",{value:t.monthlyBudget,onChange:k=>M("monthlyBudget",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select budget range"}),D.map(k=>r.jsx("option",{value:k,children:k},k))]})]}),r.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:r.jsxs("p",{className:"text-sm text-green-700",children:["✅ ",r.jsx("strong",{children:"Services Confirmed:"})," Your purchased services have been confirmed. This onboarding will help us gather the information needed to deliver your specific services effectively."]})})]}),Lt=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Contact Information"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary Email *"}),r.jsx("input",{type:"email",value:t.primaryEmail,onChange:k=>M("primaryEmail",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"your@email.com"}),l.primaryEmail&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.primaryEmail})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email for Leads & Communication"}),r.jsx("input",{type:"email",value:t.leadsEmail,onChange:k=>M("leadsEmail",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"leads@yourbusiness.com"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number for Promotion *"}),r.jsx("input",{type:"tel",value:t.phoneNumber,onChange:k=>M("phoneNumber",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+1 (555) 123-4567"}),l.phoneNumber&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.phoneNumber})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Locations (City/State/Country)"}),r.jsx("textarea",{value:t.locations,onChange:k=>M("locations",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"List each city/state/country where you expect customers from"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website URL"}),r.jsx("input",{type:"url",value:t.websiteUrl,onChange:k=>M("websiteUrl",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://yourwebsite.com"}),"      "]})]}),Fr=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Website & Technical Access"}),r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Website Credentials"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Panel URL"}),r.jsx("input",{type:"url",value:t.websiteCredentials.adminUrl,onChange:k=>I("websiteCredentials","adminUrl",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://yoursite.com/admin or cPanel URL"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),r.jsx("input",{type:"text",value:t.websiteCredentials.username,onChange:k=>I("websiteCredentials","username",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Admin username"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),r.jsx("input",{type:"password",value:t.websiteCredentials.password,onChange:k=>I("websiteCredentials","password",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Admin password"})]})]})]})]}),Ua=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Google Services Access"}),r.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Google Access Requirements"}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Please provide access to the following Google services by sharing with our SEO team emails:"}),r.jsxs("div",{className:"bg-white p-3 rounded border",children:[r.jsx("p",{className:"font-medium text-gray-700",children:"SEO Team Emails:"}),r.jsxs("ul",{className:"text-sm text-gray-600 mt-1",children:[r.jsx("li",{children:"• Seowithbp@gmail.com"}),r.jsx("li",{children:"• Seobrandingpioneers@gmail.com"}),r.jsx("li",{children:"• brandingpioneers@gmail.com"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:t.googleAccess.gmbAccess,onChange:k=>I("googleAccess","gmbAccess",k.target.checked),className:"mr-3"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-700",children:"Google My Business (GMB) Access"}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Tutorial: ",r.jsx("a",{href:"https://youtu.be/LwgbdTrCI3A?t=19",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"How to give GMB access"})]})]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:t.googleAccess.analyticsAccess,onChange:k=>I("googleAccess","analyticsAccess",k.target.checked),className:"mr-3"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-700",children:"Google Analytics Access"}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Tutorial: ",r.jsx("a",{href:"https://youtu.be/QAUB1LLljg8?t=35",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"How to give Analytics access"})]})]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:t.googleAccess.searchConsoleAccess,onChange:k=>I("googleAccess","searchConsoleAccess",k.target.checked),className:"mr-3"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-700",children:"Google Search Console Access"}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Tutorial: ",r.jsx("a",{href:"https://youtu.be/LqabOT-PF-U?t=9",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"How to give Search Console access"})]})]})]})]})]}),it=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"SEO & Marketing Services"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Please complete the SEO section if you've purchased SEO services, or skip if not applicable."}),r.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"SEO Information"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Previous SEO Report"}),r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Share any previous SEO reports if you've had SEO done in the past"}),r.jsx("input",{type:"file",accept:".pdf,.doc,.docx,.txt",onChange:k=>M("previousSeoReport",k.target.files[0]),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Involvement in SEO Process"}),r.jsxs("select",{value:t.seoInvolvement,onChange:k=>M("seoInvolvement",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select your preferred involvement level"}),r.jsx("option",{value:"minimal",children:"Minimal - Just provide final approval"}),r.jsx("option",{value:"moderate",children:"Moderate - Weekly updates and reviews"}),r.jsx("option",{value:"collaborative",children:"Collaborative - Active participation in strategy"}),r.jsx("option",{value:"hands-on",children:"Hands-on - Daily involvement and content creation"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SEO Remarks"}),r.jsx("textarea",{value:t.seoRemarks,onChange:k=>M("seoRemarks",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Share any remarks related to SEO that you want your SEO executive to be aware of"})]})]})]}),r.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Advertising Information"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Advertising Platforms"}),r.jsx("div",{className:"space-y-2",children:[{value:"google",label:"Google Ads"},{value:"meta",label:"Meta Ads (Facebook/Instagram)"},{value:"both",label:"Both Platforms"}].map(k=>r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:t.adsPlatforms.includes(k.value),onChange:W=>{W.target.checked?M("adsPlatforms",[...t.adsPlatforms,k.value]):M("adsPlatforms",t.adsPlatforms.filter(re=>re!==k.value))},className:"mr-2"}),r.jsx("span",{className:"text-gray-700",children:k.label})]},k.value))})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Paid Advertising Investment Comfort Level"}),r.jsxs("select",{value:t.dailyAdBudget,onChange:k=>M("dailyAdBudget",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select your comfort level for paid advertising investment"}),r.jsx("option",{value:"conservative",children:"Conservative: $10 - $50 per day (Testing & Learning)"}),r.jsx("option",{value:"moderate",children:"Moderate: $50 - $150 per day (Steady Growth)"}),r.jsx("option",{value:"aggressive",children:"Aggressive: $150 - $300 per day (Rapid Scaling)"}),r.jsx("option",{value:"premium",children:"Premium: $300+ per day (Market Domination)"}),r.jsx("option",{value:"variable",children:"Variable: Adjust based on performance and seasonality"}),r.jsx("option",{value:"discuss",children:"Let's discuss based on ROI projections"})]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"We'll start conservatively and scale based on performance data and your comfort level."})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Involvement in Ads Management"}),r.jsxs("select",{value:t.adsInvolvement,onChange:k=>M("adsInvolvement",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select your preferred involvement level"}),r.jsx("option",{value:"full-management",children:"Full Management - Handle everything for me"}),r.jsx("option",{value:"approval-required",children:"Approval Required - Review before launching"}),r.jsx("option",{value:"collaborative",children:"Collaborative - Work together on strategy"}),r.jsx("option",{value:"consultation",children:"Consultation Only - I'll manage, you advise"})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target Locations for Ads"}),r.jsx("textarea",{value:t.targetLocations,onChange:k=>M("targetLocations",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"List all locations where you expect customers from"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ads Remarks"}),r.jsx("textarea",{value:t.adsRemarks,onChange:k=>M("adsRemarks",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Any instructions for your Ad executive"})]})]})]});return r.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-white",children:[u&&r.jsxs("div",{className:"mb-6 p-4 bg-green-100 border border-green-400 text-green-700 rounded",children:[r.jsx("h3",{className:"font-bold",children:"Form Submitted Successfully!"}),r.jsx("p",{children:"Thank you for providing your information. We'll review it and get back to you soon."})]}),m&&r.jsx("div",{className:"mb-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded",children:r.jsx("p",{children:m})}),ve(),a===1&&fe(),a===2&&Lt(),a===3&&Fr(),a===4&&Ua(),a===5&&it(),a===6&&G(),a===7&&V(),a===8&&Z(),a===9&&ue(),a===10&&E(),a===11&&B(),a===12&&U(),a===13&&X(),a===14&&ae(),a===15&&q(),r.jsxs("div",{className:"flex justify-between mt-8",children:[a>1&&r.jsx("button",{type:"button",onClick:()=>s(k=>k-1),className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Previous"}),r.jsx("div",{className:"flex-1"}),a<15?r.jsx("button",{type:"button",onClick:()=>s(k=>k+1),className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Next"}):r.jsxs("button",{type:"button",onClick:z,disabled:i,className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[i&&r.jsx(Ee,{size:"sm"}),i?"Submitting...":"Submit Form"]})]})]})},cM=()=>{const{user:e,hasPermission:t}=Ze(),{showToast:n}=Oe(),[a,s]=p.useState([]),[i,o]=p.useState([]),[l,c]=p.useState(!0),[u,d]=p.useState("client"),[m,h]=p.useState("all"),[f,x]=p.useState(""),[g,w]=p.useState("created_at"),[j,y]=p.useState("desc");p.useEffect(()=>{if(!e||!t("manage:onboarding")){n("Access denied. Admin permissions required.","error");return}N()},[e]);const N=async()=>{try{c(!0);const{data:C,error:F}=await se.from("client_onboarding").select("*").order("created_at",{ascending:!1});if(F)throw F;const{data:R,error:K}=await se.from("employees").select("*").order("created_at",{ascending:!1});if(K)throw K;s(C||[]),o(R||[])}catch(C){console.error("Error loading form data:",C),n("Failed to load form tracking data","error")}finally{c(!1)}},S=async(C,F,R)=>{try{const K=R==="client"?"client_onboarding":"employees",M=R==="client"?"submission_status":"status",{error:I}=await se.from(K).update({[M]:F}).eq("id",C);if(I)throw I;n(`${R==="client"?"Client":"Employee"} form status updated successfully`,"success"),N()}catch(K){console.error("Error updating form status:",K),n("Failed to update form status","error")}},b=C=>{switch(C==null?void 0:C.toLowerCase()){case"submitted":case"active":return"bg-green-100 text-green-800";case"pending":case"draft":return"bg-yellow-100 text-yellow-800";case"reviewed":return"bg-blue-100 text-blue-800";case"approved":return"bg-purple-100 text-purple-800";case"inactive":case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},v=(C,F)=>{const R=new Date(C);return Math.floor((new Date-R)/(1e3*60*60*24))>7&&["pending","submitted","draft"].includes(F==null?void 0:F.toLowerCase())},_=(C,F)=>{let R=C;return m!=="all"&&(m==="overdue"?R=R.filter(K=>{const M=F==="client"?K.submission_status:K.status;return v(K.created_at,M)}):R=R.filter(K=>{const M=F==="client"?K.submission_status:K.status;return(M==null?void 0:M.toLowerCase())===m})),f&&(R=R.filter(K=>{const M=F==="client"?K.client_name:K.name,I=K.email;return(M==null?void 0:M.toLowerCase().includes(f.toLowerCase()))||(I==null?void 0:I.toLowerCase().includes(f.toLowerCase()))})),R.sort((K,M)=>{let I=K[g],H=M[g];return g==="created_at"&&(I=new Date(I),H=new Date(H)),j==="asc"?I>H?1:-1:I<H?1:-1}),R},P=(C,F)=>{const R=C.length,K=C.filter(H=>{const Y=F==="client"?H.submission_status:H.status;return["pending","submitted","draft"].includes(Y==null?void 0:Y.toLowerCase())}).length,M=C.filter(H=>{const Y=F==="client"?H.submission_status:H.status;return["approved","active"].includes(Y==null?void 0:Y.toLowerCase())}).length,I=C.filter(H=>{const Y=F==="client"?H.submission_status:H.status;return v(H.created_at,Y)}).length;return{total:R,pending:K,completed:M,overdue:I}},O=C=>r.jsxs("tr",{className:`hover:bg-gray-50 ${v(C.created_at,C.submission_status)?"bg-red-50":""}`,children:[r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.client_name}),r.jsx("div",{className:"text-sm text-gray-500",children:C.email})]}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm text-gray-900",children:C.industry}),r.jsx("div",{className:"text-sm text-gray-500",children:C.company_size})]}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${b(C.submission_status)}`,children:C.submission_status||"Draft"}),v(C.created_at,C.submission_status)&&r.jsx("span",{className:"ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:"Overdue"})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(C.created_at).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:C.assigned_team||"Unassigned"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsxs("select",{value:C.submission_status||"draft",onChange:F=>S(C.id,F.target.value,"client"),className:"text-sm border border-gray-300 rounded px-2 py-1",children:[r.jsx("option",{value:"draft",children:"Draft"}),r.jsx("option",{value:"submitted",children:"Submitted"}),r.jsx("option",{value:"reviewed",children:"Reviewed"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"rejected",children:"Rejected"})]})})]},C.id),D=C=>r.jsxs("tr",{className:`hover:bg-gray-50 ${v(C.created_at,C.status)?"bg-red-50":""}`,children:[r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.name}),r.jsx("div",{className:"text-sm text-gray-500",children:C.email})]}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm text-gray-900",children:C.department}),r.jsx("div",{className:"text-sm text-gray-500",children:C.employee_type})]}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${b(C.status)}`,children:C.status||"Pending"}),v(C.created_at,C.status)&&r.jsx("span",{className:"ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:"Overdue"})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(C.created_at).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:C.hire_date?new Date(C.hire_date).toLocaleDateString():"Not set"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsxs("select",{value:C.status||"pending",onChange:F=>S(C.id,F.target.value,"employee"),className:"text-sm border border-gray-300 rounded px-2 py-1",children:[r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]})})]},C.id);if(!e||!t("manage:onboarding"))return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),r.jsx("p",{className:"text-gray-600",children:"You don't have permission to access the form tracking dashboard."})]})});if(l)return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading form tracking data..."})]})});const A=u==="client"?a:i,T=_(A,u),L=P(A,u);return r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Form Tracking Dashboard"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Monitor and manage onboarding form submissions"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:L.total}),r.jsx("div",{className:"text-sm text-gray-600",children:"Total Forms"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:L.pending}),r.jsx("div",{className:"text-sm text-gray-600",children:"Pending Review"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:L.completed}),r.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("div",{className:"text-2xl font-bold text-red-600",children:L.overdue}),r.jsx("div",{className:"text-sm text-gray-600",children:"Overdue"})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsx("div",{className:"border-b border-gray-200",children:r.jsxs("nav",{className:"-mb-px flex",children:[r.jsxs("button",{onClick:()=>d("client"),className:`py-4 px-6 text-sm font-medium border-b-2 ${u==="client"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Client Onboarding (",a.length,")"]}),r.jsxs("button",{onClick:()=>d("employee"),className:`py-4 px-6 text-sm font-medium border-b-2 ${u==="employee"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Employee Onboarding (",i.length,")"]})]})}),r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsx("input",{type:"text",placeholder:"Search by name or email...",value:f,onChange:C=>x(C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),r.jsx("div",{children:r.jsxs("select",{value:m,onChange:C=>h(C.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"submitted",children:"Submitted"}),r.jsx("option",{value:"reviewed",children:"Reviewed"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"overdue",children:"Overdue"})]})}),r.jsx("div",{children:r.jsxs("select",{value:g,onChange:C=>w(C.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"created_at",children:"Sort by Date"}),r.jsx("option",{value:"name",children:"Sort by Name"}),r.jsx("option",{value:"status",children:"Sort by Status"})]})}),r.jsx("div",{children:r.jsx("button",{onClick:()=>y(j==="asc"?"desc":"asc"),className:"px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:j==="asc"?"↑":"↓"})})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:u==="client"?"Client":"Employee"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:u==="client"?"Industry":"Department"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:u==="client"?"Assigned Team":"Hire Date"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"6",className:"px-6 py-12 text-center text-gray-500",children:"No forms found matching your criteria"})}):T.map(C=>u==="client"?O(C):D(C))})]})})]})]})})};class Wo{static async fetchUsers(){try{const{data:t,error:n}=await se.from("unified_users").select("*").eq("status","active").order("name",{ascending:!0});if(n)throw n;return t||[]}catch(t){throw console.error("Error fetching users:",t),t}}static async fetchMonthlySubmissions(t){if(!se)return console.warn("Supabase not available, returning empty array"),[];try{const[n,a]=t.split("-"),s=`${n}-${a}-01`,{data:i,error:o}=await se.from("monthly_form_submissions").select(`
          *,
          unified_users!user_id (
            id,
            name,
            email,
            phone,
            role,
            user_category,
            department
          )
        `).eq("submission_month",s);return o?(console.error("Error fetching monthly submissions:",o),[]):i||[]}catch(n){return console.error("Error in fetchMonthlySubmissions:",n),[]}}static async fetchLegacySubmissions(t){if(!se)return console.warn("Supabase not available, returning empty array"),[];try{const{data:n,error:a}=await se.from("submissions").select("*").eq("month_key",t);return a?(console.error("Error fetching legacy submissions:",a),[]):(n||[]).map(s=>({...s,unified_users:{name:s.employee_name,phone:s.employee_phone,department:s.department,role:Array.isArray(s.role)?s.role[0]:s.role,user_category:"employee"},form_data:{overall_score:s.overall_score,kpi_score:s.kpi_score,learning_score:s.learning_score,relationship_score:s.relationship_score,tasks_completed:s.tasks_completed,attendance_wfo:s.attendance_wfo,attendance_wfh:s.attendance_wfh}}))}catch(n){return console.error("Error in fetchLegacySubmissions:",n),[]}}static async getMonthlyReportData(t){try{const[n,a]=t.split("-").map(Number),s=t,[i,o,l]=await Promise.all([this.fetchUsers(),this.fetchMonthlySubmissions(s),this.fetchLegacySubmissions(s)]),c=[...o.map(u=>({...u,source:"monthly_form_submissions",employeeId:u.user_id,employee:u.user,performance_score:this.extractPerformanceScore(u),totalScore:this.extractPerformanceScore(u)})),...l.map(u=>({...u,source:"submissions",employeeId:u.employee_name,employee:u.unified_users,performance_score:this.extractPerformanceScore(u),totalScore:this.extractPerformanceScore(u)}))];return{users:i,submissions:c,monthKey:s,year:n,month:a}}catch(n){throw console.error("Error getting monthly report data:",n),n}}static extractPerformanceScore(t){const n=t.form_data||{},a=["overall_score","performance_score","total_score","kpi_score","average_score"];for(const o of a){const l=n[o];if(typeof l=="number"&&l>0)return l>10?l:l*10}for(const o of a){const l=t[o];if(typeof l=="number"&&l>0)return l>10?l:l*10}const s=[n.kpi_score,n.learning_score,n.relationship_score,n.discipline_score].filter(o=>typeof o=="number"&&o>0);if(s.length>0){const o=s.reduce((l,c)=>l+c,0)/s.length;return o>10?o:o*10}const i=[t.kpi_score,t.learning_score,t.relationship_score,t.overall_score].filter(o=>typeof o=="number"&&o>0);if(i.length>0){const o=i.reduce((l,c)=>l+c,0)/i.length;return o>10?o:o*10}return 0}static calculateDepartmentBreakdown(t,n){const a={};return t.forEach(s=>{const i=s.department||"Unknown";a[i]||(a[i]={employees:0,submissions:0,totalScore:0,scoreCount:0}),a[i].employees++}),n.forEach(s=>{var o;const i=((o=s.employee)==null?void 0:o.department)||s.department||"Unknown";if(a[i]){a[i].submissions++;const l=s.performance_score||s.totalScore||0;l>0&&(a[i].totalScore+=l,a[i].scoreCount++)}}),Object.entries(a).map(([s,i])=>({department:s,employees:i.employees,submissions:i.submissions,avgScore:i.scoreCount>0?(i.totalScore/i.scoreCount).toFixed(1):"0.0",submissionRate:i.employees>0?(i.submissions/i.employees*100).toFixed(1):"0.0"}))}static calculateMonthlyMetrics(t,n){const a=t.filter(d=>d.status==="active").length,s=n.length,i=new Set(n.map(d=>{var m;return d.employeeId||d.user_id||((m=d.employee)==null?void 0:m.name)})).size,o=a>0?(s/a).toFixed(1):"0.0",l=n.map(d=>d.performance_score||d.totalScore||0).filter(d=>d>0),c=l.length>0?(l.reduce((d,m)=>d+m,0)/l.length).toFixed(1):"0.0",u=a>0?(i/a*100).toFixed(1):"0.0";return{activeEmployees:a,totalSubmissions:s,uniqueSubmitters:i,avgSubmissionsPerEmployee:o,avgPerformance:c,submissionRate:u}}}function dM({onBack:e}){var A;const{user:t,role:n,hasDashboardAccess:a}=Ze(),{notify:s}=Oe(),{isMobile:i,gridConfig:o,spacing:l,text:c}=Ry(),[u,d]=p.useState({users:[],submissions:[],loading:!0,error:null}),[m,h]=p.useState(()=>{const T=new Date;return`${T.getFullYear()}-${String(T.getMonth()+1).padStart(2,"0")}`}),[f,x]=p.useState("summary"),[g,w]=p.useState("all");p.useEffect(()=>{(async()=>{try{d(C=>({...C,loading:!0,error:null}));const L=await Wo.getMonthlyReportData(m);d({users:L.users,submissions:L.submissions,loading:!1,error:null})}catch(L){console.error("Error fetching report data:",L),d(C=>({...C,loading:!1,error:L.message})),s("Failed to load report data","error")}})()},[m,s]);const j=p.useMemo(()=>{const T=[],L=new Date;for(let C=0;C<12;C++){const F=new Date(L.getFullYear(),L.getMonth()-C,1),R=`${F.getFullYear()}-${String(F.getMonth()+1).padStart(2,"0")}`,K=F.toLocaleDateString("en-US",{year:"numeric",month:"long"});T.push({value:R,label:K})}return T},[]),y=u.submissions,N=p.useMemo(()=>g==="all"?u.users:u.users.filter(T=>T.department===g),[u.users,g]),S=p.useMemo(()=>Wo.calculateMonthlyMetrics(N,y),[N,y]),b=p.useMemo(()=>Wo.calculateDepartmentBreakdown(N,y),[N,y]),v=["Super Admin","HR","Operations Head"].includes(n),_=["Super Admin","HR","Operations Head","Manager"].includes(n),[P,O]=p.useState("excel"),D=async()=>{var T;try{const L={title:"Monthly Performance Report",month:(T=j.find(R=>R.value===m))==null?void 0:T.label,metrics:S,departmentBreakdown:b,generatedBy:t==null?void 0:t.name,generatedAt:new Date().toISOString(),reportType:f,period:m,filterDepartment:g!=="all"?g:null},C=xs.generateFilename(`monthly-report-${m}`),F=await bs(L,P,"monthlyReport",C);F.success?s(F.message,"success"):s(F.message,"error")}catch(L){console.error("Export error:",L),s("Failed to export report","error")}};return u.loading?r.jsx("div",{className:"max-w-7xl mx-auto p-6",children:r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsx(Ee,{size:"xl",showText:!0,text:"Loading monthly report data..."})})}):u.error?r.jsx("div",{className:"max-w-7xl mx-auto p-6",children:r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-red-600 text-lg font-medium mb-2",children:"Error Loading Report"}),r.jsx("div",{className:"text-gray-600 mb-4",children:u.error}),r.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Retry"})]})})}):r.jsxs("div",{className:`max-w-7xl mx-auto ${l.container} px-4 sm:px-6`,children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:`${c.title} font-bold text-gray-900 mb-2`,children:"📊 Monthly Report Dashboard"}),r.jsx("p",{className:"text-gray-600",children:"Comprehensive monthly performance and activity reports"})]}),r.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors flex items-center gap-2",children:"← Back"})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6 mb-8",children:r.jsxs("div",{className:`grid grid-cols-1 ${i?"":"md:grid-cols-4"} gap-4`,children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Month"}),r.jsx("select",{value:m,onChange:T=>h(T.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:j.map(T=>r.jsx("option",{value:T.value,children:T.label},T.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Type"}),r.jsxs("select",{value:f,onChange:T=>x(T.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"summary",children:"Summary Report"}),r.jsx("option",{value:"detailed",children:"Detailed Report"}),r.jsx("option",{value:"performance",children:"Performance Focus"}),r.jsx("option",{value:"department",children:"Department Analysis"})]})]}),v&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department Filter"}),r.jsxs("select",{value:g,onChange:T=>w(T.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Departments"}),r.jsx("option",{value:"Marketing",children:"Marketing"}),r.jsx("option",{value:"Technology",children:"Technology"}),r.jsx("option",{value:"Creative",children:"Creative"}),r.jsx("option",{value:"Operations",children:"Operations"}),r.jsx("option",{value:"Human Resources",children:"Human Resources"}),r.jsx("option",{value:"Finance",children:"Finance"})]})]}),_&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Export Format"}),r.jsxs("select",{value:P,onChange:T=>O(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[r.jsx("option",{value:"excel",children:"Excel (.xlsx)"}),r.jsx("option",{value:"pdf",children:"PDF Report"}),r.jsx("option",{value:"csv",children:"CSV Data"})]}),r.jsx("button",{onClick:D,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:"📥 Export Report"})]})]})}),r.jsxs("div",{className:`${o.metrics} gap-4 mb-8`,children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-blue-600 text-lg",children:"👥"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.activeEmployees}),r.jsx("p",{className:"text-sm text-gray-600",children:"Active Employees"})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-green-600 text-lg",children:"📝"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.totalSubmissions}),r.jsx("p",{className:"text-sm text-gray-600",children:"Total Submissions"})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-purple-600 text-lg",children:"⭐"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.avgPerformance}),r.jsx("p",{className:"text-sm text-gray-600",children:"Avg Performance"})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-orange-600 text-lg",children:"📊"})}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[S.submissionRate,"%"]}),r.jsx("p",{className:"text-sm text-gray-600",children:"Submission Rate"})]})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6 mb-8",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Department Performance"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-200",children:[r.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Department"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Employees"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Submissions"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Avg Score"}),r.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Rate"})]})}),r.jsx("tbody",{children:b.map((T,L)=>r.jsxs("tr",{className:L%2===0?"bg-gray-50":"bg-white",children:[r.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:T.department}),r.jsx("td",{className:"py-3 px-4 text-gray-700",children:T.employees}),r.jsx("td",{className:"py-3 px-4 text-gray-700",children:T.submissions}),r.jsx("td",{className:"py-3 px-4",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${T.avgScore>=80?"bg-green-100 text-green-800":T.avgScore>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:T.avgScore})}),r.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[T.submissionRate,"%"]})]},T.department))})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Report Summary"}),r.jsxs("div",{className:"prose max-w-none",children:[r.jsxs("p",{className:"text-gray-700 mb-4",children:["This report covers the month of ",r.jsx("strong",{children:(A=j.find(T=>T.value===m))==null?void 0:A.label}),".",g!=="all"&&r.jsxs("span",{children:[" Filtered to show only ",r.jsx("strong",{children:g})," department."]})]}),r.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-4",children:[r.jsx("h4",{className:"font-medium text-blue-900",children:"Key Insights"}),r.jsxs("ul",{className:"mt-2 text-blue-800 text-sm space-y-1",children:[r.jsxs("li",{children:["• ",S.uniqueSubmitters," out of ",S.activeEmployees," employees submitted reports (",S.submissionRate,"% participation)"]}),r.jsxs("li",{children:["• Average of ",S.avgSubmissionsPerEmployee," submissions per employee"]}),r.jsxs("li",{children:["• Overall performance average: ",S.avgPerformance,"/100"]}),r.jsxs("li",{children:["• Report generated by ",t==null?void 0:t.name," on ",new Date().toLocaleDateString()]})]})]})]})]})]})}const tf=()=>{const{employees:e,loading:t,addEmployee:n,updateEmployee:a,removeEmployee:s}=Aa(),{user:i,role:o}=Ze(),{supabase:l}=Ie(),{notify:c}=Yl(),u=bf(),[d,m]=p.useState(""),[h,f]=p.useState("all"),[x,g]=p.useState("all"),[w,j]=p.useState("name"),[y,N]=p.useState(!1),[S,b]=p.useState(null),[v,_]=p.useState([]),[P,O]=p.useState(!1),D=e.filter(E=>{var ae,q,ve;const B=((ae=E.name)==null?void 0:ae.toLowerCase().includes(d.toLowerCase()))||((q=E.email)==null?void 0:q.toLowerCase().includes(d.toLowerCase()))||((ve=E.phone)==null?void 0:ve.toLowerCase().includes(d.toLowerCase())),U=h==="all"||E.department===h,X=x==="all"||(Array.isArray(E.role)?E.role.includes(x):E.role===x);return B&&U&&X}).sort((E,B)=>{switch(w){case"name":return(E.name||"").localeCompare(B.name||"");case"department":return(E.department||"").localeCompare(B.department||"");case"role":const U=Array.isArray(E.role)?E.role[0]:E.role||"",X=Array.isArray(B.role)?B.role[0]:B.role||"";return U.localeCompare(X);case"email":return(E.email||"").localeCompare(B.email||"");default:return 0}}),A=["all",...new Set(e.map(E=>E.department).filter(Boolean))],T=["all",...new Set(e.flatMap(E=>Array.isArray(E.role)?E.role:[E.role]).filter(Boolean))],L=E=>Array.isArray(E.role)?E.role[0]||"Employee":E.role||"Employee",C=E=>{const B={Manager:"bg-purple-100 text-purple-800",Head:"bg-red-100 text-red-800",Lead:"bg-blue-100 text-blue-800",Senior:"bg-green-100 text-green-800",Executive:"bg-yellow-100 text-yellow-800",Specialist:"bg-indigo-100 text-indigo-800",Developer:"bg-cyan-100 text-cyan-800",Designer:"bg-pink-100 text-pink-800",Writer:"bg-orange-100 text-orange-800",Intern:"bg-gray-100 text-gray-800",Freelancer:"bg-teal-100 text-teal-800"};for(const[U,X]of Object.entries(B))if(E.includes(U))return X;return"bg-gray-100 text-gray-800"},F=E=>{E.email?(window.open(`mailto:${E.email}`,"_blank"),c(`Opening email to ${E.name}`,"info")):c("No email address available","warning")},R=E=>{E.phone?(window.open(`tel:${E.phone}`,"_blank"),c(`Calling ${E.name}`,"info")):c("No phone number available","warning")},K=E=>{c(`Message functionality for ${E.name} - would open messaging interface`,"info")},M=()=>{N(!0)},I=E=>{b(E)},H=async E=>{if(window.confirm("Are you sure you want to delete this employee?"))try{const{error:B}=await l.from("employees").delete().eq("id",E);if(B)throw B;s(E),c("Employee deleted successfully","success")}catch(B){console.error("Error deleting employee:",B),c("Failed to delete employee","error")}},Y=E=>{_(B=>B.includes(E)?B.filter(U=>U!==E):[...B,E])},z=()=>{v.length===D.length?_([]):_(D.map(E=>E.id))},G=()=>{const E=D.filter(B=>v.includes(B.id)&&B.email).map(B=>B.email).join(",");E?(window.open(`mailto:${E}`,"_blank"),c(`Opening email to ${v.length} employees`,"info")):c("No email addresses available for selected employees","warning")},V=async()=>{if(window.confirm(`Are you sure you want to delete ${v.length} employees?`))try{const{error:E}=await l.from("employees").delete().in("id",v);if(E)throw E;v.forEach(B=>s(B)),_([]),c(`${v.length} employees deleted successfully`,"success")}catch(E){console.error("Error deleting employees:",E),c("Failed to delete employees","error")}},Z=()=>["super_admin","hr","manager"].includes(o)||(i==null?void 0:i.user_category)==="admin",ue=()=>["super_admin","hr"].includes(o)||(i==null?void 0:i.user_category)==="admin";return t?r.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded mb-6 w-64"}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[...Array(4)].map((E,B)=>r.jsx("div",{className:"h-10 bg-gray-200 rounded"},B))})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((E,B)=>r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[r.jsx("div",{className:"h-16 bg-gray-200 rounded mb-4"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]},B))})]})})}):r.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Employee Directory"}),r.jsxs("p",{className:"text-gray-600 mt-1",children:[D.length," of ",e.length," employees",v.length>0&&r.jsxs("span",{className:"ml-2 text-blue-600",children:["(",v.length," selected)"]})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[v.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:G,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors flex items-center gap-2",children:"📧 Email Selected"}),ue()&&r.jsx("button",{onClick:V,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors flex items-center gap-2",children:"🗑️ Delete Selected"}),r.jsx("button",{onClick:()=>_([]),className:"px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg transition-colors",children:"Clear Selection"})]}),Z()&&r.jsx("button",{onClick:M,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center gap-2",children:"+ Add Employee"}),r.jsx("button",{onClick:()=>u.navigateToHome(),className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",children:"← Back to Dashboard"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"flex items-center gap-4",children:r.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[r.jsx("input",{type:"checkbox",checked:v.length===D.length&&D.length>0,onChange:z,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),"Select All (",D.length,")"]})}),r.jsx("button",{onClick:()=>{m(""),f("all"),g("all"),j("name")},className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded transition-colors",children:"Clear Filters"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),r.jsx("input",{type:"text",placeholder:"Name, email, or phone...",value:d,onChange:E=>m(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),r.jsx("select",{value:h,onChange:E=>f(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:A.map(E=>r.jsx("option",{value:E,children:E==="all"?"All Departments":E},E))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),r.jsx("select",{value:x,onChange:E=>g(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:T.map(E=>r.jsx("option",{value:E,children:E==="all"?"All Roles":E},E))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),r.jsxs("select",{value:w,onChange:E=>j(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"name",children:"Name"}),r.jsx("option",{value:"department",children:"Department"}),r.jsx("option",{value:"role",children:"Role"}),r.jsx("option",{value:"email",children:"Email"})]})]})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:D.map((E,B)=>{const U=L(E),X=C(U);return r.jsx("div",{className:`bg-white rounded-xl shadow-sm border hover:shadow-md transition-shadow ${v.includes(E.id)?"ring-2 ring-blue-500 border-blue-500":""}`,children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("input",{type:"checkbox",checked:v.includes(E.id),onChange:()=>Y(E.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 mt-1"}),r.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-lg",children:(E.name||"U").charAt(0).toUpperCase()}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:E.name||"Unknown"}),r.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${X}`,children:U})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>F(E),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Send Email",children:"📧"}),r.jsx("button",{onClick:()=>R(E),className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Call",children:"📞"}),r.jsx("button",{onClick:()=>K(E),className:"p-2 text-gray-400 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"Send Message",children:"💬"}),Z()&&r.jsx("button",{onClick:()=>I(E),className:"p-2 text-gray-400 hover:text-yellow-600 hover:bg-yellow-50 rounded-lg transition-colors",title:"Edit Employee",children:"✏️"}),ue()&&r.jsx("button",{onClick:()=>H(E.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Employee",children:"🗑️"})]})]}),r.jsxs("div",{className:"space-y-3",children:[E.department&&r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx("span",{className:"w-5 h-5 mr-2",children:"🏢"}),r.jsx("span",{children:E.department})]}),E.email&&r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx("span",{className:"w-5 h-5 mr-2",children:"📧"}),r.jsx("a",{href:`mailto:${E.email}`,className:"hover:text-blue-600 transition-colors",children:E.email})]}),E.phone&&r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx("span",{className:"w-5 h-5 mr-2",children:"📞"}),r.jsx("a",{href:`tel:${E.phone}`,className:"hover:text-blue-600 transition-colors",children:E.phone})]}),Array.isArray(E.role)&&E.role.length>1&&r.jsxs("div",{className:"flex items-start text-sm text-gray-600",children:[r.jsx("span",{className:"w-5 h-5 mr-2 mt-0.5",children:"👥"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:E.role.slice(1).map((ae,q)=>r.jsx("span",{className:"inline-block px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:ae},q))})]}),E.status&&r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx("span",{className:"w-5 h-5 mr-2",children:"📊"}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${E.status==="active"?"bg-green-100 text-green-800":E.status==="inactive"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:E.status.charAt(0).toUpperCase()+E.status.slice(1)})]})]})]})},E.id||B)})}),D.length===0&&r.jsx("div",{className:"text-center py-12",children:e.length===0?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"text-6xl mb-4",children:"👥"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No employees found"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Get started by adding your first employee to the directory."}),Z()&&r.jsx("button",{onClick:M,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add Your First Employee"})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No employees match your filters"}),r.jsx("p",{className:"text-gray-600",children:"Try adjusting your search criteria or filters."})]})})]})})},uM=()=>{const{employees:e,loading:t}=Aa(),{user:n,role:a}=Ze(),s=bf(),[i,o]=p.useState("current"),[l,c]=p.useState("all"),[u,d]=p.useState("score"),[m,h]=p.useState("desc"),[f,x]=p.useState("cards"),g=v=>{const _=65+Math.random()*30,P={productivity:Math.round(_+(Math.random()-.5)*20),quality:Math.round(_+(Math.random()-.5)*15),collaboration:Math.round(_+(Math.random()-.5)*25),innovation:Math.round(_+(Math.random()-.5)*30),leadership:Math.round(_+(Math.random()-.5)*20)};Object.keys(P).forEach(D=>{P[D]=Math.max(0,Math.min(100,P[D]))});const O=Math.round(P.productivity*.3+P.quality*.25+P.collaboration*.2+P.innovation*.15+P.leadership*.1);return{...P,overall:O,trend:Math.random()>.5?"up":Math.random()>.3?"down":"stable",lastUpdated:new Date(Date.now()-Math.random()*30*24*60*60*1e3)}},j=e.map(v=>({...v,performance:g()})).filter(v=>l==="all"||v.department===l).sort((v,_)=>{let P,O;switch(u){case"score":P=v.performance.overall,O=_.performance.overall;break;case"name":return P=v.name||"",O=_.name||"",m==="asc"?P.localeCompare(O):O.localeCompare(P);case"department":return P=v.department||"",O=_.department||"",m==="asc"?P.localeCompare(O):O.localeCompare(P);case"productivity":P=v.performance.productivity,O=_.performance.productivity;break;case"quality":P=v.performance.quality,O=_.performance.quality;break;default:return 0}return m==="asc"?P-O:O-P}),y=["all",...new Set(e.map(v=>v.department).filter(Boolean))],N=v=>v>=90?"text-green-600 bg-green-50":v>=80?"text-blue-600 bg-blue-50":v>=70?"text-yellow-600 bg-yellow-50":v>=60?"text-orange-600 bg-orange-50":"text-red-600 bg-red-50",S=v=>{switch(v){case"up":return"📈";case"down":return"📉";case"stable":return"➡️";default:return"➡️"}},b=y.slice(1).map(v=>{const _=j.filter(O=>O.department===v),P=_.length>0?Math.round(_.reduce((O,D)=>O+D.performance.overall,0)/_.length):0;return{department:v,average:P,count:_.length}}).sort((v,_)=>_.average-v.average);return t?r.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded mb-6 w-64"}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[...Array(4)].map((v,_)=>r.jsx("div",{className:"h-10 bg-gray-200 rounded"},_))})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((v,_)=>r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[r.jsx("div",{className:"h-20 bg-gray-200 rounded mb-4"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]},_))})]})})}):r.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Performance Scoring"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Track and analyze employee performance metrics"})]}),r.jsx("button",{onClick:()=>s.navigateToHome(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Back to Dashboard"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Department Performance Overview"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:b.map((v,_)=>r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"font-medium text-gray-900",children:v.department}),r.jsx("span",{className:`px-2 py-1 rounded-full text-sm font-medium ${N(v.average)}`,children:v.average})]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[v.count," employees"]}),r.jsx("div",{className:"mt-2 bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${v.average}%`}})})]},v.department))})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Period"}),r.jsxs("select",{value:i,onChange:v=>o(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"current",children:"Current Quarter"}),r.jsx("option",{value:"last",children:"Last Quarter"}),r.jsx("option",{value:"ytd",children:"Year to Date"}),r.jsx("option",{value:"annual",children:"Annual"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),r.jsx("select",{value:l,onChange:v=>c(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:y.map(v=>r.jsx("option",{value:v,children:v==="all"?"All Departments":v},v))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),r.jsxs("select",{value:u,onChange:v=>d(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"score",children:"Overall Score"}),r.jsx("option",{value:"name",children:"Name"}),r.jsx("option",{value:"department",children:"Department"}),r.jsx("option",{value:"productivity",children:"Productivity"}),r.jsx("option",{value:"quality",children:"Quality"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order"}),r.jsxs("select",{value:m,onChange:v=>h(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"desc",children:"High to Low"}),r.jsx("option",{value:"asc",children:"Low to High"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"View"}),r.jsxs("div",{className:"flex rounded-lg border border-gray-300 overflow-hidden",children:[r.jsx("button",{onClick:()=>x("cards"),className:`flex-1 px-3 py-2 text-sm font-medium transition-colors ${f==="cards"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Cards"}),r.jsx("button",{onClick:()=>x("table"),className:`flex-1 px-3 py-2 text-sm font-medium transition-colors ${f==="table"?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Table"})]})]})]})}),f==="cards"?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map((v,_)=>{const P=v.performance,O=N(P.overall);return r.jsx("div",{className:"bg-white rounded-xl shadow-sm border hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-lg",children:(v.name||"U").charAt(0).toUpperCase()}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:v.name||"Unknown"}),r.jsx("p",{className:"text-sm text-gray-600",children:v.department})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:`text-2xl font-bold ${O} px-3 py-1 rounded-lg`,children:P.overall}),r.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[S(P.trend)," ",P.trend]})]})]}),r.jsx("div",{className:"space-y-3",children:[{key:"productivity",label:"Productivity",icon:"⚡"},{key:"quality",label:"Quality",icon:"⭐"},{key:"collaboration",label:"Collaboration",icon:"🤝"},{key:"innovation",label:"Innovation",icon:"💡"},{key:"leadership",label:"Leadership",icon:"👑"}].map(D=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm",children:D.icon}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:D.label})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${P[D.key]}%`}})}),r.jsx("span",{className:"text-sm font-medium text-gray-900 w-8 text-right",children:P[D.key]})]})]},D.key))}),r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:r.jsxs("p",{className:"text-xs text-gray-500",children:["Last updated: ",P.lastUpdated.toLocaleDateString()]})})]})},v.id||_)})}):r.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Overall Score"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Productivity"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quality"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Collaboration"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Innovation"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Leadership"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trend"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map((v,_)=>{const P=v.performance,O=N(P.overall);return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:(v.name||"U").charAt(0).toUpperCase()}),r.jsx("div",{className:"ml-3",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:v.name||"Unknown"})})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:v.department}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-sm font-semibold rounded-full ${O}`,children:P.overall})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P.productivity}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P.quality}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P.collaboration}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P.innovation}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P.leadership}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[S(P.trend)," ",P.trend]})]},v.id||_)})})]})})}),j.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-6xl mb-4",children:"📊"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No performance data found"}),r.jsx("p",{className:"text-gray-600",children:"Try adjusting your filters or check back later."})]})]})})},mM=()=>{const e=si(),{user:t,updateProfile:n}=Ze(),{notify:a}=Oe(),{updateEmployee:s}=Aa(),[i,o]=p.useState(!1),[l,c]=p.useState(!0),[u,d]=p.useState({name:"",email:"",phone:"",department:"",role:"",bio:"",skills:"",experience:"",location:"",timezone:"",avatar:"",socialLinks:{linkedin:"",twitter:"",github:"",portfolio:""},preferences:{emailNotifications:!0,pushNotifications:!0,darkMode:!1,language:"en"}}),m=xf,h=["Manager","Social Media Manager","YouTube SEO","Web Developer","Graphic Designer","Freelancer","Intern","Operations Head","Accountant","Sales Representative","HR Manager","Super Admin"],f=["UTC-12:00","UTC-11:00","UTC-10:00","UTC-09:00","UTC-08:00","UTC-07:00","UTC-06:00","UTC-05:00","UTC-04:00","UTC-03:00","UTC-02:00","UTC-01:00","UTC+00:00","UTC+01:00","UTC+02:00","UTC+03:00","UTC+04:00","UTC+05:00","UTC+06:00","UTC+07:00","UTC+08:00","UTC+09:00","UTC+10:00","UTC+11:00","UTC+12:00"];p.useEffect(()=>{var y,N,S,b,v,_,P,O;t&&(d({name:t.name||"",email:t.email||"",phone:t.phone||"",department:t.department||"",role:t.role||"",bio:t.bio||"",skills:Array.isArray(t.skills)?t.skills.join(", "):t.skills||"",experience:t.experience||"",location:t.location||"",timezone:t.timezone||"UTC+00:00",avatar:t.avatar||"",socialLinks:{linkedin:((y=t.socialLinks)==null?void 0:y.linkedin)||"",twitter:((N=t.socialLinks)==null?void 0:N.twitter)||"",github:((S=t.socialLinks)==null?void 0:S.github)||"",portfolio:((b=t.socialLinks)==null?void 0:b.portfolio)||""},preferences:{emailNotifications:((v=t.preferences)==null?void 0:v.emailNotifications)??!0,pushNotifications:((_=t.preferences)==null?void 0:_.pushNotifications)??!0,darkMode:((P=t.preferences)==null?void 0:P.darkMode)??!1,language:((O=t.preferences)==null?void 0:O.language)||"en"}}),c(!1))},[t]);const x=(y,N)=>{d(S=>({...S,[y]:N}))},g=(y,N,S)=>{d(b=>({...b,[y]:{...b[y],[N]:S}}))},w=async y=>{y.preventDefault(),o(!0);try{if(!u.name.trim()||!u.email.trim())throw new Error("Name and email are required");const N={...u,skills:u.skills.split(",").map(S=>S.trim()).filter(Boolean),updatedAt:new Date().toISOString()};await n(N),a({title:"Profile Updated",message:"Profile has been successfully updated",type:"success"}),e(-1)}catch(N){a({title:"Update Failed",message:N.message||"Failed to update profile",type:"error"})}finally{o(!1)}},j=()=>{e(-1)};return l?r.jsx("div",{className:"container mx-auto py-8 px-4",children:r.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-4xl mx-auto",children:r.jsx("div",{className:"flex justify-center items-center py-16",children:r.jsx(Ee,{size:"large",showText:!0,text:"Loading profile data..."})})})}):r.jsx("div",{className:"container mx-auto py-8 px-4",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-4xl mx-auto",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-200 dark:border-slate-700",children:[r.jsx("h2",{className:"text-2xl font-bold text-brand-text",children:"Edit Profile"}),r.jsx("button",{onClick:j,className:"text-slate-400 hover:text-slate-600 text-2xl",children:"×"})]}),r.jsxs("form",{onSubmit:w,className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Name *"}),r.jsx("input",{type:"text",value:u.name,onChange:y=>x("name",y.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Email *"}),r.jsx("input",{type:"email",value:u.email,onChange:y=>x("email",y.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Phone"}),r.jsx("input",{type:"tel",value:u.phone,onChange:y=>x("phone",y.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Location"}),r.jsx("input",{type:"text",value:u.location,onChange:y=>x("location",y.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"City, Country"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Department"}),r.jsxs("select",{value:u.department,onChange:y=>x("department",y.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Select Department"}),m.map(y=>r.jsx("option",{value:y,children:y},y))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Role"}),r.jsxs("select",{value:u.role,onChange:y=>x("role",y.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Select Role"}),h.map(y=>r.jsx("option",{value:y,children:y},y))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Timezone"}),r.jsx("select",{value:u.timezone,onChange:y=>x("timezone",y.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:f.map(y=>r.jsx("option",{value:y,children:y},y))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Avatar URL"}),r.jsx("input",{type:"url",value:u.avatar,onChange:y=>x("avatar",y.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://example.com/avatar.jpg"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Bio"}),r.jsx("textarea",{value:u.bio,onChange:y=>x("bio",y.target.value),rows:4,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Tell us about yourself..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Experience"}),r.jsx("textarea",{value:u.experience,onChange:y=>x("experience",y.target.value),rows:4,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe your work experience..."})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Skills"}),r.jsx("input",{type:"text",value:u.skills,onChange:y=>x("skills",y.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"JavaScript, React, Node.js, etc. (comma-separated)"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Separate skills with commas"})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-brand-text mb-4",children:"Social Links"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"LinkedIn"}),r.jsx("input",{type:"url",value:u.socialLinks.linkedin,onChange:y=>g("socialLinks","linkedin",y.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://linkedin.com/in/username"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Twitter"}),r.jsx("input",{type:"url",value:u.socialLinks.twitter,onChange:y=>g("socialLinks","twitter",y.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://twitter.com/username"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"GitHub"}),r.jsx("input",{type:"url",value:u.socialLinks.github,onChange:y=>g("socialLinks","github",y.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://github.com/username"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Portfolio"}),r.jsx("input",{type:"url",value:u.socialLinks.portfolio,onChange:y=>g("socialLinks","portfolio",y.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://yourportfolio.com"})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-brand-text mb-4",children:"Preferences"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"emailNotifications",checked:u.preferences.emailNotifications,onChange:y=>g("preferences","emailNotifications",y.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsx("label",{htmlFor:"emailNotifications",className:"ml-2 block text-sm text-gray-700",children:"Email Notifications"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"pushNotifications",checked:u.preferences.pushNotifications,onChange:y=>g("preferences","pushNotifications",y.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsx("label",{htmlFor:"pushNotifications",className:"ml-2 block text-sm text-gray-700",children:"Push Notifications"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"darkMode",checked:u.preferences.darkMode,onChange:y=>g("preferences","darkMode",y.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsx("label",{htmlFor:"darkMode",className:"ml-2 block text-sm text-gray-700",children:"Dark Mode"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Language"}),r.jsxs("select",{value:u.preferences.language,onChange:y=>g("preferences","language",y.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"en",children:"English"}),r.jsx("option",{value:"es",children:"Spanish"}),r.jsx("option",{value:"fr",children:"French"}),r.jsx("option",{value:"de",children:"German"}),r.jsx("option",{value:"it",children:"Italian"}),r.jsx("option",{value:"pt",children:"Portuguese"})]})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-200 dark:border-slate-700",children:[r.jsx("button",{type:"button",onClick:j,className:"px-6 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:i,className:"btn-brand-primary px-6 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Saving...":"Save Changes"})]})]})]})})},hM=({currentUser:e,onNavigate:t})=>{const n=Ie(),[a,s]=p.useState([]),[i,o]=p.useState([]),[l,c]=p.useState([]),[u,d]=p.useState(!0),[m,h]=p.useState("activities"),[f,x]=p.useState("all"),[g,w]=p.useState("desc");p.useEffect(()=>{e!=null&&e.id&&(j(),y(),N())},[e]);const j=async()=>{try{const{data:A,error:T}=await n.from("arcade_activities").select("*").eq("employee_id",e.id).order("created_at",{ascending:!1});if(T){console.error("Error fetching activities:",T);return}s(A||[])}catch(A){console.error("Error:",A)}},y=async()=>{try{const{data:A,error:T}=await n.from("arcade_redemptions").select("*").eq("employee_id",e.id).order("created_at",{ascending:!1});if(T){console.error("Error fetching redemptions:",T);return}o(A||[])}catch(A){console.error("Error:",A)}},N=async()=>{try{const{data:A,error:T}=await n.from("arcade_audit_log").select("*").eq("employee_id",e.id).order("created_at",{ascending:!1});if(T){console.error("Error fetching audit log:",T);return}c(A||[])}catch(A){console.error("Error:",A)}finally{d(!1)}},S=A=>{const T={pending:"bg-gray-100 text-gray-800",approved:"bg-gray-100 text-gray-800",rejected:"bg-gray-100 text-gray-800",fulfilled:"bg-gray-100 text-gray-800"};return r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${T[A]||"bg-gray-100 text-gray-800"}`,children:A.charAt(0).toUpperCase()+A.slice(1)})},b=(A,T)=>{const L={client_engagement:"Client Engagement",content_creation:"Content Creation",attendance:"Attendance",performance:"Performance",polls:"Poll Performance"};return{whatsapp_appreciation:"WhatsApp Appreciation",google_review:"Google Review",video_testimonial:"Video Testimonial",client_referral:"Client Referral",bp_reel:"BP Reel",full_video:"Full Video",monthly_attendance:"100% Monthly Attendance",employee_referral:"Employee Referral",tactical_goals:"Tactical Goals",strategic_goals:"Strategic Goals",poll_first:"Poll - 1st Place",poll_second:"Poll - 2nd Place",poll_third:"Poll - 3rd Place"}[T]||`${L[A]||A} - ${T}`},v=()=>{let A=a;return f!=="all"&&(A=a.filter(T=>T.status===f)),A.sort((T,L)=>{const C=new Date(T.created_at),F=new Date(L.created_at);return g==="desc"?F-C:C-F})},_=()=>{let A=i;return f!=="all"&&(A=i.filter(T=>T.status===f)),A.sort((T,L)=>{const C=new Date(T.created_at),F=new Date(L.created_at);return g==="desc"?F-C:C-F})},P=()=>l.sort((A,T)=>{const L=new Date(A.created_at),C=new Date(T.created_at);return g==="desc"?C-L:L-C}),O=A=>({points_earned:"💰",points_deducted:"⚠️",points_redeemed:"🛍️"})[A]||"📝",D=A=>({points_earned:"text-green-600",points_deducted:"text-red-600",points_redeemed:"text-purple-600"})[A]||"text-gray-600";return u?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading your history..."})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"📊 Arcade History"}),r.jsx("p",{className:"text-gray-600",children:"Track your activities, redemptions, and point changes"})]}),r.jsx("button",{onClick:()=>t("arcade"),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"← Back to Arcade"})]})}),r.jsx("div",{className:"mb-6",children:r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"-mb-px flex space-x-8",children:[{key:"activities",label:"Activities",icon:"💰",count:a.length},{key:"redemptions",label:"Redemptions",icon:"🛍️",count:i.length},{key:"audit",label:"Audit Log",icon:"📋",count:l.length}].map(A=>r.jsxs("button",{onClick:()=>h(A.key),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${m===A.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx("span",{children:A.icon}),r.jsx("span",{children:A.label}),r.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs",children:A.count})]},A.key))})})}),(m==="activities"||m==="redemptions")&&r.jsxs("div",{className:"mb-6 flex items-center space-x-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Filter by Status"}),r.jsxs("select",{value:f,onChange:A=>x(A.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"rejected",children:"Rejected"}),m==="redemptions"&&r.jsx("option",{value:"fulfilled",children:"Fulfilled"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort Order"}),r.jsxs("select",{value:g,onChange:A=>w(A.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"desc",children:"Newest First"}),r.jsx("option",{value:"asc",children:"Oldest First"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg",children:[m==="activities"&&r.jsxs("div",{className:"p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Activity History"}),v().length>0?r.jsx("div",{className:"space-y-4",children:v().map(A=>r.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"font-medium text-gray-900",children:b(A.activity_type,A.activity_subtype)}),r.jsxs("span",{className:`font-bold ${A.status==="approved"?"text-green-600":"text-gray-600"}`,children:["+",A.points_earned," pts"]}),S(A.status)]}),r.jsx("p",{className:"text-gray-600 mb-2",children:A.description}),A.proof_url&&r.jsx("a",{href:A.proof_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm",children:"📎 View Proof"})]}),r.jsxs("div",{className:"text-right text-sm text-gray-500",children:[r.jsx("p",{children:new Date(A.created_at).toLocaleDateString()}),r.jsx("p",{children:new Date(A.created_at).toLocaleTimeString()}),A.approved_at&&r.jsxs("p",{className:"text-green-600 mt-1",children:["Approved: ",new Date(A.approved_at).toLocaleDateString()]})]})]})},A.id))}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"📝"}),r.jsx("p",{className:"text-gray-500 mb-2",children:"No activities found"}),r.jsx("p",{className:"text-sm text-gray-400",children:f==="all"?"Start earning points by logging activities!":`No ${f} activities found.`})]})]}),m==="redemptions"&&r.jsxs("div",{className:"p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Redemption History"}),_().length>0?r.jsx("div",{className:"space-y-4",children:_().map(A=>r.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("h3",{className:"font-medium text-gray-900",children:A.reward_name}),r.jsxs("span",{className:"font-bold text-purple-600",children:["-",A.points_required," pts"]}),S(A.status)]}),r.jsx("p",{className:"text-gray-600 mb-2",children:A.request_details}),r.jsxs("p",{className:"text-sm text-gray-500 capitalize",children:["Type: ",A.reward_type.replace("_"," ")]})]}),r.jsxs("div",{className:"text-right text-sm text-gray-500",children:[r.jsx("p",{children:new Date(A.created_at).toLocaleDateString()}),r.jsx("p",{children:new Date(A.created_at).toLocaleTimeString()}),A.approved_at&&r.jsxs("p",{className:"text-green-600 mt-1",children:["Approved: ",new Date(A.approved_at).toLocaleDateString()]}),A.fulfilled_at&&r.jsxs("p",{className:"text-blue-600 mt-1",children:["Fulfilled: ",new Date(A.fulfilled_at).toLocaleDateString()]})]})]})},A.id))}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"🛍️"}),r.jsx("p",{className:"text-gray-500 mb-2",children:"No redemptions found"}),r.jsx("p",{className:"text-sm text-gray-400",children:f==="all"?"Start redeeming your points for rewards!":`No ${f} redemptions found.`})]})]}),m==="audit"&&r.jsxs("div",{className:"p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Complete Audit Log"}),P().length>0?r.jsx("div",{className:"space-y-3",children:P().map(A=>r.jsx("div",{className:"border-l-4 border-gray-300 pl-4 py-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"text-xl",children:O(A.action_type)}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:A.action_type.replace("_"," ").replace(/\b\w/g,T=>T.toUpperCase())}),r.jsx("p",{className:"text-sm text-gray-600",children:A.description})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:`font-bold ${D(A.action_type)}`,children:[A.points_change>0?"+":"",A.points_change," pts"]}),r.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(A.created_at).toLocaleDateString()," ",new Date(A.created_at).toLocaleTimeString()]})]})]})},A.id))}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"📋"}),r.jsx("p",{className:"text-gray-500 mb-2",children:"No audit log entries found"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Point changes will appear here as they happen."})]})]})]}),r.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600 mb-2",children:a.filter(A=>A.status==="approved").length}),r.jsx("p",{className:"text-gray-600",children:"Approved Activities"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600 mb-2",children:i.filter(A=>A.status==="fulfilled").length}),r.jsx("p",{className:"text-gray-600",children:"Fulfilled Redemptions"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-2",children:a.filter(A=>A.status==="pending").length+i.filter(A=>A.status==="pending").length}),r.jsx("p",{className:"text-gray-600",children:"Pending Items"})]})]})]})})},fM=e=>{const t={pending:{color:"bg-yellow-100 text-yellow-800 border border-yellow-200",text:"Pending",icon:"⏳"},approved:{color:"bg-green-100 text-green-800 border border-green-200",text:"Approved",icon:"✅"},rejected:{color:"bg-red-100 text-red-800 border border-red-200",text:"Rejected",icon:"❌"}},n=t[e]||t.pending;return r.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-200 hover:shadow-md hover:scale-105 cursor-default ${n.color}`,children:[r.jsx("span",{className:"text-xs",children:n.icon}),n.text]})},pM=(e,t,n)=>{const a=n[e];if(!a)return t;const s=a.activities.find(i=>i.value===t);return s?s.label:t},gM=e=>({client_engagement:"🤝",content_creation:"🎬",attendance:"📅",performance:"🎯",polls:"🏆"})[e]||"📝",xM=({currentUser:e,onNavigate:t})=>{var D;const n=Ie(),[a,s]=p.useState({activity_type:"",activity_subtype:"",description:"",proof_url:""}),[i,o]=p.useState(""),[l,c]=p.useState(!1),[u,d]=p.useState({type:"",text:""}),[m,h]=p.useState([]),[f,x]=p.useState(!1),[g,w]=p.useState(0),[j,y]=p.useState(!1),N={client_engagement:{name:"Client Engagement",icon:"🤝",activities:[{value:"client_call",label:"Client Call",points:10},{value:"client_meeting",label:"Client Meeting",points:15},{value:"client_presentation",label:"Client Presentation",points:20},{value:"client_feedback",label:"Client Feedback Collection",points:8},{value:"client_onboarding",label:"Client Onboarding",points:25}]},content_creation:{name:"Content Creation",icon:"🎬",activities:[{value:"blog_post",label:"Blog Post",points:15},{value:"social_media_post",label:"Social Media Post",points:5},{value:"video_content",label:"Video Content",points:20},{value:"graphic_design",label:"Graphic Design",points:12},{value:"copywriting",label:"Copywriting",points:10}]},attendance:{name:"Attendance & Participation",icon:"📅",activities:[{value:"daily_standup",label:"Daily Standup",points:3},{value:"team_meeting",label:"Team Meeting",points:5},{value:"training_session",label:"Training Session",points:8},{value:"workshop_attendance",label:"Workshop Attendance",points:10},{value:"conference_call",label:"Conference Call",points:6}]},performance:{name:"Performance & Goals",icon:"🎯",activities:[{value:"goal_completion",label:"Goal Completion",points:25},{value:"deadline_met",label:"Deadline Met",points:15},{value:"quality_work",label:"Quality Work Delivery",points:20},{value:"process_improvement",label:"Process Improvement",points:30},{value:"mentoring",label:"Mentoring Others",points:18}]},polls:{name:"Polls & Surveys",icon:"🏆",activities:[{value:"poll_participation",label:"Poll Participation",points:2},{value:"survey_completion",label:"Survey Completion",points:5},{value:"feedback_submission",label:"Feedback Submission",points:8},{value:"idea_submission",label:"Idea Submission",points:12},{value:"vote_casting",label:"Vote Casting",points:3}]}},S=async()=>{if(e!=null&&e.id){x(!0);try{const{data:A,error:T}=await n.from("arcade_activities").select("*").eq("employee_id",e.id).order("created_at",{ascending:!1}).limit(10);if(T)throw T;h(A||[]);const{data:L,error:C}=await n.from("arcade_points").select("total_points").eq("employee_id",e.id).single();if(C&&C.code!=="PGRST116")throw C;w((L==null?void 0:L.total_points)||0)}catch(A){console.error("Error fetching user data:",A),d({type:"error",text:"Failed to load user data"})}finally{x(!1)}}};p.useEffect(()=>{S()},[e]);const b=A=>{o(A),s(T=>({...T,activity_type:A,activity_subtype:"",description:"",proof_url:""}))},v=A=>{s(T=>({...T,activity_subtype:A}))},_=(A,T)=>{s(L=>({...L,[A]:T}))},P=async A=>{var T;if(A.preventDefault(),!e){d({type:"error",text:"You must be logged in to submit activities."});return}if(!a.activity_type||!a.activity_subtype){d({type:"error",text:"Please select an activity category and type."});return}if(!a.description.trim()){d({type:"error",text:"Please provide a description of your activity."});return}c(!0),d({type:"",text:""});try{const L=await za(e.id,n);if(!L.eligible){d({type:"error",text:L.reason});return}const C=e5();C.valid||d({type:"warning",text:C.message});const F=await r5(e.id,a.activity_type,n);if(!F.allowed){d({type:"error",text:F.message});return}const R=XD(a);if(!R.valid){d({type:"error",text:R.message});return}const K=(T=N[a.activity_type])==null?void 0:T.activities.find(I=>I.value===a.activity_subtype);if(!K){d({type:"error",text:"Invalid activity selected."});return}const{error:M}=await n.from("arcade_activities").insert({employee_id:e.id,activity_type:a.activity_type,activity_subtype:a.activity_subtype,points_earned:K.points,description:a.description,proof_url:a.proof_url||null,status:"pending"});if(M)throw M;d({type:"success",text:`Activity submitted successfully! You'll earn ${K.points} points once approved.`}),s({activity_type:"",activity_subtype:"",description:"",proof_url:""}),o(""),await S(),y(!0)}catch(L){console.error("Error submitting activity:",L),d({type:"error",text:"Failed to submit activity. Please try again."})}finally{c(!1)}},O=(D=N[i])==null?void 0:D.activities.find(A=>A.value===a.activity_subtype);return e?r.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"💰 Earn Points"}),r.jsx("p",{className:"text-gray-600",children:"Log your activities and earn Arcade points!"}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Current Points: ",r.jsx("span",{className:"font-semibold text-blue-600",children:g})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>y(!j),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:j?"Hide History":"Show History"}),r.jsx("button",{onClick:()=>t==null?void 0:t("arcade"),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Back to Arcade"})]})]})}),j&&r.jsxs("div",{className:"mb-8 bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Activities"}),r.jsx("button",{onClick:S,disabled:f,className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors disabled:opacity-50",children:f?"Loading...":"Refresh"})]}),f?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Loading activities..."})]}):m.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-gray-600",children:"No activities submitted yet."}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Submit your first activity below!"})]}):r.jsx("div",{className:"space-y-3",children:m.map(A=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h3",{className:"font-medium text-gray-900",children:pM(A.activity_type,A.activity_subtype,N)}),fM(A.status)]}),r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:A.description}),r.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[r.jsxs("span",{children:["Points: ",A.points_earned]}),r.jsxs("span",{children:["Submitted: ",new Date(A.created_at).toLocaleDateString()]}),A.proof_url&&r.jsx("a",{href:A.proof_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"View Proof"})]})]}),r.jsx("div",{className:"ml-4",children:r.jsx("span",{className:"text-2xl",children:gM(A.activity_type)})})]}),A.status==="pending"&&r.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:"⏳ Awaiting approval"}),A.status==="approved"&&r.jsx("div",{className:"text-xs text-green-600 mt-1",children:"✅ Approved"}),A.status==="rejected"&&r.jsx("div",{className:"text-xs text-red-600 mt-1",children:"❌ Rejected"})]},A.id))})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[u.text&&r.jsx("div",{className:`mb-6 p-4 rounded-lg ${u.type==="success"?"bg-green-50 text-green-800 border border-green-200":u.type==="error"?"bg-red-50 text-red-800 border border-red-200":"bg-yellow-50 text-yellow-800 border border-yellow-200"}`,children:u.text}),r.jsxs("form",{onSubmit:P,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Activity Category"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Object.entries(N).map(([A,T])=>r.jsx("button",{type:"button",onClick:()=>b(A),className:`p-4 rounded-lg border-2 transition-all text-left ${i===A?"border-blue-500 bg-blue-50 text-blue-900":"border-gray-200 hover:border-gray-300 bg-white"}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-2xl",children:T.icon}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:T.name}),r.jsxs("div",{className:"text-sm text-gray-500",children:[T.activities.length," activities"]})]})]})},A))})]}),i&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Specific Activity"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:N[i].activities.map(A=>r.jsxs("button",{type:"button",onClick:()=>v(A.value),className:`p-3 rounded-lg border-2 transition-all text-left ${a.activity_subtype===A.value?"border-blue-500 bg-blue-50 text-blue-900":"border-gray-200 hover:border-gray-300 bg-white"}`,children:[r.jsx("div",{className:"font-medium",children:A.label}),r.jsxs("div",{className:"text-sm text-green-600 font-medium",children:["+",A.points," points"]})]},A.value))})]}),O&&r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-green-600 font-medium",children:"Points to earn:"}),r.jsxs("span",{className:"text-2xl font-bold text-green-700",children:["+",O.points]})]})}),a.activity_subtype&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Activity Description *"}),r.jsx("textarea",{value:a.description,onChange:A=>_("description",A.target.value),placeholder:"Describe what you did, when you did it, and any relevant details...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:4,required:!0})]}),a.activity_subtype&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Proof URL (optional)"}),r.jsx("input",{type:"url",value:a.proof_url,onChange:A=>_("proof_url",A.target.value),placeholder:"https://example.com/proof-of-activity",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Link to screenshots, documents, or other proof of your activity"})]}),r.jsx("div",{className:"pt-4",children:r.jsx("button",{type:"submit",disabled:l||!a.activity_subtype||!a.description.trim(),className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:l?"Submitting...":"Submit Activity"})})]})]})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Required"}),r.jsx("p",{className:"text-gray-600",children:"Please log in to access the Arcade Earn Points system."})]})})},bM=({currentUser:e,onNavigate:t})=>{const n=Ie(),[a,s]=p.useState([]),[i,o]=p.useState(0),[l,c]=p.useState(null),[u,d]=p.useState(""),[m,h]=p.useState(!0),[f,x]=p.useState(!1),[g,w]=p.useState(!1),[j,y]=p.useState(""),[N,S]=p.useState("individual");p.useEffect(()=>{e!=null&&e.id&&(b(),v())},[e]);const b=async()=>{try{const{data:A,error:T}=await n.from("arcade_rewards").select("*").eq("availability_status","available").order("points_required",{ascending:!0});if(T){console.error("Error fetching rewards:",T),y("Failed to load rewards"),h(!1);return}s(A||[])}catch(A){console.error("Error:",A),y("Failed to load rewards"),h(!1)}},v=async()=>{try{const{data:A,error:T}=await n.from("arcade_points").select("current_points").eq("employee_id",e.id).single();if(T&&T.code!=="PGRST116"){console.error("Error fetching points:",T);return}o((A==null?void 0:A.current_points)||0)}catch(A){console.error("Error:",A)}finally{h(!1)}},_=async()=>{if(l){x(!0),y("");try{const A=za(e);if(!A.isEligible){y(A.reason),x(!1);return}const T={reward_id:l.id,points_required:l.points_required,reward_type:l.reward_type,manager_approval_requested:l.reward_name==="Work From Home (WFH)"},L=JD(T,i,e);if(!L.isValid){y(L.errors.join(". ")),x(!1);return}if(!u.trim()){y("Please provide request details"),x(!1);return}const{data:C}=await n.from("arcade_activities").select("points_earned, created_at").eq("employee_id",e.id).eq("status","approved").order("created_at",{ascending:!0}),F=QD(C||[]);F.hasExpiring&&console.warn(`Warning: ${F.expiringPoints} points will expire on ${F.expirationDate}`);const{data:R,error:K}=await n.from("arcade_redemptions").insert({employee_id:e.id,reward_type:l.reward_type,reward_name:l.reward_name,points_required:l.points_required,request_details:u.trim(),status:l.reward_name==="Work From Home (WFH)"?"pending_manager_approval":"pending"});if(K){console.error("Error submitting redemption:",K),y("Failed to submit redemption request. Please try again.");return}w(!0),c(null),d(""),v(),setTimeout(()=>w(!1),3e3)}catch(A){console.error("Error:",A),y("An unexpected error occurred. Please try again.")}finally{x(!1)}}},P=A=>a.filter(T=>T.reward_type===A),O=A=>i>=A,D=A=>({"Work From Home (WFH)":"🏠","Leave with Pay":"🌴","Movie Tickets (Pair)":"🎬","Lunch with Leader":"🍽️","Lunch for Two":"🥗","Software Purchase":"💻","Course Purchase":"📚","Netflix (3 Months)":"📺","Mystery Box":"🎁","Office Party":"🎉","One-day Trip":"🚌","Two-day Trip":"✈️","Board Game":"🎲","Gourmet Coffee/Tea Set":"☕","Bluetooth Accessories":"🎧","Gift Cards":"💳","Professional Development Tools":"🛠️","Wellness Products":"🧘","Entertainment Subscriptions":"🎮"})[A]||"🎁";return m?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading rewards..."})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"🛍️ Redeem Points"}),r.jsx("p",{className:"text-gray-600",children:"Spend your points on amazing rewards!"})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"bg-white px-4 py-2 rounded-lg shadow",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Your Points: "}),r.jsx("span",{className:"text-xl font-bold text-purple-600",children:i})]}),r.jsx("button",{onClick:()=>t("arcade"),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"← Back to Arcade"})]})]})}),g&&r.jsx("div",{className:"mb-6 bg-gray-100 border border-gray-400 text-gray-700 px-4 py-3 rounded-lg",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-green-500 mr-2",children:"✅"}),r.jsx("span",{children:"Redemption request submitted successfully! HR will review and approve it."})]})}),j&&r.jsx("div",{className:"mb-6 bg-gray-100 border border-gray-400 text-gray-700 px-4 py-3 rounded-lg",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-red-500 mr-2",children:"❌"}),r.jsx("span",{children:j})]})}),r.jsx("div",{className:"mb-8",children:r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"-mb-px flex space-x-8",children:[{key:"individual",label:"Individual Rewards",icon:"👤"},{key:"group",label:"Group Rewards",icon:"👥"},{key:"mystery_box",label:"Mystery Box Items",icon:"🎁"}].map(A=>r.jsxs("button",{onClick:()=>S(A.key),className:`py-2 px-1 border-b-2 font-medium text-sm ${N===A.key?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx("span",{className:"mr-2",children:A.icon}),A.label]},A.key))})})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:P(N).map(A=>{const T=O(A.points_required),C=!(A.reward_name==="Work From Home (WFH)")||i>=50;return r.jsxs("div",{className:`bg-white rounded-xl shadow-lg p-6 border-2 transition-all ${T&&C?"border-gray-200 hover:border-purple-300 hover:shadow-xl":"border-gray-200 opacity-60"}`,children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("div",{className:"text-4xl mb-2",children:D(A.reward_name)}),r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:A.reward_name}),r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsxs("span",{className:`text-2xl font-bold ${T&&C?"text-purple-600":"text-gray-400"}`,children:[A.points_required," pts"]}),!T&&r.jsxs("span",{className:"text-red-500 text-sm",children:["(Need ",A.points_required-i," more)"]})]})]}),A.description&&r.jsx("p",{className:"text-sm text-gray-600 mb-4 text-center",children:A.description}),A.special_requirements&&r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:r.jsxs("p",{className:"text-xs text-yellow-800",children:[r.jsx("span",{className:"font-medium",children:"Note:"})," ",A.special_requirements]})}),r.jsx("button",{onClick:()=>c(A),disabled:!T||!C,className:`w-full py-2 px-4 rounded-lg font-medium transition-colors ${T&&C?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:T&&C?"Redeem":"Insufficient Points"})]},A.id)})}),l&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"text-4xl mb-2",children:D(l.reward_name)}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:l.reward_name}),r.jsxs("p",{className:"text-purple-600 font-bold text-lg",children:[l.points_required," points"]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{htmlFor:"request_details",className:"block text-sm font-medium text-gray-700 mb-2",children:"Request Details *"}),r.jsx("textarea",{id:"request_details",rows:4,value:u,onChange:A=>d(A.target.value),placeholder:"Please provide any specific details for your redemption request (e.g., preferred dates for WFH, movie preferences, etc.)...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",required:!0})]}),l.special_requirements&&r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-6",children:r.jsxs("p",{className:"text-sm text-yellow-800",children:[r.jsx("span",{className:"font-medium",children:"Requirements:"})," ",l.special_requirements]})}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsx("button",{onClick:()=>{c(null),d(""),y("")},className:"flex-1 py-2 px-4 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:_,disabled:f||!u.trim(),className:"flex-1 py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:f?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."]}):"Submit Request"})]})]})}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-3",children:"📋 Redemption Guidelines"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-800",children:[r.jsxs("ul",{className:"space-y-2",children:[r.jsx("li",{children:"• Points are non-transferable between employees"}),r.jsx("li",{children:"• All redemptions require HR approval"}),r.jsx("li",{children:"• Points are valid for one year from earning date"}),r.jsx("li",{children:"• WFH redemption requires manager approval"})]}),r.jsxs("ul",{className:"space-y-2",children:[r.jsx("li",{children:"• Group rewards require collective point contribution"}),r.jsx("li",{children:"• Redemptions subject to business conditions"}),r.jsx("li",{children:"• Mystery box items are randomly assigned"}),r.jsx("li",{children:"• Allow 2-5 business days for processing"})]})]})]})]})})},Hl=({children:e,onClick:t,loading:n=!1,disabled:a=!1,className:s="",loadingText:i="Loading...",variant:o="primary",size:l="medium",icon:c=null,loadingIcon:u=null,...d})=>{const[m,h]=p.useState(!1),f=n||m,x=a||f,g=async y=>{if(!(x||!t)){h(!0),y.target.style.transform="scale(0.98)";try{await t(y)}catch(N){console.error("Button click handler failed:",N)}finally{setTimeout(()=>{y.target.style.transform="scale(1)",h(!1)},150)}}},w=()=>f?u||r.jsx(Ee,{size:"small"}):c,j=()=>f&&i?i:e;return r.jsxs(Ly,{...d,onClick:g,disabled:x,loading:f,variant:o,size:l,className:s,children:[w(),j()]})},yM=()=>{const e=Ie(),{showToast:t}=Oe(),[n,a]=p.useState([]),[s,i]=p.useState([]),[o,l]=p.useState(!0),[c,u]=p.useState("last30days"),[d,m]=p.useState("all"),[h,f]=p.useState("all"),[x,g]=p.useState("csv");p.useEffect(()=>{w()},[]);const w=async()=>{l(!0);try{if(e){const{data:S,error:b}=await e.from("incentive_applications").select(`
            *,
            employees!inner(name, phone, department)
          `).order("created_at",{ascending:!1});b?console.error("Error loading applications:",b):a(S||[]);const{data:v,error:_}=await e.from("employees").select("*").eq("status","active");_?console.error("Error loading employees:",_):i(v||[])}else{const S=JSON.parse(localStorage.getItem("incentive_applications")||"[]"),b=JSON.parse(localStorage.getItem("employees")||"[]");a(S),i(b)}}catch(S){console.error("Error loading data:",S),t("Failed to load data","error")}finally{l(!1)}},j=p.useMemo(()=>{let S=n;d!=="all"&&(S=S.filter(_=>_.status===d)),h!=="all"&&(S=S.filter(_=>_.incentive_type===h));const b=new Date,v=new Date;switch(c){case"last7days":v.setDate(b.getDate()-7);break;case"last30days":v.setDate(b.getDate()-30);break;case"last90days":v.setDate(b.getDate()-90);break;case"thisyear":v.setFullYear(b.getFullYear(),0,1);break;default:return S}return S=S.filter(_=>new Date(_.created_at)>=v),S},[n,d,h,c]),y=p.useMemo(()=>{const S=j.length,b=j.filter(T=>T.status==="pending").length,v=j.filter(T=>T.status==="approved").length,_=j.filter(T=>T.status==="rejected").length,P=j.filter(T=>T.status==="disbursed").length,O=j.filter(T=>T.status==="disbursed").reduce((T,L)=>T+({hiring_recommendation:3e3,client_testimonial:1e3,promotional_video:500}[L.incentive_type]||0),0),D={hiring_recommendation:j.filter(T=>T.incentive_type==="hiring_recommendation").length,client_testimonial:j.filter(T=>T.incentive_type==="client_testimonial").length,promotional_video:j.filter(T=>T.incentive_type==="promotional_video").length},A={};return j.forEach(T=>{var C;const L=((C=T.employees)==null?void 0:C.department)||"Unknown";A[L]=(A[L]||0)+1}),{total:S,pending:b,approved:v,rejected:_,disbursed:P,totalDisbursed:O,byType:D,byDepartment:A,approvalRate:S>0?((v+P)/S*100).toFixed(1):0,avgProcessingTime:"2.5 days"}},[j]),N=async()=>{try{const S={hiring_recommendation:3e3,client_testimonial:1e3,promotional_video:500},b={title:"Employee Incentive Report",period:c.replace(/([A-Z])/g," $1").toLowerCase(),totalApplications:j.length,totalAmount:j.reduce((P,O)=>P+(S[O.incentive_type]||0),0),applications:j.map(P=>{var O,D,A,T,L;return{"Employee Name":((O=P.employees)==null?void 0:O.name)||P.employee_name||"N/A",Phone:((D=P.employees)==null?void 0:D.phone)||P.employee_phone||"N/A",Department:((A=P.employees)==null?void 0:A.department)||"N/A","Incentive Type":((T=P.incentive_type)==null?void 0:T.replace("_"," ").replace(/\b\w/g,C=>C.toUpperCase()))||"N/A","Amount (INR)":S[P.incentive_type]||0,Status:((L=P.status)==null?void 0:L.toUpperCase())||"N/A","Applied Date":new Date(P.created_at).toLocaleDateString(),"Approved Date":P.approved_at?new Date(P.approved_at).toLocaleDateString():"N/A","Disbursed Date":P.disbursement_date?new Date(P.disbursement_date).toLocaleDateString():"N/A","Disbursement Reference":P.disbursement_reference||"N/A"}})},v=xs.generateFilename("incentive-report"),_=await bs(b,x,"incentiveReport",v);_.success?t(_.message,"success"):t(_.message,"error")}catch(S){console.error("Export error:",S),t("Failed to export report","error")}};return o?r.jsxs("div",{className:"flex items-center justify-center h-64",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("span",{className:"ml-2 text-gray-600",children:"Loading incentive data..."})]}):r.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"💰 Incentive Reporting Dashboard"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Track and analyze employee incentive disbursements"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("select",{value:x,onChange:S=>g(S.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"csv",children:"Export CSV"}),r.jsx("option",{value:"pdf",children:"Export PDF"})]}),r.jsx(Hl,{onClick:N,variant:"primary",children:"📊 Export Report"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),r.jsxs("select",{value:c,onChange:S=>u(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"last7days",children:"Last 7 Days"}),r.jsx("option",{value:"last30days",children:"Last 30 Days"}),r.jsx("option",{value:"last90days",children:"Last 90 Days"}),r.jsx("option",{value:"thisyear",children:"This Year"}),r.jsx("option",{value:"all",children:"All Time"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),r.jsxs("select",{value:d,onChange:S=>m(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Statuses"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"rejected",children:"Rejected"}),r.jsx("option",{value:"disbursed",children:"Disbursed"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Incentive Type"}),r.jsxs("select",{value:h,onChange:S=>f(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"All Types"}),r.jsx("option",{value:"hiring_recommendation",children:"Hiring Recommendation (₹3,000)"}),r.jsx("option",{value:"client_testimonial",children:"Client Testimonial (₹1,000)"}),r.jsx("option",{value:"promotional_video",children:"Promotional Video (₹500)"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Applications"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.total})]}),r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-2xl",children:"📋"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Disbursed"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:y.disbursed})]}),r.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-2xl",children:"✅"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Disbursed"}),r.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["₹",y.totalDisbursed.toLocaleString()]})]}),r.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-2xl",children:"💰"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Approval Rate"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[y.approvalRate,"%"]})]}),r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-2xl",children:"📊"})})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"📈 Incentive Type Breakdown"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Hiring Recommendation (₹3,000)"}),r.jsx("span",{className:"font-semibold",children:y.byType.hiring_recommendation})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Client Testimonial (₹1,000)"}),r.jsx("span",{className:"font-semibold",children:y.byType.client_testimonial})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Promotional Video (₹500)"}),r.jsx("span",{className:"font-semibold",children:y.byType.promotional_video})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"🏢 Department Breakdown"}),r.jsx("div",{className:"space-y-4",children:Object.entries(y.byDepartment).map(([S,b])=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:S}),r.jsx("span",{className:"font-semibold",children:b})]},S))})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"📋 Incentive Applications"}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Showing ",j.length," applications"]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Incentive Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Applied Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Disbursed Date"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(S=>{var _,P,O,D,A;const b={hiring_recommendation:3e3,client_testimonial:1e3,promotional_video:500},v={pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",disbursed:"bg-purple-100 text-purple-800"};return r.jsxs("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:((_=S.employees)==null?void 0:_.name)||S.employee_name||"N/A"}),r.jsx("div",{className:"text-sm text-gray-500",children:((P=S.employees)==null?void 0:P.phone)||S.employee_phone||"N/A"})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((O=S.employees)==null?void 0:O.department)||"N/A"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((D=S.incentive_type)==null?void 0:D.replace("_"," ").replace(/\b\w/g,T=>T.toUpperCase()))||"N/A"}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["₹",(b[S.incentive_type]||0).toLocaleString()]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${v[S.status]||"bg-gray-100 text-gray-800"}`,children:((A=S.status)==null?void 0:A.toUpperCase())||"N/A"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(S.created_at).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:S.disbursement_date?new Date(S.disbursement_date).toLocaleDateString():"-"})]},S.id)})})]})}),j.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"📊"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No applications found"}),r.jsx("p",{className:"text-gray-600",children:"Try adjusting your filters to see more data."})]})]})]})},fs={hiring_recommendation:{name:"Full-time Hire Recommendation",amount:3e3,currency:"INR",description:"Recommend a candidate who gets hired full-time (eligible after 3 months)",eligibilityMonths:3,proofFields:["recommended_candidate_name","appointment_letter_url"]},client_testimonial:{name:"Client Video Testimonial",amount:1e3,currency:"INR (Amazon Coupon)",description:"Get a video testimonial from client posted on YouTube",eligibilityMonths:0,proofFields:["client_name","testimonial_youtube_url"]},promotional_video:{name:"Department Promotional Video",amount:500,currency:"INR",description:"Create an advertisement/promotional video for your department",eligibilityMonths:0,proofFields:["video_title","video_description","promotional_video_url"]}},vM=()=>{const{supabase:e}=Ie(),{showToast:t}=Oe(),{user:n}=Ze(),[a,s]=p.useState({incentive_type:"",recommended_candidate_name:"",appointment_letter_url:"",client_name:"",testimonial_youtube_url:"",video_title:"",video_description:"",promotional_video_url:""}),[i,o]=p.useState(null),[l,c]=p.useState(!1),[u,d]=p.useState([]);p.useEffect(()=>{n!=null&&n.email&&(m(),h())},[n]);const m=async()=>{try{const{data:y,error:N}=await e.from("employees").select("id, name, email, department, role").eq("email",n.email).single();if(N)throw N;o(y)}catch(y){console.error("Error fetching employee data:",y),t("Error loading employee information","error")}},h=async()=>{try{const{data:y,error:N}=await e.from("incentive_applications").select(`
          *,
          incentive_types!inner(type_name)
        `).eq("employee_email",n.email).order("created_at",{ascending:!1});if(N)throw N;d(y||[])}catch(y){console.error("Error fetching applications:",y)}},f=(y,N)=>{s(S=>({...S,[y]:N}))},x=()=>{var S;if(!a.incentive_type)return t("Please select an incentive type","error"),!1;const y=fs[a.incentive_type],N=y.proofFields;for(const b of N)if(!((S=a[b])!=null&&S.trim()))return t(`Please fill in all required fields for ${y.name}`,"error"),!1;return a.incentive_type==="client_testimonial"&&!/^(https?:\/\/)?(www\.)?(youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/.test(a.testimonial_youtube_url)?(t("Please enter a valid YouTube URL","error"),!1):a.incentive_type==="hiring_recommendation"&&a.appointment_letter_url&&!a.appointment_letter_url.includes("drive.google.com")?(t("Please provide a Google Drive link for the appointment letter","error"),!1):a.incentive_type==="promotional_video"&&a.promotional_video_url&&!a.promotional_video_url.includes("drive.google.com")?(t("Please provide a Google Drive link for the promotional video","error"),!1):!0},g=async y=>{if(y.preventDefault(),!(!x()||!i)){c(!0);try{const N={employee_id:i.id,employee_name:i.name,employee_email:i.email,department:i.department,incentive_type:a.incentive_type,...a.incentive_type==="hiring_recommendation"&&{recommended_candidate_name:a.recommended_candidate_name,appointment_letter_url:a.appointment_letter_url},...a.incentive_type==="client_testimonial"&&{client_name:a.client_name,testimonial_youtube_url:a.testimonial_youtube_url},...a.incentive_type==="promotional_video"&&{video_title:a.video_title,video_description:a.video_description,promotional_video_url:a.promotional_video_url}},{data:S,error:b}=await e.from("incentive_applications").insert([N]).select();if(b)throw b;t("Incentive application submitted successfully!","success"),s({incentive_type:"",recommended_candidate_name:"",appointment_letter_url:"",client_name:"",testimonial_youtube_url:"",video_title:"",video_description:"",promotional_video_url:""}),h()}catch(N){console.error("Error submitting application:",N),t("Error submitting application. Please try again.","error")}finally{c(!1)}}},w=y=>{switch(y){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"disbursed":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},j=()=>{if(!a.incentive_type)return null;switch(fs[a.incentive_type],a.incentive_type){case"hiring_recommendation":return r.jsxs("div",{className:"space-y-4",children:[r.jsx(de,{label:"Recommended Candidate Name *",value:a.recommended_candidate_name,onChange:y=>f("recommended_candidate_name",y.target.value),placeholder:"Enter the full name of the recommended candidate"}),r.jsxs("div",{children:[r.jsx(de,{label:"Appointment Letter Screenshot (Google Drive Link) *",value:a.appointment_letter_url,onChange:y=>f("appointment_letter_url",y.target.value),placeholder:"Paste Google Drive link to appointment letter screenshot"}),r.jsxs("p",{className:"text-sm text-blue-600 mt-2",children:["📋 Please upload the appointment letter screenshot to Google Drive and share access with: ",r.jsx("strong",{children:"brandingpioneers@gmail.com"})]})]}),r.jsxs("div",{className:"bg-amber-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-amber-800 mb-2",children:"⏰ Eligibility Notice"}),r.jsx("p",{className:"text-sm text-amber-700",children:"This incentive becomes eligible for approval 3 months after the candidate's joining date. Please ensure the candidate has completed 3 months of employment before applying."})]})]});case"client_testimonial":return r.jsxs("div",{className:"space-y-4",children:[r.jsx(de,{label:"Client Name *",value:a.client_name,onChange:y=>f("client_name",y.target.value),placeholder:"Enter the client's name or company name"}),r.jsxs("div",{children:[r.jsx(de,{label:"YouTube URL of Client Testimonial *",value:a.testimonial_youtube_url,onChange:y=>f("testimonial_youtube_url",y.target.value),placeholder:"https://www.youtube.com/watch?v=..."}),r.jsx("p",{className:"text-sm text-blue-600 mt-2",children:"🎥 Please ensure the video testimonial is publicly accessible on YouTube and mentions our services."})]}),r.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"🎁 Reward"}),r.jsx("p",{className:"text-sm text-green-700",children:"Upon approval, you will receive a ₹1,000 Amazon coupon via email."})]})]});case"promotional_video":return r.jsxs("div",{className:"space-y-4",children:[r.jsx(de,{label:"Video Title *",value:a.video_title,onChange:y=>f("video_title",y.target.value),placeholder:"Enter a descriptive title for your promotional video"}),r.jsx(Yt,{label:"Video Description *",value:a.video_description,onChange:y=>f("video_description",y.target.value),placeholder:"Describe the content and purpose of your promotional video",rows:3}),r.jsxs("div",{children:[r.jsx(de,{label:"Promotional Video (Google Drive Link) *",value:a.promotional_video_url,onChange:y=>f("promotional_video_url",y.target.value),placeholder:"Paste Google Drive link to your promotional video"}),r.jsxs("p",{className:"text-sm text-blue-600 mt-2",children:["📹 Please upload your promotional video to Google Drive and share access with: ",r.jsx("strong",{children:"brandingpioneers@gmail.com"})]})]})]});default:return null}};return i?r.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Employee Incentive Application"}),r.jsx("p",{className:"text-gray-600",children:"Apply for performance-based incentives with proof of achievement"})]}),r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"👤 Employee Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Name:"})," ",i.name]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Department:"})," ",i.department]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Email:"})," ",i.email]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Submit New Application"}),r.jsxs("form",{onSubmit:g,className:"space-y-6",children:[r.jsx(Ae,{title:"Select Incentive Type",children:r.jsx("div",{className:"space-y-4",children:Object.entries(fs).map(([y,N])=>r.jsxs("label",{className:"flex items-start space-x-3 p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[r.jsx("input",{type:"radio",name:"incentive_type",value:y,checked:a.incentive_type===y,onChange:S=>f("incentive_type",S.target.value),className:"mt-1"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium text-gray-900",children:N.name}),r.jsxs("div",{className:"text-sm text-green-600 font-medium",children:["₹",N.amount," ",N.currency]}),r.jsx("div",{className:"text-sm text-gray-600 mt-1",children:N.description}),N.eligibilityMonths>0&&r.jsxs("div",{className:"text-xs text-amber-600 mt-1",children:["⏰ Eligible after ",N.eligibilityMonths," months"]})]})]},y))})}),a.incentive_type&&r.jsx(Ae,{title:"Proof Requirements",children:j()}),r.jsx("button",{type:"submit",disabled:l||!a.incentive_type,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:l?"Submitting Application...":"Submit Incentive Application"})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"My Applications"}),u.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"text-4xl mb-4",children:"📋"}),r.jsx("p",{className:"text-gray-600",children:"No applications submitted yet"})]}):r.jsx("div",{className:"space-y-4",children:u.map(y=>{var N;return r.jsxs("div",{className:"border rounded-lg p-4",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:((N=fs[y.incentive_type])==null?void 0:N.name)||y.incentive_type}),r.jsxs("p",{className:"text-sm text-green-600 font-medium",children:["₹",y.incentive_amount]})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w(y.status)}`,children:y.status.charAt(0).toUpperCase()+y.status.slice(1)})]}),r.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Applied:"})," ",new Date(y.application_date).toLocaleDateString()]}),y.eligible_date&&r.jsxs("div",{children:[r.jsx("strong",{children:"Eligible:"})," ",new Date(y.eligible_date).toLocaleDateString()]}),y.reviewed_date&&r.jsxs("div",{children:[r.jsx("strong",{children:"Reviewed:"})," ",new Date(y.reviewed_date).toLocaleDateString()]}),y.hr_comments&&r.jsxs("div",{children:[r.jsx("strong",{children:"HR Comments:"})," ",y.hr_comments]})]})]},y.id)})})]})]})]}):r.jsx("div",{className:"max-w-4xl mx-auto p-6",children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-6xl mb-4",children:"⏳"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Loading Employee Information"}),r.jsx("p",{className:"text-gray-600",children:"Please wait while we fetch your employee details..."})]})})};function jM({applicationId:e,onSuccess:t,onCancel:n}){const{supabase:a}=Ie(),{showToast:s}=Oe(),[i,o]=p.useState(null),[l,c]=p.useState(!0),[u,d]=p.useState(!1),[m,h]=p.useState({bankAccountNumber:"",ifscCode:"",accountHolderName:"",upiId:"",preferredMethod:"bank_transfer",panNumber:"",additionalNotes:""});p.useEffect(()=>{f()},[e]);const f=async()=>{try{if(c(!0),!a){o({id:e,employee_name:"John Doe",incentive_type_name:"Hiring Recommendation",incentive_amount:3e3,status:"approved"}),c(!1);return}const{data:g,error:w}=await a.from("hr_incentive_approvals").select("*").eq("id",e).eq("status","approved").single();if(w){console.error("Error loading application:",w),s("Failed to load application details","error");return}if(!g){s("Application not found or not approved","error");return}o(g)}catch(g){console.error("Error loading application:",g),s("Failed to load application","error")}finally{c(!1)}},x=async g=>{if(g.preventDefault(),!i){s("Application data not available","error");return}if(m.preferredMethod==="bank_transfer"){if(!m.bankAccountNumber||!m.ifscCode||!m.accountHolderName){s("Please fill all required bank details","error");return}}else if(m.preferredMethod==="upi"&&!m.upiId){s("Please provide UPI ID","error");return}if(!m.panNumber){s("PAN number is required for tax purposes","error");return}try{d(!0);const w={application_id:e,employee_name:i.employee_name,incentive_type:i.incentive_type_name,amount:i.incentive_amount,payment_method:m.preferredMethod,bank_account_number:m.preferredMethod==="bank_transfer"?m.bankAccountNumber:null,ifsc_code:m.preferredMethod==="bank_transfer"?m.ifscCode:null,account_holder_name:m.preferredMethod==="bank_transfer"?m.accountHolderName:null,upi_id:m.preferredMethod==="upi"?m.upiId:null,pan_number:m.panNumber,additional_notes:m.additionalNotes,submission_date:new Date().toISOString(),status:"submitted"};if(a){const{error:j}=await a.from("incentive_applications").update({razorpay_form_submitted:!0,razorpay_submission_date:new Date().toISOString(),status:"processing_payment"}).eq("id",e);if(j){console.error("Error updating application:",j),s("Failed to update application status","error");return}const{error:y}=await a.from("razorpay_reimbursements").insert([w]);y&&console.error("Error storing reimbursement data:",y)}else{console.log("Razorpay reimbursement form submitted:",w);const j=JSON.parse(localStorage.getItem("razorpay_submissions")||"[]");j.push({...w,id:Date.now().toString()}),localStorage.setItem("razorpay_submissions",JSON.stringify(j))}s("Reimbursement form submitted successfully! Payment will be processed within 3-5 business days.","success"),t&&t()}catch(w){console.error("Error submitting reimbursement form:",w),s("Failed to submit reimbursement form","error")}finally{d(!1)}};return l?r.jsxs("div",{className:"flex items-center justify-center p-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("span",{className:"ml-2 text-gray-600",children:"Loading application details..."})]}):i?r.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"text-4xl mb-4",children:"💰"}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Razorpay Reimbursement Form"}),r.jsx("p",{className:"text-gray-600",children:"Submit your payment details for incentive reimbursement"})]}),r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:[r.jsx("h3",{className:"font-medium text-green-900 mb-2",children:"✅ Approved Incentive"}),r.jsxs("div",{className:"text-sm text-green-800 space-y-1",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Employee:"})," ",i.employee_name]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Incentive Type:"})," ",i.incentive_type_name]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Amount:"})," ₹",i.incentive_amount]})]})]}),r.jsxs("form",{onSubmit:x,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Payment Method *"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"bank_transfer",checked:m.preferredMethod==="bank_transfer",onChange:g=>h({...m,preferredMethod:g.target.value}),className:"mr-2"}),r.jsx("span",{children:"Bank Transfer (NEFT/RTGS)"})]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"radio",name:"paymentMethod",value:"upi",checked:m.preferredMethod==="upi",onChange:g=>h({...m,preferredMethod:g.target.value}),className:"mr-2"}),r.jsx("span",{children:"UPI Transfer"})]})]})]}),m.preferredMethod==="bank_transfer"&&r.jsxs("div",{className:"space-y-4 p-4 bg-blue-50 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-blue-900",children:"Bank Account Details"}),r.jsx(de,{label:"Account Holder Name *",value:m.accountHolderName,onChange:g=>h({...m,accountHolderName:g}),placeholder:"Enter account holder name as per bank records",required:!0}),r.jsx(de,{label:"Bank Account Number *",value:m.bankAccountNumber,onChange:g=>h({...m,bankAccountNumber:g}),placeholder:"Enter bank account number",required:!0}),r.jsx(de,{label:"IFSC Code *",value:m.ifscCode,onChange:g=>h({...m,ifscCode:g.toUpperCase()}),placeholder:"Enter IFSC code (e.g., SBIN0001234)",required:!0})]}),m.preferredMethod==="upi"&&r.jsxs("div",{className:"space-y-4 p-4 bg-purple-50 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-purple-900",children:"UPI Details"}),r.jsx(de,{label:"UPI ID *",value:m.upiId,onChange:g=>h({...m,upiId:g}),placeholder:"Enter UPI ID (e.g., yourname@paytm, yourname@gpay)",required:!0})]}),r.jsx(de,{label:"PAN Number *",value:m.panNumber,onChange:g=>h({...m,panNumber:g.toUpperCase()}),placeholder:"Enter PAN number (required for tax purposes)",required:!0}),r.jsx(Yt,{label:"Additional Notes",value:m.additionalNotes,onChange:g=>h({...m,additionalNotes:g}),placeholder:"Any additional information or special instructions...",rows:3}),r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium text-yellow-900 mb-2",children:"⚠️ Important Notice"}),r.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[r.jsx("li",{children:"• Payment will be processed within 3-5 business days"}),r.jsx("li",{children:"• Ensure all details are accurate to avoid delays"}),r.jsx("li",{children:"• TDS will be deducted as per applicable tax rates"}),r.jsx("li",{children:"• You will receive a confirmation email once payment is processed"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx(Hl,{type:"button",variant:"secondary",onClick:n,disabled:u,children:"Cancel"}),r.jsx(Hl,{type:"submit",loading:u,variant:"success",loadingText:"Submitting...",children:"Submit Reimbursement Form"})]})]})]}):r.jsxs("div",{className:"text-center p-8",children:[r.jsx("div",{className:"text-red-600 mb-4",children:"❌"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Application Not Found"}),r.jsx("p",{className:"text-gray-600",children:"The incentive application could not be found or is not approved."})]})}const cr={PENDING:"pending",APPROVED:"approved",REJECTED:"rejected",DISBURSED:"disbursed"},wM={[cr.PENDING]:"bg-yellow-100 text-yellow-800 border-yellow-200",[cr.APPROVED]:"bg-green-100 text-green-800 border-green-200",[cr.REJECTED]:"bg-red-100 text-red-800 border-red-200",[cr.DISBURSED]:"bg-blue-100 text-blue-800 border-blue-200"},rf={[cr.PENDING]:"⏳",[cr.APPROVED]:"✅",[cr.REJECTED]:"❌",[cr.DISBURSED]:"💰"},nf={hiring_recommendation:{name:"Hiring Recommendation",amount:3e3,icon:"👥",color:"bg-blue-50 border-blue-200"},client_testimonial:{name:"Client Testimonial",amount:1e3,icon:"🎥",color:"bg-green-50 border-green-200"},promotional_video:{name:"Promotional Video",amount:500,icon:"📹",color:"bg-purple-50 border-purple-200"}};function NM(){const{supabase:e}=Ie(),{notify:t}=Oe(),{openModal:n,closeModal:a}=Vl(),[s,i]=p.useState([]),[o,l]=p.useState(!0),[c,u]=p.useState(""),[d,m]=p.useState("all"),[h,f]=p.useState("all"),x=p.useCallback(async()=>{try{if(l(!0),e){const{data:b,error:v}=await e.from("incentive_applications").select("*").order("application_date",{ascending:!1});if(v)throw v;i(b||[])}else{const b=JSON.parse(localStorage.getItem("incentive_applications")||"[]");i(b.filter(v=>v.status==="pending"))}}catch(b){console.error("Error loading incentive applications:",b),t("Failed to load incentive applications","error")}finally{l(!1)}},[e,t]);p.useEffect(()=>{x()},[x]);const g=s.filter(b=>{const v=d==="all"||b.status===d,_=h==="all"||b.incentive_type_name.toLowerCase().includes(h.toLowerCase()),P=!c||b.employee_name.toLowerCase().includes(c.toLowerCase())||b.employee_email.toLowerCase().includes(c.toLowerCase())||b.department.toLowerCase().includes(c.toLowerCase());return v&&_&&P}),w=p.useCallback(async b=>{n({title:"✅ Approve Incentive Application",content:r.jsx(af,{application:b,action:"approve",onSubmit:async v=>{try{if(e){const{error:_}=await e.rpc("approve_incentive_application",{application_id:b.id,reviewer_id:"hr-user",approval_status:"approved",review_notes:v.reviewNotes});if(_)throw _}else{const P=JSON.parse(localStorage.getItem("incentive_applications")||"[]").map(O=>O.id===b.id?{...O,status:"approved",review_notes:v.reviewNotes,reviewed_at:new Date().toISOString()}:O);localStorage.setItem("incentive_applications",JSON.stringify(P))}await x(),a(),t(`${b.employee_name}'s incentive application has been approved`,"success")}catch(_){console.error("Error approving application:",_),t("Failed to approve application","error")}}})})},[e,n,a,t,x]),j=p.useCallback(async b=>{n({title:"❌ Reject Incentive Application",content:r.jsx(af,{application:b,action:"reject",onSubmit:async v=>{try{if(e){const{error:_}=await e.rpc("approve_incentive_application",{application_id:b.id,reviewer_id:"hr-user",approval_status:"rejected",review_notes:v.reviewNotes});if(_)throw _}else{const P=JSON.parse(localStorage.getItem("incentive_applications")||"[]").map(O=>O.id===b.id?{...O,status:"rejected",review_notes:v.reviewNotes,reviewed_at:new Date().toISOString()}:O);localStorage.setItem("incentive_applications",JSON.stringify(P))}await x(),a(),t(`${b.employee_name}'s incentive application has been rejected`,"info")}catch(_){console.error("Error rejecting application:",_),t("Failed to reject application","error")}}})})},[e,n,a,t,x]),y=p.useCallback(b=>{n({title:`📋 Incentive Application Details - ${b.employee_name}`,content:r.jsx(SM,{application:b}),size:"large"})},[n]),N=p.useCallback(b=>{n({title:"💰 Razorpay Reimbursement Form",content:r.jsx(jM,{applicationId:b.id,onSuccess:()=>{a(),x(),t("Reimbursement form submitted successfully","success")},onCancel:a}),size:"large"})},[n,a,x,t]),S=p.useCallback(async b=>{n({title:"💰 Mark as Disbursed",content:r.jsx(_M,{application:b,onSubmit:async v=>{try{if(e){const{error:_}=await e.rpc("mark_incentive_disbursed",{application_id:b.id,disbursement_reference:v.reference,disbursement_notes:v.notes});if(_)throw _}else{const P=JSON.parse(localStorage.getItem("incentive_applications")||"[]").map(O=>O.id===b.id?{...O,status:"disbursed",disbursement_reference:v.reference,disbursement_notes:v.notes,disbursement_date:new Date().toISOString()}:O);localStorage.setItem("incentive_applications",JSON.stringify(P))}await x(),a(),t(`Incentive marked as disbursed for ${b.employee_name}`,"success")}catch(_){console.error("Error marking as disbursed:",_),t("Failed to mark as disbursed","error")}}})})},[e,n,a,t,x]);return o?r.jsxs("div",{className:"flex items-center justify-center h-64",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("span",{className:"ml-2 text-gray-600",children:"Loading incentive applications..."})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"HR Incentive Approval"}),r.jsx("p",{className:"text-gray-600",children:"Review and manage employee incentive applications"})]}),r.jsx("div",{className:"flex items-center space-x-4",children:r.jsx("button",{onClick:x,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"🔄 Refresh"})})]}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsx(de,{label:"Search Applications",value:c,onChange:u,placeholder:"Search by name, email, or department..."})}),r.jsxs("div",{className:"w-full sm:w-48",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),r.jsxs("select",{value:d,onChange:b=>m(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Statuses"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"rejected",children:"Rejected"}),r.jsx("option",{value:"disbursed",children:"Disbursed"})]})]}),r.jsxs("div",{className:"w-full sm:w-48",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),r.jsxs("select",{value:h,onChange:b=>f(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Types"}),r.jsx("option",{value:"hiring",children:"Hiring Recommendation"}),r.jsx("option",{value:"testimonial",children:"Client Testimonial"}),r.jsx("option",{value:"promotional",children:"Promotional Video"})]})]})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:Object.entries(cr).map(([b,v])=>{const _=s.filter(P=>P.status===v).length;return r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-2xl mr-2",children:rf[v]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 capitalize",children:v.replace("_"," ")}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_})]})]})},v)})}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Incentive Applications (",g.length,")"]})}),g.length===0?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"text-4xl mb-4",children:"📋"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No applications found"}),r.jsx("p",{className:"text-gray-600",children:"No incentive applications match your current filters."})]}):r.jsx("div",{className:"divide-y divide-gray-200",children:g.map(b=>{var _;const v=nf[(_=b.incentive_type_name)==null?void 0:_.toLowerCase().replace(" ","_")]||nf.hiring_recommendation;return r.jsx("div",{className:"p-6 hover:bg-gray-50",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("span",{className:"text-2xl",children:v.icon}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-medium text-gray-900",children:b.employee_name}),r.jsxs("p",{className:"text-sm text-gray-600",children:[b.employee_email," • ",b.department]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Incentive Type"}),r.jsx("p",{className:"text-sm text-gray-600",children:b.incentive_type_name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Amount"}),r.jsxs("p",{className:"text-sm text-gray-600",children:["₹",b.incentive_amount]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Application Date"}),r.jsx("p",{className:"text-sm text-gray-600",children:new Date(b.application_date).toLocaleDateString()})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Eligible Date"}),r.jsx("p",{className:"text-sm text-gray-600",children:new Date(b.eligible_date).toLocaleDateString()})]})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Proof Details"}),r.jsx("p",{className:"text-sm text-gray-600",children:b.proof_details})]}),!b.is_eligible_now&&r.jsx("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded-md",children:r.jsxs("p",{className:"text-sm text-yellow-800",children:["⚠️ Not eligible yet. Eligible from ",new Date(b.eligible_date).toLocaleDateString()]})})]}),r.jsxs("div",{className:"flex flex-col items-end space-y-2 ml-4",children:[r.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${wM[b.status]}`,children:[rf[b.status]," ",b.status.charAt(0).toUpperCase()+b.status.slice(1)]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>y(b),className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"View Details"}),b.status==="pending"&&b.is_eligible_now&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>w(b),className:"px-3 py-1 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200",children:"✅ Approve"}),r.jsx("button",{onClick:()=>j(b),className:"px-3 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200",children:"❌ Reject"})]}),b.status==="approved"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>N(b),className:"px-3 py-1 text-xs bg-purple-100 text-purple-700 rounded hover:bg-purple-200",children:"💳 Razorpay Form"}),r.jsx("button",{onClick:()=>S(b),className:"px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:"💰 Mark Disbursed"})]})]})]})]})},b.id)})})]})]})}function af({application:e,action:t,onSubmit:n}){const{notify:a}=Oe(),[s,i]=p.useState({reviewNotes:""}),[o,l]=p.useState(!1),c=async u=>{if(u.preventDefault(),!s.reviewNotes.trim()){a("Please provide review notes","error");return}l(!0);try{await n(s)}catch(d){console.error("Error submitting form:",d),a("Failed to submit form","error")}finally{l(!1)}};return r.jsxs("form",{onSubmit:c,className:"space-y-4",children:[r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Application Summary"}),r.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Employee:"})," ",e.employee_name]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Type:"})," ",e.incentive_type_name]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Amount:"})," ₹",e.incentive_amount]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Proof:"})," ",e.proof_details]})]})]}),r.jsx(Yt,{label:`${t==="approve"?"Approval":"Rejection"} Notes`,value:s.reviewNotes,onChange:u=>i({...s,reviewNotes:u}),placeholder:`Enter ${t==="approve"?"approval":"rejection"} notes and feedback...`,rows:4,required:!0}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:o,className:`px-4 py-2 text-white rounded-md ${t==="approve"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"} disabled:opacity-50`,children:o?"Processing...":`${t==="approve"?"Approve":"Reject"} Application`})]})]})}function SM({application:e}){return r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ae,{title:"Employee Information",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),r.jsx("p",{className:"text-sm text-gray-900",children:e.employee_name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),r.jsx("p",{className:"text-sm text-gray-900",children:e.employee_email})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Department"}),r.jsx("p",{className:"text-sm text-gray-900",children:e.department})]})]})}),r.jsx(Ae,{title:"Incentive Details",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),r.jsx("p",{className:"text-sm text-gray-900",children:e.incentive_type_name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Amount"}),r.jsxs("p",{className:"text-sm text-gray-900",children:["₹",e.incentive_amount]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Application Date"}),r.jsx("p",{className:"text-sm text-gray-900",children:new Date(e.application_date).toLocaleDateString()})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Eligible Date"}),r.jsx("p",{className:"text-sm text-gray-900",children:new Date(e.eligible_date).toLocaleDateString()})]})]})}),r.jsx(Ae,{title:"Proof Details",children:r.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:r.jsx("p",{className:"text-sm text-gray-900",children:e.proof_details})})}),r.jsx(Ae,{title:"Eligibility Status",children:r.jsx("div",{className:`p-4 rounded-lg ${e.is_eligible_now?"bg-green-50 border border-green-200":"bg-yellow-50 border border-yellow-200"}`,children:r.jsx("p",{className:`text-sm ${e.is_eligible_now?"text-green-800":"text-yellow-800"}`,children:e.is_eligible_now?"✅ Eligible for approval":`⚠️ Not eligible until ${new Date(e.eligible_date).toLocaleDateString()}`})})})]})}function _M({application:e,onSubmit:t}){const{notify:n}=Oe(),[a,s]=p.useState({reference:"",notes:""}),[i,o]=p.useState(!1),l=async c=>{if(c.preventDefault(),!a.reference.trim()){n("Please provide disbursement reference","error");return}o(!0);try{await t(a)}catch(u){console.error("Error submitting form:",u),n("Failed to submit form","error")}finally{o(!1)}};return r.jsxs("form",{onSubmit:l,className:"space-y-4",children:[r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Disbursement Details"}),r.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Employee:"})," ",e.employee_name]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Amount:"})," ₹",e.incentive_amount]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Type:"})," ",e.incentive_type_name]})]})]}),r.jsx(de,{label:"Disbursement Reference",value:a.reference,onChange:c=>s({...a,reference:c}),placeholder:"Enter Razorpay transaction ID or reference number",required:!0}),r.jsx(Yt,{label:"Disbursement Notes",value:a.notes,onChange:c=>s({...a,notes:c}),placeholder:"Enter any additional notes about the disbursement...",rows:3}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:i?"Processing...":"Mark as Disbursed"})]})]})}const kM=({onNavigateToDashboard:e})=>{var K,M;const{employees:t,loading:n,refreshEmployees:a}=Aa(),{role:s,currentUser:i}=Ze();Ie();const{handleError:o}=Yl(),[l,c]=p.useState("all"),[u,d]=p.useState(""),[m,h]=p.useState("grid"),[f,x]=p.useState(null),[g,w]=p.useState(!1),[j,y]=p.useState("hierarchy"),[N,S]=p.useState(new Set),[b,v]=p.useState(new Date);p.useEffect(()=>{const I=setInterval(()=>{F()},3e5);return()=>clearInterval(I)},[]),p.useEffect(()=>{if(t.length>0&&N.size===0){const I=new Set(t.map(H=>H.department||"Other").filter(Boolean));S(I)}},[t]);const _=t.reduce((I,H)=>{const Y=H.department||H.role||"Other";return I[Y]||(I[Y]=[]),I[Y].push(H),I},{}),P=t.filter(I=>{var G,V;const H=Array.isArray(I.role)?I.role.join(" ").toLowerCase():(I.role||"").toLowerCase(),Y=((G=I.name)==null?void 0:G.toLowerCase().includes(u.toLowerCase()))||((V=I.email)==null?void 0:V.toLowerCase().includes(u.toLowerCase()))||H.includes(u.toLowerCase()),z=l==="all"||I.department===l;return Y&&z}),O=["all",...new Set(t.map(I=>I.department||I.role).filter(Boolean))],D={Manager:1,Head:1,"Web Team Lead":2,"SEO Team Lead":2,"Ads Team Lead":2,"AI Team Lead":2,"Web Developer":3,"Graphic Designer":3,"SEO Executive":3,"Meta Ads Specialist":3,"Google Ads Specialist":3,"Social Media Manager":3,"Youtube SEO":3,"Video Editor":3,"AI Executive":3,Accountant:3,"Sales Executive":3,"HR Specialist":3,"Content Writer":4,"SEO Content Writer":4,"Graphics Designer":4,Freelancer:5,Intern:6},A=I=>Array.isArray(I.role)?I.role.reduce((H,Y)=>{const z=D[Y]||7,G=D[H]||7;return z<G?Y:H},I.role[0]||"No role"):I.role||"No role",T=I=>{x(I),w(!0)},L=async(I,H)=>{try{H==="email"&&I.email?window.open(`mailto:${I.email}`,"_blank"):H==="phone"&&I.phone&&window.open(`tel:${I.phone}`,"_blank")}catch(Y){o(Y,"Failed to initiate contact")}},C=()=>{try{const I=t.map(V=>({Name:V.name||"",Email:V.email||"",Department:V.department||"",Role:Array.isArray(V.role)?V.role.join(", "):V.role||"",Phone:V.phone||"",HireDate:V.hire_date||"",Status:V.status||""})),H=[Object.keys(I[0]).join(","),...I.map(V=>Object.values(V).map(Z=>`"${Z}"`).join(","))].join(`
`),Y=new Blob([H],{type:"text/csv"}),z=window.URL.createObjectURL(Y),G=document.createElement("a");G.href=z,G.download=`organization-chart-${new Date().toISOString().split("T")[0]}.csv`,G.click(),window.URL.revokeObjectURL(z)}catch(I){o(I,"Failed to export data")}},F=async()=>{try{await a(),v(new Date)}catch(I){o(I,"Failed to refresh data")}};return(I=>[...I].sort((H,Y)=>{switch(j){case"name":return(H.name||"").localeCompare(Y.name||"");case"department":return(H.department||"").localeCompare(Y.department||"");case"joinDate":return new Date(Y.hire_date||0)-new Date(H.hire_date||0);case"hierarchy":default:const z=D[A(H)]||7,G=D[A(Y)]||7;return z-G}}))(P),n?r.jsx("div",{className:"card-brand p-6",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-8 bg-slate-200 rounded mb-4"}),r.jsx("div",{className:"space-y-3",children:[...Array(6)].map((I,H)=>r.jsx("div",{className:"h-16 bg-slate-200 rounded"},H))})]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"card-brand p-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-brand-text mb-2",children:"Organization Chart"}),r.jsx("p",{className:"text-brand-text-secondary",children:"View company structure and employee hierarchy"}),r.jsxs("p",{className:"text-xs text-brand-text-secondary mt-1",children:["Last updated: ",b.toLocaleString()]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx("button",{onClick:F,className:"btn-secondary text-sm",disabled:n,children:"🔄 Refresh"}),r.jsx("button",{onClick:C,className:"btn-secondary text-sm",disabled:t.length===0,children:"📊 Export CSV"}),r.jsx("button",{onClick:()=>e==null?void 0:e("manager"),className:"btn-brand-primary",children:"Back to Dashboard"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsx("input",{type:"text",placeholder:"Search employees...",value:u,onChange:I=>d(I.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})}),r.jsx("div",{className:"sm:w-48",children:r.jsx("select",{value:l,onChange:I=>c(I.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:O.map(I=>r.jsx("option",{value:I,children:I==="all"?"All Departments":I},I))})})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-brand-text-secondary",children:"View:"}),r.jsx("div",{className:"flex bg-slate-100 dark:bg-slate-700 rounded-lg p-1",children:["grid","list","tree"].map(I=>r.jsxs("button",{onClick:()=>h(I),className:`px-3 py-1 text-sm rounded-md transition-colors ${m===I?"bg-white dark:bg-slate-600 text-brand-text shadow-sm":"text-brand-text-secondary hover:text-brand-text"}`,children:[I==="grid"?"⊞":I==="list"?"☰":"🌳"," ",I.charAt(0).toUpperCase()+I.slice(1)]},I))})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-brand-text-secondary",children:"Sort by:"}),r.jsxs("select",{value:j,onChange:I=>y(I.target.value),className:"px-3 py-1 text-sm border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"hierarchy",children:"Hierarchy"}),r.jsx("option",{value:"name",children:"Name"}),r.jsx("option",{value:"department",children:"Department"}),r.jsx("option",{value:"joinDate",children:"Join Date"})]})]})]})]})]}),r.jsxs("div",{className:"card-brand p-6",children:[r.jsx("div",{className:"mb-4",children:r.jsxs("p",{className:"text-brand-text-secondary",children:["Total Employees: ",P.length]})}),r.jsx("div",{className:"space-y-6",children:Object.entries(_).filter(([I,H])=>l==="all"||I===l||H.some(Y=>{var z,G;return((z=Y.name)==null?void 0:z.toLowerCase().includes(u.toLowerCase()))||((G=Y.email)==null?void 0:G.toLowerCase().includes(u.toLowerCase()))})).map(([I,H])=>{const Y=H.filter(z=>{var V,Z;const G=Array.isArray(z.role)?z.role.join(" ").toLowerCase():(z.role||"").toLowerCase();return((V=z.name)==null?void 0:V.toLowerCase().includes(u.toLowerCase()))||((Z=z.email)==null?void 0:Z.toLowerCase().includes(u.toLowerCase()))||G.includes(u.toLowerCase())});return Y.length===0?null:r.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-brand-text mb-4 border-b border-slate-200 pb-2",children:[I," (",Y.length,")"]}),r.jsx("div",{className:`gap-4 ${m==="list"?"space-y-2":m==="tree"?"grid grid-cols-1 gap-2":"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3"}`,children:Y.sort((z,G)=>{const V=D[A(z)]||7,Z=D[A(G)]||7;return V-Z}).map(z=>{var G,V;return r.jsxs("div",{className:`bg-slate-50 dark:bg-slate-700 p-4 rounded-lg transition-all duration-200 hover:shadow-md hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer border-2 border-transparent hover:border-blue-200 ${m==="list"?"flex items-center space-x-4":""}`,onClick:()=>T(z),children:[r.jsxs("div",{className:`flex items-center space-x-3 ${m==="list"?"flex-1":""}`,children:[r.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:((V=(G=z.name)==null?void 0:G.charAt(0))==null?void 0:V.toUpperCase())||"U"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-brand-text truncate",children:z.name||"Unknown"}),r.jsx("p",{className:"text-sm text-brand-text-secondary truncate",children:Array.isArray(z.role)?z.role.join(", "):z.role||"No role assigned"}),m!=="list"&&r.jsx("p",{className:"text-xs text-brand-text-secondary truncate",children:z.email})]})]}),m==="list"&&r.jsxs("div",{className:"flex items-center space-x-2",children:[z.email&&r.jsx("button",{onClick:Z=>{Z.stopPropagation(),L(z,"email")},className:"p-2 text-blue-600 hover:bg-blue-100 rounded-full transition-colors",title:"Send Email",children:"✉️"}),z.phone&&r.jsx("button",{onClick:Z=>{Z.stopPropagation(),L(z,"phone")},className:"p-2 text-green-600 hover:bg-green-100 rounded-full transition-colors",title:"Call",children:"📞"})]}),m!=="list"&&r.jsxs(r.Fragment,{children:[z.phone&&r.jsxs("div",{className:"mt-2 text-xs text-brand-text-secondary",children:["📞 ",z.phone]}),z.hire_date&&r.jsxs("div",{className:"mt-1 text-xs text-brand-text-secondary",children:["📅 Joined: ",new Date(z.hire_date).toLocaleDateString()]})]})]},z.id)})})]},I)})}),P.length===0&&r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-brand-text-secondary text-lg",children:"No employees found matching your criteria."})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"card-brand p-6 text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-brand-primary mb-2",children:t.length}),r.jsx("div",{className:"text-brand-text-secondary",children:"Total Employees"})]}),r.jsxs("div",{className:"card-brand p-6 text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-brand-primary mb-2",children:Object.keys(_).length}),r.jsx("div",{className:"text-brand-text-secondary",children:"Departments"})]}),r.jsxs("div",{className:"card-brand p-6 text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-brand-primary mb-2",children:t.filter(I=>I.status==="active").length}),r.jsx("div",{className:"text-brand-text-secondary",children:"Active Employees"})]})]}),g&&f&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsx("h3",{className:"text-xl font-bold text-brand-text",children:"Employee Details"}),r.jsx("button",{onClick:()=>w(!1),className:"text-brand-text-secondary hover:text-brand-text text-2xl",children:"×"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center text-white text-2xl font-semibold",children:((M=(K=f.name)==null?void 0:K.charAt(0))==null?void 0:M.toUpperCase())||"U"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold text-brand-text",children:f.name||"Unknown"}),r.jsx("p",{className:"text-brand-text-secondary",children:Array.isArray(f.role)?f.role.join(", "):f.role||"No role assigned"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[f.email&&r.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-brand-text-secondary",children:"Email"}),r.jsx("p",{className:"text-brand-text",children:f.email})]}),r.jsx("button",{onClick:()=>L(f,"email"),className:"btn-secondary text-sm",children:"✉️ Email"})]}),f.phone&&r.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-brand-text-secondary",children:"Phone"}),r.jsx("p",{className:"text-brand-text",children:f.phone})]}),r.jsx("button",{onClick:()=>L(f,"phone"),className:"btn-secondary text-sm",children:"📞 Call"})]}),f.department&&r.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[r.jsx("p",{className:"text-sm text-brand-text-secondary",children:"Department"}),r.jsx("p",{className:"text-brand-text",children:f.department})]}),f.hire_date&&r.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[r.jsx("p",{className:"text-sm text-brand-text-secondary",children:"Hire Date"}),r.jsx("p",{className:"text-brand-text",children:new Date(f.hire_date).toLocaleDateString()})]}),f.status&&r.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[r.jsx("p",{className:"text-sm text-brand-text-secondary",children:"Status"}),r.jsx("p",{className:`text-brand-text capitalize ${f.status==="active"?"text-green-600":"text-red-600"}`,children:f.status})]})]}),r.jsx("div",{className:"flex justify-end space-x-2 pt-4 border-t border-slate-200 dark:border-slate-600",children:r.jsx("button",{onClick:()=>w(!1),className:"btn-secondary",children:"Close"})})]})]})})})]})},Nn=({title:e})=>r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:e}),r.jsx("p",{className:"text-gray-600",children:"This page is under development."})]})});function AM(){const e=si(),{authState:t}=Ze(),{user:n,isLoading:a}=t,[s,i]=jt.useState(!1);return p.useEffect(()=>{!a&&n&&!s&&(i(!0),e("/",{replace:!0}))},[n,a,e,s]),a?r.jsxs("div",{className:"min-h-screen flex items-center justify-center",children:[r.jsx(Ee,{size:"lg"}),r.jsx("p",{className:"text-gray-600 mt-4",children:"Checking authentication..."})]}):n&&!s?r.jsxs("div",{className:"min-h-screen flex items-center justify-center",children:[r.jsx(Ee,{size:"lg"}),r.jsx("p",{className:"text-gray-600 mt-4",children:"Redirecting..."})]}):r.jsx(Nv,{})}function PM(e){switch(e){case"Super Admin":return"/super-admin";case"Operations Head":case"Manager":case"HR":case"Accountant":case"Sales":return"/admin";case"SEO":case"Ads":case"Social Media":case"YouTube SEO":case"Web Developer":case"Graphic Designer":case"Freelancer":case"Intern":return"/employee";case"Client":return"/client";default:return"/dashboard"}}function CM(){const{authState:e}=Ze(),{isLoading:t}=e;return t?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx(Ee,{size:"lg"}),r.jsx("p",{className:"text-gray-600",children:"Loading application..."})]})}):r.jsx($y,{children:r.jsxs(Fy,{children:[r.jsx(ie,{path:"/",element:r.jsx(wv,{})}),r.jsx(ie,{path:"/login",element:r.jsx(AM,{})}),r.jsx(ie,{path:"/dashboard",element:r.jsx(jf,{})}),r.jsx(ie,{path:"/auth-redirect",element:r.jsx(at,{children:({user:n})=>{const a=si();return p.useEffect(()=>{const s=PM(n.role);a(s,{replace:!0})},[a,n]),r.jsx(Ee,{size:"lg"})}})}),r.jsx(ie,{path:"/password-setup",element:r.jsx(Sv,{})}),r.jsx(ie,{path:"/employee-onboarding",element:r.jsx(oM,{})}),r.jsx(ie,{path:"/client-onboarding",element:r.jsx(lM,{})}),r.jsx(ie,{path:"/policies",element:r.jsx(Nn,{title:"Company Policies"})}),r.jsx(ie,{path:"/form",element:r.jsx(tu,{})}),r.jsx(ie,{path:"/monthly-form",element:r.jsx(tu,{})}),r.jsx(ie,{path:"/leave-form",element:r.jsx(Hy,{})}),r.jsx(ie,{path:"/add-client",element:r.jsx(By,{})}),r.jsx(ie,{path:"/master-tools",element:r.jsx(Nn,{title:"Master Tools"})}),r.jsx(ie,{path:"/monthly-reports",element:r.jsx(dM,{})}),r.jsx(ie,{path:"/employee-directory",element:r.jsx(tf,{})}),r.jsx(ie,{path:"/client-directory",element:r.jsx(tf,{})}),r.jsx(ie,{path:"/organization-chart",element:r.jsx(kM,{})}),r.jsx(ie,{path:"/performance-scoring",element:r.jsx(uM,{})}),r.jsx(ie,{path:"/performance-concerns",element:r.jsx(Nn,{title:"Performance Concerns"})}),r.jsx(ie,{path:"/arcade",element:r.jsx(Nn,{title:"Arcade"})}),r.jsx(ie,{path:"/arcade-earn",element:r.jsx(xM,{})}),r.jsx(ie,{path:"/arcade-redeem",element:r.jsx(bM,{})}),r.jsx(ie,{path:"/arcade-history",element:r.jsx(hM,{})}),r.jsx(ie,{path:"/arcade-admin",element:r.jsx(Nn,{title:"Arcade - Admin"})}),r.jsx(ie,{path:"/profile",element:r.jsx(Nn,{title:"Profile"})}),r.jsx(ie,{path:"/profile-settings",element:r.jsx(mM,{})}),r.jsx(ie,{path:"/employee-incentives",element:r.jsx(vM,{})}),r.jsx(ie,{path:"/hr-incentive-approval",element:r.jsx(NM,{})}),r.jsx(ie,{path:"/manager-incentive-reporting",element:r.jsx(yM,{})}),r.jsx(ie,{path:"/interactive-forms",element:r.jsx(uv,{})}),r.jsx(ie,{path:"/form-tracking",element:r.jsx(cM,{})}),r.jsx(ie,{path:"/employee",element:r.jsx(at,{allowedRoles:["SEO","Ads","Social Media","YouTube SEO","Web Developer","Graphic Designer","Freelancer","Intern"],children:r.jsx(Ur,{})})}),r.jsx(ie,{path:"/client",element:r.jsx(at,{allowedRoles:["Client"],children:r.jsx(qy,{})})}),r.jsx(ie,{path:"/admin",element:r.jsx(at,{allowedRoles:["Operations Head","Manager","HR","Accountant","Sales"],children:r.jsx(ea,{})})}),r.jsx(ie,{path:"/super-admin",element:r.jsx(at,{allowedRoles:["Super Admin"],children:r.jsx(Q5,{})})}),r.jsx(ie,{path:"/seo-dashboard",element:r.jsx(at,{requiredRole:"SEO",children:r.jsx(Ur,{dashboardType:"seo"})})}),r.jsx(ie,{path:"/ads-dashboard",element:r.jsx(at,{requiredRole:"Ads",children:r.jsx(Ur,{dashboardType:"ads"})})}),r.jsx(ie,{path:"/social-media-dashboard",element:r.jsx(at,{requiredRole:"Social Media",children:r.jsx(Ur,{dashboardType:"social"})})}),r.jsx(ie,{path:"/youtube-seo-dashboard",element:r.jsx(at,{requiredRole:"YouTube SEO",children:r.jsx(Ur,{dashboardType:"youtube"})})}),r.jsx(ie,{path:"/web-developer-dashboard",element:r.jsx(at,{requiredRole:"Web Developer",children:r.jsx(Ur,{dashboardType:"dev"})})}),r.jsx(ie,{path:"/graphic-designer-dashboard",element:r.jsx(at,{requiredRole:"Graphic Designer",children:r.jsx(Ur,{dashboardType:"design"})})}),r.jsx(ie,{path:"/operations-dashboard",element:r.jsx(at,{requiredRole:"Operations Head",children:r.jsx(ea,{dashboardType:"operations"})})}),r.jsx(ie,{path:"/hr-dashboard",element:r.jsx(at,{requiredRole:"HR",children:r.jsx(ea,{dashboardType:"hr"})})}),r.jsx(ie,{path:"/accountant-dashboard",element:r.jsx(at,{requiredRole:"Accountant",children:r.jsx(ea,{dashboardType:"accounting"})})}),r.jsx(ie,{path:"/sales-dashboard",element:r.jsx(at,{requiredRole:"Sales",children:r.jsx(ea,{dashboardType:"sales"})})}),r.jsx(ie,{path:"*",element:r.jsx(Ko,{to:"/",replace:!0})})]})})}function EM(){return r.jsx(vv,{children:r.jsx(CM,{})})}Vo.createRoot(document.getElementById("root")).render(r.jsx(jt.StrictMode,{children:r.jsx(EM,{})}));
