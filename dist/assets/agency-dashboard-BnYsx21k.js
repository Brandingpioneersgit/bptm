import{u as q,a as Q,b as le,t as St,j as e,m as it,c as Ct,d as _t,S as J,T as re,D as Et,e as Pt,s as R,f as Dt,F as Tt,L as xt,g as At,l as X,C as Rt,h as oe,i as Mt}from"./manager-dashboard-DkJhgLpj.js";import{r as d,R as Ft}from"./react-vendor-z5qVsTvS.js";import{u as I}from"./auth-Bu1Z9VuU.js";import{Q as Lt}from"./intern-dashboard-C1IrzOwk.js";import{B as W,X as ht,C as ct,a as Ot,I as dt,U as B,S as gt,b as It,M as $t,P as qt,c as Ut,d as Wt,e as Ht,G as ae,f as Z,L as ee,E as Yt,g as zt,h as Vt,i as Gt,w as mt}from"./employee-dashboard-CW39i4a8.js";const O={FORM_SUBMIT_SUCCESS:"Form submitted successfully!",FORM_SUBMIT_ERROR:"Failed to submit form. Please try again.",FORM_SAVE_SUCCESS:"Changes saved successfully!",FORM_SAVE_ERROR:"Failed to save changes. Please try again.",FORM_VALIDATION_ERROR:"Please fix the validation errors before submitting.",DRAFT_SAVE_SUCCESS:"Draft saved automatically",DRAFT_SAVE_ERROR:"Failed to save draft",DRAFT_LOAD_SUCCESS:"Draft loaded successfully",DRAFT_LOAD_ERROR:"Failed to load draft",DRAFT_DELETE_SUCCESS:"Draft deleted successfully",DATA_FETCH_ERROR:"Failed to load data. Please refresh the page.",DATA_UPDATE_SUCCESS:"Data updated successfully!",DATA_UPDATE_ERROR:"Failed to update data. Please try again.",DATA_DELETE_SUCCESS:"Item deleted successfully!",DATA_DELETE_ERROR:"Failed to delete item. Please try again.",LOGIN_SUCCESS:"Welcome back!",LOGIN_ERROR:"Login failed. Please check your credentials.",LOGOUT_SUCCESS:"You have been logged out successfully.",FILE_UPLOAD_SUCCESS:"File uploaded successfully!",FILE_UPLOAD_ERROR:"Failed to upload file. Please try again.",FILE_DELETE_SUCCESS:"File deleted successfully!",FILE_DELETE_ERROR:"Failed to delete file. Please try again.",NETWORK_ERROR:"Network error. Please check your connection and try again.",TIMEOUT_ERROR:"Request timed out. Please try again.",OPERATION_SUCCESS:"Operation completed successfully!",OPERATION_ERROR:"Operation failed. Please try again.",PERMISSION_ERROR:"You do not have permission to perform this action.",VALIDATION_ERROR:"Please check your input and try again."},te={SUCCESS:"success",ERROR:"error",WARNING:"warning",INFO:"info"},U={SHORT:3e3,MEDIUM:5e3,LONG:8e3},Bt=()=>{const{notify:w}=q(),s=d.useCallback((N,h={})=>{const{title:i="Success",duration:p=U.MEDIUM,...g}=h;w({type:te.SUCCESS,title:i,message:N,timeout:p,...g})},[w]),t=d.useCallback((N,h={})=>{const{title:i="Error",duration:p=U.LONG,...g}=h;w({type:te.ERROR,title:i,message:N,timeout:p,...g})},[w]),a=d.useCallback((N,h={})=>{const{title:i="Warning",duration:p=U.MEDIUM,...g}=h;w({type:te.WARNING,title:i,message:N,timeout:p,...g})},[w]),o=d.useCallback((N,h={})=>{const{title:i="Information",duration:p=U.SHORT,...g}=h;w({type:te.INFO,title:i,message:N,timeout:p,...g})},[w]),n=d.useCallback(N=>{s(N||O.FORM_SUBMIT_SUCCESS)},[s]),x=d.useCallback((N,h)=>{const i=h||O.FORM_SUBMIT_ERROR,p=(N==null?void 0:N.message)||N||"";t(p?`${i} ${p}`:i)},[t]),m=d.useCallback(N=>{Array.isArray(N)?t(`Validation failed: ${N.join(", ")}`,{title:"Validation Error"}):t(O.FORM_VALIDATION_ERROR,{title:"Validation Error"})},[t]),f=d.useCallback(N=>{s(N||O.FORM_SAVE_SUCCESS)},[s]),S=d.useCallback((N,h)=>{const i=h||O.FORM_SAVE_ERROR,p=(N==null?void 0:N.message)||N||"";t(p?`${i} ${p}`:i)},[t]),_=d.useCallback(()=>{t(O.NETWORK_ERROR,{title:"Connection Error",duration:U.LONG})},[t]),E=d.useCallback(()=>{t(O.PERMISSION_ERROR,{title:"Permission Denied",duration:U.LONG})},[t]);return{showSuccess:s,showError:t,showWarning:a,showInfo:o,showFormSuccess:n,showFormError:x,showValidationError:m,showSaveSuccess:f,showSaveError:S,showNetworkError:_,showPermissionError:E,notify:w}},Qt=({showInDashboard:w=!1})=>{const{authState:s}=I(),{user:t}=s,{supabase:a}=Q(),{showToast:o}=q(),n=le(),[x,m]=d.useState(!1),[f,S]=d.useState(!0),[_,E]=d.useState(!1),N=St();d.useEffect(()=>{if(!t||!a){S(!1);return}h()},[t,a]);const h=async()=>{var v,C;try{S(!0);let{data:j,error:y}=await a.from("monthly_form_submissions").select("*").eq("user_id",t.id).eq("month_key",N).eq("is_submitted",!0);if(y&&((v=y.message)!=null&&v.includes("month_key"))){console.log("month_key column missing, using submission_month fallback");const l=`${N}-01`,A=await a.from("monthly_form_submissions").select("*").eq("user_id",t.id).eq("submission_month",l);j=A.data,y=A.error}if(y&&((C=y.message)!=null&&C.includes("is_submitted"))){console.log("is_submitted column missing, using status fallback");const l=`${N}-01`,A=await a.from("monthly_form_submissions").select("*").eq("user_id",t.id).eq("submission_month",l).in("status",["submitted","reviewed","approved"]);j=A.data,y=A.error}if(y){console.error("Error checking monthly submission:",y);return}const u=j&&j.length>0;m(!u);const T=`monthly_prompt_dismissed_${t.id}_${N}`,c=localStorage.getItem(T),P=new Date().toDateString();c===P&&E(!0)}catch(j){console.error("Error in checkMonthlySubmissionStatus:",j)}finally{S(!1)}},i=()=>{const v=`monthly_prompt_dismissed_${t.id}_${N}`,C=new Date().toDateString();localStorage.setItem(v,C),E(!0)},p=()=>{n.navigateToEmployeeForm()},g=()=>{n.navigateToDashboard()};return f||!x||_||!t?null:w?e.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-500 rounded-full flex items-center justify-center text-white text-xl flex-shrink-0",children:"ðŸ“‹"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-orange-900 mb-2",children:"Monthly Report Required"}),e.jsxs("p",{className:"text-orange-800 mb-4",children:["You haven't submitted your monthly performance report for ",it(N),". Please complete your submission to maintain your performance tracking."]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:p,className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium",children:"Fill Monthly Report"}),e.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Remind Me Tomorrow"})]})]})]})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-500 rounded-full flex items-center justify-center text-white text-2xl mx-auto mb-4",children:"ðŸ“‹"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Monthly Report Required"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Welcome back, ",t.name,"! You haven't submitted your monthly performance report for ",it(N),". Please complete your submission to stay on track."]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:p,className:"w-full px-4 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium",children:"Fill Monthly Report Now"}),e.jsx("button",{onClick:g,className:"w-full px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"View My Dashboard"}),e.jsx("button",{onClick:i,className:"w-full px-4 py-3 text-gray-500 hover:text-gray-700 transition-colors text-sm",children:"Remind Me Tomorrow"})]})]})})})},Kt=["Half-Day Leave","Half-Day Work from Home","Client Meeting","Sick Leave","Unpaid Leave","Casual/ Privilege (Paid Leave)","Missed Punch Biometric","Period WFH( Females Only)"],Jt=["Direct Manager","Department Head","HR Manager","Team Lead","Project Manager"],Xt=({onSubmit:w,onCancel:s})=>{const{user:t}=I(),a=Bt(),[o,n]=d.useState({employeeName:(t==null?void 0:t.name)||"",officialEmail:(t==null?void 0:t.email)||"",department:(t==null?void 0:t.department)||"",leaveType:"",startDate:{day:"",month:"",year:""},endDate:{day:"",month:"",year:""},willCompensate:"",hasPriorPermission:"",permissionFrom:"",clientInformed:"",reason:""}),[x,m]=d.useState({}),[f,S]=d.useState(!1),_=Ct("leave-application",(t==null?void 0:t.email)||"anonymous"),{saveData:E,loadSavedData:N,clearSavedData:h,autoSaveStatus:i,hasUnsavedChanges:p}=_t(_,o,{onSave:()=>a.showInfo(O.DRAFT_SAVE_SUCCESS,{duration:2e3}),onError:c=>{console.error("Auto-save failed:",c),a.showError(O.DRAFT_SAVE_ERROR)}});d.useEffect(()=>{const c=N();c?n(c):t&&n(P=>({...P,employeeName:t.name||"",officialEmail:t.email||"",department:t.department||""}))},[t,N]);const g=(c,P)=>{n(l=>({...l,[c]:P})),x[c]&&m(l=>({...l,[c]:null}))},v=(c,P,l)=>{n(A=>({...A,[c]:{...A[c],[P]:l}})),x[c]&&m(A=>({...A,[c]:null}))},C=()=>{const c={};o.employeeName.trim()||(c.employeeName="Employee name is required"),o.department.trim()||(c.department="Department is required"),o.leaveType||(c.leaveType="Leave application type is required"),o.hasPriorPermission||(c.hasPriorPermission="Prior permission status is required"),o.reason.trim()||(c.reason="Reason for leave/WFH is required");const{startDate:P,endDate:l}=o;if(!P.day||!P.month||!P.year)c.startDate="Start date is required";else{const A=new Date(P.year,P.month-1,P.day);isNaN(A.getTime())&&(c.startDate="Invalid start date")}if(!l.day||!l.month||!l.year)c.endDate="End date is required";else{const A=new Date(l.year,l.month-1,l.day);if(isNaN(A.getTime()))c.endDate="Invalid end date";else{const D=new Date(P.year,P.month-1,P.day);A<D&&(c.endDate="End date cannot be before start date")}}return o.officialEmail&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.officialEmail)&&(c.officialEmail="Please enter a valid email address"),m(c),Object.keys(c).length===0},j=async c=>{if(c.preventDefault(),!C()){a.showValidationError("Please fix the validation errors before submitting.");return}S(!0);try{const P={...o,startDate:`${o.startDate.day}/${o.startDate.month}/${o.startDate.year}`,endDate:`${o.endDate.day}/${o.endDate.month}/${o.endDate.year}`,submittedAt:new Date().toISOString(),status:"pending"};await w(P),h(),a.showFormSuccess("Leave application submitted successfully!")}catch(P){console.error("Error submitting leave application:",P),a.showFormError(P,"Failed to submit leave application. Please try again.")}finally{S(!1)}},y=()=>{p&&!window.confirm("You have unsaved changes. Are you sure you want to cancel? Your progress will be saved automatically.")||s()},u=(c,P,l=!1)=>{const A=o[c],D=x[c];return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[P,l&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",placeholder:"DD",value:A.day,onChange:r=>v(c,"day",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",maxLength:"2"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Day"})]}),e.jsx("span",{className:"text-gray-400",children:"/"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",placeholder:"MM",value:A.month,onChange:r=>v(c,"month",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",maxLength:"2"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Month"})]}),e.jsx("span",{className:"text-gray-400",children:"/"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",placeholder:"YYYY",value:A.year,onChange:r=>v(c,"year",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",maxLength:"4"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Year"})]})]}),D&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:D})]})},T=(c,P,l,A,D=!1,r)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[r,D&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("div",{className:"space-y-2",children:P.map(F=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:c,value:F,checked:l===F,onChange:H=>A(H.target.value),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:F})]},F))}),x[c]&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:x[c]})]});return e.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-lg shadow-lg",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 rounded-t-lg",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Leave / Work From Home Application"}),e.jsx("p",{className:"text-blue-100 mt-2",children:"Please fill out all required fields to submit your application"})]}),e.jsxs("form",{onSubmit:j,className:"p-6 space-y-6",children:[e.jsxs(J,{title:"Employee Information",number:1,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(re,{label:"Employee Name",value:o.employeeName,onChange:c=>g("employeeName",c),placeholder:"Type here",required:!0,error:x.employeeName}),e.jsx(re,{label:"Official Email",value:o.officialEmail,onChange:c=>g("officialEmail",c),placeholder:"Enter your e-mail",error:x.officialEmail})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Department ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:o.department,onChange:c=>g("department",c.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Enter your Information"}),Et.map(c=>e.jsx("option",{value:c,children:c},c))]}),x.department&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:x.department})]})]}),e.jsx(J,{title:"Leave Application Details",number:2,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Leave Application Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:o.leaveType,onChange:c=>g("leaveType",c.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select leave type"}),Kt.map(c=>e.jsx("option",{value:c,children:c},c))]}),x.leaveType&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:x.leaveType})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u("startDate","Start Date (DD/MM/YYYY)",!0),u("endDate","End Date (DD/MM/YYYY)",!0)]})]})}),e.jsx(J,{title:"Permission and Compensation",number:3,children:e.jsxs("div",{className:"space-y-6",children:[T("willCompensate",["Yes","No"],o.willCompensate,c=>g("willCompensate",c),!1,"Would you compensate this leave by working on a holiday?"),T("hasPriorPermission",["Yes","No"],o.hasPriorPermission,c=>g("hasPriorPermission",c),!0,"Have you taken prior permission for this leave/WFH?"),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Whom have you taken permission for your leave/WFH"}),e.jsxs("select",{value:o.permissionFrom,onChange:c=>g("permissionFrom",c.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select an option"}),Jt.map(c=>e.jsx("option",{value:c,children:c},c))]})]})]})}),e.jsx(J,{title:"Additional Information",number:4,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(re,{label:"Have you informed your client that you wont be available (Only fill if you are taking a leave and you report your work to client directly)",value:o.clientInformed,onChange:c=>g("clientInformed",c),placeholder:"Enter your Information"}),e.jsx(Pt,{label:"Reason for Leave/WFH",value:o.reason,onChange:c=>g("reason",c),placeholder:"Please provide detailed reason for your leave/WFH request",rows:4,error:x.reason,required:!0})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i==="saving"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-blue-600",children:"Saving..."})]}),i==="saved"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-2 h-2 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("span",{className:"text-green-600",children:"Saved"})]}),i==="error"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-2 h-2 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),e.jsx("span",{className:"text-red-600",children:"Save failed"})]}),p&&i==="idle"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-yellow-600",children:"Unsaved changes"})]}),!p&&i==="idle"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 bg-gray-400 rounded-full"}),e.jsx("span",{className:"text-gray-600",children:"Ready"})]})]}),p&&i!=="saving"&&e.jsx("button",{type:"button",onClick:()=>E(),className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors",children:"Save Now"})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:y,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",disabled:f,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Submitting...":"Submit Application"})]})]})]})};class Zt{constructor(){this.cache=new Map,this.cacheTimeout=5*60*1e3}async getDepartmentTargets(){const s="department_targets";if(this.cache.has(s)){const t=this.cache.get(s);if(Date.now()-t.timestamp<this.cacheTimeout)return t.data}try{const t={agency:await this.getAgencyTargets(),seo:await this.getSEOTargets(),ads:await this.getAdsTargets(),webpages:await this.getWebDevelopmentTargets()};return this.cache.set(s,{data:t,timestamp:Date.now()}),t}catch(t){return console.error("Error fetching department targets:",t),this.getFallbackTargets()}}async getAgencyTargets(){try{const s=new Date,t=new Date(s.getFullYear(),s.getMonth(),1),{data:a,error:o}=await R.from("clients").select("*").gte("created_at",t.toISOString());if(o)throw o;const n=(a==null?void 0:a.length)||0,x=60,m=Math.round(n/x*100);return{current:n,target:x,percentage:m}}catch(s){return console.error("Error fetching agency targets:",s),{current:42,target:60,percentage:70}}}async getSEOTargets(){try{const s=new Date,t=new Date(s.getFullYear(),s.getMonth(),1),{data:a,error:o}=await R.from("submissions").select("*").eq("department","SEO").gte("created_at",t.toISOString());if(o)throw o;const n=(a==null?void 0:a.length)||0,x=Math.floor(n*.75),m=Math.floor(n*4.25);return{leads:{current:x,target:20,percentage:Math.round(x/20*100)},calls:{current:m,target:100,percentage:Math.round(m/100*100)}}}catch(s){return console.error("Error fetching SEO targets:",s),{leads:{current:15,target:20,percentage:75},calls:{current:85,target:100,percentage:85}}}}async getAdsTargets(){try{const s=new Date,t=new Date(s.getFullYear(),s.getMonth(),1),{data:a,error:o}=await R.from("submissions").select("*").eq("department","Ads").gte("created_at",t.toISOString()).not("overall_score","is",null);if(o)throw o;const x=((a==null?void 0:a.filter(S=>S.overall_score>=8))||[]).length,m=12,f=Math.round(x/m*100);return{current:x,target:m,percentage:f}}catch(s){return console.error("Error fetching Ads targets:",s),{current:8,target:12,percentage:67}}}async getWebDevelopmentTargets(){try{const s=new Date,t=new Date(s.getFullYear(),s.getMonth(),1),{data:a,error:o}=await R.from("submissions").select("*").eq("department","Web Development").gte("created_at",t.toISOString());if(o)throw o;const n=(a==null?void 0:a.reduce((S,_)=>S+(_.client_work_hours||0),0))||0,x=Math.floor(n/8),m=200,f=Math.round(x/m*100);return{current:x,target:m,percentage:f}}catch(s){return console.error("Error fetching Web Development targets:",s),{current:165,target:200,percentage:82.5}}}async getDepartmentPerformance(){try{const{data:s,error:t}=await R.from("submissions").select("*").not("overall_score","is",null).gte("created_at",new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString());if(t)throw t;const a={};return s==null||s.forEach(o=>{const n=o.department;a[n]||(a[n]={totalScore:0,count:0,totalHours:0}),a[n].totalScore+=o.overall_score,a[n].count+=1,a[n].totalHours+=o.client_work_hours||0}),Object.keys(a).forEach(o=>{const n=a[o];n.averageScore=n.count>0?(n.totalScore/n.count).toFixed(1):0,n.averageHours=n.count>0?(n.totalHours/n.count).toFixed(1):0}),a}catch(s){return console.error("Error fetching department performance:",s),{}}}getFallbackTargets(){return{agency:{current:42,target:60,percentage:70},seo:{leads:{current:15,target:20,percentage:75},calls:{current:85,target:100,percentage:85}},ads:{current:8,target:12,percentage:67},webpages:{current:165,target:200,percentage:82.5}}}clearCache(){this.cache.clear()}getCacheStats(){return{size:this.cache.size,keys:Array.from(this.cache.keys())}}}const ut=new Zt,ne={agency:{name:"Full Agency",target:60,unit:"clients",icon:"ðŸ¢",color:"from-blue-500 to-blue-600"},seo:{name:"SEO",targets:{leads:{value:20,unit:"leads per website",icon:"ðŸ“ˆ"},calls:{value:100,unit:"calls per GMB",icon:"ðŸ“ž"}},color:"from-green-500 to-green-600"},ads:{name:"Ads",target:"converted business",unit:"conversions",icon:"ðŸŽ¯",color:"from-purple-500 to-purple-600"},webpages:{name:"Web Development",target:200,unit:"pages per month",icon:"ðŸ’»",color:"from-orange-500 to-orange-600"}},es=({department:w="all",compact:s=!1})=>{Q();const{authState:t}=I(),{user:a}=t,[o,n]=d.useState({}),[x,m]=d.useState(!0),[f]=d.useState(new Date().toISOString().slice(0,7));d.useEffect(()=>{S()},[w,f]);const S=async()=>{try{m(!0);const h=await ut.getDepartmentTargets();n(h)}catch(h){console.error("Error fetching target data:",h);const i=ut.getFallbackTargets();n(i)}finally{m(!1)}},_=(h,i,p)=>{const g=Math.min(h/i*100,100),v=h>i;return e.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:[e.jsx("div",{className:`h-full bg-gradient-to-r ${p} transition-all duration-500 ease-out ${v?"animate-pulse":""}`,style:{width:`${Math.min(g,100)}%`}}),v&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-400 to-yellow-500 opacity-30 animate-pulse"})]})},E=(h,i,p)=>{if(!p)return null;const g=i.targets;return s?e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:i.icon}),e.jsx("span",{className:"font-medium text-sm text-gray-900",children:i.name})]}),!g&&e.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${p.percentage>=100?"bg-green-100 text-green-700":p.percentage>=75?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[p.percentage.toFixed(0),"%"]})]}),g?e.jsx("div",{className:"space-y-2",children:Object.entries(i.targets).map(([v,C])=>{const j=p[v];return j?e.jsxs("div",{className:"text-xs",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsxs("span",{className:"text-gray-600",children:[C.icon," ",C.unit]}),e.jsxs("span",{className:"font-medium",children:[j.current,"/",j.target]})]}),_(j.current,j.target,i.color)]},v):null})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs text-gray-600",children:i.unit}),e.jsxs("span",{className:"text-sm font-medium",children:[p.current,"/",p.target]})]}),e.jsx("div",{className:"relative",children:_(p.current,p.target,i.color)})]})]},h):e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${i.color} rounded-lg flex items-center justify-center text-white text-xl`,children:i.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:i.name}),e.jsx("p",{className:"text-sm text-gray-600",children:"Monthly Targets"})]})]}),!g&&e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${p.percentage>=100?"bg-green-100 text-green-700":p.percentage>=75?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[p.percentage.toFixed(1),"%"]})]}),g?e.jsx("div",{className:"space-y-4",children:Object.entries(i.targets).map(([v,C])=>{const j=p[v];return j?e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[C.icon," ",C.unit]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:j.current}),e.jsx("span",{className:"text-gray-500",children:"/"}),e.jsx("span",{className:"text-sm text-gray-600",children:j.target}),e.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${j.percentage>=100?"bg-green-100 text-green-700":j.percentage>=75?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[j.percentage.toFixed(0),"%"]})]})]}),e.jsx("div",{className:"relative",children:_(j.current,j.target,i.color)})]},v):null})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:i.unit}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:p.current}),e.jsx("span",{className:"text-gray-500",children:"/"}),e.jsx("span",{className:"text-lg text-gray-600",children:p.target})]})]}),e.jsx("div",{className:"relative",children:_(p.current,p.target,i.color)}),e.jsx("div",{className:"mt-2 text-xs text-gray-500",children:p.current>p.target?`ðŸŽ‰ Exceeded target by ${p.current-p.target} ${i.unit}!`:`${p.target-p.current} ${i.unit} remaining`})]})]},h)};if(x)return e.jsx("div",{className:`${s?"grid grid-cols-2 gap-3":"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"}`,children:[1,2,3,4].map(h=>e.jsx("div",{className:`bg-gray-100 rounded-lg ${s?"h-20":"h-32"} animate-pulse`},h))});const N=w==="all"?Object.keys(ne):[w].filter(h=>ne[h]);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:`${s?"text-lg":"text-xl"} font-semibold text-gray-900`,children:"ðŸŽ¯ Department Targets"}),e.jsxs("p",{className:`${s?"text-xs":"text-sm"} text-gray-600`,children:[f," Progress Tracking"]})]}),e.jsx("button",{onClick:S,className:"px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors",children:"ðŸ”„ Refresh"})]}),e.jsx("div",{className:`${s?"grid grid-cols-2 gap-3":"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"}`,children:N.map(h=>{const i=ne[h],p=o[h];return E(h,i,p)})}),!s&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ’¡"}),e.jsx("span",{className:"font-medium text-gray-900",children:"Target Achievement Tips"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-700",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"SEO Team:"})," Focus on quality lead generation and GMB optimization"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Ads Team:"})," Prioritize conversion tracking and client retention"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Web Team:"})," Streamline development processes for faster delivery"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Agency:"})," Maintain client satisfaction while scaling operations"]})]})]})]})};class ts{constructor(){this.cache=new Map,this.cacheTimeout=5*60*1e3}async getAgencyStats(){const s="agency_dashboard_stats";if(this.cache.has(s)){const t=this.cache.get(s);if(Date.now()-t.timestamp<this.cacheTimeout)return t.data}try{const t={q4Targets:await this.getQ4TargetsProgress(),newClients:await this.getNewClientsCount(),totalEmployees:await this.getTotalEmployeesCount(),activeDepartments:await this.getActiveDepartmentsCount(),monthlyRevenue:await this.getMonthlyRevenue(),completionRate:await this.getProjectCompletionRate()};return this.cache.set(s,{data:t,timestamp:Date.now()}),t}catch(t){return console.error("Error fetching agency dashboard stats:",t),this.getFallbackStats()}}async getQ4TargetsProgress(){try{const{data:s,error:t}=await R.from("submissions").select("*").gte("created_at","2024-10-01").lte("created_at","2024-12-31");if(t)throw t;const a=500,o=(s==null?void 0:s.length)||0,n=Math.min(Math.round(o/a*100),100);return{value:`+${n}%`,label:"Q4 Targets",progress:n,current:o,target:a}}catch(s){return console.error("Error fetching Q4 targets:",s),{value:"+15%",label:"Q4 Targets",progress:15}}}async getNewClientsCount(){try{const s=new Date,t=new Date(s.getFullYear(),s.getMonth(),1),{data:a,error:o}=await R.from("clients").select("*").gte("created_at",t.toISOString());if(o)throw o;const n=(a==null?void 0:a.length)||0;return{value:n.toString(),label:"New Clients",thisMonth:n}}catch(s){return console.error("Error fetching new clients count:",s),{value:"5",label:"New Clients",thisMonth:5}}}async getTotalEmployeesCount(){try{const{data:s,error:t}=await R.from("unified_users").select("id").eq("status","active").eq("is_active",!0);if(t)throw t;return(s==null?void 0:s.length)||0}catch(s){return console.error("Error fetching employees count:",s),125}}async getActiveDepartmentsCount(){try{const{data:s,error:t}=await R.from("unified_users").select("department").eq("status","active").eq("is_active",!0);if(t)throw t;return new Set(s==null?void 0:s.map(o=>o.department).filter(Boolean)).size}catch(s){return console.error("Error fetching departments count:",s),8}}async getMonthlyRevenue(){try{const{data:s,error:t}=await R.from("clients").select("*");if(t)throw t;return((s==null?void 0:s.length)||0)*5e4}catch(s){return console.error("Error fetching monthly revenue:",s),25e5}}async getProjectCompletionRate(){try{const{data:s,error:t}=await R.from("submissions").select("*").gte("created_at",new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString());if(t)throw t;const a=(s==null?void 0:s.filter(x=>x.overall_score&&x.overall_score>=7).length)||0,o=(s==null?void 0:s.length)||1,n=Math.round(a/o*100);return Math.min(n,100)}catch(s){return console.error("Error fetching completion rate:",s),85}}async getPerformanceLeaderboard(){try{const{data:s,error:t}=await R.from("submissions").select("*").not("overall_score","is",null).order("overall_score",{ascending:!1}).limit(10);if(t)throw t;return!s||s.length===0?this.getFallbackLeaderboardData():s.map((a,o)=>({rank:o+1,name:a.employee_name,department:a.department,score:a.overall_score,profilePicture:null,attendanceDays:(a.attendance_wfo||0)+(a.attendance_wfh||0),tasksCompleted:a.tasks_completed||0,learningHours:this.calculateLearningHours(a.learning_activities),clientWorkHours:this.calculateClientWorkHours(a.clients)}))}catch(s){return console.error("Error fetching performance leaderboard:",s),this.getFallbackLeaderboardData()}}calculateLearningHours(s){return!s||!Array.isArray(s)?0:s.reduce((t,a)=>t+(a.hours||0),0)}calculateClientWorkHours(s){return!s||!Array.isArray(s)?0:s.reduce((t,a)=>t+(a.hours||0),0)}getFallbackLeaderboardData(){return[{rank:1,name:"Sarah Johnson",department:"Marketing",score:9.2,profilePicture:null,attendanceDays:22,tasksCompleted:15,learningHours:8,clientWorkHours:120},{rank:2,name:"Mike Chen",department:"Web",score:8.9,profilePicture:null,attendanceDays:21,tasksCompleted:12,learningHours:6,clientWorkHours:110},{rank:3,name:"Emily Davis",department:"Sales",score:8.7,profilePicture:null,attendanceDays:20,tasksCompleted:14,learningHours:7,clientWorkHours:105}]}getFallbackStats(){return{q4Targets:{value:"+15%",label:"Q4 Targets",progress:15},newClients:{value:"5",label:"New Clients",thisMonth:5},totalEmployees:125,activeDepartments:8,monthlyRevenue:25e5,completionRate:85}}clearCache(){this.cache.clear()}getCacheStats(){return{size:this.cache.size,keys:Array.from(this.cache.keys())}}}const pt=new ts,ss={"Super Admin":["all"],"Operations Head":["marketing","operations","employees","clients","reports"],HR:["hr_employees","hr_reports","hr_onboarding","hr_performance","reports"],Sales:["sales","clients","reports"],Accountant:["finance","clients","reports"],SEO:["seo","clients","reports"],Ads:["ads","clients","reports"],"Social Media":["social","clients","reports"],"YouTube SEO":["youtube","seo","clients","reports"],"Web Developer":["development","clients","reports"],"Graphic Designer":["design","clients","reports"],Freelancer:["freelance","clients","reports"],Intern:["intern","reports"]},G=({children:w,requiredPermissions:s=[],requiredRole:t=null,fallback:a=null,showError:o=!0})=>{const{authState:n}=I(),x=n.user,{notify:m}=q();if(!x||!x.role)return o?e.jsx("div",{className:"card-brand p-6 text-center",children:e.jsx("p",{className:"text-brand-text-secondary",children:"Please log in to access this content."})}):a;if(t&&x.role!==t)return o?e.jsx("div",{className:"card-brand p-6 text-center",children:e.jsxs("p",{className:"text-brand-text-secondary",children:["Access denied. Required role: ",t]})}):a;if(s.length>0){const f=ss[x.role]||[];if(!s.some(_=>f.includes(_)||f.includes("all")))return o?e.jsx("div",{className:"card-brand p-6 text-center",children:e.jsx("p",{className:"text-brand-text-secondary",children:"Access denied. Insufficient permissions."})}):a}return w};class rs{async getUserProfile(s){try{const{data:t,error:a}=await R.from("unified_users").select(`
          id,
          name,
          email,
          phone,
          role,
          user_category,
          department,
          employee_id,
          hire_date,
          address,
          city,
          state,
          zip_code,
          country,
          linkedin_profile,
          github_profile,
          portfolio_url,
          skills,
          experience_years,
          location,
          timezone,
          profile_picture_url,
          bio,
          emergency_contact_name,
          emergency_contact_phone,
          emergency_contact_relationship,
          created_at,
          updated_at
        `).eq("id",s).single();if(a)throw a;return{success:!0,data:t}}catch(t){return console.error("Error fetching user profile:",t),{success:!1,error:t.message}}}async updateUserProfile(s,t){try{const{data:a,error:o}=await R.from("unified_users").update({...t,updated_at:new Date().toISOString()}).eq("id",s).select().single();if(o)throw o;return{success:!0,data:a}}catch(a){return console.error("Error updating user profile:",a),{success:!1,error:a.message}}}async getUserPreferences(s){try{const{data:t,error:a}=await R.from("user_preferences").select("*").eq("user_id",s).single();if(a&&a.code!=="PGRST116")throw a;return t?{success:!0,data:t}:{success:!0,data:{notification_settings:{emailNotifications:!0,pushNotifications:!0,monthlyReminders:!0,performanceAlerts:!0,systemUpdates:!0,marketingEmails:!1,weeklyDigest:!0,instantMessages:!0},privacy_settings:{profileVisibility:"team",showEmail:!0,showPhone:!1,showAddress:!1,allowDirectMessages:!0,sharePerformanceData:!1},ui_preferences:{theme:"light",language:"en",timezone:"UTC",dateFormat:"MM/DD/YYYY",timeFormat:"12h",dashboardLayout:"default"},security_preferences:{twoFactorEnabled:!1,sessionTimeout:30,loginNotifications:!0,passwordChangeNotifications:!0},communication_preferences:{preferredContactMethod:"email",workingHours:{start:"09:00",end:"17:00",timezone:"UTC"},availableForMessages:!0,autoReplyEnabled:!1,autoReplyMessage:""}}}}catch(t){return console.error("Error fetching user preferences:",t),{success:!1,error:t.message}}}async updateUserPreferences(s,t){try{const{data:a,error:o}=await R.from("user_preferences").upsert({user_id:s,...t,updated_at:new Date().toISOString()}).select().single();if(o)throw o;return{success:!0,data:a}}catch(a){return console.error("Error updating user preferences:",a),{success:!1,error:a.message}}}async changePassword(s,t){try{const{data:a,error:o}=await R.auth.updateUser({password:t});if(o)throw o;return{success:!0,data:a}}catch(a){return console.error("Error changing password:",a),{success:!1,error:a.message}}}async updateTwoFactorAuth(s,t){try{const{data:a,error:o}=await R.from("user_preferences").upsert({user_id:s,security_preferences:{twoFactorEnabled:t,sessionTimeout:30,loginNotifications:!0,passwordChangeNotifications:!0},updated_at:new Date().toISOString()}).select().single();if(o)throw o;return{success:!0,data:a}}catch(a){return console.error("Error updating 2FA settings:",a),{success:!1,error:a.message}}}async getUserNotifications(s,t=20,a=0){try{const{data:o,error:n}=await R.from("notification_history").select("*").eq("user_id",s).order("created_at",{ascending:!1}).range(a,a+t-1);if(n)throw n;return{success:!0,data:o}}catch(o){return console.error("Error fetching notifications:",o),{success:!1,error:o.message}}}async markNotificationAsRead(s){try{const{data:t,error:a}=await R.from("notification_history").update({status:"read",read_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",s).select().single();if(a)throw a;return{success:!0,data:t}}catch(t){return console.error("Error marking notification as read:",t),{success:!1,error:t.message}}}async createNotification(s,t){try{const{data:a,error:o}=await R.from("notification_history").insert({user_id:s,...t,created_at:new Date().toISOString()}).select().single();if(o)throw o;return{success:!0,data:a}}catch(a){return console.error("Error creating notification:",a),{success:!1,error:a.message}}}async getSystemSettings(s=!0){try{let t=R.from("system_settings").select("*");s&&(t=t.eq("is_public",!0));const{data:a,error:o}=await t;if(o)throw o;return{success:!0,data:a}}catch(t){return console.error("Error fetching system settings:",t),{success:!1,error:t.message}}}async updateSystemSetting(s,t,a){try{const{data:o,error:n}=await R.from("system_settings").update({setting_value:t,updated_by:a,updated_at:new Date().toISOString()}).eq("setting_key",s).select().single();if(n)throw n;return{success:!0,data:o}}catch(o){return console.error("Error updating system setting:",o),{success:!1,error:o.message}}}async getUserSessions(s){try{const{data:t,error:a}=await R.from("user_sessions").select("*").eq("user_id",s).order("created_at",{ascending:!1});if(a)throw a;return{success:!0,data:t}}catch(t){return console.error("Error fetching user sessions:",t),{success:!1,error:t.message}}}async revokeSession(s){try{const{data:t,error:a}=await R.from("user_sessions").update({is_active:!1,ended_at:new Date().toISOString()}).eq("id",s).select().single();if(a)throw a;return{success:!0,data:t}}catch(t){return console.error("Error revoking session:",t),{success:!1,error:t.message}}}}const $=new rs,ft=({isOpen:w,onClose:s})=>{const{user:t}=I(),{showToast:a}=q(),[o,n]=d.useState([]),[x,m]=d.useState(!1),[f,S]=d.useState("all"),[_,E]=d.useState(0),[N,h]=d.useState(!0);d.useEffect(()=>{w&&(t!=null&&t.id)&&i()},[w,t==null?void 0:t.id,f]);const i=async(y=0)=>{if(t!=null&&t.id){m(!0);try{const u=await $.getUserNotifications(t.id,20,y*20);if(u.success){let T=u.data;f==="unread"?T=u.data.filter(c=>c.status!=="read"):f==="read"&&(T=u.data.filter(c=>c.status==="read")),n(y===0?T:c=>[...c,...T]),h(u.data.length===20),E(y)}}catch(u){console.error("Error fetching notifications:",u),a("Failed to load notifications","error")}finally{m(!1)}}},p=async y=>{try{(await $.markNotificationAsRead(y)).success&&n(T=>T.map(c=>c.id===y?{...c,status:"read",read_at:new Date().toISOString()}:c))}catch(u){console.error("Error marking notification as read:",u),a("Failed to mark notification as read","error")}},g=async()=>{const y=o.filter(u=>u.status!=="read");try{await Promise.all(y.map(u=>$.markNotificationAsRead(u.id))),n(u=>u.map(T=>({...T,status:"read",read_at:new Date().toISOString()}))),a("All notifications marked as read","success")}catch(u){console.error("Error marking all notifications as read:",u),a("Failed to mark all notifications as read","error")}},v=(y,u)=>{const T=`w-5 h-5 ${u==="urgent"?"text-red-500":u==="high"?"text-orange-500":"text-blue-500"}`;switch(y){case"email":return e.jsx(dt,{className:T});case"system":return e.jsx(ct,{className:T});case"in_app":return e.jsx(W,{className:T});default:return e.jsx(dt,{className:T})}},C=y=>{const u=new Date(y),c=Math.floor((new Date-u)/(1e3*60));return c<1?"Just now":c<60?`${c}m ago`:c<1440?`${Math.floor(c/60)}h ago`:`${Math.floor(c/1440)}d ago`},j=o.filter(y=>y.status!=="read").length;return w?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Notification Center"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:j>0?`${j} unread`:"All caught up!"}),e.jsx(W,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ht,{className:"w-6 h-6"})})]})]}),e.jsx("div",{className:"flex border-b border-gray-200 mb-4",children:["all","unread","read"].map(y=>e.jsx("button",{onClick:()=>{S(y),E(0)},className:`flex-1 py-2 px-4 text-sm font-medium capitalize transition-colors ${f===y?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-500 hover:text-gray-700"}`,children:y},y))}),j>0&&e.jsx("div",{className:"mb-4",children:e.jsx("button",{onClick:g,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Mark all as read"})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:x&&o.length===0?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-gray-500",children:[e.jsx(W,{className:"w-12 h-12 mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"No notifications"}),e.jsx("p",{className:"text-sm text-center",children:f==="unread"?"No unread notifications":f==="read"?"No read notifications":"You're all caught up!"})]}):e.jsxs("div",{className:"divide-y divide-gray-200",children:[o.map(y=>e.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors cursor-pointer ${y.status!=="read"?"bg-blue-50":""}`,onClick:()=>{y.status!=="read"&&p(y.id)},children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:v(y.notification_type,y.priority)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:`text-sm font-medium ${y.status!=="read"?"text-gray-900":"text-gray-600"}`,children:y.title}),e.jsxs("div",{className:"flex items-center space-x-2",children:[y.status!=="read"&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-500",children:C(y.created_at)})]})]}),e.jsx("p",{className:`text-sm mt-1 ${y.status!=="read"?"text-gray-700":"text-gray-500"}`,children:y.message}),y.priority==="urgent"&&e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(ct,{className:"w-4 h-4 text-red-500 mr-1"}),e.jsx("span",{className:"text-xs text-red-600 font-medium",children:"Urgent"})]}),y.status==="read"&&y.read_at&&e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(Ot,{className:"w-4 h-4 text-green-500 mr-1"}),e.jsxs("span",{className:"text-xs text-green-600",children:["Read ",C(y.read_at)]})]})]})]})},y.id)),N&&e.jsx("div",{className:"p-4",children:e.jsx("button",{onClick:()=>i(_+1),disabled:x,className:"w-full py-2 px-4 text-sm text-blue-600 hover:text-blue-800 font-medium disabled:opacity-50",children:x?"Loading...":"Load more"})})]})})]})}):null},as=({onClose:w})=>{const{user:s}=I(),{showToast:t}=Dt(),[a,o]=d.useState("profile"),[n,x]=d.useState(!1),[m,f]=d.useState(!1),[S,_]=d.useState(!1),[E,N]=d.useState(!1),[h,i]=d.useState({name:"",email:"",phone:"",address:"",bio:"",department:"",role:"",hire_date:"",emergency_contact_name:"",emergency_contact_phone:"",linkedin_url:"",portfolio_url:"",github_url:"",skills:[],certifications:[],experience_years:""}),[p,g]=d.useState({password:"",confirmPassword:"",twoFactorEnabled:!1,sessionTimeout:30}),[v,C]=d.useState({emailNotifications:!0,pushNotifications:!0,monthlyReminders:!0,performanceAlerts:!0,systemUpdates:!0,marketingEmails:!1,weeklyDigest:!0,instantMessages:!0}),[j,y]=d.useState({profileVisibility:"team",showEmail:!0,showPhone:!1,showAddress:!1,allowDirectMessages:!0,sharePerformanceData:!1});d.useEffect(()=>{u()},[s]);const u=async()=>{if(s!=null&&s.id){x(!0);try{const l=await $.getUserProfile(s.id);if(l.success&&l.data){const D=l.data;i({name:D.name||"",email:D.email||"",phone:D.phone||"",address:D.address||"",bio:D.bio||"",department:D.department||"",role:D.role||"",hire_date:D.hire_date||"",emergency_contact_name:D.emergency_contact_name||"",emergency_contact_phone:D.emergency_contact_phone||"",linkedin_url:D.linkedin_url||"",portfolio_url:D.portfolio_url||"",github_url:D.github_url||"",skills:D.skills||[],certifications:D.certifications||[],experience_years:D.experience_years||""})}const A=await $.getUserPreferences(s.id);if(A.success&&A.data){const D=A.data;C(D.notification_settings||v),y(D.privacy_settings||j)}}catch(l){console.error("Error loading user data:",l),t("Failed to load user data","error")}finally{x(!1)}}},T=async()=>{f(!0);try{const l=await $.updateUserProfile(s.id,{name:h.name,phone:h.phone,address:h.address,emergency_contact_name:h.emergency_contact_name,emergency_contact_phone:h.emergency_contact_phone,linkedin_url:h.linkedin_url,portfolio_url:h.portfolio_url,github_url:h.github_url,skills:h.skills,certifications:h.certifications,experience_years:h.experience_years});if(l.success)t("Profile updated successfully","success");else throw new Error(l.error)}catch(l){console.error("Error updating profile:",l),t("Failed to update profile","error")}finally{f(!1)}},c=async()=>{if(p.password!==p.confirmPassword){t("Passwords do not match","error");return}if(p.password.length<8){t("Password must be at least 8 characters","error");return}f(!0);try{const l=await $.changePassword("",p.password);if(l.success)t("Password updated successfully","success"),g({...p,password:"",confirmPassword:""});else throw new Error(l.error)}catch(l){console.error("Error updating password:",l),t("Failed to update password","error")}finally{f(!1)}},P=[{id:"profile",label:"Profile",icon:B},{id:"account",label:"Account",icon:gt},{id:"notifications",label:"Notifications",icon:W},{id:"privacy",label:"Privacy",icon:It}];return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg p-8",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{children:"Loading settings..."})]})})}):e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Profile Settings"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>_(!0),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Notifications",children:e.jsx(W,{className:"w-5 h-5"})}),e.jsx("button",{onClick:w,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ht,{className:"w-6 h-6"})})]})]}),e.jsxs("div",{className:"flex h-full",children:[e.jsx("div",{className:"w-64 bg-white border-r border-gray-200 p-4",children:e.jsx("nav",{className:"space-y-2",children:P.map(l=>{const A=l.icon;return e.jsxs("button",{onClick:()=>o(l.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${a===l.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(A,{className:"w-4 h-4 mr-3"}),l.label]},l.id)})})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[a==="profile"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:h.name,onChange:l=>i({...h,name:l.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your full name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx($t,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"email",value:h.email,onChange:l=>i({...h,email:l.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(qt,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"tel",value:h.phone,onChange:l=>i({...h,phone:l.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your phone number"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ut,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:h.location,onChange:l=>i({...h,location:l.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your location"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Professional Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsxs("div",{className:"relative",children:[e.jsx(Wt,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:h.department,onChange:l=>i({...h,department:l.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your department"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:h.role,onChange:l=>i({...h,role:l.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your role"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Experience (Years)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ht,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"number",value:h.experience_years,onChange:l=>i({...h,experience_years:parseInt(l.target.value)||0}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Years of experience",min:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timezone"}),e.jsxs("select",{value:h.timezone,onChange:l=>i({...h,timezone:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"America/New_York",children:"Eastern Time"}),e.jsx("option",{value:"America/Chicago",children:"Central Time"}),e.jsx("option",{value:"America/Denver",children:"Mountain Time"}),e.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Social Links"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"LinkedIn Profile"}),e.jsxs("div",{className:"relative",children:[e.jsx(ae,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"url",value:h.linkedin_profile,onChange:l=>i({...h,linkedin_profile:l.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://linkedin.com/in/username"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GitHub Profile"}),e.jsxs("div",{className:"relative",children:[e.jsx(ae,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"url",value:h.github_profile,onChange:l=>i({...h,github_profile:l.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://github.com/username"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Portfolio URL"}),e.jsxs("div",{className:"relative",children:[e.jsx(ae,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"url",value:h.portfolio_url,onChange:l=>i({...h,portfolio_url:l.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://yourportfolio.com"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),e.jsx("textarea",{value:h.bio,onChange:l=>i({...h,bio:l.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Tell us about yourself..."})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:T,disabled:m,className:"flex items-center space-x-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{children:m?"Saving...":"Save Profile"})]})})]}),a==="account"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Change Password"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx("input",{type:E?"text":"password",value:passwordData.currentPassword,onChange:l=>setPasswordData({...passwordData,currentPassword:l.target.value}),className:"w-full pl-10 pr-12 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter current password"}),e.jsx("button",{type:"button",onClick:()=>N(!E),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:E?e.jsx(Yt,{className:"w-4 h-4"}):e.jsx(zt,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx("input",{type:E?"text":"password",value:passwordData.newPassword,onChange:l=>setPasswordData({...passwordData,newPassword:l.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter new password"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx("input",{type:E?"text":"password",value:passwordData.confirmPassword,onChange:l=>setPasswordData({...passwordData,confirmPassword:l.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Confirm new password"})]})]}),e.jsxs("button",{onClick:c,disabled:m,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{children:m?"Updating...":"Update Password"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Two-Factor Authentication"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Enable 2FA"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Add an extra layer of security to your account"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p.twoFactorEnabled,onChange:l=>g({...p,twoFactorEnabled:l.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Session Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Timeout (minutes)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Vt,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsxs("select",{value:p.sessionTimeout,onChange:l=>g({...p,sessionTimeout:parseInt(l.target.value)}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:15,children:"15 minutes"}),e.jsx("option",{value:30,children:"30 minutes"}),e.jsx("option",{value:60,children:"1 hour"}),e.jsx("option",{value:120,children:"2 hours"}),e.jsx("option",{value:480,children:"8 hours"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Login Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get notified when someone logs into your account"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p.loginNotifications,onChange:l=>g({...p,loginNotifications:l.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Password Change Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get notified when your password is changed"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p.passwordChangeNotifications,onChange:l=>g({...p,passwordChangeNotifications:l.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:handleSaveAccountSettings,disabled:m,className:"flex items-center space-x-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{children:m?"Saving...":"Save Settings"})]})})]}),a==="notifications"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Email Notifications"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Form Submissions"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get notified when new forms are submitted"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:v.emailNotifications.formSubmissions,onChange:l=>C({...v,emailNotifications:{...v.emailNotifications,formSubmissions:l.target.checked}}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Task Updates"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get notified about task assignments and updates"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:v.emailNotifications.taskUpdates,onChange:l=>C({...v,emailNotifications:{...v.emailNotifications,taskUpdates:l.target.checked}}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"System Updates"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get notified about system maintenance and updates"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:v.emailNotifications.systemUpdates,onChange:l=>C({...v,emailNotifications:{...v.emailNotifications,systemUpdates:l.target.checked}}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Weekly Reports"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive weekly performance and activity reports"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:v.emailNotifications.weeklyReports,onChange:l=>C({...v,emailNotifications:{...v.emailNotifications,weeklyReports:l.target.checked}}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Push Notifications"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Instant Messages"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get push notifications for instant messages"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:v.pushNotifications.instantMessages,onChange:l=>C({...v,pushNotifications:{...v.pushNotifications,instantMessages:l.target.checked}}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Urgent Alerts"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get push notifications for urgent alerts"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:v.pushNotifications.urgentAlerts,onChange:l=>C({...v,pushNotifications:{...v.pushNotifications,urgentAlerts:l.target.checked}}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Reminders"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get push notifications for task reminders"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:v.pushNotifications.reminders,onChange:l=>C({...v,pushNotifications:{...v.pushNotifications,reminders:l.target.checked}}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Notification Frequency"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Digest Frequency"}),e.jsxs("select",{value:v.frequency.emailDigest,onChange:l=>C({...v,frequency:{...v.frequency,emailDigest:l.target.value}}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"immediate",children:"Immediate"}),e.jsx("option",{value:"hourly",children:"Hourly"}),e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"never",children:"Never"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quiet Hours"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Start Time"}),e.jsx("input",{type:"time",value:v.quietHours.start,onChange:l=>C({...v,quietHours:{...v.quietHours,start:l.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"End Time"}),e.jsx("input",{type:"time",value:v.quietHours.end,onChange:l=>C({...v,quietHours:{...v.quietHours,end:l.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:handleSaveNotifications,disabled:m,className:"flex items-center space-x-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{children:m?"Saving...":"Save Notifications"})]})})]}),a==="privacy"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Profile Visibility"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Who can see your profile?"}),e.jsxs("select",{value:j.profileVisibility,onChange:l=>y({...j,profileVisibility:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"public",children:"Everyone"}),e.jsx("option",{value:"team",children:"Team Members Only"}),e.jsx("option",{value:"department",children:"Department Only"}),e.jsx("option",{value:"private",children:"Only Me"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Show Email Address"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Allow others to see your email address"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j.showEmail,onChange:l=>y({...j,showEmail:l.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Show Phone Number"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Allow others to see your phone number"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j.showPhone,onChange:l=>y({...j,showPhone:l.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Show Online Status"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Let others know when you're online"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j.showOnlineStatus,onChange:l=>y({...j,showOnlineStatus:l.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Data & Analytics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Activity Tracking"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Allow system to track your activity for analytics"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j.allowAnalytics,onChange:l=>y({...j,allowAnalytics:l.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Performance Metrics"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Include your data in team performance metrics"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j.allowPerformanceTracking,onChange:l=>y({...j,allowPerformanceTracking:l.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Data Export"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Allow data export for backup purposes"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j.allowDataExport,onChange:l=>y({...j,allowDataExport:l.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Data Retention"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Keep activity logs for"}),e.jsxs("select",{value:j.dataRetentionPeriod,onChange:l=>y({...j,dataRetentionPeriod:l.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"30",children:"30 days"}),e.jsx("option",{value:"90",children:"90 days"}),e.jsx("option",{value:"180",children:"6 months"}),e.jsx("option",{value:"365",children:"1 year"}),e.jsx("option",{value:"forever",children:"Forever"})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(AlertTriangle,{className:"w-5 h-5 text-yellow-600 mt-0.5 mr-3"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-800",children:"Data Deletion Request"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"You can request deletion of your personal data at any time. This action cannot be undone."}),e.jsx("button",{className:"mt-2 text-sm text-yellow-800 underline hover:text-yellow-900",children:"Request Data Deletion"})]})]})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:handleSavePrivacy,disabled:m,className:"flex items-center space-x-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{children:m?"Saving...":"Save Privacy Settings"})]})})]})]})]})]}),e.jsx(ft,{isOpen:S,onClose:()=>_(!1)})]})},ns=({title:w,subtitle:s,icon:t,showNotifications:a=!0,showProfile:o=!0,customActions:n=[],className:x=""})=>{const{authState:m,logout:f}=I(),{user:S}=m,_=le(),[E,N]=d.useState(!1),[h,i]=d.useState(!1),[p,g]=d.useState(!1),v=()=>{f(),_.navigateToLogin()},C=()=>{i(!0),g(!1)},j=()=>{N(!0)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`bg-white/80 backdrop-blur-sm shadow-lg border-b border-gray-200/50 ${x}`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-20",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[t&&e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:t})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:w}),s&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s})]})]}),S&&e.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-4 py-2 rounded-full shadow-md",children:[e.jsx("span",{className:"text-sm",children:"ðŸ‘‹"}),e.jsxs("span",{className:"text-sm font-medium",children:["Welcome, ",S.name||S.email]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:new Date().toLocaleDateString("en-US",{weekday:"long"})}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date().toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),n.map((y,u)=>e.jsxs("button",{onClick:y.onClick,className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors cursor-pointer ${y.variant==="primary"?"bg-blue-600 text-white hover:bg-blue-700 shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200 border border-gray-300"}`,title:y.tooltip,style:{pointerEvents:"auto",zIndex:10},children:[y.icon&&e.jsx("span",{className:"text-sm",children:y.icon}),e.jsx("span",{className:"text-sm font-medium",children:y.label})]},u)),a&&S&&e.jsxs("button",{onClick:j,className:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",title:"Notifications",children:[e.jsx(W,{className:"w-6 h-6"}),e.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"})]}),o&&S&&e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>g(!p),className:"flex items-center space-x-2 px-3 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-sm hover:shadow-md",children:[e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:S.role})]}),p&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[e.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:S.name||S.email}),e.jsx("p",{className:"text-xs text-gray-500",children:S.role})]}),e.jsxs("button",{onClick:C,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[e.jsx(gt,{className:"w-4 h-4"}),e.jsx("span",{children:"Profile Settings"})]}),e.jsxs("button",{onClick:v,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2",children:[e.jsx(Gt,{className:"w-4 h-4"}),e.jsx("span",{children:"Logout"})]})]})]}),!S&&e.jsxs("button",{onClick:()=>_.navigateToLogin(),className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-sm hover:shadow-md",children:[e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Login"})]})]})]})})}),E&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-hidden",children:e.jsx(ft,{onClose:()=>N(!1)})})}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:e.jsx(as,{onClose:()=>i(!1)})})}),p&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>g(!1)})]})},ls=()=>{const[w,s]=d.useState([]),[t,a]=d.useState(!0),[o,n]=d.useState(null),[x,m]=d.useState(new Date),[f,S]=d.useState(null),[_,E]=d.useState(!1),{notify:N}=q(),h=u=>u?new Date(u).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"-",i=u=>u.toLocaleDateString("en-US",{month:"long",year:"numeric"}),p=()=>{const u=new Date(x);u.setMonth(u.getMonth()-1),m(u)},g=()=>{const u=new Date(x);u.setMonth(u.getMonth()+1),m(u)},v=u=>{switch(u){case"Paid":return"bg-green-100 text-green-800";case"Partial":return"bg-yellow-100 text-yellow-800";case"Overdue":return"bg-red-100 text-red-800";case"Pending":default:return"bg-gray-100 text-gray-800"}},{supabase:C}=Q();d.useEffect(()=>{(async()=>{a(!0);const T=x.getFullYear(),c=x.getMonth()+1,P=`${T}-${c.toString().padStart(2,"0")}-01`;try{const l=[{id:1,name:"Client A",client_type:"recurring",due_day:5,monthly_retainer:5e4},{id:2,name:"Client B",client_type:"web",due_day:10,monthly_retainer:75e3},{id:3,name:"Client C",client_type:"recurring",due_day:15,monthly_retainer:6e4},{id:4,name:"Client D",client_type:"web",due_day:20,monthly_retainer:8e4},{id:5,name:"Client E",client_type:"recurring",due_day:25,monthly_retainer:45e3}],D=l.map(r=>({client_id:r.id,payment_month:P,amount:r.monthly_retainer||5e4,payment_date:Math.random()>.3?new Date().toISOString().split("T")[0]:null,bank:Math.random()>.3?["HDFC BP","Kotak BP","AXIS BP"][Math.floor(Math.random()*3)]:null,status:["Paid","Pending","Overdue","Partial"][Math.floor(Math.random()*4)],remarks:"",payment_type:r.client_type||"recurring",advance_amount:r.client_type==="web"?Math.floor(Math.random()*5e4):0,pending_amount:r.client_type==="web"?Math.floor(Math.random()*25e3):0})).map(r=>{const F=l.find(H=>H.id===r.client_id);return{id:`${r.client_id}-${r.payment_month}`,clientName:(F==null?void 0:F.name)||"Unknown Client",clientType:(F==null?void 0:F.client_type)||"recurring",paymentType:r.payment_type||"recurring",dueDay:(F==null?void 0:F.due_day)||Math.floor(Math.random()*28)+1,paymentDate:r.payment_date,bank:r.bank||"-",status:r.status,remarks:r.remarks||"",paymentDue:r.status==="Pending"||r.status==="Overdue",advanceAmount:r.advance_amount||0,pendingAmount:r.pending_amount||0}});s(D),n(null)}catch(l){console.error("Error generating payment data:",l),n("Failed to load payment data"),s([]),N({title:"Loading Error",message:"Unable to load client payment data. Please try again.",type:"error"})}finally{a(!1)}})()},[x]);const j=u=>{S(u),E(!0)},y=()=>{E(!1),S(null)};return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-cyan-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"ðŸ’°"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Client Payment Status"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:p,className:"p-2 rounded-full hover:bg-gray-100 transition-all duration-200 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600 hover:text-gray-800 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:i(x)}),e.jsx("button",{onClick:g,className:"p-2 rounded-full hover:bg-gray-100 transition-all duration-200 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-600 hover:text-gray-800 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),t?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):w.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"},"client"),e.jsx("th",{className:"px-3 py-3 bg-gray-50 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Day"},"dueDay"),e.jsx("th",{className:"px-3 py-3 bg-gray-50 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Date"},"paymentDate"),e.jsx("th",{className:"px-3 py-3 bg-gray-50 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bank"},"bank"),e.jsx("th",{className:"px-3 py-3 bg-gray-50 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"},"status"),w.some(u=>u.clientType==="web"||u.paymentType==="web")&&e.jsxs(e.Fragment,{children:[e.jsx("th",{className:"px-3 py-3 bg-gray-50 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Advance Amount"},"advanceAmount"),e.jsx("th",{className:"px-3 py-3 bg-gray-50 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pending Amount"},"pendingAmount")]})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(u=>e.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors duration-200",onClick:()=>j(u),children:[e.jsxs("td",{className:"px-3 py-3 whitespace-nowrap text-sm font-medium text-blue-600 hover:text-blue-800",children:[u.clientName,u.paymentDue&&e.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:"Payment Due"})]},`client-${u.id}`),e.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-center text-gray-700",children:u.dueDay},`dueDay-${u.id}`),e.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-center text-gray-700",children:h(u.paymentDate)},`paymentDate-${u.id}`),e.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-center text-gray-700",children:u.bank},`bank-${u.id}`),e.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-center",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${v(u.status)}`,children:u.status})},`status-${u.id}`),u.clientType==="web"||u.paymentType==="web"?e.jsxs(e.Fragment,{children:[e.jsxs("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-right text-gray-700",children:["â‚¹",u.advanceAmount.toLocaleString("en-IN")]},`advanceAmount-${u.id}`),e.jsxs("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-right text-gray-700",children:["â‚¹",u.pendingAmount.toLocaleString("en-IN")]},`pendingAmount-${u.id}`)]}):w.some(T=>T.clientType==="web"||T.paymentType==="web")?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-right text-gray-700",children:"-"},`advanceAmount-${u.id}`),e.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-right text-gray-700",children:"-"},`pendingAmount-${u.id}`)]}):null]},`payment-${u.id}`))})]})}):e.jsx("div",{className:"py-8 text-center",children:e.jsxs("p",{className:"text-gray-500",children:["No payment data available for ",i(x)]})}),_&&f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Payment Details"}),e.jsx("button",{onClick:y,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Tt,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client Name"}),e.jsx("p",{className:"text-sm text-gray-900 font-semibold",children:f.clientName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${v(f.status)}`,children:f.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Day"}),e.jsx("p",{className:"text-sm text-gray-900",children:f.dueDay})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Date"}),e.jsx("p",{className:"text-sm text-gray-900",children:h(f.paymentDate)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank"}),e.jsx("p",{className:"text-sm text-gray-900",children:f.bank})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client Type"}),e.jsx("p",{className:"text-sm text-gray-900 capitalize",children:f.clientType})]}),(f.clientType==="web"||f.paymentType==="web")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Advance Amount"}),e.jsxs("p",{className:"text-sm text-gray-900 font-semibold text-green-600",children:["â‚¹",f.advanceAmount.toLocaleString("en-IN")]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pending Amount"}),e.jsxs("p",{className:"text-sm text-gray-900 font-semibold text-red-600",children:["â‚¹",f.pendingAmount.toLocaleString("en-IN")]})]})]})]}),f.remarks&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remarks"}),e.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-md",children:f.remarks})]}),f.paymentDue&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-red-400 mr-2",children:"âš ï¸"}),e.jsx("p",{className:"text-sm text-red-800 font-medium",children:"Payment is overdue and requires immediate attention."})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200",children:[e.jsx("button",{onClick:y,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Close"}),e.jsx("button",{onClick:()=>{N({title:"Payment Reminder",message:`Reminder sent for ${f.clientName}`,type:"success"}),y()},className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md transition-colors",children:"Send Reminder"})]})]})})]})},os=()=>{const{supabase:w}=Q(),{showToast:s}=q(),[t,a]=d.useState([]),[o,n]=d.useState(!0),[x,m]=d.useState(null),[f,S]=d.useState("all");d.useEffect(()=>{_()},[]);const _=async()=>{try{n(!0),m(null);let{data:g,error:v}=await w.from("client_projects").select(`
          *,
          clients:client_id (
            id,
            company_name,
            contact_name,
            email,
            phone
          )
        `).order("created_at",{ascending:!1});v&&(console.log("client_projects table not found, using mock data"),g=E()),a(g||[])}catch(g){console.error("Error fetching projects:",g),m("Failed to load projects"),a(E())}finally{n(!1)}},E=()=>[{id:1,project_name:"E-commerce Website Redesign",description:"Complete redesign of online store with modern UI/UX",status:"in_progress",priority:"high",start_date:"2024-01-15",end_date:"2024-03-15",progress:65,budget:5e4,platform:"Shopify",clients:{company_name:"TechCorp Solutions",contact_name:"John Smith",email:"john@techcorp.com"}},{id:2,project_name:"Corporate Portfolio Site",description:"Professional portfolio website for startup company",status:"completed",priority:"medium",start_date:"2023-12-01",end_date:"2024-01-20",progress:100,budget:25e3,platform:"WordPress",clients:{company_name:"StartupXYZ",contact_name:"Sarah Johnson",email:"sarah@startupxyz.com"}},{id:3,project_name:"Custom Web Application",description:"Custom dashboard and reporting system",status:"in_progress",priority:"high",start_date:"2023-11-15",end_date:"2024-02-28",progress:80,budget:75e3,platform:"React + Node.js",clients:{company_name:"FinanceInc",contact_name:"Michael Brown",email:"michael@financeinc.com"}},{id:4,project_name:"Mobile App Development",description:"Cross-platform mobile application",status:"planning",priority:"medium",start_date:"2024-02-01",end_date:"2024-05-01",progress:15,budget:6e4,platform:"React Native",clients:{company_name:"MobileFirst Ltd",contact_name:"Emily Davis",email:"emily@mobilefirst.com"}}],N=g=>{switch(g){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"planning":return"bg-yellow-100 text-yellow-800";case"on_hold":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},h=g=>{switch(g){case"high":return"text-red-600";case"medium":return"text-yellow-600";case"low":return"text-green-600";default:return"text-gray-600"}},i=t.filter(g=>f==="all"?!0:g.status===f),p=g=>{s(`Viewing project ${g}`,"info")};return o?e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-gray-200/50 p-8",children:e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(xt,{size:"lg",showText:!0,text:"Loading projects..."})})}):e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-gray-200/50 p-8 hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-cyan-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"ðŸ“"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Client Projects"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Active and recent client projects"})]})]}),e.jsxs("select",{value:f,onChange:g=>S(g.target.value),className:"px-3 py-1 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Projects"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"planning",children:"Planning"}),e.jsx("option",{value:"on_hold",children:"On Hold"})]})]}),x&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600",children:x})}),e.jsx("div",{className:"space-y-4",children:i.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-gray-400 text-4xl mb-2",children:"ðŸ“‚"}),e.jsx("p",{className:"text-gray-500",children:"No projects found"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f==="all"?"No projects available":`No ${f.replace("_"," ")} projects`})]}):i.map(g=>{var v,C;return e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all duration-200 hover:border-blue-300",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:g.project_name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${N(g.status)}`,children:g.status.replace("_"," ").toUpperCase()}),e.jsxs("span",{className:`text-xs font-medium ${h(g.priority)}`,children:[(v=g.priority)==null?void 0:v.toUpperCase()," PRIORITY"]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:g.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs text-gray-500",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Client:"})," ",((C=g.clients)==null?void 0:C.company_name)||"Unknown"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Platform:"})," ",g.platform||"Not specified"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Start Date:"})," ",new Date(g.start_date).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"End Date:"})," ",new Date(g.end_date).toLocaleDateString()]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Progress"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[g.progress,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${g.progress}%`}})})]})]}),e.jsxs("div",{className:"ml-4 flex flex-col space-y-2",children:[e.jsx("button",{onClick:()=>p(g.id),className:"px-3 py-1 text-xs bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"View Details"}),g.budget&&e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Budget: $",g.budget.toLocaleString()]})]})]})},g.id)})}),i.length>0&&e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Showing ",i.length," of ",t.length," projects"]}),e.jsx("button",{className:"text-blue-600 hover:text-blue-700 font-medium",children:"View All Projects â†’"})]})})]})},is=({news:w,isManager:s,onUpdateNews:t})=>{const[a,o]=d.useState(!1),[n,x]=d.useState(w),m=()=>{t(n),o(!1)};return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Company News"}),s&&e.jsx("button",{onClick:()=>o(!a),className:"text-sm text-blue-600 hover:text-blue-800",children:a?"Cancel":"Edit"})]}),a?e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{value:n,onChange:f=>x(f.target.value),className:"w-full p-2 border border-gray-300 rounded-md text-sm",rows:3}),e.jsx("button",{onClick:m,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Save"})]}):e.jsx("div",{className:"text-sm text-gray-600",children:e.jsx("div",{className:"animate-pulse",children:w||"No company news available."})})]})},cs=({workspaces:w,isLoading:s,onWorkspaceClick:t})=>{if(s)return e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2 sm:gap-4",children:[...Array(6)].map((o,n)=>e.jsx(oe,{className:"h-20"},n))});const a=Object.entries(w);return a.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ðŸš€"}),e.jsx("p",{children:"No workspaces available for your role."})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:a.map(([o,n])=>{const x=n.type==="external",m=()=>{t&&t(n.title,n.type),x&&n.url?window.open(n.url,"_blank","noopener,noreferrer"):n.path&&navigation.navigate(n.path)};return e.jsxs("button",{onClick:m,className:"group px-3 py-2 sm:px-4 sm:py-3 bg-white/70 backdrop-blur-sm border border-orange-200 text-gray-700 rounded-xl hover:bg-white hover:shadow-md transition-all duration-200 text-left transform hover:-translate-y-0.5",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"text-lg group-hover:scale-110 transition-transform",children:n.icon||"ðŸ”—"}),e.jsx("span",{className:"font-medium text-sm",children:n.title}),x&&e.jsx("span",{className:"text-xs text-gray-400",children:"â†—"})]}),e.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:n.description})]},o)})})},ds=()=>{const[w,s]=d.useState([]),[t,a]=d.useState(!0);if(d.useEffect(()=>{(async()=>{try{a(!0);const x=await pt.getPerformanceLeaderboard();s(x)}catch(x){console.error("Error fetching performance leaderboard:",x),s([])}finally{a(!1)}})()},[]),t)return e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((n,x)=>e.jsx(oe,{className:"h-16"},x))});if(w.length===0)return e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ðŸ“Š"}),e.jsx("p",{children:"No performance data available yet."})]});const o=n=>{navigation.navigateToProfile(n.id||n.name)};return e.jsx("div",{className:"space-y-3",children:w.map((n,x)=>{const m=x<3,f=["ðŸ¥‡","ðŸ¥ˆ","ðŸ¥‰"];return e.jsxs("button",{onClick:()=>o(n),className:`w-full flex items-center justify-between p-3 rounded-lg cursor-pointer hover:scale-105 transform transition-all duration-200 ${m?"bg-gray-50 border border-gray-200 hover:bg-gray-100":"bg-gray-50 hover:bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-lg font-bold text-gray-600 w-8",children:m?f[x]:`#${x+1}`}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium text-gray-900",children:n.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[n.submissionCount," submission",n.submissionCount!==1?"s":""]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-lg text-gray-900",children:n.score||n.totalScore}),e.jsx("div",{className:"text-xs text-gray-500",children:n.department||"points"})]})]},`${x}-${n.name}-${n.id||n.submissionCount}`)})})},ms=({isManager:w,events:s,updates:t,onUpdateEvents:a,onUpdateUpdates:o,onSubmitFeedback:n})=>{const[x,m]=d.useState("events"),[f,S]=d.useState(!1),[_,E]=d.useState(!1),[N,h]=d.useState(s),[i,p]=d.useState(t),[g,v]=d.useState(""),C=()=>{a(N),S(!1)},j=()=>{o(i),E(!1)},y=()=>{g.trim()&&(n(g),v(""))};return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Updates & Events"})}),e.jsxs("div",{className:"flex space-x-1 mb-4",children:[e.jsx("button",{onClick:()=>m("events"),className:`px-3 py-2 text-sm font-medium rounded-md ${x==="events"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Events"}),e.jsx("button",{onClick:()=>m("updates"),className:`px-3 py-2 text-sm font-medium rounded-md ${x==="updates"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Updates"}),e.jsx("button",{onClick:()=>m("feedback"),className:`px-3 py-2 text-sm font-medium rounded-md ${x==="feedback"?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700"}`,children:"Feedback"})]}),x==="events"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Upcoming Events"}),w&&e.jsx("button",{onClick:()=>S(!f),className:"text-sm text-blue-600 hover:text-blue-800",children:f?"Cancel":"Edit"})]}),f?e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{value:N,onChange:u=>h(u.target.value),className:"w-full p-2 border border-gray-300 rounded-md text-sm",rows:4,placeholder:"Enter upcoming events..."}),e.jsx("button",{onClick:C,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Save Events"})]}):e.jsx("div",{className:"text-sm text-gray-600",children:s||"No upcoming events."})]}),x==="updates"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Company Updates"}),w&&e.jsx("button",{onClick:()=>E(!_),className:"text-sm text-blue-600 hover:text-blue-800",children:_?"Cancel":"Edit"})]}),_?e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{value:i,onChange:u=>p(u.target.value),className:"w-full p-2 border border-gray-300 rounded-md text-sm",rows:4,placeholder:"Enter company updates..."}),e.jsx("button",{onClick:j,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Save Updates"})]}):e.jsx("div",{className:"text-sm text-gray-600",children:t||"No recent updates."})]}),x==="feedback"&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Submit Feedback"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{value:g,onChange:u=>v(u.target.value),className:"w-full p-2 border border-gray-300 rounded-md text-sm",rows:4,placeholder:"Share your feedback, suggestions, or concerns..."}),e.jsx("button",{onClick:y,disabled:!g.trim(),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Submit Feedback"})]})]})]})},us=({userType:w,currentUser:s,onNavigateToProfile:t})=>{var ce,de,me,ue,xe,he,ge,pe,fe,be,ye,ve,je,Ne,we,ke,Se,Ce,_e,Ee,Pe,De,Te,Ae,Re,Me,Fe,Le,Oe,Ie,$e,qe,Ue,We,He,Ye,ze,Ve,Ge,Be,Qe,Ke,Je,Xe,Ze,et,tt,st,rt,at,nt,lt;const{supabase:a}=Q(),{authState:o,user:n,isLoading:x}=I();At();const m=le(),{notify:f}=q(),S=d.useMemo(()=>(n==null?void 0:n.role)==="Operations Head"||(n==null?void 0:n.role)==="Manager"||(n==null?void 0:n.role)==="Super Admin"||w==="manager",[n==null?void 0:n.role,w]);d.useEffect(()=>{console.log("ðŸ¢ AgencyDashboard - Auth State:",{user:n,loading:x})},[n,x]);const[_,E]=d.useState({news:"Welcome to our agency dashboard! Stay updated with the latest company news and announcements.",tools:[],events:"Team meeting every Monday at 10 AM. Monthly all-hands on the first Friday of each month.",updates:"New project management system launched. Please update your profiles in the employee directory."}),[N,h]=d.useState(!0),[i,p]=d.useState(null),[g,v]=d.useState(!0),[C,j]=d.useState(null),[y,u]=d.useState({}),[T,c]=d.useState(!0),[P,l]=d.useState(null),[A,D]=d.useState(null),[r,F]=d.useState(null),[H,K]=d.useState(!1),[se,Y]=d.useState(!1),[xs,hs]=d.useState("dashboard");d.useEffect(()=>{(async()=>{try{const k=await Mt.getUIConfig();F(k.agencyDashboard)}catch(k){console.error("Error loading UI config:",k),F({title:"Agency Dashboard",welcomeMessage:"Welcome",myProfile:"My Profile",navigation:{monthlyForm:"Monthly Form",reports:"Reports",tools:"Tools",leaveWfh:"Leave/WFH",addClient:"Add Client"},sections:{addNewClient:"Add New Client",dailyInspiration:"Daily Inspiration",performanceLeaderboard:"Performance Leaderboard",performanceDescription:"Top performers this month",live:"LIVE",quickStats:"Quick Stats",projectWorkspaces:"Project Workspaces",onboardingForms:"Onboarding Forms",onboardingDescription:"Quick access to onboarding forms",quickAccess:"Quick Access"},stats:{q4Targets:{value:"0",label:"Q4 Targets"},newClients:{value:"0",label:"New Clients"}},onboarding:{employee:{title:"Employee Onboarding",description:"Add new team members",openForm:"Open Form",copyLink:"Copy Link",shareLabel:"Share Link"},client:{title:"Client Onboarding",description:"Add new clients",openForm:"Open Form",copyLink:"Copy Link",shareLabel:"Share Link"}},quickAccess:{organizationChart:"Organization Chart",employeeDirectory:"Employee Directory",clientDirectory:"Client Directory",performanceScoring:"Performance Scoring",performanceConcerns:"Performance Concerns",arcade:"Arcade",policies:"Policies",arcadeProgram:"Arcade Program",companyGuidebook:"Company Guidebook"},alerts:{leaveSuccess:"Leave application submitted successfully!",leaveError:"Error submitting leave application. Please try again.",urlCopied:"URL copied to clipboard!"}})}})()},[]),d.useEffect(()=>{(async()=>{try{v(!0),j(null);const k=await pt.getAgencyStats();p(k)}catch(k){console.error("Error loading dynamic stats:",k),j("Failed to load dashboard statistics"),f({title:"Loading Error",message:"Unable to load dashboard statistics. Using default values.",type:"warning"})}finally{v(!1)}})()},[f]),d.useEffect(()=>{(async()=>{try{h(!0),D(null);const k=await X.getDashboardContent();E(k)}catch(k){console.error("Error loading dashboard content:",k),D("Failed to load dashboard content"),f({title:"Loading Error",message:"Unable to load live dashboard content. Showing default content.",type:"warning"})}finally{h(!1)}})()},[f]),d.useEffect(()=>{(async()=>{if(!n||!n.role){u({}),c(!1);return}try{c(!0),l(null);const k=await mt.getWorkspaceConfig(n.role,n.id);u(k)}catch(k){console.error("Error loading workspace config:",k),l("Failed to load workspace configuration"),u({}),f({title:"Loading Error",message:"Unable to load workspace configuration. Some features may be limited.",type:"warning"})}finally{c(!1)}})()},[n,f]);const bt=d.useCallback(async b=>{try{await X.updateNews(b),E(k=>({...k,news:b}))}catch(k){console.error("Failed to update news:",k)}},[]),yt=d.useCallback(async b=>{try{await X.updateEvents(b),E(k=>({...k,events:b}))}catch(k){console.error("Failed to update events:",k)}},[]),vt=d.useCallback(async b=>{try{await X.updateUpdates(b),E(k=>({...k,updates:b}))}catch(k){console.error("Failed to update updates:",k)}},[]),jt=d.useCallback(async b=>{try{const{error:k}=await a.from("company_feedback").insert([{employee_id:s==null?void 0:s.id,feedback:b,created_at:new Date().toISOString()}]);if(k)throw k;f({title:"Feedback Submitted",message:"Your feedback has been recorded successfully.",type:"success"})}catch(k){console.error("Error submitting feedback:",k),f({title:"Submission Failed",message:"Failed to submit feedback. Please try again.",type:"error"})}},[a,s==null?void 0:s.id,f]),Nt=d.useCallback(async(b,k)=>{if(n!=null&&n.id)try{await mt.trackWorkspaceAccess(n.id,b,k)}catch(L){console.error("Error tracking workspace access:",L)}},[n==null?void 0:n.id]);d.useCallback(b=>{b==="/form"?m.navigateToForm():b==="/reports-dashboard"?m.navigateToReports():b==="/master-tools"?m.navigateToTools():b==="/employee-onboarding"?m.navigateToEmployeeOnboarding():b==="/client-onboarding"?m.navigateToClientOnboarding():b==="/organization-chart"?m.navigateToOrganizationChart():b==="/employee-directory"?m.navigateToEmployeeDirectory():b==="/client-directory"?m.navigateToClientDirectory():b==="/performance-scoring"?m.navigateToPerformanceScoring():b==="/performance-concerns"?m.navigateToPerformanceConcerns():b==="/arcade"?m.navigateToArcade():b==="/policies"?m.navigate("/policies"):m.navigate(b)},[m]);const wt=d.useCallback(async b=>{var k,L;try{const{data:z,error:V}=await a.from("leave_applications").insert([{employee_name:(s==null?void 0:s.name)||"Unknown",employee_email:(s==null?void 0:s.email)||"",leave_type:b.leaveType,start_date:b.startDate,end_date:b.endDate,reason:b.reason,status:"pending",created_at:new Date().toISOString()}]);if(V)throw V;K(!1),alert(((k=r==null?void 0:r.alerts)==null?void 0:k.leaveSuccess)||"Leave application submitted successfully!")}catch(z){console.error("Error submitting leave application:",z),alert(((L=r==null?void 0:r.alerts)==null?void 0:L.leaveError)||"Error submitting leave application. Please try again.")}},[a,s==null?void 0:s.name,s==null?void 0:s.email,r==null?void 0:r.alerts]),ie=d.useCallback((b,k)=>{navigator.clipboard.writeText(b).then(()=>{f({title:`${k} Link Copied!`,message:`Link copied to clipboard. Share this URL to allow direct access to the ${k.toLowerCase()} form.`,type:"success"})}).catch(()=>{const L=document.createElement("textarea");L.value=b,document.body.appendChild(L),L.select(),document.execCommand("copy"),document.body.removeChild(L),f({title:`${k} Link Copied!`,message:`Link copied to clipboard. Share this URL to allow direct access to the ${k.toLowerCase()} form.`,type:"success"})})},[f]),kt=d.useMemo(()=>{var k,L,z,V,ot;const b=[{label:"About Us",icon:"â„¹ï¸",onClick:M=>{M.preventDefault(),M.stopPropagation(),m.navigateToAbout()},variant:"secondary",tooltip:"Learn about our agency"},{label:"Services",icon:"ðŸŽ¯",onClick:M=>{M.preventDefault(),M.stopPropagation(),m.navigateToServices()},variant:"secondary",tooltip:"View our services"}];return n&&b.push({label:((k=r==null?void 0:r.navigation)==null?void 0:k.monthlyForm)||"Monthly Form",icon:"ðŸ“‹",onClick:M=>{M.preventDefault(),M.stopPropagation(),m.navigateToForm()},variant:"primary",tooltip:"Submit Monthly Form"},{label:((L=r==null?void 0:r.navigation)==null?void 0:L.reports)||"Reports",icon:"ðŸ“Š",onClick:M=>{M.preventDefault(),M.stopPropagation(),m.navigateToReports()},variant:"secondary",tooltip:"View Reports"},{label:((z=r==null?void 0:r.navigation)==null?void 0:z.tools)||"Tools",icon:"ðŸ› ï¸",onClick:M=>{M.preventDefault(),M.stopPropagation(),m.navigateToTools()},variant:"secondary",tooltip:"Access Tools"},{label:((V=r==null?void 0:r.navigation)==null?void 0:V.leaveWfh)||"Leave/WFH",icon:"ðŸ–ï¸",onClick:M=>{M.preventDefault(),M.stopPropagation(),K(!0)},variant:"secondary",tooltip:"Apply for Leave or Work from Home"},{label:((ot=r==null?void 0:r.navigation)==null?void 0:ot.addClient)||"Add Client",icon:"ðŸ‘¥",onClick:M=>{M.preventDefault(),M.stopPropagation(),Y(!se)},variant:"secondary",tooltip:"Add New Client"}),b},[n,r,m,se]);return r?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50",children:[e.jsx(ns,{title:(r==null?void 0:r.title)||"Agency Dashboard",subtitle:n?r==null?void 0:r.welcomeMessage:"Welcome to our agency dashboard - explore our services and capabilities",icon:"ðŸ¢",showNotifications:!!n,showProfile:!!n,customActions:kt}),se&&e.jsx(G,{requiredPermissions:["clients"],fallback:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 text-center",children:[e.jsx("p",{className:"text-gray-600",children:"Please log in to add new clients."}),e.jsx("button",{onClick:()=>Y(!1),className:"mt-4 px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Close"})]})}),showError:!1,children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:((ce=r==null?void 0:r.sections)==null?void 0:ce.addNewClient)||"Add New Client"}),e.jsx("button",{onClick:()=>Y(!1),className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),e.jsx(Rt,{compact:!1,onClientAdded:()=>{Y(!1),f({type:"success",title:"Client Added",message:"New client has been successfully added to the system"})},onCancel:()=>Y(!1)})]})})}),e.jsx(Qt,{showInDashboard:!0}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(es,{}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 md:gap-8",children:[e.jsxs("div",{className:"space-y-4 sm:space-y-6 md:space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl shadow-lg border border-purple-200/50 p-4 sm:p-6 md:p-8 hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"ðŸ’­"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:((de=r==null?void 0:r.sections)==null?void 0:de.dailyInspiration)||"Daily Inspiration"})]}),e.jsx(Lt,{isManager:w==="manager"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl shadow-lg border border-green-200/50 p-4 sm:p-6 md:p-8 hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"ðŸ†"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:((me=r==null?void 0:r.sections)==null?void 0:me.performanceLeaderboard)||"Performance Leaderboard"}),e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-medium ml-auto",children:((ue=r==null?void 0:r.sections)==null?void 0:ue.live)||"LIVE"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:((xe=r==null?void 0:r.sections)==null?void 0:xe.performanceDescription)||"Top performers this month"}),e.jsx("div",{className:"min-h-[20rem] overflow-auto",children:e.jsx(ds,{})})]}),e.jsx(os,{}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-lg border border-blue-200/50 p-4 sm:p-6 md:p-8 hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"ðŸ“Š"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:((he=r==null?void 0:r.sections)==null?void 0:he.quickStats)||"Quick Stats"})]}),g?e.jsx("div",{className:"grid grid-cols-1 xs:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4",children:[...Array(4)].map((b,k)=>e.jsx(oe,{className:"h-24"},k))}):e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("button",{onClick:()=>m.navigateToReports(),className:"bg-white/70 backdrop-blur-sm p-4 rounded-xl text-center shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer hover:scale-105 transform",children:[e.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:((ge=i==null?void 0:i.q4Targets)==null?void 0:ge.value)||((fe=(pe=r==null?void 0:r.stats)==null?void 0:pe.q4Targets)==null?void 0:fe.value)||"0"}),e.jsx("div",{className:"text-xs text-gray-600 font-medium",children:((be=i==null?void 0:i.q4Targets)==null?void 0:be.label)||((ve=(ye=r==null?void 0:r.stats)==null?void 0:ye.q4Targets)==null?void 0:ve.label)||"Q4 Targets"}),((je=i==null?void 0:i.q4Targets)==null?void 0:je.progress)&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:"bg-green-600 h-1.5 rounded-full transition-all duration-300",style:{width:`${Math.min(i.q4Targets.progress,100)}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[i.q4Targets.current,"/",i.q4Targets.target]})]})]}),e.jsxs("button",{onClick:()=>m.navigateToReports(),className:"bg-white/70 backdrop-blur-sm p-4 rounded-xl text-center shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer hover:scale-105 transform",children:[e.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:((Ne=i==null?void 0:i.newClients)==null?void 0:Ne.value)||((ke=(we=r==null?void 0:r.stats)==null?void 0:we.newClients)==null?void 0:ke.value)||"0"}),e.jsx("div",{className:"text-xs text-gray-600 font-medium",children:((Se=i==null?void 0:i.newClients)==null?void 0:Se.label)||((_e=(Ce=r==null?void 0:r.stats)==null?void 0:Ce.newClients)==null?void 0:_e.label)||"New Clients"}),((Ee=i==null?void 0:i.newClients)==null?void 0:Ee.thisMonth)!==void 0&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["This month: ",i.newClients.thisMonth]})]}),e.jsxs("button",{onClick:()=>m.navigateToDirectory(),className:"bg-white/70 backdrop-blur-sm p-4 rounded-xl text-center shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer hover:scale-105 transform",children:[e.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-violet-600 bg-clip-text text-transparent",children:(i==null?void 0:i.totalEmployees)||"125"}),e.jsx("div",{className:"text-xs text-gray-600 font-medium",children:"Total Employees"})]}),e.jsxs("button",{onClick:()=>m.navigateToDirectory(),className:"bg-white/70 backdrop-blur-sm p-4 rounded-xl text-center shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer hover:scale-105 transform",children:[e.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-orange-600 to-amber-600 bg-clip-text text-transparent",children:(i==null?void 0:i.activeDepartments)||"8"}),e.jsx("div",{className:"text-xs text-gray-600 font-medium",children:"Active Departments"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 rounded-2xl shadow-lg border border-orange-200/50 p-4 sm:p-6 md:p-8 hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-orange-500 to-amber-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"ðŸš€"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:((Pe=r==null?void 0:r.sections)==null?void 0:Pe.projectWorkspaces)||"Project Workspaces"})]}),e.jsx(cs,{workspaces:y,isLoading:T,onWorkspaceClick:Nt})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 rounded-2xl shadow-lg border border-emerald-200/50 p-4 sm:p-6 md:p-8 hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"ðŸ“‹"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:((De=r==null?void 0:r.sections)==null?void 0:De.onboardingForms)||"Onboarding Forms"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:((Te=r==null?void 0:r.sections)==null?void 0:Te.onboardingDescription)||"Quick access to onboarding forms"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl p-4 border border-emerald-200",children:e.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ‘¨â€ðŸ’¼"}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"font-semibold text-gray-800 block",children:((Re=(Ae=r==null?void 0:r.onboarding)==null?void 0:Ae.employee)==null?void 0:Re.title)||"Employee Onboarding"}),e.jsx("span",{className:"text-xs text-gray-500",children:((Fe=(Me=r==null?void 0:r.onboarding)==null?void 0:Me.employee)==null?void 0:Fe.description)||"Add new employees"})]}),e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx("button",{onClick:b=>{b.preventDefault(),b.stopPropagation(),m.navigateToEmployeeOnboarding()},className:"flex-1 px-3 py-2 bg-emerald-600 text-white text-xs rounded-lg hover:bg-emerald-700 transition-colors",children:((Oe=(Le=r==null?void 0:r.onboarding)==null?void 0:Le.employee)==null?void 0:Oe.openForm)||"Open Form"}),e.jsxs("button",{onClick:b=>{b.preventDefault(),b.stopPropagation(),ie(`${window.location.origin}/employee-onboarding`,"Employee Onboarding")},className:"px-3 py-2 bg-gray-600 text-white text-xs rounded-lg hover:bg-gray-700 transition-colors",title:"Copy shareable link",children:["ðŸ“‹ ",(($e=(Ie=r==null?void 0:r.onboarding)==null?void 0:Ie.employee)==null?void 0:$e.copyLink)||"Copy Link"]})]}),e.jsxs("div",{className:"text-xs text-gray-600 text-center",children:[e.jsxs("strong",{children:[((Ue=(qe=r==null?void 0:r.onboarding)==null?void 0:qe.employee)==null?void 0:Ue.shareLabel)||"Share Link",":"]})," ",window.location.origin,"/employee-onboarding"]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-cyan-50 to-blue-50 rounded-xl p-4 border border-cyan-200",children:e.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ¤"}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"font-semibold text-gray-800 block",children:((He=(We=r==null?void 0:r.onboarding)==null?void 0:We.client)==null?void 0:He.title)||"Client Onboarding"}),e.jsx("span",{className:"text-xs text-gray-500",children:((ze=(Ye=r==null?void 0:r.onboarding)==null?void 0:Ye.client)==null?void 0:ze.description)||"Add new clients"})]}),e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx("button",{onClick:b=>{b.preventDefault(),b.stopPropagation(),m.navigateToClientOnboarding()},className:"flex-1 px-3 py-2 bg-cyan-600 text-white text-xs rounded-lg hover:bg-cyan-700 transition-colors",children:((Ge=(Ve=r==null?void 0:r.onboarding)==null?void 0:Ve.client)==null?void 0:Ge.openForm)||"Open Form"}),e.jsxs("button",{onClick:b=>{b.preventDefault(),b.stopPropagation(),ie(`${window.location.origin}/client-onboarding`,"Client Onboarding")},className:"px-3 py-2 bg-gray-600 text-white text-xs rounded-lg hover:bg-gray-700 transition-colors",title:"Copy shareable link",children:["ðŸ“‹ ",((Qe=(Be=r==null?void 0:r.onboarding)==null?void 0:Be.client)==null?void 0:Qe.copyLink)||"Copy Link"]})]}),e.jsxs("div",{className:"text-xs text-gray-600 text-center",children:[e.jsxs("strong",{children:[((Je=(Ke=r==null?void 0:r.onboarding)==null?void 0:Ke.client)==null?void 0:Je.shareLabel)||"Share Link",":"]})," ",window.location.origin,"/client-onboarding"]})]})})]})]})]}),e.jsxs("div",{className:"space-y-6 sm:space-y-8 order-first lg:order-last",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-gray-200/50 p-8 hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:"âš¡"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:((Xe=r==null?void 0:r.sections)==null?void 0:Xe.quickAccess)||"Quick Access"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:((Ze=r==null?void 0:r.sections)==null?void 0:Ze.quickAccessDescription)||"Frequently used tools and features"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:b=>{b.preventDefault(),b.stopPropagation(),m.navigateToArcade()},className:"group w-full flex items-center space-x-3 px-4 py-3 text-sm text-gray-700 hover:bg-gradient-to-r hover:from-yellow-50 hover:to-orange-50 rounded-xl transition-all duration-200 hover:shadow-sm transform hover:translate-x-1",children:[e.jsx("span",{className:"text-base group-hover:scale-110 transition-transform",children:"ðŸŽ®"}),e.jsx("span",{className:"font-medium",children:((et=r==null?void 0:r.quickAccess)==null?void 0:et.arcadeProgram)||"Arcade Program"})]}),e.jsxs("button",{onClick:b=>{b.preventDefault(),b.stopPropagation(),m.navigateToPolicies()},className:"group w-full flex items-center space-x-3 px-4 py-3 text-sm text-gray-700 hover:bg-gradient-to-r hover:from-teal-50 hover:to-cyan-50 rounded-xl transition-all duration-200 hover:shadow-sm transform hover:translate-x-1",children:[e.jsx("span",{className:"text-base group-hover:scale-110 transition-transform",children:"ðŸ“š"}),e.jsx("span",{className:"font-medium",children:((tt=r==null?void 0:r.quickAccess)==null?void 0:tt.companyGuidebook)||"Company Guidebook"})]}),e.jsxs(G,{requiredPermission:"employees",fallback:e.jsxs("div",{className:"group w-full flex items-center space-x-3 px-4 py-3 text-sm text-gray-400 bg-gray-50 rounded-xl cursor-not-allowed",children:[e.jsx("span",{className:"text-base",children:"ðŸ”’"}),e.jsx("span",{className:"font-medium",children:"Login to access employee features"})]}),children:[e.jsxs("button",{onClick:b=>{b.preventDefault(),b.stopPropagation(),m.navigateToOrganizationChart()},className:"group w-full flex items-center space-x-3 px-4 py-3 text-sm text-gray-700 hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50 rounded-xl transition-all duration-200 hover:shadow-sm transform hover:translate-x-1",children:[e.jsx("span",{className:"text-base group-hover:scale-110 transition-transform",children:"ðŸ¢"}),e.jsx("span",{className:"font-medium",children:((st=r==null?void 0:r.quickAccess)==null?void 0:st.organizationChart)||"Organization Chart"})]}),e.jsxs("button",{onClick:b=>{b.preventDefault(),b.stopPropagation(),m.navigateToEmployeeDirectory()},className:"group w-full flex items-center space-x-3 px-4 py-3 text-sm text-gray-700 hover:bg-gradient-to-r hover:from-green-50 hover:to-emerald-50 rounded-xl transition-all duration-200 hover:shadow-sm transform hover:translate-x-1",children:[e.jsx("span",{className:"text-base group-hover:scale-110 transition-transform",children:"ðŸ‘¥"}),e.jsx("span",{className:"font-medium",children:((rt=r==null?void 0:r.quickAccess)==null?void 0:rt.employeeDirectory)||"Employee Directory"})]})]}),e.jsx(G,{requiredPermission:"clients",fallback:e.jsxs("div",{className:"group w-full flex items-center space-x-3 px-4 py-3 text-sm text-gray-400 bg-gray-50 rounded-xl cursor-not-allowed",children:[e.jsx("span",{className:"text-base",children:"ðŸ”’"}),e.jsx("span",{className:"font-medium",children:"Login to access client features"})]}),children:e.jsxs("button",{onClick:b=>{b.preventDefault(),b.stopPropagation(),m.navigateToClientDirectory()},className:"group w-full flex items-center space-x-3 px-4 py-3 text-sm text-gray-700 hover:bg-gradient-to-r hover:from-purple-50 hover:to-violet-50 rounded-xl transition-all duration-200 hover:shadow-sm transform hover:translate-x-1",children:[e.jsx("span",{className:"text-base group-hover:scale-110 transition-transform",children:"ðŸ¤"}),e.jsx("span",{className:"font-medium",children:((at=r==null?void 0:r.quickAccess)==null?void 0:at.clientDirectory)||"Client Directory"})]})}),e.jsxs(G,{requiredPermission:"performance",fallback:e.jsxs("div",{className:"group w-full flex items-center space-x-3 px-4 py-3 text-sm text-gray-400 bg-gray-50 rounded-xl cursor-not-allowed",children:[e.jsx("span",{className:"text-base",children:"ðŸ”’"}),e.jsx("span",{className:"font-medium",children:"Login to access performance features"})]}),children:[e.jsxs("button",{onClick:b=>{b.preventDefault(),b.stopPropagation(),m.navigateToPerformanceScoring()},className:"group w-full flex items-center space-x-3 px-4 py-3 text-sm text-gray-700 hover:bg-gradient-to-r hover:from-orange-50 hover:to-amber-50 rounded-xl transition-all duration-200 hover:shadow-sm transform hover:translate-x-1",children:[e.jsx("span",{className:"text-base group-hover:scale-110 transition-transform",children:"ðŸ“ˆ"}),e.jsx("span",{className:"font-medium",children:((nt=r==null?void 0:r.quickAccess)==null?void 0:nt.performanceScoring)||"Performance Scoring"})]}),e.jsxs("button",{onClick:b=>{b.preventDefault(),b.stopPropagation(),m.navigateToPerformanceConcerns()},className:"group w-full flex items-center space-x-3 px-4 py-3 text-sm text-gray-700 hover:bg-gradient-to-r hover:from-red-50 hover:to-pink-50 rounded-xl transition-all duration-200 hover:shadow-sm transform hover:translate-x-1",children:[e.jsx("span",{className:"text-base group-hover:scale-110 transition-transform",children:"âš ï¸"}),e.jsx("span",{className:"font-medium",children:((lt=r==null?void 0:r.quickAccess)==null?void 0:lt.performanceConcerns)||"Performance Concerns"})]})]})]})]}),e.jsx(is,{news:_.news,isManager:S,onUpdateNews:bt}),e.jsx(ms,{isManager:S,events:_.events,updates:_.updates,onUpdateEvents:yt,onUpdateUpdates:vt,onSubmitFeedback:jt}),e.jsx(ls,{})]})]})]}),H&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsx(G,{requiredPermissions:["hr_employees"],fallback:e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Authentication Required"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Please log in to submit leave applications."}),e.jsx("button",{onClick:()=>K(!1),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Close"})]}),showError:!1,children:e.jsx(Xt,{onSubmit:wt,onCancel:()=>K(!1)})})})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx(xt,{size:"xl",showText:!0,text:"Loading dashboard..."})})})},vs=Ft.memo(us);export{vs as A,ns as D,O as F,Xt as L,Bt as u};
