import{b as f,u as w,j as e}from"./manager-dashboard-BSBEKJka.js";import{r as j}from"./react-vendor-z5qVsTvS.js";import"./shared-ui-DksRfdM8.js";import"./clients-Dg_kG3rU.js";import"./supabase-vendor-D6KV1zBy.js";import"./auth-out34swX.js";import"./employees-C0R0oL0z.js";import"./forms-F81hZsoD.js";const B=({onNavigateToDashboard:u})=>{const{employees:i,loading:p}=f(),{role:C}=w(),[o,g]=j.useState("all"),[c,v]=j.useState(""),b=i.reduce((s,a)=>{const t=a.department||a.role||"Other";return s[t]||(s[t]=[]),s[t].push(a),s},{}),h=i.filter(s=>{var l,n;const a=Array.isArray(s.role)?s.role.join(" ").toLowerCase():(s.role||"").toLowerCase(),t=((l=s.name)==null?void 0:l.toLowerCase().includes(c.toLowerCase()))||((n=s.email)==null?void 0:n.toLowerCase().includes(c.toLowerCase()))||a.includes(c.toLowerCase()),r=o==="all"||s.department===o;return t&&r}),N=["all",...new Set(i.map(s=>s.department||s.role).filter(Boolean))],d={Manager:1,Head:1,"Web Team Lead":2,"SEO Team Lead":2,"Ads Team Lead":2,"AI Team Lead":2,"Web Developer":3,"Graphic Designer":3,"SEO Executive":3,"Meta Ads Specialist":3,"Google Ads Specialist":3,"Social Media Manager":3,"Youtube SEO":3,"Video Editor":3,"AI Executive":3,Accountant:3,"Sales Executive":3,"HR Specialist":3,"Content Writer":4,"SEO Content Writer":4,"Graphics Designer":4,Freelancer:5,Intern:6},x=s=>Array.isArray(s.role)?s.role.reduce((a,t)=>{const r=d[t]||7,l=d[a]||7;return r<l?t:a},s.role[0]||"No role"):s.role||"No role";return h.sort((s,a)=>{const t=d[x(s)]||7,r=d[x(a)]||7;return t-r}),p?e.jsx("div",{className:"card-brand p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-slate-200 rounded mb-4"}),e.jsx("div",{className:"space-y-3",children:[...Array(6)].map((s,a)=>e.jsx("div",{className:"h-16 bg-slate-200 rounded"},a))})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-brand p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-text",children:"Organization Chart"}),e.jsx("button",{onClick:()=>u==null?void 0:u("manager"),className:"btn-brand-primary",children:"Back to Dashboard"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Search employees...",value:c,onChange:s=>v(s.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("div",{className:"sm:w-48",children:e.jsx("select",{value:o,onChange:s=>g(s.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:N.map(s=>e.jsx("option",{value:s,children:s==="all"?"All Departments":s},s))})})]})]}),e.jsxs("div",{className:"card-brand p-6",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-brand-text-secondary",children:["Total Employees: ",h.length]})}),e.jsx("div",{className:"space-y-6",children:Object.entries(b).filter(([s,a])=>o==="all"||s===o||a.some(t=>{var r,l;return((r=t.name)==null?void 0:r.toLowerCase().includes(c.toLowerCase()))||((l=t.email)==null?void 0:l.toLowerCase().includes(c.toLowerCase()))})).map(([s,a])=>{const t=a.filter(r=>{var n,m;const l=Array.isArray(r.role)?r.role.join(" ").toLowerCase():(r.role||"").toLowerCase();return((n=r.name)==null?void 0:n.toLowerCase().includes(c.toLowerCase()))||((m=r.email)==null?void 0:m.toLowerCase().includes(c.toLowerCase()))||l.includes(c.toLowerCase())});return t.length===0?null:e.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-brand-text mb-4 border-b border-slate-200 pb-2",children:[s," (",t.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.sort((r,l)=>{const n=d[x(r)]||7,m=d[x(l)]||7;return n-m}).map(r=>{var l,n;return e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold",children:((n=(l=r.name)==null?void 0:l.charAt(0))==null?void 0:n.toUpperCase())||"U"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-brand-text truncate",children:r.name||"Unknown"}),e.jsx("p",{className:"text-sm text-brand-text-secondary truncate",children:Array.isArray(r.role)?r.role.join(", "):r.role||"No role assigned"}),e.jsx("p",{className:"text-xs text-brand-text-secondary truncate",children:r.email})]})]}),r.phone&&e.jsxs("div",{className:"mt-2 text-xs text-brand-text-secondary",children:["ðŸ“ž ",r.phone]}),r.hire_date&&e.jsxs("div",{className:"mt-1 text-xs text-brand-text-secondary",children:["ðŸ“… Joined: ",new Date(r.hire_date).toLocaleDateString()]})]},r.id)})})]},s)})}),h.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-brand-text-secondary text-lg",children:"No employees found matching your criteria."})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"card-brand p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-brand-primary mb-2",children:i.length}),e.jsx("div",{className:"text-brand-text-secondary",children:"Total Employees"})]}),e.jsxs("div",{className:"card-brand p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-brand-primary mb-2",children:Object.keys(b).length}),e.jsx("div",{className:"text-brand-text-secondary",children:"Departments"})]}),e.jsxs("div",{className:"card-brand p-6 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-brand-primary mb-2",children:i.filter(s=>s.status==="active").length}),e.jsx("div",{className:"text-brand-text-secondary",children:"Active Employees"})]})]})]})};export{B as default};
