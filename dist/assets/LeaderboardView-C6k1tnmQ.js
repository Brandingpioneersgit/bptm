import{j as e}from"./manager-dashboard-BSBEKJka.js";import{r as m}from"./react-vendor-z5qVsTvS.js";function F({allSubmissions:i}){const[h,y]=m.useState("all"),[g,N]=m.useState("All"),[b,w]=m.useState("overall"),r=m.useMemo(()=>{if(!i||i.length===0)return[];let t=i;if(h!=="all"){const s=new Date,a=new Date;switch(h){case"monthly":a.setMonth(s.getMonth()-1);break;case"quarterly":a.setMonth(s.getMonth()-3);break;case"yearly":a.setFullYear(s.getFullYear()-1);break}t=i.filter(c=>c.submissions&&c.submissions.some(p=>{const[o,x]=p.monthKey.split("-").map(Number);return new Date(o,x-1)>=a}))}return g!=="All"&&(t=t.filter(s=>s.department===g)),t.map(s=>{var f,v;let a=0,c=0,p=0,o=0,x=0;if(s.submissions&&s.submissions.length>0){switch(b){case"overall":a=parseFloat(s.averageScore)||0;break;case"kpi":a=s.submissions.reduce((n,d)=>{var l;return n+(((l=d.scores)==null?void 0:l.kpiScore)||0)},0)/s.submissions.length;break;case"learning":a=s.submissions.reduce((n,d)=>{var l;return n+(((l=d.scores)==null?void 0:l.learningScore)||0)},0)/s.submissions.length;break;case"relationship":a=s.submissions.reduce((n,d)=>{var l;return n+(((l=d.scores)==null?void 0:l.relationshipScore)||0)},0)/s.submissions.length;break}if(c=s.submissions.length,p=s.totalHours||0,o=Math.min(1,c/6),s.submissions.length>=2){const n=[...s.submissions].sort((D,M)=>D.monthKey.localeCompare(M.monthKey)),d=((f=n[0].scores)==null?void 0:f.overall)||0,l=((v=n[n.length-1].scores)==null?void 0:v.overall)||0;x=Math.max(0,(l-d)/10)}}const j=a+o*.5+x*.3;return{...s,rankingScore:j,submissionCount:c,totalHours:p,consistencyBonus:o,improvementBonus:x,badge:S(j,c)}}).filter(s=>s.rankingScore>0).sort((s,a)=>a.rankingScore-s.rankingScore).map((s,a)=>({...s,rank:a+1}))},[i,h,g,b]),k=m.useMemo(()=>i?[...new Set(i.map(t=>t.department))].filter(Boolean).sort():[],[i]),S=(t,u)=>t>=9&&u>=6?{type:"gold",icon:"🥇",label:"Gold Champion"}:t>=8&&u>=4?{type:"silver",icon:"🥈",label:"Silver Star"}:t>=7&&u>=2?{type:"bronze",icon:"🥉",label:"Bronze Achiever"}:t>=6?{type:"rising",icon:"🌟",label:"Rising Star"}:{type:"participant",icon:"💪",label:"Active"};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 rounded-xl shadow-sm p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"🏆 Employee Leaderboard"}),e.jsx("p",{className:"opacity-90",children:"Top performing team members across all metrics"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-3xl font-bold",children:r.length}),e.jsx("div",{className:"text-sm opacity-90",children:"Active Performers"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Period"}),e.jsxs("select",{value:h,onChange:t=>y(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"monthly",children:"Last Month"}),e.jsx("option",{value:"quarterly",children:"Last Quarter"}),e.jsx("option",{value:"yearly",children:"Last Year"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsxs("select",{value:g,onChange:t=>N(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"All",children:"All Departments"}),k.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ranking Metric"}),e.jsxs("select",{value:b,onChange:t=>w(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"overall",children:"Overall Score"}),e.jsx("option",{value:"kpi",children:"KPI Performance"}),e.jsx("option",{value:"learning",children:"Learning & Development"}),e.jsx("option",{value:"relationship",children:"Client Relationships"})]})]})]})}),r.length>=3&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6 text-center",children:"🏆 Top Performers"}),e.jsxs("div",{className:"flex justify-center items-end gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"bg-gray-200 rounded-lg p-4 mb-2",children:[e.jsx("div",{className:"text-2xl",children:"🥈"}),e.jsx("div",{className:"text-sm font-medium mt-2",children:r[1].name}),e.jsx("div",{className:"text-xs text-gray-600",children:r[1].department}),e.jsx("div",{className:"text-lg font-bold text-gray-600 mt-1",children:r[1].rankingScore.toFixed(1)}),r[1].hasTestimonial&&e.jsx("div",{className:"text-xs text-purple-700 mt-1",children:"🎥 Testimonial"})]}),e.jsx("div",{className:"bg-gray-400 h-16 rounded-t-lg flex items-center justify-center text-white font-bold",children:"2nd"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"bg-yellow-100 rounded-lg p-4 mb-2 border-2 border-yellow-400",children:[e.jsx("div",{className:"text-3xl",children:"🥇"}),e.jsx("div",{className:"text-sm font-medium mt-2",children:r[0].name}),e.jsx("div",{className:"text-xs text-gray-600",children:r[0].department}),e.jsx("div",{className:"text-xl font-bold text-yellow-600 mt-1",children:r[0].rankingScore.toFixed(1)}),r[0].hasTestimonial&&e.jsx("div",{className:"text-xs text-purple-700 mt-1",children:"🎥 Testimonial"})]}),e.jsx("div",{className:"bg-yellow-500 h-20 rounded-t-lg flex items-center justify-center text-white font-bold",children:"1st"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"bg-orange-100 rounded-lg p-4 mb-2",children:[e.jsx("div",{className:"text-2xl",children:"🥉"}),e.jsx("div",{className:"text-sm font-medium mt-2",children:r[2].name}),e.jsx("div",{className:"text-xs text-gray-600",children:r[2].department}),e.jsx("div",{className:"text-lg font-bold text-orange-600 mt-1",children:r[2].rankingScore.toFixed(1)}),r[2].hasTestimonial&&e.jsx("div",{className:"text-xs text-purple-700 mt-1",children:"🎥 Testimonial"})]}),e.jsx("div",{className:"bg-orange-500 h-12 rounded-t-lg flex items-center justify-center text-white font-bold",children:"3rd"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Complete Rankings"})}),r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"📋"}),e.jsx("p",{className:"text-gray-500",children:"No performance data available for the selected criteria."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submissions"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Learning Hours"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Badge"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(t=>e.jsxs("tr",{className:`hover:bg-gray-50 ${t.rank<=3?"bg-gradient-to-r from-yellow-50 to-orange-50":""}`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:`text-lg font-bold ${t.rank===1?"text-yellow-600":t.rank===2?"text-gray-600":t.rank===3?"text-orange-600":"text-gray-800"}`,children:["#",t.rank]}),t.rank<=3&&e.jsx("span",{className:"ml-2 text-lg",children:t.rank===1?"🥇":t.rank===2?"🥈":"🥉"})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsx("div",{className:"text-sm text-gray-500",children:t.phone})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.department}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:`text-lg font-semibold ${t.rankingScore>=9?"text-green-600":t.rankingScore>=8?"text-blue-600":t.rankingScore>=7?"text-yellow-600":"text-gray-600"}`,children:t.rankingScore.toFixed(1)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.submissionCount}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[t.totalHours.toFixed(1),"h"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t.badge.type==="gold"?"bg-yellow-100 text-yellow-800":t.badge.type==="silver"?"bg-gray-100 text-gray-800":t.badge.type==="bronze"?"bg-orange-100 text-orange-800":t.badge.type==="rising"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:[e.jsx("span",{className:"mr-1",children:t.badge.icon}),t.badge.label]})})]},`${t.name}-${t.phone}`))})]})})]})]})}export{F as L};
