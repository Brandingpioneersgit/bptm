import{j as e,u as J}from"./manager-dashboard-BSBEKJka.js";import{r as m}from"./react-vendor-z5qVsTvS.js";import{C as g,a as _,b as j,c as v,I as c,d as H,B as I}from"./input-U88YC0jj.js";import{s as F,n as S,D as K,f as Q,g as V,h as W,L as i,i as Z,T as ee,a as se,b as Y,c as h,d as te,e as x}from"./index-D8F1mhCW.js";import{X as ae,q as re,I as ne,i as G,r as le,g as ie,s as ce,P as oe,t as X,E as de,n as he,u as xe}from"./auth-out34swX.js";import"./shared-ui-DksRfdM8.js";import"./clients-Dg_kG3rU.js";import"./supabase-vendor-D6KV1zBy.js";import"./employees-C0R0oL0z.js";import"./forms-F81hZsoD.js";const me=({orientation:r="horizontal",className:p=""})=>e.jsx("div",{className:`bg-gray-200 ${r==="horizontal"?"h-[1px] w-full":"w-[1px] h-full"} ${p}`}),ue=({entry:r,onClose:p,onSave:B})=>{var D;const{user:f}=J(),[a,E]=m.useState({employee_id:"",client_id:"",month:"",deliverables_blogs:0,deliverables_backlinks:0,deliverables_onpage:0,deliverables_techfixes:0,notes:"",gsc_organic_prev_30d:0,gsc_organic_curr_30d:0,ga_total_prev_30d:0,ga_total_curr_30d:0,serp_top3_count:0,serp_top10_count:0,gmb_top3_count:0,pagespeed_home:0,pagespeed_service:0,pagespeed_location:0,sc_errors_home:0,sc_errors_service:0,sc_errors_location:0,client_meeting_date:"",interactions_count:0,nps_client:null,mentor_score:null}),[P,$]=m.useState([]),[w,M]=m.useState(!1),[n,u]=m.useState({}),[C,T]=m.useState(null);m.useEffect(()=>{k(),r?(E({...r}),r.client_id&&A(r.client_id)):E(t=>({...t,employee_id:f==null?void 0:f.id}))},[r,f==null?void 0:f.id]);const k=async()=>{try{const t=await F.getClients({active:!0});$(t)}catch(t){console.error("Failed to load clients:",t),S.error("Failed to load clients")}},A=async t=>{const N=P.find(s=>s.id===t);T(N)},l=(t,N)=>{E(s=>({...s,[t]:N})),n[t]&&u(s=>({...s,[t]:null})),t==="client_id"&&N&&A(N)},O=()=>{const t={},N={client_id:"Client is required",month:"Month is required",gsc_organic_prev_30d:"Previous organic traffic is required",gsc_organic_curr_30d:"Current organic traffic is required",ga_total_prev_30d:"Previous total traffic is required",ga_total_curr_30d:"Current total traffic is required",pagespeed_home:"Home page speed is required",pagespeed_service:"Service page speed is required",pagespeed_location:"Location page speed is required"};return Object.keys(N).forEach(s=>{!a[s]&&a[s]!==0&&(t[s]=N[s])}),a.nps_client&&(a.nps_client<1||a.nps_client>10)&&(t.nps_client="NPS must be between 1 and 10"),a.mentor_score&&(a.mentor_score<1||a.mentor_score>10)&&(t.mentor_score="Mentor score must be between 1 and 10"),["pagespeed_home","pagespeed_service","pagespeed_location"].forEach(s=>{a[s]&&(a[s]<0||a[s]>100)&&(t[s]="Page speed must be between 0 and 100")}),u(t),Object.keys(t).length===0},q=async()=>{if(!O()){S.error("Please fix the validation errors");return}try{M(!0),r!=null&&r.id?(await F.updateEntry(r.id,a),S.success("Entry updated successfully")):(await F.createEntry(a),S.success("Entry created successfully")),B()}catch(t){console.error("Failed to save entry:",t),S.error(t.message||"Failed to save entry")}finally{M(!1)}},L=()=>{if(!C)return null;const t={Large:{blogs:8,backlinks:12,onpage:6,techfixes:3},SMB:{blogs:4,backlinks:6,onpage:3,techfixes:1}};return t[C.type]||t.SMB},b=t=>e.jsxs("div",{className:"inline-flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(ne,{className:"h-3 w-3"}),e.jsx("span",{children:t})]}),d=L();return e.jsx(K,{open:!0,onOpenChange:p,children:e.jsxs(Q,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(V,{children:e.jsx(W,{children:r!=null&&r.id?"Edit SEO Entry":"Add Previous Month Data"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(g,{children:[e.jsx(_,{children:e.jsx(j,{className:"text-lg",children:"Basic Information"})}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"client_id",children:"Client *"}),e.jsxs("select",{id:"client_id",value:a.client_id,onChange:t=>l("client_id",t.target.value),className:"w-full px-3 py-2 border rounded-md",disabled:!!(r!=null&&r.id),children:[e.jsx("option",{value:"",children:"Select Client"}),P.map(t=>e.jsxs("option",{value:t.id,children:[t.name," (",t.type,")"]},t.id))]}),n.client_id&&e.jsx("p",{className:"text-sm text-red-600",children:n.client_id})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"month",children:"Month *"}),e.jsx(c,{id:"month",type:"month",value:a.month,onChange:t=>l("month",t.target.value),disabled:!!(r!=null&&r.id)}),n.month&&e.jsx("p",{className:"text-sm text-red-600",children:n.month})]})]}),C&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(H,{variant:C.type==="Large"?"default":"secondary",children:[C.type," Client"]}),d&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Monthly targets: ",d.blogs," blogs, ",d.backlinks," backlinks,",d.onpage," on-page, ",d.techfixes," tech fixes"]})]})]})]}),e.jsxs(g,{children:[e.jsxs(_,{children:[e.jsx(j,{className:"text-lg",children:"Deliverables"}),b("Enter the number of deliverables completed in the previous month")]}),e.jsxs(v,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsxs(i,{htmlFor:"deliverables_blogs",children:["Blogs ",d&&`(Target: ${d.blogs})`]}),e.jsx(c,{id:"deliverables_blogs",type:"number",min:"0",value:a.deliverables_blogs,onChange:t=>l("deliverables_blogs",parseInt(t.target.value)||0)})]}),e.jsxs("div",{children:[e.jsxs(i,{htmlFor:"deliverables_backlinks",children:["Backlinks ",d&&`(Target: ${d.backlinks})`]}),e.jsx(c,{id:"deliverables_backlinks",type:"number",min:"0",value:a.deliverables_backlinks,onChange:t=>l("deliverables_backlinks",parseInt(t.target.value)||0)})]}),e.jsxs("div",{children:[e.jsxs(i,{htmlFor:"deliverables_onpage",children:["On-page Tasks ",d&&`(Target: ${d.onpage})`]}),e.jsx(c,{id:"deliverables_onpage",type:"number",min:"0",value:a.deliverables_onpage,onChange:t=>l("deliverables_onpage",parseInt(t.target.value)||0)})]}),e.jsxs("div",{children:[e.jsxs(i,{htmlFor:"deliverables_techfixes",children:["Tech Fixes ",d&&`(Target: ${d.techfixes})`]}),e.jsx(c,{id:"deliverables_techfixes",type:"number",min:"0",value:a.deliverables_techfixes,onChange:t=>l("deliverables_techfixes",parseInt(t.target.value)||0)})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(i,{htmlFor:"notes",children:"Notes"}),e.jsx(Z,{id:"notes",value:a.notes,onChange:t=>l("notes",t.target.value),placeholder:"Additional notes about deliverables...",rows:3})]})]})]}),e.jsxs(g,{children:[e.jsxs(_,{children:[e.jsx(j,{className:"text-lg",children:"Traffic Data (GSC/GA)"}),b("Enter 30-day traffic data from Google Search Console and Google Analytics")]}),e.jsx(v,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Google Search Console (Organic)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"gsc_organic_prev_30d",children:"Previous 30 Days *"}),e.jsx(c,{id:"gsc_organic_prev_30d",type:"number",min:"0",value:a.gsc_organic_prev_30d,onChange:t=>l("gsc_organic_prev_30d",parseInt(t.target.value)||0)}),n.gsc_organic_prev_30d&&e.jsx("p",{className:"text-sm text-red-600",children:n.gsc_organic_prev_30d})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"gsc_organic_curr_30d",children:"Current 30 Days *"}),e.jsx(c,{id:"gsc_organic_curr_30d",type:"number",min:"0",value:a.gsc_organic_curr_30d,onChange:t=>l("gsc_organic_curr_30d",parseInt(t.target.value)||0)}),n.gsc_organic_curr_30d&&e.jsx("p",{className:"text-sm text-red-600",children:n.gsc_organic_curr_30d})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Google Analytics (Total)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"ga_total_prev_30d",children:"Previous 30 Days *"}),e.jsx(c,{id:"ga_total_prev_30d",type:"number",min:"0",value:a.ga_total_prev_30d,onChange:t=>l("ga_total_prev_30d",parseInt(t.target.value)||0)}),n.ga_total_prev_30d&&e.jsx("p",{className:"text-sm text-red-600",children:n.ga_total_prev_30d})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"ga_total_curr_30d",children:"Current 30 Days *"}),e.jsx(c,{id:"ga_total_curr_30d",type:"number",min:"0",value:a.ga_total_curr_30d,onChange:t=>l("ga_total_curr_30d",parseInt(t.target.value)||0)}),n.ga_total_curr_30d&&e.jsx("p",{className:"text-sm text-red-600",children:n.ga_total_curr_30d})]})]})]})]})})]}),e.jsxs(g,{children:[e.jsxs(_,{children:[e.jsx(j,{className:"text-lg",children:"Rankings"}),b("Enter current ranking counts for SERP and GMB positions")]}),e.jsx(v,{children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"serp_top3_count",children:"SERP Top 3 Count"}),e.jsx(c,{id:"serp_top3_count",type:"number",min:"0",value:a.serp_top3_count,onChange:t=>l("serp_top3_count",parseInt(t.target.value)||0)})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"serp_top10_count",children:"SERP Top 10 Count"}),e.jsx(c,{id:"serp_top10_count",type:"number",min:"0",value:a.serp_top10_count,onChange:t=>l("serp_top10_count",parseInt(t.target.value)||0)})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"gmb_top3_count",children:"GMB Top 3 Count"}),e.jsx(c,{id:"gmb_top3_count",type:"number",min:"0",value:a.gmb_top3_count,onChange:t=>l("gmb_top3_count",parseInt(t.target.value)||0)})]})]})})]}),e.jsxs(g,{children:[e.jsxs(_,{children:[e.jsx(j,{className:"text-lg",children:"Technical Health"}),b("Enter PageSpeed scores (0-100) and Search Console error counts")]}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"PageSpeed Scores (0-100)"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"pagespeed_home",children:"Home Page *"}),e.jsx(c,{id:"pagespeed_home",type:"number",min:"0",max:"100",value:a.pagespeed_home,onChange:t=>l("pagespeed_home",parseInt(t.target.value)||0)}),n.pagespeed_home&&e.jsx("p",{className:"text-sm text-red-600",children:n.pagespeed_home})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"pagespeed_service",children:"Service Page *"}),e.jsx(c,{id:"pagespeed_service",type:"number",min:"0",max:"100",value:a.pagespeed_service,onChange:t=>l("pagespeed_service",parseInt(t.target.value)||0)}),n.pagespeed_service&&e.jsx("p",{className:"text-sm text-red-600",children:n.pagespeed_service})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"pagespeed_location",children:"Location Page *"}),e.jsx(c,{id:"pagespeed_location",type:"number",min:"0",max:"100",value:a.pagespeed_location,onChange:t=>l("pagespeed_location",parseInt(t.target.value)||0)}),n.pagespeed_location&&e.jsx("p",{className:"text-sm text-red-600",children:n.pagespeed_location})]})]})]}),e.jsx(me,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Search Console Errors"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"sc_errors_home",children:"Home Page Errors"}),e.jsx(c,{id:"sc_errors_home",type:"number",min:"0",value:a.sc_errors_home,onChange:t=>l("sc_errors_home",parseInt(t.target.value)||0)})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"sc_errors_service",children:"Service Page Errors"}),e.jsx(c,{id:"sc_errors_service",type:"number",min:"0",value:a.sc_errors_service,onChange:t=>l("sc_errors_service",parseInt(t.target.value)||0)})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"sc_errors_location",children:"Location Page Errors"}),e.jsx(c,{id:"sc_errors_location",type:"number",min:"0",value:a.sc_errors_location,onChange:t=>l("sc_errors_location",parseInt(t.target.value)||0)})]})]})]})]})})]}),e.jsxs(g,{children:[e.jsxs(_,{children:[e.jsx(j,{className:"text-lg",children:"Client Relationship"}),b("Enter client interaction data and satisfaction metrics")]}),e.jsx(v,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"client_meeting_date",children:"Meeting Date"}),e.jsx(c,{id:"client_meeting_date",type:"date",value:a.client_meeting_date,onChange:t=>l("client_meeting_date",t.target.value)})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"interactions_count",children:"Interactions Count"}),e.jsx(c,{id:"interactions_count",type:"number",min:"0",value:a.interactions_count,onChange:t=>l("interactions_count",parseInt(t.target.value)||0)})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"nps_client",children:"Client NPS (1-10)"}),e.jsx(c,{id:"nps_client",type:"number",min:"1",max:"10",value:a.nps_client||"",onChange:t=>l("nps_client",t.target.value?parseInt(t.target.value):null)}),n.nps_client&&e.jsx("p",{className:"text-sm text-red-600",children:n.nps_client})]}),((D=authState.user)==null?void 0:D.role)==="tl"&&e.jsxs("div",{children:[e.jsx(i,{htmlFor:"mentor_score",children:"Mentor Score (1-10)"}),e.jsx(c,{id:"mentor_score",type:"number",min:"1",max:"10",value:a.mentor_score||"",onChange:t=>l("mentor_score",t.target.value?parseInt(t.target.value):null)}),n.mentor_score&&e.jsx("p",{className:"text-sm text-red-600",children:n.mentor_score})]})]})})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsxs(I,{variant:"outline",onClick:p,children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs(I,{onClick:q,disabled:w,children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),w?"Saving...":"Save Entry"]})]})]})]})})},ye=()=>{const{user:r}=J(),[p,B]=m.useState({ytdAvgScore:0,lastMonthScore:0,activeClientsCount:0,avgNPS:0}),[f,a]=m.useState([]),[E,P]=m.useState(!0),[$,w]=m.useState(!1),[M,n]=m.useState(null),[u,C]=m.useState({status:"all",client:"all",month:"all"});m.useEffect(()=>{r!=null&&r.id&&(T(),k())},[r==null?void 0:r.id]);const T=async()=>{try{const s=await F.getEmployeeDashboard(r.id);B(s)}catch(s){console.error("Failed to load dashboard data:",s),S.error("Failed to load dashboard data")}},k=async()=>{try{P(!0);const s=await F.getEntries({employeeId:r.id,sortBy:"month",sortOrder:"desc",limit:100});a(s.data)}catch(s){console.error("Failed to load entries:",s),S.error("Failed to load entries")}finally{P(!1)}},A=async s=>{try{await F.submitEntry(s),S.success("Entry submitted successfully"),k(),T()}catch(o){console.error("Failed to submit entry:",o),S.error(o.message||"Failed to submit entry")}},l=()=>{const s=new Date,y=new Date(s.getFullYear(),s.getMonth()-1,1).toISOString().slice(0,7);n({employee_id:authState.user.id,month:y,status:"draft"}),w(!0)},O=s=>{n(s),w(!0)},q=()=>{w(!1),n(null),k(),T()},L=s=>{const o={draft:{variant:"secondary",label:"Draft"},submitted:{variant:"default",label:"Submitted"},approved:{variant:"success",label:"Approved"},returned:{variant:"destructive",label:"Returned"}},y=o[s]||o.draft;return e.jsx(H,{variant:y.variant,children:y.label})},b=s=>s>=85?"text-green-600":s>=75?"text-blue-600":s>=65?"text-yellow-600":"text-red-600",d=s=>s==null?"-":`${s>=0?"+":""}${s.toFixed(1)}%`,D=f.filter(s=>!(u.status!=="all"&&s.status!==u.status||u.client!=="all"&&s.client_id!==u.client||u.month!=="all"&&s.month!==u.month)),t=[...new Set(f.map(s=>{var o;return{id:s.client_id,name:(o=s.clients)==null?void 0:o.name}}))],N=[...new Set(f.map(s=>s.month))].sort().reverse();return E?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(g,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(j,{className:"text-sm font-medium",children:"YTD Avg Score"}),e.jsx(G,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(v,{children:[e.jsx("div",{className:`text-2xl font-bold ${b(p.ytdAvgScore)}`,children:p.ytdAvgScore.toFixed(1)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Out of 100"})]})]}),e.jsxs(g,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(j,{className:"text-sm font-medium",children:"Last Month Score"}),e.jsx(le,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(v,{children:[e.jsx("div",{className:`text-2xl font-bold ${b(p.lastMonthScore)}`,children:p.lastMonthScore.toFixed(1)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Previous month performance"})]})]}),e.jsxs(g,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(j,{className:"text-sm font-medium",children:"# Active Clients"}),e.jsx(ie,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(v,{children:[e.jsx("div",{className:"text-2xl font-bold",children:p.activeClientsCount}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently managing"})]})]}),e.jsxs(g,{children:[e.jsxs(_,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(j,{className:"text-sm font-medium",children:"Avg NPS (90d)"}),e.jsx(ce,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(v,{children:[e.jsx("div",{className:"text-2xl font-bold",children:p.avgNPS.toFixed(1)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Client satisfaction"})]})]})]}),e.jsxs(g,{children:[e.jsxs(_,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(j,{children:"Performance History"}),e.jsxs(I,{onClick:l,className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4"}),"Add Previous Month Data"]})]}),e.jsxs("div",{className:"flex gap-4 mt-4",children:[e.jsxs("select",{value:u.status,onChange:s=>C(o=>({...o,status:s.target.value})),className:"px-3 py-2 border rounded-md",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"submitted",children:"Submitted"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"returned",children:"Returned"})]}),e.jsxs("select",{value:u.client,onChange:s=>C(o=>({...o,client:s.target.value})),className:"px-3 py-2 border rounded-md",children:[e.jsx("option",{value:"all",children:"All Clients"}),t.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsxs("select",{value:u.month,onChange:s=>C(o=>({...o,month:s.target.value})),className:"px-3 py-2 border rounded-md",children:[e.jsx("option",{value:"all",children:"All Months"}),N.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]}),e.jsx(v,{children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(Y,{children:[e.jsx(h,{children:"Month"}),e.jsx(h,{children:"Client"}),e.jsx(h,{children:"Type"}),e.jsx(h,{children:"Organic Growth %"}),e.jsx(h,{children:"Total Traffic %"}),e.jsx(h,{children:"SERP Top 3/10"}),e.jsx(h,{children:"GMB Top 3"}),e.jsx(h,{children:"Tech Health"}),e.jsx(h,{children:"NPS"}),e.jsx(h,{children:"Mentor Score"}),e.jsx(h,{children:"Month Score"}),e.jsx(h,{children:"Status"}),e.jsx(h,{children:"Actions"})]})}),e.jsx(te,{children:D.map(s=>{var o,y,R,z,U;return e.jsxs(Y,{children:[e.jsx(x,{className:"font-medium",children:s.month}),e.jsx(x,{children:(o=s.clients)==null?void 0:o.name}),e.jsx(x,{children:e.jsx(H,{variant:((y=s.clients)==null?void 0:y.type)==="Large"?"default":"secondary",children:(R=s.clients)==null?void 0:R.type})}),e.jsx(x,{children:e.jsxs("div",{className:`flex items-center gap-1 ${s.organic_growth_pct>=0?"text-green-600":"text-red-600"}`,children:[s.organic_growth_pct>=0?e.jsx(G,{className:"h-3 w-3"}):e.jsx(X,{className:"h-3 w-3"}),d(s.organic_growth_pct)]})}),e.jsx(x,{children:e.jsxs("div",{className:`flex items-center gap-1 ${s.traffic_growth_pct>=0?"text-green-600":"text-red-600"}`,children:[s.traffic_growth_pct>=0?e.jsx(G,{className:"h-3 w-3"}):e.jsx(X,{className:"h-3 w-3"}),d(s.traffic_growth_pct)]})}),e.jsxs(x,{children:[s.serp_top3_count,"/",s.serp_top10_count]}),e.jsx(x,{children:s.gmb_top3_count}),e.jsx(x,{children:e.jsx("span",{className:b(s.technical_health_score),children:((z=s.technical_health_score)==null?void 0:z.toFixed(1))||"-"})}),e.jsx(x,{children:s.nps_client||"-"}),e.jsx(x,{children:s.mentor_score||"-"}),e.jsx(x,{children:e.jsx("span",{className:`font-semibold ${b(s.month_score)}`,children:((U=s.month_score)==null?void 0:U.toFixed(1))||"-"})}),e.jsx(x,{children:L(s.status)}),e.jsx(x,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{variant:"outline",size:"sm",onClick:()=>O(s),disabled:s.status==="approved",children:s.status==="approved"?e.jsx(de,{className:"h-3 w-3"}):e.jsx(he,{className:"h-3 w-3"})}),s.status==="draft"&&e.jsx(I,{variant:"default",size:"sm",onClick:()=>A(s.id),children:e.jsx(xe,{className:"h-3 w-3"})})]})})]},s.id)})})]}),D.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'No entries found. Click "Add Previous Month Data" to get started.'})]})})]}),$&&e.jsx(ue,{entry:M,onClose:q,onSave:q})]})};export{ye as default};
