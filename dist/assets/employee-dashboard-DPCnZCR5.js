import{u as ue,a as ye,b as ge,c as he,j as e,d as pe,e as se,g as ae,f as je,h as Ne,t as we,F as Se,L as ke,C as Q,P as Ce,m as V,K as Pe}from"./manager-dashboard-BSBEKJka.js";import{r as u}from"./react-vendor-z5qVsTvS.js";import{u as be}from"./shared-ui-DksRfdM8.js";import{C as Ae}from"./clients-Dg_kG3rU.js";const xe=({onNavigateToDashboard:b})=>{const{user:g,role:a}=ue(),{toast:f}=ye(),{clients:M,employees:v}=ge(),{submissions:w,fetchSubmissions:N,addSubmission:h}=he(),[n,R]=u.useState({title:"",description:"",category:"general",priority:"medium",assignedTo:"",dueDate:"",status:"pending",attachments:[]}),[$,L]=u.useState(!1),[C,y]=u.useState([]),S=()=>{const s=[{value:"general",label:"General Report"},{value:"progress",label:"Progress Update"},{value:"issue",label:"Issue Report"},{value:"feedback",label:"Feedback"}];return a!=null&&a.includes("SEO")?[...s,{value:"seo_audit",label:"SEO Audit"},{value:"keyword_research",label:"Keyword Research"},{value:"content_optimization",label:"Content Optimization"}]:a!=null&&a.includes("Ads")?[...s,{value:"campaign_performance",label:"Campaign Performance"},{value:"ad_optimization",label:"Ad Optimization"},{value:"budget_report",label:"Budget Report"}]:a!=null&&a.includes("Social Media")?[...s,{value:"social_analytics",label:"Social Media Analytics"},{value:"content_calendar",label:"Content Calendar"},{value:"engagement_report",label:"Engagement Report"}]:a!=null&&a.includes("Designer")?[...s,{value:"design_review",label:"Design Review"},{value:"brand_guidelines",label:"Brand Guidelines"},{value:"creative_assets",label:"Creative Assets"}]:s};u.useEffect(()=>{N(),i()},[]);const i=()=>{const s=w.filter(o=>o.created_by===(g==null?void 0:g.id)&&o.type==="report");y(s)},t=(s,o)=>{R(D=>({...D,[s]:o}))},c=async()=>{if(!n.title.trim()||!n.description.trim()){f({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}L(!0);try{const s={...n,type:"report",created_by:g==null?void 0:g.id,created_by_role:a,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};await h(s),f({title:"Report Submitted",description:"Your report has been successfully submitted",variant:"default"}),R({title:"",description:"",category:"general",priority:"medium",assignedTo:"",dueDate:"",status:"pending",attachments:[]}),i()}catch{f({title:"Submission Failed",description:"Failed to submit report. Please try again.",variant:"destructive"})}finally{L(!1)}},l=S(),d=[{value:"low",label:"Low",color:"text-green-600"},{value:"medium",label:"Medium",color:"text-yellow-600"},{value:"high",label:"High",color:"text-orange-600"},{value:"urgent",label:"Urgent",color:"text-red-600"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"card-brand p-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-text",children:"New Report Dashboard"}),e.jsx("p",{className:"text-brand-text-secondary mt-1",children:"Create and submit reports for your projects and tasks"})]}),e.jsx("button",{onClick:()=>b==null?void 0:b("agency"),className:"btn-brand-primary",children:"Back to Dashboard"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card-brand p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-brand-text mb-6",children:"Create New Report"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Report Title *"}),e.jsx("input",{type:"text",value:n.title,onChange:s=>t("title",s.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter report title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Category"}),e.jsx("select",{value:n.category,onChange:s=>t("category",s.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:l.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Priority"}),e.jsx("select",{value:n.priority,onChange:s=>t("priority",s.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:d.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Assign To"}),e.jsxs("select",{value:n.assignedTo,onChange:s=>t("assignedTo",s.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select assignee (optional)"}),v.map(s=>e.jsxs("option",{value:s.id,children:[s.name," - ",s.role]},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Due Date"}),e.jsx("input",{type:"date",value:n.dueDate,onChange:s=>t("dueDate",s.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Description *"}),e.jsx("textarea",{value:n.description,onChange:s=>t("description",s.target.value),rows:6,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe your report in detail..."})]}),e.jsx("button",{onClick:c,disabled:$,className:"w-full btn-brand-primary disabled:opacity-50 disabled:cursor-not-allowed",children:$?"Submitting...":"Submit Report"})]})]}),e.jsxs("div",{className:"card-brand p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-brand-text mb-6",children:"Recent Reports"}),C.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"📋"}),e.jsx("p",{className:"text-brand-text-secondary",children:"No reports submitted yet"})]}):e.jsx("div",{className:"space-y-4",children:C.slice(0,5).map((s,o)=>e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-medium text-brand-text",children:s.title}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.priority==="urgent"?"bg-red-100 text-red-800":s.priority==="high"?"bg-orange-100 text-orange-800":s.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:s.priority})]}),e.jsxs("p",{className:"text-sm text-brand-text-secondary mb-2",children:[s.description.substring(0,100),"..."]}),e.jsxs("div",{className:"flex justify-between items-center text-xs text-brand-text-secondary",children:[e.jsxs("span",{children:["Category: ",s.category]}),e.jsx("span",{children:new Date(s.created_at).toLocaleDateString()})]})]},o))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"card-brand p-6 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-brand-primary mb-1",children:C.length}),e.jsx("div",{className:"text-sm text-brand-text-secondary",children:"Total Reports"})]}),e.jsxs("div",{className:"card-brand p-6 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:C.filter(s=>s.status==="completed").length}),e.jsx("div",{className:"text-sm text-brand-text-secondary",children:"Completed"})]}),e.jsxs("div",{className:"card-brand p-6 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600 mb-1",children:C.filter(s=>s.status==="pending").length}),e.jsx("div",{className:"text-sm text-brand-text-secondary",children:"Pending"})]}),e.jsxs("div",{className:"card-brand p-6 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600 mb-1",children:C.filter(s=>s.priority==="urgent").length}),e.jsx("div",{className:"text-sm text-brand-text-secondary",children:"Urgent"})]})]})]})},Le=Object.freeze(Object.defineProperty({__proto__:null,NewReportDashboard:xe,default:xe},Symbol.toStringTag,{value:"Module"}));function De({employee:b,employeeSubmissions:g}){const a=pe(),[f,M]=u.useState([]),[v,w]=u.useState(!0),[N,h]=u.useState("all"),[n,R]=u.useState("All"),[$,L]=u.useState(!0);u.useEffect(()=>{(async()=>{if(a)try{w(!0);const t=b.department==="Social Media"?"Marketing":"Web",{data:c,error:l}=await a.from("clients").select("*").eq("team",t).order("name");if(l)throw l;M(c||[])}catch(t){console.error("Error fetching clients:",t)}finally{w(!1)}})()},[a,b.department]);const C=u.useMemo(()=>{const i=new Set;return g.forEach(t=>{t.monthKey&&i.add(t.monthKey)}),Array.from(i).sort((t,c)=>c.localeCompare(t))},[g]),y=u.useMemo(()=>{const i=new Set;return g.forEach(t=>(t.clients||[]).forEach(c=>(c.services||[]).forEach(l=>i.add(typeof l=="string"?l:l.service)))),["All",...Array.from(i).sort()]},[g]),S=u.useMemo(()=>{const i=new Map;(N==="all"?g:g.filter(l=>l.monthKey===N)).forEach(l=>{l.clients&&l.clients.forEach(d=>{i.has(d.name)||i.set(d.name,{name:d.name,submissions:[],totalKPIs:0,avgScore:0,latestWork:null,masterClient:null});const s=i.get(d.name);s.submissions.push({...l,clientData:d}),(!s.latestWork||l.created_at>s.latestWork.created_at)&&(s.latestWork=l)})}),f.forEach(l=>{const d=i.get(l.name);d&&(d.masterClient=l)}),i.forEach(l=>{const d=l.submissions.map(s=>{var o;return((o=s==null?void 0:s.scores)==null?void 0:o.kpiScore)||0});l.totalKPIs=d.reduce((s,o)=>s+o,0),l.avgScore=d.length?d.reduce((s,o)=>s+o,0)/d.length:0});let c=Array.from(i.values());return n!=="All"&&(c=c.filter(l=>{var d;return(((d=l.latestWork)==null?void 0:d.clients)||[]).some(s=>s.name===l.name&&(s.services||[]).some(o=>(typeof o=="string"?o:o.service)===n))})),c.sort((l,d)=>d.avgScore-l.avgScore)},[g,f,N,n]);return v?e.jsx("div",{className:"text-gray-500",children:"Loading client data..."}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-lg font-semibold",children:"Clients You've Worked On"}),e.jsxs("div",{className:"flex gap-2 text-sm",children:[e.jsxs("select",{className:"border rounded p-2",value:N,onChange:i=>h(i.target.value),children:[e.jsx("option",{value:"all",children:"All Months"}),C.map(i=>e.jsx("option",{value:i,children:i},i))]}),e.jsx("select",{className:"border rounded p-2",value:n,onChange:i=>R(i.target.value),children:y.map(i=>e.jsx("option",{children:i},i))}),e.jsx("button",{className:"border rounded px-2 py-1",onClick:()=>L(i=>!i),children:$?"Hide Scope":"Show Scope"})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:S.map(i=>e.jsxs("div",{className:"border rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-medium",children:i.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Avg KPI: ",i.avgScore.toFixed(1)]})]}),e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["Latest work: ",i.latestWork?new Date(i.latestWork.created_at).toLocaleDateString():"—"]}),$&&(()=>{var d;const t=i.latestWork,c=(d=t==null?void 0:t.clients)==null?void 0:d.find(s=>s.name===i.name),l=(c==null?void 0:c.services)||[];return!c||l.length===0?null:e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-sm font-medium",children:"Service Scope Progress"}),e.jsx("div",{className:"space-y-2 mt-1",children:l.map((s,o)=>{const D=typeof s=="string"?s:s.service,F=se(c,D,{monthKey:t==null?void 0:t.monthKey})||0,x=ae(D),B=l.reduce((G,I)=>{const O=typeof I=="string"?I:I.service,Y=se(c,O,{monthKey:t==null?void 0:t.monthKey})||0,J=ae(O);return G+J*Y},0)||1,q=Math.round(x*F/B*100);return e.jsxs("div",{className:"text-xs",children:[e.jsxs("div",{className:"flex justify-between mb-0.5",children:[e.jsxs("span",{className:"font-medium",children:[D," ",e.jsxs("span",{className:"text-gray-500",children:["(w ",x,", ",q,"% of scope)"]})]}),e.jsxs("span",{children:[F,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 h-1.5 rounded-full",children:e.jsx("div",{className:`h-1.5 rounded-full ${F>=100?"bg-green-500":F>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${F}%`}})})]},o)})})]})})(),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-sm font-medium",children:"Submissions"}),e.jsx("ul",{className:"text-sm list-disc pl-5 mt-1",children:i.submissions.map((t,c)=>{var l;return e.jsxs("li",{children:[new Date(t.created_at).toLocaleDateString()," — KPI: ",((l=t==null?void 0:t.scores)==null?void 0:l.kpiScore)||0]},c)})})]})]},i.name))})]})}const Me=({isOpen:b,onClose:g,employee:a=null})=>{const{user:f,updateProfile:M}=ue(),{notify:v}=be(),{updateEmployee:w}=ge(),[N,h]=u.useState(!1),[n,R]=u.useState({name:"",email:"",phone:"",department:"",role:"",bio:"",skills:"",experience:"",location:"",timezone:"",avatar:"",socialLinks:{linkedin:"",twitter:"",github:"",portfolio:""},preferences:{emailNotifications:!0,pushNotifications:!0,darkMode:!1,language:"en"}}),$=["Marketing","Sales","Development","Design","Operations","HR","Finance","Content"],L=["SEO Specialist","Ads Manager","Social Media Manager","YouTube SEO","Web Developer","Graphic Designer","Freelancer","Intern","MASH","Operations Head","Accountant","Sales Representative","HR Manager","Super Admin"],C=["UTC-12:00","UTC-11:00","UTC-10:00","UTC-09:00","UTC-08:00","UTC-07:00","UTC-06:00","UTC-05:00","UTC-04:00","UTC-03:00","UTC-02:00","UTC-01:00","UTC+00:00","UTC+01:00","UTC+02:00","UTC+03:00","UTC+04:00","UTC+05:00","UTC+06:00","UTC+07:00","UTC+08:00","UTC+09:00","UTC+10:00","UTC+11:00","UTC+12:00"];u.useEffect(()=>{var t,c,l,d,s,o,D,F;if(b){const x=a||f;x&&R({name:x.name||"",email:x.email||"",phone:x.phone||"",department:x.department||"",role:x.role||"",bio:x.bio||"",skills:Array.isArray(x.skills)?x.skills.join(", "):x.skills||"",experience:x.experience||"",location:x.location||"",timezone:x.timezone||"UTC+00:00",avatar:x.avatar||"",socialLinks:{linkedin:((t=x.socialLinks)==null?void 0:t.linkedin)||"",twitter:((c=x.socialLinks)==null?void 0:c.twitter)||"",github:((l=x.socialLinks)==null?void 0:l.github)||"",portfolio:((d=x.socialLinks)==null?void 0:d.portfolio)||""},preferences:{emailNotifications:((s=x.preferences)==null?void 0:s.emailNotifications)??!0,pushNotifications:((o=x.preferences)==null?void 0:o.pushNotifications)??!0,darkMode:((D=x.preferences)==null?void 0:D.darkMode)??!1,language:((F=x.preferences)==null?void 0:F.language)||"en"}})}},[b,a,f]);const y=(t,c)=>{R(l=>({...l,[t]:c}))},S=(t,c,l)=>{R(d=>({...d,[t]:{...d[t],[c]:l}}))},i=async t=>{t.preventDefault(),h(!0);try{if(!n.name.trim()||!n.email.trim())throw new Error("Name and email are required");const c={...n,skills:n.skills.split(",").map(l=>l.trim()).filter(Boolean),updatedAt:new Date().toISOString()};a?await w(a.id,c):await M(c),v({title:"Profile Updated",message:"Profile has been successfully updated",type:"success"}),g()}catch(c){v({title:"Update Failed",message:c.message||"Failed to update profile",type:"error"})}finally{h(!1)}};return b?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-200 dark:border-slate-700",children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-text",children:a?`Edit ${a.name}'s Profile`:"Edit Profile"}),e.jsx("button",{onClick:g,className:"text-slate-400 hover:text-slate-600 text-2xl",children:"×"})]}),e.jsxs("form",{onSubmit:i,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Name *"}),e.jsx("input",{type:"text",value:n.name,onChange:t=>y("name",t.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:n.email,onChange:t=>y("email",t.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Phone"}),e.jsx("input",{type:"tel",value:n.phone,onChange:t=>y("phone",t.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Location"}),e.jsx("input",{type:"text",value:n.location,onChange:t=>y("location",t.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"City, Country"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Department"}),e.jsxs("select",{value:n.department,onChange:t=>y("department",t.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Department"}),$.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Role"}),e.jsxs("select",{value:n.role,onChange:t=>y("role",t.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Role"}),L.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Timezone"}),e.jsx("select",{value:n.timezone,onChange:t=>y("timezone",t.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:C.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Avatar URL"}),e.jsx("input",{type:"url",value:n.avatar,onChange:t=>y("avatar",t.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://example.com/avatar.jpg"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Bio"}),e.jsx("textarea",{value:n.bio,onChange:t=>y("bio",t.target.value),rows:4,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Tell us about yourself..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Experience"}),e.jsx("textarea",{value:n.experience,onChange:t=>y("experience",t.target.value),rows:4,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe your work experience..."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Skills"}),e.jsx("input",{type:"text",value:n.skills,onChange:t=>y("skills",t.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"JavaScript, React, Node.js, etc. (comma-separated)"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Separate skills with commas"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-brand-text mb-4",children:"Social Links"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"LinkedIn"}),e.jsx("input",{type:"url",value:n.socialLinks.linkedin,onChange:t=>S("socialLinks","linkedin",t.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://linkedin.com/in/username"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Twitter"}),e.jsx("input",{type:"url",value:n.socialLinks.twitter,onChange:t=>S("socialLinks","twitter",t.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://twitter.com/username"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"GitHub"}),e.jsx("input",{type:"url",value:n.socialLinks.github,onChange:t=>S("socialLinks","github",t.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://github.com/username"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Portfolio"}),e.jsx("input",{type:"url",value:n.socialLinks.portfolio,onChange:t=>S("socialLinks","portfolio",t.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://yourportfolio.com"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-brand-text mb-4",children:"Preferences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"emailNotifications",checked:n.preferences.emailNotifications,onChange:t=>S("preferences","emailNotifications",t.target.checked),className:"mr-3"}),e.jsx("label",{htmlFor:"emailNotifications",className:"text-sm text-brand-text",children:"Email Notifications"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"pushNotifications",checked:n.preferences.pushNotifications,onChange:t=>S("preferences","pushNotifications",t.target.checked),className:"mr-3"}),e.jsx("label",{htmlFor:"pushNotifications",className:"text-sm text-brand-text",children:"Push Notifications"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"darkMode",checked:n.preferences.darkMode,onChange:t=>S("preferences","darkMode",t.target.checked),className:"mr-3"}),e.jsx("label",{htmlFor:"darkMode",className:"text-sm text-brand-text",children:"Dark Mode"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-brand-text mb-2",children:"Language"}),e.jsxs("select",{value:n.preferences.language,onChange:t=>S("preferences","language",t.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"es",children:"Spanish"}),e.jsx("option",{value:"fr",children:"French"}),e.jsx("option",{value:"de",children:"German"}),e.jsx("option",{value:"it",children:"Italian"}),e.jsx("option",{value:"pt",children:"Portuguese"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("button",{type:"button",onClick:g,className:"px-6 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:N,className:"btn-brand-primary px-6 py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:N?"Saving...":"Save Changes"})]})]})]})}):null},X=({title:b,value:g,subtitle:a,icon:f,color:M="blue",trend:v=null,onClick:w=null})=>{const N={blue:"bg-blue-50 border-blue-200 text-blue-800",green:"bg-green-50 border-green-200 text-green-800",yellow:"bg-yellow-50 border-yellow-200 text-yellow-800",red:"bg-red-50 border-red-200 text-red-800",purple:"bg-purple-50 border-purple-200 text-purple-800",indigo:"bg-indigo-50 border-indigo-200 text-indigo-800"},h={up:"text-green-600",down:"text-red-600",neutral:"text-gray-600"},n={up:"↗️",down:"↘️",neutral:"→"};return e.jsx("div",{className:`p-6 rounded-lg border-2 transition-all duration-200 ${N[M]||N.blue} ${w?"cursor-pointer hover:shadow-lg transform hover:-translate-y-1":""}`,onClick:w,children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[f&&e.jsx("span",{className:"text-2xl",children:f}),e.jsx("h3",{className:"text-sm font-medium text-gray-600",children:b})]}),e.jsx("div",{className:"text-3xl font-bold mb-1",children:g}),a&&e.jsx("p",{className:"text-sm text-gray-500",children:a}),v&&e.jsxs("div",{className:`flex items-center space-x-1 mt-2 text-sm ${h[v.direction]||h.neutral}`,children:[e.jsx("span",{children:n[v.direction]||n.neutral}),e.jsx("span",{children:v.value}),e.jsx("span",{className:"text-gray-500",children:v.period})]})]})})})},Z=({label:b,value:g,unit:a="",progress:f=null,status:M=null,actions:v=null})=>{const w={success:"text-green-600 bg-green-100",warning:"text-yellow-600 bg-yellow-100",error:"text-red-600 bg-red-100",info:"text-blue-600 bg-blue-100"},N=h=>h>=90?"bg-green-500":h>=70?"bg-blue-500":h>=50?"bg-yellow-500":"bg-red-500";return e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:b}),M&&e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w[M.type]||w.info}`,children:M.text})]}),f!==null&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[f,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${N(f)}`,style:{width:`${Math.min(f,100)}%`}})})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:[g," ",a&&e.jsx("span",{className:"text-sm text-gray-500",children:a})]})}),v&&e.jsx("div",{className:"flex space-x-2",children:v.map((h,n)=>e.jsx("button",{onClick:h.onClick,className:`px-3 py-1 rounded text-xs font-medium transition-colors ${h.variant==="primary"?"bg-blue-600 text-white hover:bg-blue-700":h.variant==="danger"?"bg-red-600 text-white hover:bg-red-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,disabled:h.disabled,children:h.label},n))})]})]})};function Te({employee:b,onBack:g}){var B,q,G,I,O,Y,J,re,le,ne,ie,oe,ce,de,me;const[a,f]=u.useState(b),{allSubmissions:M,loading:v}=he(),{openModal:w,closeModal:N}=je(),{enhancedSubmissions:h,isEnhancedSyncActive:n}=Ne({refreshInterval:2e4,employeeFilter:b?{name:b.name,phone:b.phone}:null}),R=n&&h.length>0?h:M||[],$=pe(),[L,C]=u.useState(!1),[y,S]=u.useState(!1),{notify:i}=be(),t=u.useMemo(()=>{const r=[{key:"photoUrl",label:"Profile Photo",critical:!0},{key:"joiningDate",label:"Joining Date",critical:!0},{key:"dob",label:"Date of Birth",critical:!1},{key:"education",label:"Education",critical:!0},{key:"certifications",label:"Certifications",critical:!1},{key:"skills",label:"Skills & Tools",critical:!0},{key:"department",label:"Department",critical:!0},{key:"role",label:"Role",critical:!0},{key:"directManager",label:"Direct Manager",critical:!0},{key:"deviceType",label:"Device Type",critical:!1},{key:"macAddress",label:"MAC Address",critical:!1},{key:"serialNumber",label:"Serial Number",critical:!1},{key:"simCardProvided",label:"SIM Card Status",critical:!1},{key:"whatsappNumber",label:"WhatsApp Number",critical:!1},{key:"rechargeDate",label:"Last Recharge Date",critical:!1},{key:"companyAssets",label:"Company Assets",critical:!1}],m=r.filter(T=>{const k=a==null?void 0:a[T.key];return T.key==="role"?!k||Array.isArray(k)&&k.length===0:!k||typeof k=="string"&&k.trim()===""}),p=m.filter(T=>T.critical),E=Math.round((r.length-m.length)/r.length*100);return{missing:m,criticalMissing:p,completionPercentage:E,isComplete:m.length===0,needsCriticalInfo:p.length>0,isFirstTime:m.length>=6}},[a]),[c,l]=u.useState(!1);u.useEffect(()=>{t.isFirstTime&&!c&&!v&&(C(!0),l(!0))},[t.isFirstTime,c,v]);const d=async r=>{if(!$)return;const m={...a,...r};try{const{error:p}=await $.from("submissions").update({employee:m}).eq("employee->>name",a.name).eq("employee->>phone",a.phone);if(p)throw p;f(m),C(!1),i({type:"success",title:"Profile updated",message:"Your profile has been saved."}),w("Success","Profile updated successfully!",N)}catch(p){i({type:"error",title:"Profile update failed",message:p.message}),w("Error",`Failed to update profile: ${p.message}`,N)}},s=u.useMemo(()=>R.filter(r=>{var m,p;return((m=r.employee)==null?void 0:m.name)===a.name&&((p=r.employee)==null?void 0:p.phone)===a.phone}).sort((r,m)=>m.monthKey.localeCompare(r.monthKey)),[R,a]),o=u.useMemo(()=>{const r=we();return s.find(m=>m.monthKey===r)},[s]),D=u.useMemo(()=>{var k,U;if(s.length===0)return null;const r=s.reduce((P,A)=>{var j;return P+(((j=A.scores)==null?void 0:j.overall)||0)},0)/s.length,m=s.reduce((P,A)=>{var j;return P+(((j=A.scores)==null?void 0:j.kpiScore)||0)},0)/s.length,p=s.reduce((P,A)=>{var j;return P+(((j=A.scores)==null?void 0:j.learningScore)||0)},0)/s.length,E=s.reduce((P,A)=>{var j;return P+(((j=A.scores)==null?void 0:j.relationshipScore)||0)},0)/s.length,T=s.reduce((P,A)=>P+(A.learning||[]).reduce((j,_)=>j+(_.durationMins||0),0),0)/60;return{avgOverallScore:r.toFixed(1),avgKpiScore:m.toFixed(1),avgLearningScore:p.toFixed(1),avgRelationshipScore:E.toFixed(1),totalSubmissions:s.length,totalLearningHours:T.toFixed(1),improvementTrend:s.length>=2?((((k=s[0].scores)==null?void 0:k.overall)||0)-(((U=s[1].scores)==null?void 0:U.overall)||0)).toFixed(1):"0"}},[s]),F=(r,m)=>{var U,P,A,j,_,H,z,W,K;const p=`
      EMPLOYEE PERFORMANCE REPORT


      Employee: ${m}

      Month: ${V(r.monthKey)}

      Department: ${((U=r.employee)==null?void 0:U.department)||"N/A"}

      

      PERFORMANCE SCORES:

      Overall Score: ${((A=(P=r.scores)==null?void 0:P.overall)==null?void 0:A.toFixed(1))||"N/A"}/10

      KPI Score: ${((_=(j=r.scores)==null?void 0:j.kpiScore)==null?void 0:_.toFixed(1))||"N/A"}/10

      Learning Score: ${((z=(H=r.scores)==null?void 0:H.learningScore)==null?void 0:z.toFixed(1))||"N/A"}/10

      Client Relations: ${((K=(W=r.scores)==null?void 0:W.relationshipScore)==null?void 0:K.toFixed(1))||"N/A"}/10

      

      ${r.manager_remarks?`MANAGER FEEDBACK:
${r.manager_remarks}

`:""}
      

      Generated on: ${new Date().toLocaleDateString()}

      

      © Branding Pioneers Agency - Employee Performance Management System
    `,E=new Blob([p],{type:"text/plain"}),T=URL.createObjectURL(E),k=document.createElement("a");k.href=T,k.download=`${m.replace(/\s+/g,"_")}_${r.monthKey}_Report.txt`,k.click(),URL.revokeObjectURL(T)},x=r=>{var p,E,T,k,U,P,A,j,_,H,z,W;const m=[];return(r.clients||[]).forEach(K=>{(K.services||[]).forEach(ee=>{const te=typeof ee=="string"?ee:ee.service,fe=se(K,te,{monthKey:r.monthKey})||0,ve=ae(te);m.push(`• ${K.name} — ${te} (w ${ve}): ${fe}%`)})}),`PERFORMANCE SUMMARY - ${V(r.monthKey)}

Overall Score: ${((E=(p=r.scores)==null?void 0:p.overall)==null?void 0:E.toFixed(1))||"N/A"}/10

KPI Performance: ${((k=(T=r.scores)==null?void 0:T.kpiScore)==null?void 0:k.toFixed(1))||"N/A"}/10
Learning Activities: ${((P=(U=r.scores)==null?void 0:U.learningScore)==null?void 0:P.toFixed(1))||"N/A"}/10
Client Relations: ${((j=(A=r.scores)==null?void 0:A.relationshipScore)==null?void 0:j.toFixed(1))||"N/A"}/10

${(_=r.flags)!=null&&_.missingLearningHours?`Action needed: Complete learning hours requirement
`:""}
${(H=r.flags)!=null&&H.hasEscalations?`Action needed: Address client escalations
`:""}
${((z=r.discipline)==null?void 0:z.penalty)>0?`Late submission penalty: -${r.discipline.penalty} (late by ${r.discipline.lateDays} day(s))
`:""}
${(W=r.flags)!=null&&W.missingReports?`Action needed: Submit missing client reports
`:""}
${m.length?`
Service Progress:
`+m.slice(0,10).join(`
`):""}
${r.manager_remarks?`
Manager Feedback:
${r.manager_remarks}`:`
No manager feedback yet`}`};return v?e.jsx(Se,{show:!0,children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(ke,{size:"xl",showText:!0,text:"Loading your dashboard..."})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(Q,{}),e.jsx(Q,{}),e.jsx(Q,{})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:e.jsx(Q,{})})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"max-w-6xl mx-auto space-y-4 sm:space-y-6",children:[((B=o==null?void 0:o.manager)==null?void 0:B.testimonialUrl)&&e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4 flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-purple-800",children:"🎥 A testimonial was added to your latest submission."}),e.jsx("a",{className:"text-purple-700 underline text-sm",href:o.manager.testimonialUrl,target:"_blank",rel:"noreferrer",children:"View Testimonial"})]}),!t.isComplete&&e.jsxs("div",{className:`rounded-xl p-4 flex items-start gap-4 ${t.needsCriticalInfo?"bg-red-50 border border-red-200":"bg-blue-50 border border-blue-200"}`,children:[e.jsx("div",{className:`text-2xl ${t.needsCriticalInfo?"text-red-500":"text-blue-500"}`,children:t.needsCriticalInfo?"🚨":"📝"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:`text-sm font-semibold ${t.needsCriticalInfo?"text-red-800":"text-blue-800"}`,children:t.isFirstTime?"🎉 Welcome! Complete Your Profile to Get Started":`Profile ${t.completionPercentage}% Complete`}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 sm:w-20 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-500 ${t.completionPercentage>=80?"bg-gray-600":t.completionPercentage>=50?"bg-gray-500":"bg-gray-400"}`,style:{width:`${t.completionPercentage}%`}})}),e.jsxs("span",{className:"text-xs font-medium text-gray-600",children:[t.completionPercentage,"%"]})]})]}),t.criticalMissing.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("p",{className:"text-xs text-red-700 mb-2",children:["🔴 ",e.jsx("strong",{children:"Critical Info Needed:"})]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.criticalMissing.slice(0,4).map(r=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:r.label},r.key)),t.criticalMissing.length>4&&e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:["+",t.criticalMissing.length-4," more"]})]})]}),e.jsx("p",{className:`text-xs mb-3 ${t.needsCriticalInfo?"text-red-700":"text-blue-700"}`,children:t.isFirstTime?"Complete your profile to unlock performance tracking, personalized insights, and better reporting features.":t.needsCriticalInfo?"Some critical information is missing. This may affect your performance tracking and reporting accuracy.":"A few optional details are missing. Complete them for a richer dashboard experience."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>C(!0),className:`px-4 py-2 text-white rounded-lg font-medium transition-colors ${t.needsCriticalInfo,"bg-gray-600 hover:bg-gray-700"}`,children:t.isFirstTime?"Get Started":"Complete Profile"}),!t.needsCriticalInfo&&e.jsx("button",{onClick:()=>{},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Maybe Later"})]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx(Ce,{src:a.photoUrl,name:a.name,size:"lg",className:"flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 truncate",children:a.name}),e.jsxs("p",{className:"text-sm sm:text-base text-gray-600",children:[a.department," Department"]}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:["Phone: ",a.phone]})]})]}),e.jsxs("button",{onClick:g,className:"px-3 sm:px-4 py-2 text-sm sm:text-base text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 active:bg-gray-100 transition-colors touch-manipulation self-start sm:self-auto",children:[e.jsx("span",{className:"sm:hidden",children:"← Form"}),e.jsx("span",{className:"hidden sm:inline",children:"← Back to Form"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold text-sm",children:"C"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Client Management"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Add new clients to your portfolio"})]})]}),e.jsx("button",{onClick:()=>S(!y),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:y?"Cancel":"+ Add Client"})]}),y&&e.jsx("div",{className:"mt-4 border-t pt-4",children:e.jsx(Ae,{employee:a,onSuccess:()=>{S(!1),i("Client added successfully!","success")},onCancel:()=>S(!1)})})]}),D&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(X,{title:"Overall Score",value:D.avgOverallScore,unit:"/10",icon:"⭐",className:"bg-gray-50"}),e.jsx(X,{title:"KPI Performance",value:D.avgKpiScore,unit:"/10",icon:"📋",className:"bg-gray-50"}),e.jsx(X,{title:"Learning Hours",value:D.totalLearningHours,unit:" hrs",icon:"📖",className:"bg-gray-50"}),e.jsx(X,{title:"Total Reports",value:D.totalSubmissions,unit:"",icon:"📊",className:"bg-gray-50"})]}),o&&e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gray-600 rounded-full flex items-center justify-center text-white font-bold text-sm sm:text-base flex-shrink-0",children:"✓"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-800 text-sm sm:text-base",children:"Current Month Submitted"}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-700 leading-relaxed",children:[V(o.monthKey)," report submitted with ",((G=(q=o.scores)==null?void 0:q.overall)==null?void 0:G.toFixed(1))||"N/A","/10 overall score"]})]})]})}),o&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold mb-4",children:[V(o.monthKey)," Performance Breakdown"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Z,{label:"Overall Score",currentValue:(I=o.scores)==null?void 0:I.overall,previousValue:(Y=(O=s[1])==null?void 0:O.scores)==null?void 0:Y.overall,unit:"/10",target:"7.0"}),e.jsx(Z,{label:"KPI Performance",currentValue:(J=o.scores)==null?void 0:J.kpiScore,previousValue:(le=(re=s[1])==null?void 0:re.scores)==null?void 0:le.kpiScore,unit:"/10",target:"8.0"}),e.jsx(Z,{label:"Learning Activities",currentValue:(ne=o.scores)==null?void 0:ne.learningScore,previousValue:(oe=(ie=s[1])==null?void 0:ie.scores)==null?void 0:oe.learningScore,unit:"/10",target:"7.0"}),e.jsx(Z,{label:"Client Relations",currentValue:(ce=o.scores)==null?void 0:ce.relationshipScore,previousValue:(me=(de=s[1])==null?void 0:de.scores)==null?void 0:me.relationshipScore,unit:"/10",target:"8.0"})]})]}),s.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-4 sm:p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:"📊"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"KPI Editor"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Update your KPI values for submitted reports"})]})]})}),e.jsx(Pe,{submissions:s,onKPIUpdate:(r,m)=>{i("KPIs updated successfully!","success")},employeeView:!0})]}),e.jsx(De,{employee:a,employeeSubmissions:s}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-4",children:"Submission History & Reports"}),s.length===0?e.jsxs("div",{className:"text-center py-6 sm:py-8",children:[e.jsx("div",{className:"text-3xl sm:text-4xl mb-3 sm:mb-4",children:"📋"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 px-4",children:"No submissions yet. Submit your first monthly report to see your progress here."})]}):e.jsx("div",{className:"space-y-3",children:s.map((r,m)=>{var p,E;return e.jsxs("div",{className:"p-3 sm:p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:`w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center text-white font-bold flex-shrink-0 text-sm sm:text-base ${r.isDraft?"bg-gray-500":"bg-blue-500"}`,children:r.isDraft?"D":"✓"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm sm:text-base",children:V(r.monthKey)}),e.jsxs("div",{className:"text-xs sm:text-sm text-gray-600",children:[r.isDraft?"Draft":"Submitted"," • Score: ",((E=(p=r.scores)==null?void 0:p.overall)==null?void 0:E.toFixed(1))||"N/A","/10"]})]})]}),e.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:[e.jsx("span",{className:"hidden sm:inline",children:new Date(r.created_at||r.updated_at).toLocaleDateString()}),e.jsx("span",{className:"sm:hidden",children:new Date(r.created_at||r.updated_at).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]}),!r.isDraft&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("button",{onClick:()=>F(r,a.name),className:"flex-1 px-3 py-2 text-xs sm:text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 active:bg-blue-800 transition-colors touch-manipulation",children:"Download Report"}),e.jsx("button",{onClick:()=>w("Submission Details",x(r),N),className:"flex-1 px-3 py-2 text-xs sm:text-sm border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 active:bg-gray-100 transition-colors touch-manipulation",children:"View Summary"})]})]},r.id||m)})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-4 flex items-center gap-2",children:"Device Allocation"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Device Type"}),e.jsx("div",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-lg",children:a.deviceType||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"MAC Address"}),e.jsx("div",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-lg font-mono",children:a.macAddress||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Serial Number"}),e.jsx("div",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-lg font-mono",children:a.serialNumber||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${a.deviceType,"bg-gray-100 text-gray-800"}`,children:a.deviceType?"Allocated":"Pending"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-4 flex items-center gap-2",children:"SIM Card & Communication"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SIM Card Provided"}),e.jsx("div",{className:`inline-flex items-center px-3 py-2 rounded-lg text-sm font-medium ${a.simCardProvided==="yes","bg-gray-100 text-gray-800"}`,children:a.simCardProvided==="yes"?"Yes":"No"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"WhatsApp Number"}),e.jsx("div",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-lg",children:a.whatsappNumber||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Recharge Date"}),e.jsx("div",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-lg",children:a.rechargeDate?new Date(a.rechargeDate).toLocaleDateString():"Not recorded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Communication Status"}),e.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${a.whatsappNumber,"bg-gray-100 text-gray-800"}`,children:a.whatsappNumber?"Active":"Setup Pending"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-4 sm:p-6",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-4 flex items-center gap-2",children:"Company Property & Assets"}),e.jsx("div",{className:"space-y-4",children:a.companyAssets&&a.companyAssets.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.companyAssets.map((r,m)=>e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("div",{className:"font-medium text-gray-900",children:r.name}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:r.description}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Serial: ",r.serialNumber||"N/A"," • Status: ",e.jsx("span",{className:`font-medium ${r.status==="Active"?"text-green-600":"text-yellow-600"}`,children:r.status||"Unknown"})]})]},m))}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"text-3xl mb-3",children:"📦"}),e.jsx("p",{className:"text-gray-600",children:"No company assets assigned yet"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Assets will appear here once allocated by management"})]})})]})]}),L&&e.jsx(Me,{isOpen:L,onClose:()=>C(!1),employee:a,onSave:d,isFirstTime:t.isFirstTime})]})}const Ue=Object.freeze(Object.defineProperty({__proto__:null,EmployeePersonalDashboard:Te},Symbol.toStringTag,{value:"Module"}));export{Ue as E,Le as N};
