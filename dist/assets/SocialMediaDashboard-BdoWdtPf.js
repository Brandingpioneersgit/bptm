import{j as e}from"./manager-dashboard-BSBEKJka.js";import{r as d}from"./react-vendor-z5qVsTvS.js";import{B as o,C as t,c as a,a as x,b as h,d as r}from"./input-U88YC0jj.js";import{T as I,a as O,b as j,c as p}from"./tabs-BUQ1ER9N.js";import{v as k,i as D,r as F,g as B,H as Y,c as $,D as z,E as X,n as w,G as Z,X as H,l as U,x as W}from"./auth-out34swX.js";import"./shared-ui-DksRfdM8.js";import"./clients-Dg_kG3rU.js";import"./supabase-vendor-D6KV1zBy.js";import"./employees-C0R0oL0z.js";import"./forms-F81hZsoD.js";const le=({userRole:l="employee"})=>{const[b,S]=d.useState([]),[i,C]=d.useState({ytdAvgScore:0,lastMonthScore:0,activeClients:0,avgNps90d:0}),[u,G]=d.useState("all"),[g,y]=d.useState("all"),[T,A]=d.useState(!0);d.useEffect(()=>{var v;const s=[{id:1,month:"2024-01",client:"TechCorp",platform:"Instagram",followersGrowth:15.2,reachGrowth:22.1,engagementGrowth:8.5,videoViewsGrowth:18.7,watchTimeGrowth:12.3,videoCtrGrowth:5.2,contentOutput:{videos:4,reels:12,stories:22,collabs:2},nps:8.5,mentorScore:8,monthScore:82.5,status:"approved"},{id:2,month:"2024-02",client:"TechCorp",platform:"Instagram",followersGrowth:12.8,reachGrowth:18.9,engagementGrowth:11.2,videoViewsGrowth:25.1,watchTimeGrowth:19.8,videoCtrGrowth:7.8,contentOutput:{videos:5,reels:14,stories:25,collabs:3},nps:9,mentorScore:8.5,monthScore:87.2,status:"approved"},{id:3,month:"2024-03",client:"StartupXYZ",platform:"LinkedIn",followersGrowth:8.3,reachGrowth:14.5,engagementGrowth:6.7,videoViewsGrowth:12.4,watchTimeGrowth:9.1,videoCtrGrowth:3.2,contentOutput:{videos:3,reels:8,stories:15,collabs:1},nps:7.5,mentorScore:7.5,monthScore:75.8,status:"submitted"}];S(s);const c=s.filter(n=>n.status==="approved"),m=c.reduce((n,f)=>n+f.monthScore,0)/c.length,E=((v=c[c.length-1])==null?void 0:v.monthScore)||0,L=[...new Set(s.map(n=>n.client))].length,V=s.reduce((n,f)=>n+f.nps,0)/s.length;C({ytdAvgScore:m,lastMonthScore:E,activeClients:L,avgNps90d:V}),A(!1)},[]);const M=s=>{const c={approved:{color:"bg-green-100 text-green-800",text:"Approved"},submitted:{color:"bg-blue-100 text-blue-800",text:"Submitted"},draft:{color:"bg-gray-100 text-gray-800",text:"Draft"},rejected:{color:"bg-red-100 text-red-800",text:"Rejected"}},m=c[s]||c.draft;return e.jsx(r,{className:m.color,children:m.text})},N=s=>s>=85?e.jsx(r,{className:"bg-green-100 text-green-800",children:"A"}):s>=75?e.jsx(r,{className:"bg-blue-100 text-blue-800",children:"B"}):s>=65?e.jsx(r,{className:"bg-yellow-100 text-yellow-800",children:"C"}):e.jsx(r,{className:"bg-red-100 text-red-800",children:"D"}),P=b.filter(s=>!(u!=="all"&&s.client!==u||g!=="all"&&s.platform!==g));return T?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-lg",children:"Loading social media dashboard..."})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Social Media Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track performance across platforms and clients"})]}),l==="employee"&&e.jsxs(o,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Add Previous Month Data"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(t,{children:e.jsx(a,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"YTD Avg Score"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.ytdAvgScore.toFixed(1)}),e.jsx("div",{className:"mt-1",children:N(i.ytdAvgScore)})]}),e.jsx(D,{className:"w-8 h-8 text-blue-600"})]})})}),e.jsx(t,{children:e.jsx(a,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Last Month Score"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.lastMonthScore.toFixed(1)}),e.jsx("div",{className:"mt-1",children:N(i.lastMonthScore)})]}),e.jsx(F,{className:"w-8 h-8 text-yellow-600"})]})})}),e.jsx(t,{children:e.jsx(a,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"# Active Clients"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.activeClients})]}),e.jsx(B,{className:"w-8 h-8 text-green-600"})]})})}),e.jsx(t,{children:e.jsx(a,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg NPS (90d)"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.avgNps90d.toFixed(1)})]}),e.jsx(Y,{className:"w-8 h-8 text-red-600"})]})})})]}),e.jsxs(I,{defaultValue:"performance",className:"space-y-4",children:[e.jsxs(O,{children:[e.jsx(j,{value:"performance",children:"Performance"}),(l==="admin"||l==="tl")&&e.jsxs(e.Fragment,{children:[e.jsx(j,{value:"team",children:"Team Overview"}),e.jsx(j,{value:"analytics",children:"Analytics"})]}),e.jsx(j,{value:"content",children:"Content Planning"})]}),e.jsxs(p,{value:"performance",className:"space-y-4",children:[e.jsx(t,{children:e.jsx(a,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Filters:"})]}),e.jsxs("select",{value:u,onChange:s=>G(s.target.value),className:"border rounded px-3 py-1 text-sm",children:[e.jsx("option",{value:"all",children:"All Clients"}),e.jsx("option",{value:"TechCorp",children:"TechCorp"}),e.jsx("option",{value:"StartupXYZ",children:"StartupXYZ"})]}),e.jsxs("select",{value:g,onChange:s=>y(s.target.value),className:"border rounded px-3 py-1 text-sm",children:[e.jsx("option",{value:"all",children:"All Platforms"}),e.jsx("option",{value:"Instagram",children:"Instagram"}),e.jsx("option",{value:"LinkedIn",children:"LinkedIn"}),e.jsx("option",{value:"YouTube",children:"YouTube"})]}),(l==="admin"||l==="tl")&&e.jsxs(o,{variant:"outline",size:"sm",children:[e.jsx(z,{className:"w-4 h-4 mr-1"})," Export"]})]})})}),e.jsxs(t,{children:[e.jsx(x,{children:e.jsx(h,{children:"Monthly Performance"})}),e.jsx(a,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Month"}),e.jsx("th",{className:"text-left p-2",children:"Client"}),e.jsx("th",{className:"text-left p-2",children:"Platform"}),e.jsx("th",{className:"text-left p-2",children:"Followers Δ%"}),e.jsx("th",{className:"text-left p-2",children:"Reach Δ%"}),e.jsx("th",{className:"text-left p-2",children:"Engagement Δ%"}),e.jsx("th",{className:"text-left p-2",children:"Video Views Δ%"}),e.jsx("th",{className:"text-left p-2",children:"Watch Time Δ%"}),e.jsx("th",{className:"text-left p-2",children:"Video CTR Δ%"}),e.jsx("th",{className:"text-left p-2",children:"Content Output"}),e.jsx("th",{className:"text-left p-2",children:"NPS"}),e.jsx("th",{className:"text-left p-2",children:"Mentor"}),e.jsx("th",{className:"text-left p-2",children:"Month Score"}),e.jsx("th",{className:"text-left p-2",children:"Status"}),e.jsx("th",{className:"text-left p-2",children:"Actions"})]})}),e.jsx("tbody",{children:P.map(s=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"p-2 font-medium",children:s.month}),e.jsx("td",{className:"p-2",children:s.client}),e.jsx("td",{className:"p-2",children:e.jsx(r,{variant:"outline",children:s.platform})}),e.jsx("td",{className:"p-2",children:e.jsxs("span",{className:`font-medium ${s.followersGrowth>=0?"text-green-600":"text-red-600"}`,children:[s.followersGrowth>=0?"+":"",s.followersGrowth,"%"]})}),e.jsx("td",{className:"p-2",children:e.jsxs("span",{className:`font-medium ${s.reachGrowth>=0?"text-green-600":"text-red-600"}`,children:[s.reachGrowth>=0?"+":"",s.reachGrowth,"%"]})}),e.jsx("td",{className:"p-2",children:e.jsxs("span",{className:`font-medium ${s.engagementGrowth>=0?"text-green-600":"text-red-600"}`,children:[s.engagementGrowth>=0?"+":"",s.engagementGrowth,"%"]})}),e.jsx("td",{className:"p-2",children:e.jsxs("span",{className:`font-medium ${s.videoViewsGrowth>=0?"text-green-600":"text-red-600"}`,children:[s.videoViewsGrowth>=0?"+":"",s.videoViewsGrowth,"%"]})}),e.jsx("td",{className:"p-2",children:e.jsxs("span",{className:`font-medium ${s.watchTimeGrowth>=0?"text-green-600":"text-red-600"}`,children:[s.watchTimeGrowth>=0?"+":"",s.watchTimeGrowth,"%"]})}),e.jsx("td",{className:"p-2",children:e.jsxs("span",{className:`font-medium ${s.videoCtrGrowth>=0?"text-green-600":"text-red-600"}`,children:[s.videoCtrGrowth>=0?"+":"",s.videoCtrGrowth,"%"]})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"text-xs",children:[e.jsxs("div",{children:["V: ",s.contentOutput.videos," | R: ",s.contentOutput.reels]}),e.jsxs("div",{children:["S: ",s.contentOutput.stories," | C: ",s.contentOutput.collabs]})]})}),e.jsx("td",{className:"p-2 font-medium",children:s.nps}),e.jsx("td",{className:"p-2 font-medium",children:s.mentorScore}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-bold",children:s.monthScore}),N(s.monthScore)]})}),e.jsx("td",{className:"p-2",children:M(s.status)}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(o,{variant:"outline",size:"sm",children:e.jsx(X,{className:"w-3 h-3"})}),s.status==="draft"&&e.jsx(o,{variant:"outline",size:"sm",children:e.jsx(w,{className:"w-3 h-3"})}),(l==="tl"||l==="admin")&&s.status==="submitted"&&e.jsxs(e.Fragment,{children:[e.jsx(o,{variant:"outline",size:"sm",className:"text-green-600",children:e.jsx(Z,{className:"w-3 h-3"})}),e.jsx(o,{variant:"outline",size:"sm",className:"text-red-600",children:e.jsx(H,{className:"w-3 h-3"})})]})]})})]},s.id))})]})})})]})]}),(l==="admin"||l==="tl")&&e.jsx(p,{value:"team",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsx(x,{children:e.jsx(h,{children:"Team Performance Overview"})}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Mike Chen"}),e.jsx("div",{className:"text-sm text-gray-600",children:"3 Active Clients"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-green-600",children:"87.2"}),e.jsx(r,{className:"bg-green-100 text-green-800",children:"A"})]})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Lisa Wang"}),e.jsx("div",{className:"text-sm text-gray-600",children:"2 Active Clients"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-blue-600",children:"79.5"}),e.jsx(r,{className:"bg-blue-100 text-blue-800",children:"B"})]})]})]})})]}),e.jsxs(t,{children:[e.jsx(x,{children:e.jsx(h,{children:"Red/Amber Flags"})}),e.jsx(a,{children:e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-yellow-50 rounded",children:[e.jsx(U,{className:"w-5 h-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-800",children:"Low Engagement Growth"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"StartupXYZ - LinkedIn showing declining engagement"})]})]})})})]})]})}),e.jsx(p,{value:"analytics",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsx(x,{children:e.jsx(h,{children:"Growth Trends"})}),e.jsx(a,{children:e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(W,{className:"w-12 h-12 mx-auto mb-2"}),e.jsx("p",{children:"Growth trend charts will be displayed here"})]})})})]}),e.jsxs(t,{children:[e.jsx(x,{children:e.jsx(h,{children:"Platform Performance"})}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-purple-50 rounded",children:[e.jsx("span",{className:"font-medium",children:"Instagram"}),e.jsx("span",{className:"text-purple-600 font-semibold",children:"Avg Score: 84.8"})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded",children:[e.jsx("span",{className:"font-medium",children:"LinkedIn"}),e.jsx("span",{className:"text-blue-600 font-semibold",children:"Avg Score: 75.8"})]})]})})]})]})}),e.jsx(p,{value:"content",className:"space-y-4",children:e.jsxs(t,{children:[e.jsx(x,{children:e.jsx(h,{children:"Content Planning & Strategy"})}),e.jsx(a,{children:e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(w,{className:"w-12 h-12 mx-auto mb-2"}),e.jsx("p",{children:"Content planning tools and calendar will be available here"})]})})]})})]})]})};export{le as default};
