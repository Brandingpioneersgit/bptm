import{d as W,b as T,o as K,f as q,a0 as J,a1 as _,I as G,a2 as X,t as Y,j as e,a3 as Z,a4 as ee,a5 as se,a6 as te}from"./manager-dashboard-BSBEKJka.js";import{r as l}from"./react-vendor-z5qVsTvS.js";import{u as ae}from"./shared-ui-DksRfdM8.js";import{Q as re}from"./intern-dashboard-BZTnyMBX.js";import{L as ne}from"./LeaderboardView-C6k1tnmQ.js";import oe from"./ArcadeAdminPanel-8lWKRdc_.js";import"./clients-Dg_kG3rU.js";import"./supabase-vendor-D6KV1zBy.js";import"./auth-out34swX.js";import"./employees-C0R0oL0z.js";import"./forms-F81hZsoD.js";import"./arcadeValidation-D-laYFZz.js";function Be({onNavigateToDashboard:r}){var E,B;const h=W(),{submissions:i,clients:c,loading:n,refreshAllData:C}=T(),{employees:u}=K(),{notify:g}=ae(),{openModal:A,closeModal:M}=q(),{crossDashboardData:ie,performanceMetrics:ce,dashboardActivity:p,notifications:de,unreadNotifications:me,activeDashboards:he,totalActiveUsers:ue,updateDashboardActivity:L,markNotificationRead:ge,clearNotifications:xe}=J(),{currentUser:pe,hasFeatureAccess:fe}=_(),{systemNotifications:S}=G(),{auditLogs:$,logUserAction:U}=X(),[be,z]=l.useState({employees:0,interns:0,freelancers:0,agency:0}),[R,V]=l.useState({database:"healthy",sync:"healthy",performance:"good"}),[j,D]=l.useState(!1),[y,I]=l.useState(!1),[w,P]=l.useState(!1),[N,F]=l.useState(!1),[ve,je]=l.useState({employee:{active:0,submissions:0,lastActivity:null},agency:{active:0,updates:0,lastActivity:null},intern:{active:0,projects:0,lastActivity:null},freelancer:{active:0,projects:0,lastActivity:null}}),t=l.useMemo(()=>{const s=Y(),x=i.filter(a=>a.monthKey===s),d=u.filter(a=>!["Sales","HR","Accountant"].includes(a.role)),o=x.filter(a=>{const m=u.find(b=>b.id===a.employeeId);return m&&!["Sales","HR","Accountant"].includes(m.role)});return{totalEmployees:d.length,activeEmployees:d.filter(a=>a.status==="active").length,currentMonthSubmissions:o.length,pendingReviews:o.filter(a=>{var m;return!((m=a.manager)!=null&&m.reviewed)}).length,totalClients:c.length,activeClients:c.filter(a=>a.status==="active").length,averagePerformance:o.length>0?o.reduce((a,m)=>a+(m.overallScore||0),0)/o.length:0,systemUptime:"99.9%",dataSync:n.submissions||n.clients?"syncing":"synchronized",interns:u.filter(a=>a.role==="Intern").length,freelancers:u.filter(a=>a.role==="Freelancer").length}},[i,u,c,n]);l.useEffect(()=>{L("operations",{activeUsers:1,currentView:"operationsHead"})},[L]),l.useEffect(()=>{var s,x,d,o;z({employees:((s=p.employee)==null?void 0:s.activeUsers)||0,interns:((x=p.intern)==null?void 0:x.activeUsers)||0,freelancers:((d=p.freelancer)==null?void 0:d.activeUsers)||0,agency:((o=p.agency)==null?void 0:o.activeUsers)||0})},[p]),l.useEffect(()=>{const s=()=>{const d=h?"healthy":"local",o=n.submissions||n.clients?"syncing":"healthy",a=t.averagePerformance>7?"excellent":t.averagePerformance>5?"good":"needs-attention";V({database:d,sync:o,performance:a})};s();const x=setInterval(s,1e4);return()=>clearInterval(x)},[h,n,t.averagePerformance]);const f=async(s,x)=>{try{switch(s){case"refresh":await C(),g("success","Operations dashboard data refreshed successfully");break;case"broadcast":A("Broadcast Message to Operations Team",e.jsx(le,{onSend:b=>{console.log("Broadcasting message to operations team:",b),g("success","Message broadcasted to operations team"),M()}}),M);break;case"backup":const d={submissions:i.filter(b=>{const O=u.find(Q=>Q.id===b.employeeId);return O&&!["Sales","HR","Accountant"].includes(O.role)}),clients:c,employees:u.filter(b=>!["Sales","HR","Accountant"].includes(b.role)),timestamp:new Date().toISOString()},o=new Blob([JSON.stringify(d,null,2)],{type:"application/json"}),a=URL.createObjectURL(o),m=document.createElement("a");m.href=a,m.download=`operations-backup-${new Date().toISOString().split("T")[0]}.json`,m.click(),g("success","Operations data backup downloaded");break;default:g("info",`${s} action triggered for ${x}`)}}catch(d){g("error",`Failed to execute ${s}: ${d.message}`)}},H=s=>{switch(s){case"healthy":case"excellent":return"text-green-600 bg-green-100";case"good":case"syncing":return"text-yellow-600 bg-yellow-100";case"local":return"text-blue-600 bg-blue-100";case"needs-attention":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-xl shadow-lg text-white p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"ðŸŽ¯ Operations Head Dashboard"}),e.jsx("p",{className:"text-purple-100",children:"Oversight of marketing operations, employees, interns, and freelancers"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:()=>D(!j),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${j?"bg-white/30 hover:bg-white/40":"bg-white/20 hover:bg-white/30"}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),j?"Hide":"Show"," Analytics"]}),e.jsxs("button",{onClick:()=>I(!y),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${y?"bg-white/30 hover:bg-white/40":"bg-white/20 hover:bg-white/30"}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),y?"Hide":"Show"," Reports"]}),e.jsxs("button",{onClick:()=>P(!w),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${w?"bg-white/30 hover:bg-white/40":"bg-white/20 hover:bg-white/30"}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5 5v-5zM4.868 19.718A10.001 10.001 0 0119.718 4.868M4.868 19.718L19.718 4.868"})}),w?"Hide":"Show"," Notifications",S&&S.filter(s=>!s.read).length>0&&e.jsx("span",{className:"ml-1 px-2 py-1 bg-red-500 text-white rounded-full text-xs",children:S.filter(s=>!s.read).length})]}),e.jsxs("button",{onClick:()=>{F(!N),U("view","audit_logs",{dashboard:"operations"})},className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${N?"bg-white/30 hover:bg-white/40":"bg-white/20 hover:bg-white/30"}`,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),N?"Hide":"Show"," Audit Logs",e.jsx("span",{className:"ml-1 px-2 py-1 bg-blue-500 text-white rounded-full text-xs",children:$.length})]}),e.jsxs("button",{onClick:()=>f("refresh","operations"),className:"flex items-center gap-2 px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]}),e.jsxs("button",{onClick:()=>f("broadcast","operations"),className:"flex items-center gap-2 px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})}),"Broadcast"]}),e.jsxs("button",{onClick:()=>f("backup","operations"),className:"flex items-center gap-2 px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})}),"Backup"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"System Performance"}),e.jsxs("span",{className:`text-lg font-bold ${H(R.performance).split(" ")[0]}`,children:[t.averagePerformance.toFixed(1),"/10"]})]}),e.jsx("div",{className:`p-2 rounded-full ${H(R.performance)}`,children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Reviews"}),e.jsx("span",{className:"text-lg font-bold text-red-600",children:t.pendingReviews})]}),e.jsx("div",{className:"p-2 rounded-full bg-red-100 text-red-600",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"System Uptime"}),e.jsx("span",{className:"text-lg font-bold text-blue-600",children:t.systemUptime})]}),e.jsx("div",{className:"p-2 rounded-full bg-blue-100 text-blue-600",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[e.jsx(k,{title:"Marketing Employees",icon:"ðŸ‘¥",color:"blue",stats:[{label:"Total Employees",value:t.totalEmployees},{label:"Active This Month",value:t.activeEmployees},{label:"Submissions",value:t.currentMonthSubmissions}],onNavigate:()=>r("employee"),onQuickAction:s=>f(s,"employee")}),e.jsx(k,{title:"Agency Operations",icon:"ðŸ¢",color:"green",stats:[{label:"Total Clients",value:t.totalClients},{label:"Active Clients",value:t.activeClients}],onNavigate:()=>r("agency"),onQuickAction:s=>f(s,"agency")}),e.jsx(k,{title:"Interns",icon:"ðŸŽ“",color:"purple",stats:[{label:"Total Interns",value:t.interns},{label:"Active Projects",value:((E=p.intern)==null?void 0:E.projects)||0}],onNavigate:()=>r("intern"),onQuickAction:s=>f(s,"intern")}),e.jsx(k,{title:"Freelancers",icon:"ðŸ’¼",color:"orange",stats:[{label:"Total Freelancers",value:t.freelancers},{label:"Active Projects",value:((B=p.freelancer)==null?void 0:B.projects)||0}],onNavigate:()=>r("freelancer"),onQuickAction:s=>f(s,"freelancer")})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("button",{className:"flex flex-col items-center p-4 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors",onClick:()=>r("employee"),children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center mb-2",children:e.jsx("span",{className:"text-white font-medium",children:t.totalEmployees})}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"View Employees"}),e.jsxs("span",{className:"text-xs text-gray-500 mt-1",children:[e.jsx("span",{className:"font-medium text-green-600",children:t.activeEmployees})," active"]})]}),e.jsxs("button",{className:"flex flex-col items-center p-4 bg-green-50 hover:bg-green-100 rounded-lg transition-colors",onClick:()=>r("agency"),children:[e.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-full flex items-center justify-center mb-2",children:e.jsx("span",{className:"text-white font-medium",children:t.totalClients})}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Manage Clients"}),e.jsxs("span",{className:"text-xs text-gray-500 mt-1",children:[e.jsx("span",{className:"font-medium text-gray-900",children:t.activeClients})," active"]})]}),e.jsxs("button",{className:"flex flex-col items-center p-4 bg-purple-50 hover:bg-purple-100 rounded-lg transition-colors",onClick:()=>r("intern"),children:[e.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center mb-2",children:e.jsx("span",{className:"text-white font-medium",children:t.interns})}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Intern Progress"})]}),e.jsxs("button",{className:"flex flex-col items-center p-4 bg-orange-50 hover:bg-orange-100 rounded-lg transition-colors",onClick:()=>r("freelancer"),children:[e.jsx("div",{className:"w-8 h-8 bg-orange-600 rounded-full flex items-center justify-center mb-2",children:e.jsx("span",{className:"text-white font-medium",children:t.freelancers})}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Freelancer Projects"})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsx(re,{isManager:!0})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"ðŸ† Operations Leaderboard"}),e.jsx(ne,{userRole:"operations"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"ðŸŽ® Arcade Management"}),e.jsx(oe,{})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Operations Activity"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(v,{icon:"ðŸ‘¤",message:`${t.activeEmployees} marketing employees logged in today`,time:"2 minutes ago",type:"info"}),e.jsx(v,{icon:"ðŸ“Š",message:`${t.currentMonthSubmissions} submissions received this month`,time:"15 minutes ago",type:"success"}),e.jsx(v,{icon:"ðŸ¢",message:"Agency dashboard updated with new client projects",time:"1 hour ago",type:"info"}),e.jsx(v,{icon:"ðŸŽ“",message:`${t.interns} interns working on active projects`,time:"2 hours ago",type:"info"}),e.jsx(v,{icon:"ðŸ’¼",message:`${t.freelancers} freelancers available for projects`,time:"3 hours ago",type:"info"})]})]}),j&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Operations Analytics"}),e.jsx(Z,{})]}),y&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Operations Reports"}),e.jsx(ee,{})]}),w&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Notifications"}),e.jsx(se,{})]}),N&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Audit Logs"}),e.jsx(te,{})]})]})}function k({title:r,icon:h,color:i,stats:c,onNavigate:n,onQuickAction:C}){const u={blue:"from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700",green:"from-green-500 to-green-600 hover:from-green-600 hover:to-green-700",purple:"from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700",orange:"from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700",red:"from-red-500 to-red-600 hover:from-red-600 hover:to-red-700"};return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[e.jsx("div",{className:`bg-gradient-to-r ${u[i]} p-4 text-white`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:r}),e.jsx("span",{className:"text-2xl",children:h})]}),e.jsx("button",{onClick:n,className:"p-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})})]})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"space-y-2",children:c.map((g,A)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:g.label}),e.jsx("span",{className:"font-semibold text-gray-900",children:g.value})]},A))})})]})}function v({icon:r,message:h,time:i,type:c}){const n={success:"bg-green-100 text-green-800",info:"bg-blue-100 text-blue-800",warning:"bg-yellow-100 text-yellow-800",error:"bg-red-100 text-red-800"};return e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-lg",children:r}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-900",children:h}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${n[c]}`,children:c})]})}function le({onSend:r}){const[h,i]=l.useState(""),c=n=>{n.preventDefault(),h.trim()&&(r(h),i(""))};return e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-2",children:"Message to Operations Team"}),e.jsx("textarea",{id:"message",value:h,onChange:n=>i(n.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your message to broadcast to all operations team members...",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>i(""),className:"px-4 py-2 text-gray-700 bg-gray-200 hover:bg-gray-300 rounded-md transition-colors",children:"Clear"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-md transition-colors",children:"Send Message"})]})]})}export{Be as OperationsHeadDashboard,Be as default};
