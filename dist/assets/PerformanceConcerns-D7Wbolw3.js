import{d as w,k as N,j as e}from"./manager-dashboard-BSBEKJka.js";import{r as o}from"./react-vendor-z5qVsTvS.js";import"./shared-ui-DksRfdM8.js";import"./clients-Dg_kG3rU.js";import"./supabase-vendor-D6KV1zBy.js";import"./auth-out34swX.js";import"./employees-C0R0oL0z.js";import"./forms-F81hZsoD.js";const D=()=>{const l=w(),{user:n,userType:k}=N(),[g,i]=o.useState(!1),[x,c]=o.useState(!0),[u,m]=o.useState(!1),[h,f]=o.useState(!1),[b,d]=o.useState(null),[s,p]=o.useState({performanceUnderstanding:"",feedbackFeelings:"",challengesFaced:"",lessConfidentAreas:"",teamManagerSupport:"",lackingResources:"",workEnvironmentProductivity:"",challengingOverwhelmingSituations:"",unmetExpectationsExamples:"",additionalTrainingNeeds:"",skillsUpdateMethods:"",supervisorCommunicationEffectiveness:"",helpfulFeedbackTypes:"",personalCircumstancesImpact:"",workLifeBalanceManagement:"",roleResponsibilityChanges:"",shortLongTermImprovements:"",beneficialHRSupport:"",barriersToAddress:"",additionalComments:"",pipQuestionsConcerns:""});o.useEffect(()=>{y()},[n]);const y=async()=>{if(!n){c(!1);return}try{if(!l)throw new Error("Database connection not available");const{data:r,error:t}=await l.from("employee_performance").select("is_low_performer").eq("employee_id",n.id).order("created_at",{ascending:!1}).limit(1).single();if(t&&t.code!=="PGRST116"){if(console.error("Supabase error:",t),t.message.includes("does not exist")){i(!1),c(!1);return}throw new Error(`Database error: ${t.message}`)}else i(r?r.is_low_performer===!0:!1)}catch(r){console.error("Error checking eligibility:",r),d(`Failed to check eligibility: ${r.message}`)}finally{c(!1)}},a=(r,t)=>{p(j=>({...j,[r]:t}))},v=async r=>{r.preventDefault(),m(!0);try{if(!l)throw new Error("Database connection not available");const{error:t}=await l.from("performance_concerns").insert({employee_id:n.id,...s,submitted_at:new Date().toISOString()});if(t)throw console.error("Supabase error:",t),new Error(`Database error: ${t.message}`);f(!0),alert("Performance concerns submitted successfully. HR will review your submission.")}catch(t){console.error("Error submitting performance concerns:",t),d(`Failed to submit form: ${t.message}`)}finally{m(!1)}};return b?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"text-red-600 text-2xl",children:"⚠️"}),e.jsx("h2",{className:"text-xl font-semibold text-red-800",children:"Performance Concerns Error"})]}),e.jsx("p",{className:"text-red-700 mb-4",children:b}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>d(null),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"}),e.jsx("button",{onClick:()=>window.location.hash="#/dashboard",className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"Return to Dashboard"})]})]})}):x?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Checking eligibility..."})]})}):n?g?h?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md text-center max-w-md",children:[e.jsx("div",{className:"text-green-600 text-6xl mb-4",children:"✓"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Submission Successful"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your performance concerns have been submitted successfully. HR will review your responses and follow up with you soon."}),e.jsx("button",{onClick:()=>window.location.hash="#/dashboard",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Return to Dashboard"})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Performance Concerns Discussion"}),e.jsx("p",{className:"text-gray-600",children:"This form is designed to help us understand your perspective on your current performance and identify ways we can better support your success. Please be honest and thorough in your responses."})]}),e.jsxs("form",{onSubmit:v,className:"space-y-8",children:[e.jsxs("section",{className:"border-b border-gray-200 pb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Overview of Performance Concerns"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Can you walk me through your understanding of the current concerns regarding your performance?"}),e.jsx("textarea",{value:s.performanceUnderstanding,onChange:r=>a("performanceUnderstanding",r.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"How do you feel about the feedback you've received so far?"}),e.jsx("textarea",{value:s.feedbackFeelings,onChange:r=>a("feedbackFeelings",r.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,required:!0})]})]})]}),e.jsxs("section",{className:"border-b border-gray-200 pb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Self-Assessment"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"In your own words, what challenges have you faced that might have impacted your performance?"}),e.jsx("textarea",{value:s.challengesFaced,onChange:r=>a("challengesFaced",r.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Are there specific areas of your role where you feel less confident or less effective?"}),e.jsx("textarea",{value:s.lessConfidentAreas,onChange:r=>a("lessConfidentAreas",r.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,required:!0})]})]})]}),e.jsxs("section",{className:"border-b border-gray-200 pb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Work Environment and Support"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"How do you perceive the support from your team and managers?"}),e.jsx("textarea",{value:s.teamManagerSupport,onChange:r=>a("teamManagerSupport",r.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Are there any resources or tools you feel you're lacking that could help you perform better?"}),e.jsx("textarea",{value:s.lackingResources,onChange:r=>a("lackingResources",r.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"How do you find the work environment in terms of fostering your productivity and engagement?"}),e.jsx("textarea",{value:s.workEnvironmentProductivity,onChange:r=>a("workEnvironmentProductivity",r.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,required:!0})]})]})]}),e.jsxs("section",{className:"border-b border-gray-200 pb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Specific Instances"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Could you provide examples of situations where you felt particularly challenged or overwhelmed?"}),e.jsx("textarea",{value:s.challengingOverwhelmingSituations,onChange:r=>a("challengingOverwhelmingSituations",r.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Have there been any specific projects or tasks where you felt you did not meet expectations? What do you think went wrong?"}),e.jsx("textarea",{value:s.unmetExpectationsExamples,onChange:r=>a("unmetExpectationsExamples",r.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,required:!0})]})]})]}),e.jsxs("section",{className:"border-b border-gray-200 pb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Professional Skills and Training"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Do you feel you need additional training or skills development in certain areas? If yes, which areas?"}),e.jsx("textarea",{value:s.additionalTrainingNeeds,onChange:r=>a("additionalTrainingNeeds",r.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"How do you keep your professional skills up to date?"}),e.jsx("textarea",{value:s.skillsUpdateMethods,onChange:r=>a("skillsUpdateMethods",r.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,required:!0})]})]})]}),e.jsxs("section",{className:"border-b border-gray-200 pb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Feedback and Communication"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"How effective is the communication between you and your supervisor? Can you give an example of good and bad communication you've experienced?"}),e.jsx("textarea",{value:s.supervisorCommunicationEffectiveness,onChange:r=>a("supervisorCommunicationEffectiveness",r.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"What kind of feedback do you find most helpful for your professional growth?"}),e.jsx("textarea",{value:s.helpfulFeedbackTypes,onChange:r=>a("helpfulFeedbackTypes",r.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,required:!0})]})]})]}),e.jsxs("section",{className:"border-b border-gray-200 pb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Personal Circumstances"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Are there any personal circumstances affecting your work performance that you'd like to discuss?"}),e.jsx("textarea",{value:s.personalCircumstancesImpact,onChange:r=>a("personalCircumstancesImpact",r.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,placeholder:"This information will be kept confidential and used only to provide appropriate support."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"How do you manage work-life balance, and has this impacted your performance in any way?"}),e.jsx("textarea",{value:s.workLifeBalanceManagement,onChange:r=>a("workLifeBalanceManagement",r.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,required:!0})]})]})]}),e.jsxs("section",{className:"border-b border-gray-200 pb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Future Focus"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"What changes do you think could be made to your current role or responsibilities that would help you improve your performance?"}),e.jsx("textarea",{value:s.roleResponsibilityChanges,onChange:r=>a("roleResponsibilityChanges",r.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Looking forward, what can you commit to improving in the short-term and long-term?"}),e.jsx("textarea",{value:s.shortLongTermImprovements,onChange:r=>a("shortLongTermImprovements",r.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,required:!0})]})]})]}),e.jsxs("section",{className:"border-b border-gray-200 pb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Support Expectations"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"What kind of support from the HR or your department would be most beneficial for you at this stage?"}),e.jsx("textarea",{value:s.beneficialHRSupport,onChange:r=>a("beneficialHRSupport",r.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Are there specific barriers you'd like to address that we might not be aware of?"}),e.jsx("textarea",{value:s.barriersToAddress,onChange:r=>a("barriersToAddress",r.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,required:!0})]})]})]}),e.jsxs("section",{className:"pb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Closing and Open Comments"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Is there anything else you think we should know or discuss concerning your performance or work conditions?"}),e.jsx("textarea",{value:s.additionalComments,onChange:r=>a("additionalComments",r.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Do you have any questions or concerns about the potential of being placed on a Performance Improvement Plan?"}),e.jsx("textarea",{value:s.pipQuestionsConcerns,onChange:r=>a("pipQuestionsConcerns",r.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>window.location.hash="#/dashboard",className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:u,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?"Submitting...":"Submit Performance Concerns"})]})]})]})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md text-center max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Access Restricted"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"This form is only available to employees who have been identified as needing performance support. If you believe this is an error, please contact HR."}),e.jsx("button",{onClick:()=>window.location.hash="#/dashboard",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Return to Dashboard"})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Authentication Required"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Please log in to access the Performance Concerns form."}),e.jsx("button",{onClick:()=>window.location.hash="#/dashboard",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Return to Dashboard"})]})})};export{D as default};
